2021-11-29 00:00:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120191975491244032[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:00:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120191975491244032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:00:00.019 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120191975491244032[0;39m ==> Parameters: 
2021-11-29 00:00:00.140 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120191975491244032[0;39m <==    Updates: 3
2021-11-29 00:00:00.140 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120191975491244032[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š123æ¯«ç§’
2021-11-29 00:00:04.589 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:00:04.712 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:00:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120191996462764032[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:00:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120191996462764032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:00:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120191996462764032[0;39m ==> Parameters: 
2021-11-29 00:00:05.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120191996462764032[0;39m <==    Updates: 3
2021-11-29 00:00:05.019 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120191996462764032[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 00:00:34.607 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:00:34.714 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:00:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120192122283495424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:00:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120192122283495424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:00:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120192122283495424[0;39m ==> Parameters: 
2021-11-29 00:00:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120192122283495424[0;39m <==    Updates: 3
2021-11-29 00:00:35.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120192122283495424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 00:01:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120192227128512512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:01:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120192227128512512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:01:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120192227128512512[0;39m ==> Parameters: 
2021-11-29 00:01:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120192227128512512[0;39m <==    Updates: 0
2021-11-29 00:01:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120192227128512512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 00:01:04.601 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:01:04.693 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:01:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120192248070672384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:01:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120192248070672384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:01:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120192248070672384[0;39m ==> Parameters: 
2021-11-29 00:01:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120192248070672384[0;39m <==    Updates: 3
2021-11-29 00:01:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120192248070672384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 00:01:34.590 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:01:34.731 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:01:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120192373929152512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:01:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120192373929152512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:01:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120192373929152512[0;39m ==> Parameters: 
2021-11-29 00:01:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120192373929152512[0;39m <==    Updates: 3
2021-11-29 00:01:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120192373929152512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 00:02:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120192478761586688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:02:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120192478761586688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:02:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120192478761586688[0;39m ==> Parameters: 
2021-11-29 00:02:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120192478761586688[0;39m <==    Updates: 0
2021-11-29 00:02:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120192478761586688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 00:02:04.603 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:02:04.723 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:02:05.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120192499716329472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:02:05.001 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120192499716329472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:02:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120192499716329472[0;39m ==> Parameters: 
2021-11-29 00:02:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120192499716329472[0;39m <==    Updates: 3
2021-11-29 00:02:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120192499716329472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:02:34.590 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:02:34.701 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:02:35.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120192625545449472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:02:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120192625545449472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:02:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120192625545449472[0;39m ==> Parameters: 
2021-11-29 00:02:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120192625545449472[0;39m <==    Updates: 3
2021-11-29 00:02:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120192625545449472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 00:03:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120192730457575424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:03:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120192730457575424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:03:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120192730457575424[0;39m ==> Parameters: 
2021-11-29 00:03:00.019 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120192730457575424[0;39m <==    Updates: 0
2021-11-29 00:03:00.019 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120192730457575424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 00:03:04.601 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:03:04.710 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:03:05.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120192751378763776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:03:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120192751378763776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:03:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120192751378763776[0;39m ==> Parameters: 
2021-11-29 00:03:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120192751378763776[0;39m <==    Updates: 3
2021-11-29 00:03:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120192751378763776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:03:34.602 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:03:34.724 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:03:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120192877216272384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:03:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120192877216272384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:03:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120192877216272384[0;39m ==> Parameters: 
2021-11-29 00:03:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120192877216272384[0;39m <==    Updates: 3
2021-11-29 00:03:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120192877216272384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 00:04:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120192982107426816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:04:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120192982107426816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:04:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120192982107426816[0;39m ==> Parameters: 
2021-11-29 00:04:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120192982107426816[0;39m <==    Updates: 0
2021-11-29 00:04:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120192982107426816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 00:04:04.621 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:04:04.728 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:04:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120193003049586688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:04:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120193003049586688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:04:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120193003049586688[0;39m ==> Parameters: 
2021-11-29 00:04:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120193003049586688[0;39m <==    Updates: 3
2021-11-29 00:04:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120193003049586688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 00:04:34.590 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:04:34.716 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:04:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120193128895483904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:04:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120193128895483904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:04:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120193128895483904[0;39m ==> Parameters: 
2021-11-29 00:04:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120193128895483904[0;39m <==    Updates: 3
2021-11-29 00:04:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120193128895483904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 00:05:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120193233778249728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:05:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120193233778249728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:05:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120193233778249728[0;39m ==> Parameters: 
2021-11-29 00:05:00.022 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120193233778249728[0;39m <==    Updates: 0
2021-11-29 00:05:00.022 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120193233778249728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 00:05:04.576 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:05:04.683 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:05:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120193254712020992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:05:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120193254712020992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:05:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120193254712020992[0;39m ==> Parameters: 
2021-11-29 00:05:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120193254712020992[0;39m <==    Updates: 3
2021-11-29 00:05:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120193254712020992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:05:34.606 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:05:34.730 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:05:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120193380553723904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:05:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120193380553723904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:05:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120193380553723904[0;39m ==> Parameters: 
2021-11-29 00:05:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120193380553723904[0;39m <==    Updates: 3
2021-11-29 00:05:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120193380553723904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 00:06:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120193485411323904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:06:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120193485411323904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:06:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120193485411323904[0;39m ==> Parameters: 
2021-11-29 00:06:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120193485411323904[0;39m <==    Updates: 0
2021-11-29 00:06:00.018 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120193485411323904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2021-11-29 00:06:04.602 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:06:04.710 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:06:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120193506366066688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:06:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120193506366066688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:06:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120193506366066688[0;39m ==> Parameters: 
2021-11-29 00:06:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120193506366066688[0;39m <==    Updates: 3
2021-11-29 00:06:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120193506366066688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:06:34.606 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:06:34.716 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:06:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120193632228741120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:06:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120193632228741120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:06:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120193632228741120[0;39m ==> Parameters: 
2021-11-29 00:06:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120193632228741120[0;39m <==    Updates: 3
2021-11-29 00:06:35.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120193632228741120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 00:07:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120193737077952512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:07:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120193737077952512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:07:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120193737077952512[0;39m ==> Parameters: 
2021-11-29 00:07:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120193737077952512[0;39m <==    Updates: 0
2021-11-29 00:07:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120193737077952512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 00:07:04.610 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:07:04.717 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:07:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120193758049472512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:07:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120193758049472512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:07:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120193758049472512[0;39m ==> Parameters: 
2021-11-29 00:07:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120193758049472512[0;39m <==    Updates: 3
2021-11-29 00:07:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120193758049472512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 00:07:34.603 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:07:34.729 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:07:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120193883853426688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:07:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120193883853426688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:07:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120193883853426688[0;39m ==> Parameters: 
2021-11-29 00:07:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120193883853426688[0;39m <==    Updates: 3
2021-11-29 00:07:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120193883853426688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 00:08:00.003 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120193988702638080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:08:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120193988702638080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:08:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120193988702638080[0;39m ==> Parameters: 
2021-11-29 00:08:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120193988702638080[0;39m <==    Updates: 0
2021-11-29 00:08:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120193988702638080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 00:08:04.611 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:08:04.722 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:08:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120194009724489728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:08:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120194009724489728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:08:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120194009724489728[0;39m ==> Parameters: 
2021-11-29 00:08:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120194009724489728[0;39m <==    Updates: 3
2021-11-29 00:08:05.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120194009724489728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:08:34.583 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:08:34.724 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:08:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120194135520055296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:08:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120194135520055296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:08:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120194135520055296[0;39m ==> Parameters: 
2021-11-29 00:08:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120194135520055296[0;39m <==    Updates: 3
2021-11-29 00:08:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120194135520055296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 00:09:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120194240373460992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:09:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120194240373460992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:09:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120194240373460992[0;39m ==> Parameters: 
2021-11-29 00:09:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120194240373460992[0;39m <==    Updates: 0
2021-11-29 00:09:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120194240373460992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 00:09:04.603 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:09:04.695 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:09:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120194261340786688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:09:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120194261340786688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:09:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120194261340786688[0;39m ==> Parameters: 
2021-11-29 00:09:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120194261340786688[0;39m <==    Updates: 3
2021-11-29 00:09:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120194261340786688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 00:09:34.602 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:09:34.724 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:09:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120194387169906688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:09:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120194387169906688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:09:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120194387169906688[0;39m ==> Parameters: 
2021-11-29 00:09:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120194387169906688[0;39m <==    Updates: 3
2021-11-29 00:09:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120194387169906688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 00:10:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120194492061061120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:10:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120194492061061120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:10:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120194492061061120[0;39m ==> Parameters: 
2021-11-29 00:10:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120194492061061120[0;39m <==    Updates: 0
2021-11-29 00:10:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120194492061061120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 00:10:04.613 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:10:04.721 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:10:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120194513045164032[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:10:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120194513045164032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:10:05.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120194513045164032[0;39m ==> Parameters: 
2021-11-29 00:10:05.020 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120194513045164032[0;39m <==    Updates: 3
2021-11-29 00:10:05.020 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120194513045164032[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 00:10:34.597 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:10:34.691 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:10:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120194638819758080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:10:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120194638819758080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:10:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120194638819758080[0;39m ==> Parameters: 
2021-11-29 00:10:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120194638819758080[0;39m <==    Updates: 3
2021-11-29 00:10:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120194638819758080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 00:11:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120194743715106816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:11:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120194743715106816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:11:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120194743715106816[0;39m ==> Parameters: 
2021-11-29 00:11:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120194743715106816[0;39m <==    Updates: 0
2021-11-29 00:11:00.018 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120194743715106816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 00:11:04.596 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:11:04.707 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:11:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120194764699209728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:11:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120194764699209728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:11:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120194764699209728[0;39m ==> Parameters: 
2021-11-29 00:11:05.019 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120194764699209728[0;39m <==    Updates: 3
2021-11-29 00:11:05.019 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120194764699209728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 00:11:34.605 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:11:34.713 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:11:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120194890490580992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:11:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120194890490580992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:11:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120194890490580992[0;39m ==> Parameters: 
2021-11-29 00:11:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120194890490580992[0;39m <==    Updates: 3
2021-11-29 00:11:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120194890490580992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:12:00.002 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120194995331403776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:12:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120194995331403776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:12:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120194995331403776[0;39m ==> Parameters: 
2021-11-29 00:12:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120194995331403776[0;39m <==    Updates: 0
2021-11-29 00:12:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120194995331403776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 00:12:04.620 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:12:04.713 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:12:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120195016319700992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:12:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120195016319700992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:12:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120195016319700992[0;39m ==> Parameters: 
2021-11-29 00:12:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120195016319700992[0;39m <==    Updates: 3
2021-11-29 00:12:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120195016319700992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 00:12:34.593 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:12:34.719 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:12:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120195142178181120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:12:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120195142178181120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:12:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120195142178181120[0;39m ==> Parameters: 
2021-11-29 00:12:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120195142178181120[0;39m <==    Updates: 3
2021-11-29 00:12:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120195142178181120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:13:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120195247002226688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:13:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120195247002226688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:13:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120195247002226688[0;39m ==> Parameters: 
2021-11-29 00:13:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120195247002226688[0;39m <==    Updates: 0
2021-11-29 00:13:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120195247002226688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 00:13:04.602 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:13:04.724 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:13:05.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120195267961163776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:13:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120195267961163776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:13:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120195267961163776[0;39m ==> Parameters: 
2021-11-29 00:13:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120195267961163776[0;39m <==    Updates: 3
2021-11-29 00:13:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120195267961163776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 00:13:34.597 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:13:34.723 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:13:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120195393798672384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:13:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120195393798672384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:13:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120195393798672384[0;39m ==> Parameters: 
2021-11-29 00:13:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120195393798672384[0;39m <==    Updates: 3
2021-11-29 00:13:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120195393798672384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:14:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120195498689826816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:14:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120195498689826816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:14:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120195498689826816[0;39m ==> Parameters: 
2021-11-29 00:14:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120195498689826816[0;39m <==    Updates: 0
2021-11-29 00:14:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120195498689826816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 00:14:04.609 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:14:04.718 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:14:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120195519665541120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:14:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120195519665541120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:14:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120195519665541120[0;39m ==> Parameters: 
2021-11-29 00:14:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120195519665541120[0;39m <==    Updates: 3
2021-11-29 00:14:05.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120195519665541120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 00:14:34.572 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:14:34.743 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:14:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120195645469495296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:14:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120195645469495296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:14:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120195645469495296[0;39m ==> Parameters: 
2021-11-29 00:14:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120195645469495296[0;39m <==    Updates: 3
2021-11-29 00:14:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120195645469495296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:15:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120195750364844032[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:15:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120195750364844032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:15:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120195750364844032[0;39m ==> Parameters: 
2021-11-29 00:15:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120195750364844032[0;39m <==    Updates: 0
2021-11-29 00:15:00.018 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120195750364844032[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 00:15:04.598 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:15:04.707 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:15:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120195771332169728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:15:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120195771332169728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:15:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120195771332169728[0;39m ==> Parameters: 
2021-11-29 00:15:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120195771332169728[0;39m <==    Updates: 3
2021-11-29 00:15:05.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120195771332169728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:15:34.619 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:15:34.728 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:15:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120195897127735296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:15:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120195897127735296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:15:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120195897127735296[0;39m ==> Parameters: 
2021-11-29 00:15:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120195897127735296[0;39m <==    Updates: 3
2021-11-29 00:15:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120195897127735296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 00:16:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120196002027278336[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:16:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120196002027278336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:16:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120196002027278336[0;39m ==> Parameters: 
2021-11-29 00:16:00.020 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120196002027278336[0;39m <==    Updates: 0
2021-11-29 00:16:00.020 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120196002027278336[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 00:16:04.615 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:16:04.725 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:16:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120196022990409728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:16:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120196022990409728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:16:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120196022990409728[0;39m ==> Parameters: 
2021-11-29 00:16:05.019 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120196022990409728[0;39m <==    Updates: 3
2021-11-29 00:16:05.020 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120196022990409728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 00:16:34.616 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:16:34.708 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:16:35.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120196148765003776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:16:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120196148765003776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:16:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120196148765003776[0;39m ==> Parameters: 
2021-11-29 00:16:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120196148765003776[0;39m <==    Updates: 3
2021-11-29 00:16:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120196148765003776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:17:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120196253664546816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:17:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120196253664546816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:17:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120196253664546816[0;39m ==> Parameters: 
2021-11-29 00:17:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120196253664546816[0;39m <==    Updates: 0
2021-11-29 00:17:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120196253664546816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 00:17:04.601 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:17:04.709 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:17:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120196274602512384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:17:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120196274602512384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:17:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120196274602512384[0;39m ==> Parameters: 
2021-11-29 00:17:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120196274602512384[0;39m <==    Updates: 3
2021-11-29 00:17:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120196274602512384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 00:17:34.613 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:17:34.737 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:17:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120196400427438080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:17:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120196400427438080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:17:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120196400427438080[0;39m ==> Parameters: 
2021-11-29 00:17:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120196400427438080[0;39m <==    Updates: 3
2021-11-29 00:17:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120196400427438080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:18:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120196505289232384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:18:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120196505289232384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:18:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120196505289232384[0;39m ==> Parameters: 
2021-11-29 00:18:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120196505289232384[0;39m <==    Updates: 0
2021-11-29 00:18:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120196505289232384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 00:18:04.617 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:18:04.727 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:18:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120196526260752384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:18:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120196526260752384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:18:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120196526260752384[0;39m ==> Parameters: 
2021-11-29 00:18:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120196526260752384[0;39m <==    Updates: 3
2021-11-29 00:18:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120196526260752384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 00:18:34.624 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:18:34.733 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:18:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120196652127621120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:18:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120196652127621120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:18:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120196652127621120[0;39m ==> Parameters: 
2021-11-29 00:18:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120196652127621120[0;39m <==    Updates: 3
2021-11-29 00:18:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120196652127621120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 00:19:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120196756993609728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:19:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120196756993609728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:19:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120196756993609728[0;39m ==> Parameters: 
2021-11-29 00:19:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120196756993609728[0;39m <==    Updates: 0
2021-11-29 00:19:00.018 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120196756993609728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 00:19:04.621 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:19:04.729 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:19:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120196777935769600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:19:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120196777935769600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:19:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120196777935769600[0;39m ==> Parameters: 
2021-11-29 00:19:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120196777935769600[0;39m <==    Updates: 3
2021-11-29 00:19:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120196777935769600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 00:19:34.605 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:19:34.732 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:19:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120196903790055424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:19:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120196903790055424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:19:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120196903790055424[0;39m ==> Parameters: 
2021-11-29 00:19:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120196903790055424[0;39m <==    Updates: 3
2021-11-29 00:19:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120196903790055424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:20:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120197008618295296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:20:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120197008618295296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:20:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120197008618295296[0;39m ==> Parameters: 
2021-11-29 00:20:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120197008618295296[0;39m <==    Updates: 0
2021-11-29 00:20:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120197008618295296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 00:20:04.605 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:20:04.746 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:20:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120197029602398208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:20:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120197029602398208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:20:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120197029602398208[0;39m ==> Parameters: 
2021-11-29 00:20:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120197029602398208[0;39m <==    Updates: 3
2021-11-29 00:20:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120197029602398208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:20:34.600 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:20:34.726 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:20:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120197155414740992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:20:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120197155414740992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:20:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120197155414740992[0;39m ==> Parameters: 
2021-11-29 00:20:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120197155414740992[0;39m <==    Updates: 3
2021-11-29 00:20:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120197155414740992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 00:21:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120197260293312512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:21:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120197260293312512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:21:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120197260293312512[0;39m ==> Parameters: 
2021-11-29 00:21:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120197260293312512[0;39m <==    Updates: 0
2021-11-29 00:21:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120197260293312512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 00:21:04.631 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:21:04.740 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:21:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120197281235472384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:21:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120197281235472384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:21:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120197281235472384[0;39m ==> Parameters: 
2021-11-29 00:21:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120197281235472384[0;39m <==    Updates: 3
2021-11-29 00:21:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120197281235472384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:21:34.619 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:21:34.742 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:21:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120197407068786688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:21:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120197407068786688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:21:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120197407068786688[0;39m ==> Parameters: 
2021-11-29 00:21:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120197407068786688[0;39m <==    Updates: 3
2021-11-29 00:21:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120197407068786688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 00:22:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120197511959941120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:22:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120197511959941120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:22:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120197511959941120[0;39m ==> Parameters: 
2021-11-29 00:22:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120197511959941120[0;39m <==    Updates: 0
2021-11-29 00:22:00.019 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120197511959941120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 00:22:04.598 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:22:04.706 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:22:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120197532939849728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:22:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120197532939849728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:22:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120197532939849728[0;39m ==> Parameters: 
2021-11-29 00:22:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120197532939849728[0;39m <==    Updates: 3
2021-11-29 00:22:05.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120197532939849728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:22:34.618 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:22:34.728 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:22:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120197658731220992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:22:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120197658731220992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:22:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120197658731220992[0;39m ==> Parameters: 
2021-11-29 00:22:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120197658731220992[0;39m <==    Updates: 3
2021-11-29 00:22:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120197658731220992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 00:23:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120197763613986816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:23:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120197763613986816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:23:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120197763613986816[0;39m ==> Parameters: 
2021-11-29 00:23:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120197763613986816[0;39m <==    Updates: 0
2021-11-29 00:23:00.018 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120197763613986816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 00:23:04.605 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:23:04.745 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:23:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120197784568729600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:23:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120197784568729600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:23:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120197784568729600[0;39m ==> Parameters: 
2021-11-29 00:23:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120197784568729600[0;39m <==    Updates: 3
2021-11-29 00:23:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120197784568729600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 00:23:34.607 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:23:34.718 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:23:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120197910431404032[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:23:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120197910431404032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:23:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120197910431404032[0;39m ==> Parameters: 
2021-11-29 00:23:35.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120197910431404032[0;39m <==    Updates: 3
2021-11-29 00:23:35.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120197910431404032[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:24:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120198015272226816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:24:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120198015272226816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:24:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120198015272226816[0;39m ==> Parameters: 
2021-11-29 00:24:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120198015272226816[0;39m <==    Updates: 0
2021-11-29 00:24:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120198015272226816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 00:24:04.625 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:24:04.733 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:24:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120198036247941120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:24:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120198036247941120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:24:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120198036247941120[0;39m ==> Parameters: 
2021-11-29 00:24:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120198036247941120[0;39m <==    Updates: 3
2021-11-29 00:24:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120198036247941120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:24:34.613 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:24:34.723 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:24:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120198162035118080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:24:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120198162035118080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:24:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120198162035118080[0;39m ==> Parameters: 
2021-11-29 00:24:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120198162035118080[0;39m <==    Updates: 3
2021-11-29 00:24:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120198162035118080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 00:25:00.003 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120198266892718080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:25:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120198266892718080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:25:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120198266892718080[0;39m ==> Parameters: 
2021-11-29 00:25:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120198266892718080[0;39m <==    Updates: 0
2021-11-29 00:25:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120198266892718080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 00:25:04.595 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:25:04.719 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:25:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120198287914569728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:25:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120198287914569728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:25:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120198287914569728[0;39m ==> Parameters: 
2021-11-29 00:25:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120198287914569728[0;39m <==    Updates: 3
2021-11-29 00:25:05.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120198287914569728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:25:34.620 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:25:34.730 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:25:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120198413726912512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:25:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120198413726912512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:25:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120198413726912512[0;39m ==> Parameters: 
2021-11-29 00:25:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120198413726912512[0;39m <==    Updates: 3
2021-11-29 00:25:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120198413726912512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:26:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120198518605484032[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:26:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120198518605484032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:26:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120198518605484032[0;39m ==> Parameters: 
2021-11-29 00:26:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120198518605484032[0;39m <==    Updates: 0
2021-11-29 00:26:00.018 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120198518605484032[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 00:26:04.624 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:26:04.730 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:26:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120198539543449600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:26:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120198539543449600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:26:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120198539543449600[0;39m ==> Parameters: 
2021-11-29 00:26:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120198539543449600[0;39m <==    Updates: 3
2021-11-29 00:26:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120198539543449600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:26:34.614 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:26:34.725 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:26:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120198665364180992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:26:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120198665364180992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:26:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120198665364180992[0;39m ==> Parameters: 
2021-11-29 00:26:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120198665364180992[0;39m <==    Updates: 3
2021-11-29 00:26:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120198665364180992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:27:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120198770238558208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:27:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120198770238558208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:27:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120198770238558208[0;39m ==> Parameters: 
2021-11-29 00:27:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120198770238558208[0;39m <==    Updates: 0
2021-11-29 00:27:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120198770238558208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 00:27:04.627 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:27:04.736 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:27:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120198791231049728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:27:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120198791231049728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:27:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120198791231049728[0;39m ==> Parameters: 
2021-11-29 00:27:05.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120198791231049728[0;39m <==    Updates: 3
2021-11-29 00:27:05.019 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120198791231049728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 00:27:34.609 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:27:34.736 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:27:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120198917009838080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:27:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120198917009838080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:27:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120198917009838080[0;39m ==> Parameters: 
2021-11-29 00:27:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120198917009838080[0;39m <==    Updates: 3
2021-11-29 00:27:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120198917009838080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:28:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120199021884215296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:28:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120199021884215296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:28:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120199021884215296[0;39m ==> Parameters: 
2021-11-29 00:28:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120199021884215296[0;39m <==    Updates: 0
2021-11-29 00:28:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120199021884215296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 00:28:04.623 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:28:04.716 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:28:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120199042868318208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:28:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120199042868318208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:28:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120199042868318208[0;39m ==> Parameters: 
2021-11-29 00:28:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120199042868318208[0;39m <==    Updates: 3
2021-11-29 00:28:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120199042868318208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 00:28:34.626 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:28:34.750 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:28:35.017 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120199168726798336[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:28:35.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120199168726798336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:28:35.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120199168726798336[0;39m ==> Parameters: 
2021-11-29 00:28:35.019 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120199168726798336[0;39m <==    Updates: 3
2021-11-29 00:28:35.019 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120199168726798336[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:29:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120199273534066688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:29:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120199273534066688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:29:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120199273534066688[0;39m ==> Parameters: 
2021-11-29 00:29:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120199273534066688[0;39m <==    Updates: 0
2021-11-29 00:29:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120199273534066688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 00:29:04.620 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:29:04.729 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:29:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120199294526558208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:29:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120199294526558208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:29:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120199294526558208[0;39m ==> Parameters: 
2021-11-29 00:29:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120199294526558208[0;39m <==    Updates: 3
2021-11-29 00:29:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120199294526558208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:29:34.632 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:29:34.742 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:29:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120199420364066816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:29:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120199420364066816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:29:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120199420364066816[0;39m ==> Parameters: 
2021-11-29 00:29:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120199420364066816[0;39m <==    Updates: 3
2021-11-29 00:29:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120199420364066816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 00:30:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120199525225861120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:30:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120199525225861120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:30:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120199525225861120[0;39m ==> Parameters: 
2021-11-29 00:30:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120199525225861120[0;39m <==    Updates: 0
2021-11-29 00:30:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120199525225861120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 00:30:04.602 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:30:04.724 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:30:05.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120199546147049472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:30:05.001 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120199546147049472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:30:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120199546147049472[0;39m ==> Parameters: 
2021-11-29 00:30:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120199546147049472[0;39m <==    Updates: 3
2021-11-29 00:30:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120199546147049472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:30:34.620 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:30:34.730 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:30:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120199671997140992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:30:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120199671997140992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:30:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120199671997140992[0;39m ==> Parameters: 
2021-11-29 00:30:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120199671997140992[0;39m <==    Updates: 3
2021-11-29 00:30:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120199671997140992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:31:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120199776854740992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:31:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120199776854740992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:31:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120199776854740992[0;39m ==> Parameters: 
2021-11-29 00:31:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120199776854740992[0;39m <==    Updates: 0
2021-11-29 00:31:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120199776854740992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 00:31:04.608 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:31:04.717 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:31:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120199797847232512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:31:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120199797847232512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:31:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120199797847232512[0;39m ==> Parameters: 
2021-11-29 00:31:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120199797847232512[0;39m <==    Updates: 3
2021-11-29 00:31:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120199797847232512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:31:34.625 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:31:34.736 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:31:35.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120199923634409472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:31:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120199923634409472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:31:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120199923634409472[0;39m ==> Parameters: 
2021-11-29 00:31:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120199923634409472[0;39m <==    Updates: 3
2021-11-29 00:31:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120199923634409472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 00:32:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120200028508786688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:32:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120200028508786688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:32:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120200028508786688[0;39m ==> Parameters: 
2021-11-29 00:32:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120200028508786688[0;39m <==    Updates: 0
2021-11-29 00:32:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120200028508786688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 00:32:04.600 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:32:04.739 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:32:05.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120200049463529472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:32:05.001 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120200049463529472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:32:05.001 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120200049463529472[0;39m ==> Parameters: 
2021-11-29 00:32:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120200049463529472[0;39m <==    Updates: 3
2021-11-29 00:32:05.002 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120200049463529472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 00:32:34.613 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:32:34.722 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:32:35.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120200175292649472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:32:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120200175292649472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:32:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120200175292649472[0;39m ==> Parameters: 
2021-11-29 00:32:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120200175292649472[0;39m <==    Updates: 3
2021-11-29 00:32:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120200175292649472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 00:33:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120200280192192512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:33:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120200280192192512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:33:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120200280192192512[0;39m ==> Parameters: 
2021-11-29 00:33:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120200280192192512[0;39m <==    Updates: 0
2021-11-29 00:33:00.018 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120200280192192512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 00:33:04.635 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:33:04.745 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:33:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120200301155323904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:33:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120200301155323904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:33:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120200301155323904[0;39m ==> Parameters: 
2021-11-29 00:33:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120200301155323904[0;39m <==    Updates: 3
2021-11-29 00:33:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120200301155323904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 00:33:34.627 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:33:34.752 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:33:35.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120200426955083776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:33:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120200426955083776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:33:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120200426955083776[0;39m ==> Parameters: 
2021-11-29 00:33:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120200426955083776[0;39m <==    Updates: 3
2021-11-29 00:33:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120200426955083776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:34:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120200531854626816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:34:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120200531854626816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:34:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120200531854626816[0;39m ==> Parameters: 
2021-11-29 00:34:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120200531854626816[0;39m <==    Updates: 0
2021-11-29 00:34:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120200531854626816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 00:34:04.614 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:34:04.738 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:34:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120200552788398080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:34:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120200552788398080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:34:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120200552788398080[0;39m ==> Parameters: 
2021-11-29 00:34:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120200552788398080[0;39m <==    Updates: 3
2021-11-29 00:34:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120200552788398080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:34:34.624 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:34:34.732 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:34:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120200678672044032[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:34:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120200678672044032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:34:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120200678672044032[0;39m ==> Parameters: 
2021-11-29 00:34:35.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120200678672044032[0;39m <==    Updates: 3
2021-11-29 00:34:35.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120200678672044032[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:35:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120200783491895296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:35:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120200783491895296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:35:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120200783491895296[0;39m ==> Parameters: 
2021-11-29 00:35:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120200783491895296[0;39m <==    Updates: 0
2021-11-29 00:35:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120200783491895296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 00:35:04.609 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:35:04.716 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:35:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120200804475998208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:35:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120200804475998208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:35:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120200804475998208[0;39m ==> Parameters: 
2021-11-29 00:35:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120200804475998208[0;39m <==    Updates: 3
2021-11-29 00:35:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120200804475998208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 00:35:34.627 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:35:34.736 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:35:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120200930330284032[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:35:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120200930330284032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:35:35.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120200930330284032[0;39m ==> Parameters: 
2021-11-29 00:35:35.019 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120200930330284032[0;39m <==    Updates: 3
2021-11-29 00:35:35.020 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120200930330284032[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 00:36:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120201035171106816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:36:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120201035171106816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:36:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120201035171106816[0;39m ==> Parameters: 
2021-11-29 00:36:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120201035171106816[0;39m <==    Updates: 0
2021-11-29 00:36:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120201035171106816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 00:36:04.647 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:36:04.739 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:36:05.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120201056100683776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:36:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120201056100683776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:36:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120201056100683776[0;39m ==> Parameters: 
2021-11-29 00:36:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120201056100683776[0;39m <==    Updates: 3
2021-11-29 00:36:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120201056100683776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:36:34.622 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:36:34.763 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:36:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120201181963358208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:36:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120201181963358208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:36:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120201181963358208[0;39m ==> Parameters: 
2021-11-29 00:36:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120201181963358208[0;39m <==    Updates: 3
2021-11-29 00:36:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120201181963358208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 00:37:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120201286820958208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:37:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120201286820958208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:37:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120201286820958208[0;39m ==> Parameters: 
2021-11-29 00:37:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120201286820958208[0;39m <==    Updates: 0
2021-11-29 00:37:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120201286820958208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 00:37:04.624 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:37:04.747 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:37:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120201307792478208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:37:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120201307792478208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:37:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120201307792478208[0;39m ==> Parameters: 
2021-11-29 00:37:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120201307792478208[0;39m <==    Updates: 3
2021-11-29 00:37:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120201307792478208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:37:34.642 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:37:34.733 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:37:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120201433642569728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:37:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120201433642569728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:37:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120201433642569728[0;39m ==> Parameters: 
2021-11-29 00:37:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120201433642569728[0;39m <==    Updates: 3
2021-11-29 00:37:35.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120201433642569728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:38:00.002 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120201538445643776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:38:00.002 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120201538445643776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:38:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120201538445643776[0;39m ==> Parameters: 
2021-11-29 00:38:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120201538445643776[0;39m <==    Updates: 0
2021-11-29 00:38:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120201538445643776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 00:38:04.628 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:38:04.737 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:38:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120201559463301120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:38:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120201559463301120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:38:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120201559463301120[0;39m ==> Parameters: 
2021-11-29 00:38:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120201559463301120[0;39m <==    Updates: 3
2021-11-29 00:38:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120201559463301120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:38:34.631 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:38:34.756 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:38:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120201685271449600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:38:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120201685271449600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:38:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120201685271449600[0;39m ==> Parameters: 
2021-11-29 00:38:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120201685271449600[0;39m <==    Updates: 3
2021-11-29 00:38:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120201685271449600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:39:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120201790137438208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:39:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120201790137438208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:39:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120201790137438208[0;39m ==> Parameters: 
2021-11-29 00:39:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120201790137438208[0;39m <==    Updates: 0
2021-11-29 00:39:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120201790137438208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 00:39:04.622 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:39:04.746 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:39:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120201811113152512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:39:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120201811113152512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:39:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120201811113152512[0;39m ==> Parameters: 
2021-11-29 00:39:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120201811113152512[0;39m <==    Updates: 3
2021-11-29 00:39:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120201811113152512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:39:34.613 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:39:34.739 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:39:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120201936908718080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:39:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120201936908718080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:39:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120201936908718080[0;39m ==> Parameters: 
2021-11-29 00:39:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120201936908718080[0;39m <==    Updates: 3
2021-11-29 00:39:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120201936908718080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 00:40:00.002 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120202041762123776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:40:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120202041762123776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:40:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120202041762123776[0;39m ==> Parameters: 
2021-11-29 00:40:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120202041762123776[0;39m <==    Updates: 0
2021-11-29 00:40:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120202041762123776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 00:40:04.628 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:40:04.768 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:40:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120202062788169728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:40:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120202062788169728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:40:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120202062788169728[0;39m ==> Parameters: 
2021-11-29 00:40:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120202062788169728[0;39m <==    Updates: 3
2021-11-29 00:40:05.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120202062788169728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:40:34.648 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:40:34.740 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:40:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120202188579540992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:40:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120202188579540992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:40:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120202188579540992[0;39m ==> Parameters: 
2021-11-29 00:40:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120202188579540992[0;39m <==    Updates: 3
2021-11-29 00:40:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120202188579540992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:41:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120202293445529600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:41:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120202293445529600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:41:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120202293445529600[0;39m ==> Parameters: 
2021-11-29 00:41:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120202293445529600[0;39m <==    Updates: 0
2021-11-29 00:41:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120202293445529600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 00:41:04.640 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:41:04.733 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:41:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120202314425438208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:41:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120202314425438208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:41:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120202314425438208[0;39m ==> Parameters: 
2021-11-29 00:41:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120202314425438208[0;39m <==    Updates: 3
2021-11-29 00:41:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120202314425438208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:41:34.641 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:41:34.750 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:41:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120202440262946816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:41:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120202440262946816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:41:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120202440262946816[0;39m ==> Parameters: 
2021-11-29 00:41:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120202440262946816[0;39m <==    Updates: 3
2021-11-29 00:41:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120202440262946816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 00:42:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120202545091186688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:42:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120202545091186688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:42:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120202545091186688[0;39m ==> Parameters: 
2021-11-29 00:42:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120202545091186688[0;39m <==    Updates: 0
2021-11-29 00:42:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120202545091186688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 00:42:04.650 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:42:04.743 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:42:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120202566075289600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:42:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120202566075289600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:42:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120202566075289600[0;39m ==> Parameters: 
2021-11-29 00:42:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120202566075289600[0;39m <==    Updates: 3
2021-11-29 00:42:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120202566075289600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:42:34.641 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:42:34.752 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:42:35.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120202691875049472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:42:35.001 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120202691875049472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:42:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120202691875049472[0;39m ==> Parameters: 
2021-11-29 00:42:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120202691875049472[0;39m <==    Updates: 3
2021-11-29 00:42:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120202691875049472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:43:00.001 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120202796732649472[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:43:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120202796732649472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:43:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120202796732649472[0;39m ==> Parameters: 
2021-11-29 00:43:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120202796732649472[0;39m <==    Updates: 0
2021-11-29 00:43:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120202796732649472[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2021-11-29 00:43:04.637 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:43:04.747 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:43:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120202817737723904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:43:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120202817737723904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:43:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120202817737723904[0;39m ==> Parameters: 
2021-11-29 00:43:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120202817737723904[0;39m <==    Updates: 3
2021-11-29 00:43:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120202817737723904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:43:34.622 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:43:34.748 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:43:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120202943587815424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:43:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120202943587815424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:43:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120202943587815424[0;39m ==> Parameters: 
2021-11-29 00:43:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120202943587815424[0;39m <==    Updates: 3
2021-11-29 00:43:35.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120202943587815424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 00:44:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120203048407666688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:44:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120203048407666688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:44:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120203048407666688[0;39m ==> Parameters: 
2021-11-29 00:44:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120203048407666688[0;39m <==    Updates: 0
2021-11-29 00:44:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120203048407666688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 00:44:04.627 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:44:04.732 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:44:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120203069408546816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:44:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120203069408546816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:44:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120203069408546816[0;39m ==> Parameters: 
2021-11-29 00:44:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120203069408546816[0;39m <==    Updates: 3
2021-11-29 00:44:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120203069408546816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:44:34.644 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:44:34.754 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:44:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120203195212500992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:44:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120203195212500992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:44:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120203195212500992[0;39m ==> Parameters: 
2021-11-29 00:44:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120203195212500992[0;39m <==    Updates: 3
2021-11-29 00:44:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120203195212500992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:45:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120203300082683904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:45:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120203300082683904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:45:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120203300082683904[0;39m ==> Parameters: 
2021-11-29 00:45:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120203300082683904[0;39m <==    Updates: 0
2021-11-29 00:45:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120203300082683904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 00:45:04.610 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:45:04.719 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:45:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120203321075175424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:45:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120203321075175424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:45:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120203321075175424[0;39m ==> Parameters: 
2021-11-29 00:45:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120203321075175424[0;39m <==    Updates: 3
2021-11-29 00:45:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120203321075175424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:45:34.617 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:45:34.740 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:45:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120203446870740992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:45:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120203446870740992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:45:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120203446870740992[0;39m ==> Parameters: 
2021-11-29 00:45:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120203446870740992[0;39m <==    Updates: 3
2021-11-29 00:45:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120203446870740992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:46:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120203551745118208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:46:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120203551745118208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:46:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120203551745118208[0;39m ==> Parameters: 
2021-11-29 00:46:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120203551745118208[0;39m <==    Updates: 0
2021-11-29 00:46:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120203551745118208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 00:46:04.645 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:46:04.754 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:46:05.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120203572683083776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:46:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120203572683083776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:46:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120203572683083776[0;39m ==> Parameters: 
2021-11-29 00:46:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120203572683083776[0;39m <==    Updates: 3
2021-11-29 00:46:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120203572683083776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 00:46:34.614 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:46:34.755 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:46:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120203698533175296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:46:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120203698533175296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:46:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120203698533175296[0;39m ==> Parameters: 
2021-11-29 00:46:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120203698533175296[0;39m <==    Updates: 3
2021-11-29 00:46:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120203698533175296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:47:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120203803403358208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:47:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120203803403358208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:47:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120203803403358208[0;39m ==> Parameters: 
2021-11-29 00:47:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120203803403358208[0;39m <==    Updates: 0
2021-11-29 00:47:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120203803403358208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 00:47:04.635 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:47:04.744 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:47:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120203824349712384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:47:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120203824349712384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:47:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120203824349712384[0;39m ==> Parameters: 
2021-11-29 00:47:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120203824349712384[0;39m <==    Updates: 3
2021-11-29 00:47:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120203824349712384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 00:47:34.631 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:47:34.755 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:47:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120203950174638080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:47:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120203950174638080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:47:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120203950174638080[0;39m ==> Parameters: 
2021-11-29 00:47:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120203950174638080[0;39m <==    Updates: 3
2021-11-29 00:47:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120203950174638080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 00:48:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120204055090958336[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:48:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120204055090958336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:48:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120204055090958336[0;39m ==> Parameters: 
2021-11-29 00:48:00.019 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120204055090958336[0;39m <==    Updates: 0
2021-11-29 00:48:00.019 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120204055090958336[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 00:48:04.648 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:48:04.758 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:48:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120204076007952384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:48:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120204076007952384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:48:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120204076007952384[0;39m ==> Parameters: 
2021-11-29 00:48:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120204076007952384[0;39m <==    Updates: 3
2021-11-29 00:48:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120204076007952384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:48:34.629 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:48:34.754 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:48:35.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120204201828683776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:48:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120204201828683776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:48:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120204201828683776[0;39m ==> Parameters: 
2021-11-29 00:48:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120204201828683776[0;39m <==    Updates: 3
2021-11-29 00:48:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120204201828683776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:49:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120204306707255296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:49:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120204306707255296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:49:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120204306707255296[0;39m ==> Parameters: 
2021-11-29 00:49:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120204306707255296[0;39m <==    Updates: 0
2021-11-29 00:49:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120204306707255296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 00:49:04.647 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:49:04.755 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:49:05.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120204327653609472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:49:05.001 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120204327653609472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:49:05.001 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120204327653609472[0;39m ==> Parameters: 
2021-11-29 00:49:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120204327653609472[0;39m <==    Updates: 3
2021-11-29 00:49:05.002 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120204327653609472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 00:49:34.618 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:49:34.760 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:49:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120204453516283904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:49:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120204453516283904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:49:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120204453516283904[0;39m ==> Parameters: 
2021-11-29 00:49:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120204453516283904[0;39m <==    Updates: 3
2021-11-29 00:49:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120204453516283904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 00:50:00.001 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120204558340329472[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:50:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120204558340329472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:50:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120204558340329472[0;39m ==> Parameters: 
2021-11-29 00:50:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120204558340329472[0;39m <==    Updates: 0
2021-11-29 00:50:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120204558340329472[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 00:50:04.655 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:50:04.763 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:50:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120204579362181120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:50:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120204579362181120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:50:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120204579362181120[0;39m ==> Parameters: 
2021-11-29 00:50:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120204579362181120[0;39m <==    Updates: 3
2021-11-29 00:50:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120204579362181120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:50:34.636 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:50:34.745 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:50:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120204705182912512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:50:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120204705182912512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:50:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120204705182912512[0;39m ==> Parameters: 
2021-11-29 00:50:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120204705182912512[0;39m <==    Updates: 3
2021-11-29 00:50:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120204705182912512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 00:51:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120204810023735296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:51:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120204810023735296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:51:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120204810023735296[0;39m ==> Parameters: 
2021-11-29 00:51:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120204810023735296[0;39m <==    Updates: 0
2021-11-29 00:51:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120204810023735296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 00:51:04.641 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:51:04.765 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:51:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120204831020421120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:51:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120204831020421120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:51:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120204831020421120[0;39m ==> Parameters: 
2021-11-29 00:51:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120204831020421120[0;39m <==    Updates: 3
2021-11-29 00:51:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120204831020421120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:51:34.649 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:51:34.757 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:51:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120204956828569600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:51:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120204956828569600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:51:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120204956828569600[0;39m ==> Parameters: 
2021-11-29 00:51:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120204956828569600[0;39m <==    Updates: 3
2021-11-29 00:51:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120204956828569600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:52:00.003 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120205061665198080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:52:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120205061665198080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:52:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120205061665198080[0;39m ==> Parameters: 
2021-11-29 00:52:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120205061665198080[0;39m <==    Updates: 0
2021-11-29 00:52:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120205061665198080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 00:52:04.645 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:52:04.752 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:52:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120205082687049728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:52:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120205082687049728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:52:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120205082687049728[0;39m ==> Parameters: 
2021-11-29 00:52:05.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120205082687049728[0;39m <==    Updates: 3
2021-11-29 00:52:05.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120205082687049728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 00:52:34.634 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:52:34.759 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:52:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120205208470032384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:52:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120205208470032384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:52:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120205208470032384[0;39m ==> Parameters: 
2021-11-29 00:52:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120205208470032384[0;39m <==    Updates: 3
2021-11-29 00:52:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120205208470032384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:53:00.002 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120205313319243776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:53:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120205313319243776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:53:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120205313319243776[0;39m ==> Parameters: 
2021-11-29 00:53:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120205313319243776[0;39m <==    Updates: 0
2021-11-29 00:53:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120205313319243776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 00:53:04.650 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:53:04.758 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:53:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120205334299152384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:53:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120205334299152384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:53:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120205334299152384[0;39m ==> Parameters: 
2021-11-29 00:53:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120205334299152384[0;39m <==    Updates: 3
2021-11-29 00:53:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120205334299152384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:53:34.617 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:53:34.772 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:53:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120205460136660992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:53:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120205460136660992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:53:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120205460136660992[0;39m ==> Parameters: 
2021-11-29 00:53:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120205460136660992[0;39m <==    Updates: 3
2021-11-29 00:53:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120205460136660992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 00:54:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120205564985872384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:54:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120205564985872384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:54:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120205564985872384[0;39m ==> Parameters: 
2021-11-29 00:54:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120205564985872384[0;39m <==    Updates: 0
2021-11-29 00:54:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120205564985872384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 00:54:04.643 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:54:04.753 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:54:05.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120205585944809472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:54:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120205585944809472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:54:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120205585944809472[0;39m ==> Parameters: 
2021-11-29 00:54:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120205585944809472[0;39m <==    Updates: 3
2021-11-29 00:54:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120205585944809472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 00:54:34.651 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:54:34.760 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:54:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120205711815872512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:54:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120205711815872512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:54:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120205711815872512[0;39m ==> Parameters: 
2021-11-29 00:54:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120205711815872512[0;39m <==    Updates: 3
2021-11-29 00:54:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120205711815872512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:55:00.003 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120205816639918080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:55:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120205816639918080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:55:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120205816639918080[0;39m ==> Parameters: 
2021-11-29 00:55:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120205816639918080[0;39m <==    Updates: 0
2021-11-29 00:55:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120205816639918080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 00:55:04.623 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:55:04.747 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:55:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120205837644992512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:55:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120205837644992512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:55:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120205837644992512[0;39m ==> Parameters: 
2021-11-29 00:55:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120205837644992512[0;39m <==    Updates: 3
2021-11-29 00:55:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120205837644992512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:55:34.631 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:55:34.754 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:55:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120205963440558080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:55:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120205963440558080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:55:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120205963440558080[0;39m ==> Parameters: 
2021-11-29 00:55:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120205963440558080[0;39m <==    Updates: 3
2021-11-29 00:55:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120205963440558080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 00:56:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120206068331712512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:56:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120206068331712512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:56:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120206068331712512[0;39m ==> Parameters: 
2021-11-29 00:56:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120206068331712512[0;39m <==    Updates: 0
2021-11-29 00:56:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120206068331712512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 00:56:04.636 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:56:04.745 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:56:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120206089294843904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:56:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120206089294843904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:56:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120206089294843904[0;39m ==> Parameters: 
2021-11-29 00:56:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120206089294843904[0;39m <==    Updates: 3
2021-11-29 00:56:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120206089294843904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 00:56:34.629 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:56:34.746 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:56:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120206215123963904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:56:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120206215123963904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:56:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120206215123963904[0;39m ==> Parameters: 
2021-11-29 00:56:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120206215123963904[0;39m <==    Updates: 3
2021-11-29 00:56:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120206215123963904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 00:57:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120206319985758208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:57:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120206319985758208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:57:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120206319985758208[0;39m ==> Parameters: 
2021-11-29 00:57:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120206319985758208[0;39m <==    Updates: 0
2021-11-29 00:57:00.019 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120206319985758208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2021-11-29 00:57:04.652 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:57:04.743 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:57:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120206340936306688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:57:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120206340936306688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:57:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120206340936306688[0;39m ==> Parameters: 
2021-11-29 00:57:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120206340936306688[0;39m <==    Updates: 3
2021-11-29 00:57:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120206340936306688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 00:57:34.643 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:57:34.738 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:57:35.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120206466748649472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:57:35.001 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120206466748649472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:57:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120206466748649472[0;39m ==> Parameters: 
2021-11-29 00:57:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120206466748649472[0;39m <==    Updates: 3
2021-11-29 00:57:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120206466748649472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:58:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120206571664969728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:58:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120206571664969728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:58:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120206571664969728[0;39m ==> Parameters: 
2021-11-29 00:58:00.019 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120206571664969728[0;39m <==    Updates: 0
2021-11-29 00:58:00.019 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120206571664969728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 00:58:04.643 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:58:04.751 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:58:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120206592636489728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:58:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120206592636489728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:58:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120206592636489728[0;39m ==> Parameters: 
2021-11-29 00:58:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120206592636489728[0;39m <==    Updates: 3
2021-11-29 00:58:05.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120206592636489728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 00:58:34.623 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:58:34.731 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:58:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120206718440443904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:58:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120206718440443904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:58:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120206718440443904[0;39m ==> Parameters: 
2021-11-29 00:58:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120206718440443904[0;39m <==    Updates: 3
2021-11-29 00:58:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120206718440443904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 00:59:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120206823277072384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 00:59:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120206823277072384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 00:59:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120206823277072384[0;39m ==> Parameters: 
2021-11-29 00:59:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120206823277072384[0;39m <==    Updates: 0
2021-11-29 00:59:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120206823277072384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 00:59:04.630 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:59:04.755 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:59:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120206844244398080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:59:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120206844244398080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:59:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120206844244398080[0;39m ==> Parameters: 
2021-11-29 00:59:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120206844244398080[0;39m <==    Updates: 3
2021-11-29 00:59:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120206844244398080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 00:59:34.652 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:59:34.779 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 00:59:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120206970115461120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 00:59:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120206970115461120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 00:59:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120206970115461120[0;39m ==> Parameters: 
2021-11-29 00:59:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120206970115461120[0;39m <==    Updates: 3
2021-11-29 00:59:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120206970115461120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 01:00:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120207074947895296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:00:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120207074947895296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:00:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120207074947895296[0;39m ==> Parameters: 
2021-11-29 01:00:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120207074947895296[0;39m <==    Updates: 0
2021-11-29 01:00:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120207074947895296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 01:00:04.666 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:00:04.759 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:00:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120207095927803904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:00:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120207095927803904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:00:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120207095927803904[0;39m ==> Parameters: 
2021-11-29 01:00:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120207095927803904[0;39m <==    Updates: 3
2021-11-29 01:00:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120207095927803904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 01:00:34.654 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:00:34.747 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:00:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120207221761118208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:00:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120207221761118208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:00:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120207221761118208[0;39m ==> Parameters: 
2021-11-29 01:00:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120207221761118208[0;39m <==    Updates: 3
2021-11-29 01:00:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120207221761118208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 01:01:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120207326635495424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:01:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120207326635495424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:01:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120207326635495424[0;39m ==> Parameters: 
2021-11-29 01:01:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120207326635495424[0;39m <==    Updates: 0
2021-11-29 01:01:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120207326635495424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 01:01:04.653 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:01:04.762 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:01:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120207347590238208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:01:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120207347590238208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:01:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120207347590238208[0;39m ==> Parameters: 
2021-11-29 01:01:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120207347590238208[0;39m <==    Updates: 3
2021-11-29 01:01:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120207347590238208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 01:01:34.628 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:01:34.753 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:01:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120207473389998080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:01:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120207473389998080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:01:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120207473389998080[0;39m ==> Parameters: 
2021-11-29 01:01:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120207473389998080[0;39m <==    Updates: 3
2021-11-29 01:01:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120207473389998080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 01:02:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120207578255986688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:02:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120207578255986688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:02:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120207578255986688[0;39m ==> Parameters: 
2021-11-29 01:02:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120207578255986688[0;39m <==    Updates: 0
2021-11-29 01:02:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120207578255986688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 01:02:04.657 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:02:04.767 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:02:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120207599265255424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:02:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120207599265255424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:02:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120207599265255424[0;39m ==> Parameters: 
2021-11-29 01:02:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120207599265255424[0;39m <==    Updates: 3
2021-11-29 01:02:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120207599265255424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 01:02:34.650 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:02:34.758 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:02:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120207725065015296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:02:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120207725065015296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:02:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120207725065015296[0;39m ==> Parameters: 
2021-11-29 01:02:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120207725065015296[0;39m <==    Updates: 3
2021-11-29 01:02:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120207725065015296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 01:03:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120207829956169728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:03:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120207829956169728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:03:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120207829956169728[0;39m ==> Parameters: 
2021-11-29 01:03:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120207829956169728[0;39m <==    Updates: 0
2021-11-29 01:03:00.018 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120207829956169728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 01:03:04.638 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:03:04.777 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:03:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120207850910912512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:03:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120207850910912512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:03:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120207850910912512[0;39m ==> Parameters: 
2021-11-29 01:03:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120207850910912512[0;39m <==    Updates: 3
2021-11-29 01:03:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120207850910912512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 01:03:34.647 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:03:34.756 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:03:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120207976714866688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:03:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120207976714866688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:03:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120207976714866688[0;39m ==> Parameters: 
2021-11-29 01:03:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120207976714866688[0;39m <==    Updates: 3
2021-11-29 01:03:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120207976714866688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 01:04:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120208081597632512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:04:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120208081597632512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:04:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120208081597632512[0;39m ==> Parameters: 
2021-11-29 01:04:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120208081597632512[0;39m <==    Updates: 0
2021-11-29 01:04:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120208081597632512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 01:04:04.648 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:04:04.772 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:04:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120208102543986688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:04:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120208102543986688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:04:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120208102543986688[0;39m ==> Parameters: 
2021-11-29 01:04:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120208102543986688[0;39m <==    Updates: 3
2021-11-29 01:04:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120208102543986688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 01:04:34.629 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:04:34.752 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:04:35.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120208228356329472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:04:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120208228356329472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:04:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120208228356329472[0;39m ==> Parameters: 
2021-11-29 01:04:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120208228356329472[0;39m <==    Updates: 3
2021-11-29 01:04:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120208228356329472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 01:05:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120208333230706688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:05:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120208333230706688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:05:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120208333230706688[0;39m ==> Parameters: 
2021-11-29 01:05:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120208333230706688[0;39m <==    Updates: 0
2021-11-29 01:05:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120208333230706688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 01:05:04.649 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:05:04.739 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:05:05.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120208354189643776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:05:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120208354189643776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:05:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120208354189643776[0;39m ==> Parameters: 
2021-11-29 01:05:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120208354189643776[0;39m <==    Updates: 3
2021-11-29 01:05:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120208354189643776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 01:05:34.647 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:05:34.773 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:05:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120208480035540992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:05:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120208480035540992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:05:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120208480035540992[0;39m ==> Parameters: 
2021-11-29 01:05:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120208480035540992[0;39m <==    Updates: 3
2021-11-29 01:05:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120208480035540992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 01:06:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120208584918306816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:06:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120208584918306816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:06:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120208584918306816[0;39m ==> Parameters: 
2021-11-29 01:06:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120208584918306816[0;39m <==    Updates: 0
2021-11-29 01:06:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120208584918306816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 01:06:04.635 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:06:04.744 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:06:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120208605864660992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:06:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120208605864660992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:06:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120208605864660992[0;39m ==> Parameters: 
2021-11-29 01:06:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120208605864660992[0;39m <==    Updates: 3
2021-11-29 01:06:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120208605864660992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 01:06:34.624 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:06:34.733 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:06:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120208731718946816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:06:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120208731718946816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:06:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120208731718946816[0;39m ==> Parameters: 
2021-11-29 01:06:35.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120208731718946816[0;39m <==    Updates: 3
2021-11-29 01:06:35.019 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120208731718946816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶7æ¯«ç§’
2021-11-29 01:07:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120208836589129728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:07:00.020 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120208836589129728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:07:00.021 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120208836589129728[0;39m ==> Parameters: 
2021-11-29 01:07:00.025 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120208836589129728[0;39m <==    Updates: 0
2021-11-29 01:07:00.025 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120208836589129728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2021-11-29 01:07:04.651 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:07:04.775 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:07:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120208857514512384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:07:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120208857514512384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:07:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120208857514512384[0;39m ==> Parameters: 
2021-11-29 01:07:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120208857514512384[0;39m <==    Updates: 3
2021-11-29 01:07:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120208857514512384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 01:07:34.646 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:07:34.758 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:07:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120208983343632384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:07:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120208983343632384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:07:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120208983343632384[0;39m ==> Parameters: 
2021-11-29 01:07:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120208983343632384[0;39m <==    Updates: 3
2021-11-29 01:07:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120208983343632384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 01:08:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120209088218009600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:08:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120209088218009600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:08:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120209088218009600[0;39m ==> Parameters: 
2021-11-29 01:08:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120209088218009600[0;39m <==    Updates: 0
2021-11-29 01:08:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120209088218009600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 01:08:04.657 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:08:04.766 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:08:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120209109206306816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:08:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120209109206306816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:08:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120209109206306816[0;39m ==> Parameters: 
2021-11-29 01:08:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120209109206306816[0;39m <==    Updates: 3
2021-11-29 01:08:05.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120209109206306816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 01:08:34.656 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:08:34.779 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:08:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120209235039621120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:08:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120209235039621120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:08:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120209235039621120[0;39m ==> Parameters: 
2021-11-29 01:08:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120209235039621120[0;39m <==    Updates: 3
2021-11-29 01:08:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120209235039621120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 01:09:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120209339884638208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:09:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120209339884638208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:09:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120209339884638208[0;39m ==> Parameters: 
2021-11-29 01:09:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120209339884638208[0;39m <==    Updates: 0
2021-11-29 01:09:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120209339884638208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 01:09:04.644 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:09:04.767 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:09:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120209360864546816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:09:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120209360864546816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:09:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120209360864546816[0;39m ==> Parameters: 
2021-11-29 01:09:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120209360864546816[0;39m <==    Updates: 3
2021-11-29 01:09:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120209360864546816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 01:09:34.648 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:09:34.788 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:09:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120209486668500992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:09:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120209486668500992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:09:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120209486668500992[0;39m ==> Parameters: 
2021-11-29 01:09:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120209486668500992[0;39m <==    Updates: 3
2021-11-29 01:09:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120209486668500992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 01:10:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120209591538683904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:10:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120209591538683904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:10:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120209591538683904[0;39m ==> Parameters: 
2021-11-29 01:10:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120209591538683904[0;39m <==    Updates: 0
2021-11-29 01:10:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120209591538683904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 01:10:04.645 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:10:04.767 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:10:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120209612535369728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:10:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120209612535369728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:10:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120209612535369728[0;39m ==> Parameters: 
2021-11-29 01:10:05.020 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120209612535369728[0;39m <==    Updates: 3
2021-11-29 01:10:05.020 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120209612535369728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 01:10:34.652 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:10:34.777 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:10:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120209738351906816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:10:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120209738351906816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:10:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120209738351906816[0;39m ==> Parameters: 
2021-11-29 01:10:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120209738351906816[0;39m <==    Updates: 3
2021-11-29 01:10:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120209738351906816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 01:11:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120209843180146688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:11:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120209843180146688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:11:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120209843180146688[0;39m ==> Parameters: 
2021-11-29 01:11:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120209843180146688[0;39m <==    Updates: 0
2021-11-29 01:11:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120209843180146688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 01:11:04.651 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:11:04.776 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:11:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120209864164249600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:11:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120209864164249600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:11:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120209864164249600[0;39m ==> Parameters: 
2021-11-29 01:11:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120209864164249600[0;39m <==    Updates: 3
2021-11-29 01:11:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120209864164249600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 01:11:34.664 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:11:34.791 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:11:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120209989984980992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:11:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120209989984980992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:11:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120209989984980992[0;39m ==> Parameters: 
2021-11-29 01:11:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120209989984980992[0;39m <==    Updates: 3
2021-11-29 01:11:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120209989984980992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 01:12:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120210094884524032[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:12:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120210094884524032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:12:00.019 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120210094884524032[0;39m ==> Parameters: 
2021-11-29 01:12:00.022 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120210094884524032[0;39m <==    Updates: 0
2021-11-29 01:12:00.022 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120210094884524032[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 01:12:04.671 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:12:04.780 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:12:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120210115843461120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:12:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120210115843461120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:12:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120210115843461120[0;39m ==> Parameters: 
2021-11-29 01:12:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120210115843461120[0;39m <==    Updates: 3
2021-11-29 01:12:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120210115843461120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 01:12:34.655 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:12:34.766 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:12:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120210241685164032[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:12:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120210241685164032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:12:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120210241685164032[0;39m ==> Parameters: 
2021-11-29 01:12:35.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120210241685164032[0;39m <==    Updates: 3
2021-11-29 01:12:35.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120210241685164032[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 01:13:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120210346513403904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:13:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120210346513403904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:13:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120210346513403904[0;39m ==> Parameters: 
2021-11-29 01:13:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120210346513403904[0;39m <==    Updates: 0
2021-11-29 01:13:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120210346513403904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 01:13:04.655 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:13:04.762 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:13:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120210367484923904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:13:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120210367484923904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:13:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120210367484923904[0;39m ==> Parameters: 
2021-11-29 01:13:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120210367484923904[0;39m <==    Updates: 3
2021-11-29 01:13:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120210367484923904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 01:13:34.657 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:13:34.783 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:13:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120210493343404032[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:13:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120210493343404032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:13:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120210493343404032[0;39m ==> Parameters: 
2021-11-29 01:13:35.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120210493343404032[0;39m <==    Updates: 3
2021-11-29 01:13:35.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120210493343404032[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 01:14:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120210598167449600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:14:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120210598167449600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:14:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120210598167449600[0;39m ==> Parameters: 
2021-11-29 01:14:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120210598167449600[0;39m <==    Updates: 0
2021-11-29 01:14:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120210598167449600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 01:14:04.646 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:14:04.775 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:14:05.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120210619109609472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:14:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120210619109609472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:14:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120210619109609472[0;39m ==> Parameters: 
2021-11-29 01:14:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120210619109609472[0;39m <==    Updates: 3
2021-11-29 01:14:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120210619109609472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 01:14:34.677 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:14:34.785 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:14:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120210745001644032[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:14:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120210745001644032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:14:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120210745001644032[0;39m ==> Parameters: 
2021-11-29 01:14:35.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120210745001644032[0;39m <==    Updates: 3
2021-11-29 01:14:35.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120210745001644032[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 01:15:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120210849817300992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:15:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120210849817300992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:15:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120210849817300992[0;39m ==> Parameters: 
2021-11-29 01:15:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120210849817300992[0;39m <==    Updates: 0
2021-11-29 01:15:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120210849817300992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 01:15:04.638 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:15:04.761 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:15:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120210870805598208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:15:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120210870805598208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:15:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120210870805598208[0;39m ==> Parameters: 
2021-11-29 01:15:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120210870805598208[0;39m <==    Updates: 3
2021-11-29 01:15:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120210870805598208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 01:15:34.659 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:15:34.754 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:15:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120210996605358080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:15:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120210996605358080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:15:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120210996605358080[0;39m ==> Parameters: 
2021-11-29 01:15:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120210996605358080[0;39m <==    Updates: 3
2021-11-29 01:15:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120210996605358080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 01:16:00.002 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120211101458763776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:16:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120211101458763776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:16:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120211101458763776[0;39m ==> Parameters: 
2021-11-29 01:16:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120211101458763776[0;39m <==    Updates: 0
2021-11-29 01:16:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120211101458763776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 01:16:04.655 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:16:04.764 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:16:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120211122468032512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:16:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120211122468032512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:16:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120211122468032512[0;39m ==> Parameters: 
2021-11-29 01:16:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120211122468032512[0;39m <==    Updates: 3
2021-11-29 01:16:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120211122468032512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 01:16:34.662 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:16:34.770 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:16:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120211248276180992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:16:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120211248276180992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:16:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120211248276180992[0;39m ==> Parameters: 
2021-11-29 01:16:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120211248276180992[0;39m <==    Updates: 3
2021-11-29 01:16:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120211248276180992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 01:17:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120211353125392384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:17:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120211353125392384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:17:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120211353125392384[0;39m ==> Parameters: 
2021-11-29 01:17:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120211353125392384[0;39m <==    Updates: 0
2021-11-29 01:17:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120211353125392384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 01:17:04.654 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:17:04.777 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:17:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120211374122078208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:17:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120211374122078208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:17:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120211374122078208[0;39m ==> Parameters: 
2021-11-29 01:17:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120211374122078208[0;39m <==    Updates: 3
2021-11-29 01:17:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120211374122078208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 01:17:34.650 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:17:34.774 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:17:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120211499942809600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:17:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120211499942809600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:17:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120211499942809600[0;39m ==> Parameters: 
2021-11-29 01:17:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120211499942809600[0;39m <==    Updates: 3
2021-11-29 01:17:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120211499942809600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 01:18:00.001 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120211604771049472[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:18:00.001 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120211604771049472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:18:00.002 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120211604771049472[0;39m ==> Parameters: 
2021-11-29 01:18:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120211604771049472[0;39m <==    Updates: 0
2021-11-29 01:18:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120211604771049472[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 01:18:04.650 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:18:04.772 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:18:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120211625750958080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:18:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120211625750958080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:18:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120211625750958080[0;39m ==> Parameters: 
2021-11-29 01:18:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120211625750958080[0;39m <==    Updates: 3
2021-11-29 01:18:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120211625750958080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 01:18:34.679 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:18:34.773 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:18:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120211751592660992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:18:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120211751592660992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:18:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120211751592660992[0;39m ==> Parameters: 
2021-11-29 01:18:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120211751592660992[0;39m <==    Updates: 3
2021-11-29 01:18:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120211751592660992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 01:19:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120211856488009728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:19:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120211856488009728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:19:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120211856488009728[0;39m ==> Parameters: 
2021-11-29 01:19:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120211856488009728[0;39m <==    Updates: 0
2021-11-29 01:19:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120211856488009728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 01:19:04.678 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:19:04.771 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:19:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120211877409198080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:19:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120211877409198080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:19:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120211877409198080[0;39m ==> Parameters: 
2021-11-29 01:19:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120211877409198080[0;39m <==    Updates: 3
2021-11-29 01:19:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120211877409198080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 01:19:34.669 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:19:34.781 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:19:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120212003276066816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:19:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120212003276066816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:19:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120212003276066816[0;39m ==> Parameters: 
2021-11-29 01:19:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120212003276066816[0;39m <==    Updates: 3
2021-11-29 01:19:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120212003276066816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 01:20:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120212108116889600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:20:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120212108116889600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:20:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120212108116889600[0;39m ==> Parameters: 
2021-11-29 01:20:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120212108116889600[0;39m <==    Updates: 0
2021-11-29 01:20:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120212108116889600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 01:20:04.657 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:20:04.767 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:20:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120212129117769728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:20:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120212129117769728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:20:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120212129117769728[0;39m ==> Parameters: 
2021-11-29 01:20:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120212129117769728[0;39m <==    Updates: 3
2021-11-29 01:20:05.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120212129117769728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 01:20:34.651 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:20:34.774 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:20:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120212254904946688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:20:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120212254904946688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:20:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120212254904946688[0;39m ==> Parameters: 
2021-11-29 01:20:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120212254904946688[0;39m <==    Updates: 3
2021-11-29 01:20:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120212254904946688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 01:21:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120212359766740992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:21:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120212359766740992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:21:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120212359766740992[0;39m ==> Parameters: 
2021-11-29 01:21:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120212359766740992[0;39m <==    Updates: 0
2021-11-29 01:21:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120212359766740992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 01:21:04.682 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:21:04.774 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:21:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120212380738260992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:21:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120212380738260992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:21:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120212380738260992[0;39m ==> Parameters: 
2021-11-29 01:21:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120212380738260992[0;39m <==    Updates: 3
2021-11-29 01:21:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120212380738260992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 01:21:34.658 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:21:34.785 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:21:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120212506563186688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:21:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120212506563186688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:21:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120212506563186688[0;39m ==> Parameters: 
2021-11-29 01:21:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120212506563186688[0;39m <==    Updates: 3
2021-11-29 01:21:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120212506563186688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 01:22:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120212611441758208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:22:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120212611441758208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:22:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120212611441758208[0;39m ==> Parameters: 
2021-11-29 01:22:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120212611441758208[0;39m <==    Updates: 0
2021-11-29 01:22:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120212611441758208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 01:22:04.651 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:22:04.776 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:22:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120212632400695296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:22:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120212632400695296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:22:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120212632400695296[0;39m ==> Parameters: 
2021-11-29 01:22:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120212632400695296[0;39m <==    Updates: 3
2021-11-29 01:22:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120212632400695296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 01:22:34.667 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:22:34.777 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:22:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120212758229815296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:22:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120212758229815296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:22:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120212758229815296[0;39m ==> Parameters: 
2021-11-29 01:22:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120212758229815296[0;39m <==    Updates: 3
2021-11-29 01:22:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120212758229815296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 01:23:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120212863095803904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:23:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120212863095803904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:23:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120212863095803904[0;39m ==> Parameters: 
2021-11-29 01:23:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120212863095803904[0;39m <==    Updates: 0
2021-11-29 01:23:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120212863095803904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 01:23:04.657 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:23:04.765 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:23:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120212884071518208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:23:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120212884071518208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:23:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120212884071518208[0;39m ==> Parameters: 
2021-11-29 01:23:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120212884071518208[0;39m <==    Updates: 3
2021-11-29 01:23:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120212884071518208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 01:23:34.675 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:23:34.785 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:23:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120213009875472384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:23:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120213009875472384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:23:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120213009875472384[0;39m ==> Parameters: 
2021-11-29 01:23:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120213009875472384[0;39m <==    Updates: 3
2021-11-29 01:23:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120213009875472384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 01:24:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120213114787598336[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:24:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120213114787598336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:24:00.019 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120213114787598336[0;39m ==> Parameters: 
2021-11-29 01:24:00.021 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120213114787598336[0;39m <==    Updates: 0
2021-11-29 01:24:00.021 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120213114787598336[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 01:24:04.655 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:24:04.779 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:24:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120213135721369600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:24:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120213135721369600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:24:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120213135721369600[0;39m ==> Parameters: 
2021-11-29 01:24:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120213135721369600[0;39m <==    Updates: 3
2021-11-29 01:24:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120213135721369600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 01:24:34.675 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:24:34.784 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:24:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120213261529518080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:24:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120213261529518080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:24:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120213261529518080[0;39m ==> Parameters: 
2021-11-29 01:24:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120213261529518080[0;39m <==    Updates: 3
2021-11-29 01:24:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120213261529518080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 01:25:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120213366408089600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:25:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120213366408089600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:25:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120213366408089600[0;39m ==> Parameters: 
2021-11-29 01:25:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120213366408089600[0;39m <==    Updates: 0
2021-11-29 01:25:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120213366408089600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 01:25:04.648 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:25:04.773 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:25:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120213387367026688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:25:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120213387367026688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:25:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120213387367026688[0;39m ==> Parameters: 
2021-11-29 01:25:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120213387367026688[0;39m <==    Updates: 3
2021-11-29 01:25:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120213387367026688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 01:25:34.645 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:25:34.770 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:25:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120213513191952384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:25:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120213513191952384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:25:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120213513191952384[0;39m ==> Parameters: 
2021-11-29 01:25:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120213513191952384[0;39m <==    Updates: 3
2021-11-29 01:25:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120213513191952384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 01:26:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120213618091495424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:26:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120213618091495424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:26:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120213618091495424[0;39m ==> Parameters: 
2021-11-29 01:26:00.019 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120213618091495424[0;39m <==    Updates: 0
2021-11-29 01:26:00.019 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120213618091495424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 01:26:04.671 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:26:04.779 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:26:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120213639046238208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:26:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120213639046238208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:26:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120213639046238208[0;39m ==> Parameters: 
2021-11-29 01:26:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120213639046238208[0;39m <==    Updates: 3
2021-11-29 01:26:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120213639046238208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 01:26:34.669 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:26:34.781 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:26:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120213764896329728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:26:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120213764896329728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:26:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120213764896329728[0;39m ==> Parameters: 
2021-11-29 01:26:35.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120213764896329728[0;39m <==    Updates: 3
2021-11-29 01:26:35.019 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120213764896329728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 01:27:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120213869707792384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:27:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120213869707792384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:27:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120213869707792384[0;39m ==> Parameters: 
2021-11-29 01:27:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120213869707792384[0;39m <==    Updates: 0
2021-11-29 01:27:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120213869707792384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 01:27:04.660 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:27:04.771 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:27:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120213890725449728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:27:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120213890725449728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:27:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120213890725449728[0;39m ==> Parameters: 
2021-11-29 01:27:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120213890725449728[0;39m <==    Updates: 3
2021-11-29 01:27:05.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120213890725449728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 01:27:34.682 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:27:34.775 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:27:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120214016521015296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:27:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120214016521015296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:27:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120214016521015296[0;39m ==> Parameters: 
2021-11-29 01:27:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120214016521015296[0;39m <==    Updates: 3
2021-11-29 01:27:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120214016521015296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 01:28:00.003 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120214121361838080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:28:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120214121361838080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:28:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120214121361838080[0;39m ==> Parameters: 
2021-11-29 01:28:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120214121361838080[0;39m <==    Updates: 0
2021-11-29 01:28:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120214121361838080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 01:28:04.664 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:28:04.787 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:28:05.000 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120214142320775168[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:28:05.000 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120214142320775168[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:28:05.000 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120214142320775168[0;39m ==> Parameters: 
2021-11-29 01:28:05.001 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120214142320775168[0;39m <==    Updates: 3
2021-11-29 01:28:05.001 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120214142320775168[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 01:28:34.656 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:28:34.765 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:28:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120214268212809728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:28:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120214268212809728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:28:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120214268212809728[0;39m ==> Parameters: 
2021-11-29 01:28:35.019 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120214268212809728[0;39m <==    Updates: 3
2021-11-29 01:28:35.020 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120214268212809728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 01:29:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120214373028466688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:29:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120214373028466688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:29:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120214373028466688[0;39m ==> Parameters: 
2021-11-29 01:29:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120214373028466688[0;39m <==    Updates: 0
2021-11-29 01:29:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120214373028466688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 01:29:04.660 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:29:04.785 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:29:05.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120214393983209472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:29:05.001 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120214393983209472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:29:05.001 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120214393983209472[0;39m ==> Parameters: 
2021-11-29 01:29:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120214393983209472[0;39m <==    Updates: 3
2021-11-29 01:29:05.002 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120214393983209472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 01:29:34.662 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:29:34.771 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:29:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120214519824912384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:29:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120214519824912384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:29:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120214519824912384[0;39m ==> Parameters: 
2021-11-29 01:29:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120214519824912384[0;39m <==    Updates: 3
2021-11-29 01:29:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120214519824912384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 01:30:00.002 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120214624674123776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:30:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120214624674123776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:30:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120214624674123776[0;39m ==> Parameters: 
2021-11-29 01:30:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120214624674123776[0;39m <==    Updates: 0
2021-11-29 01:30:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120214624674123776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 01:30:04.682 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:30:04.791 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:30:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120214645666615296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:30:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120214645666615296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:30:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120214645666615296[0;39m ==> Parameters: 
2021-11-29 01:30:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120214645666615296[0;39m <==    Updates: 3
2021-11-29 01:30:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120214645666615296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 01:30:34.674 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:30:34.769 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:30:35.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120214771474763776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:30:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120214771474763776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:30:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120214771474763776[0;39m ==> Parameters: 
2021-11-29 01:30:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120214771474763776[0;39m <==    Updates: 3
2021-11-29 01:30:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120214771474763776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 01:31:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120214876370112512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:31:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120214876370112512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:31:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120214876370112512[0;39m ==> Parameters: 
2021-11-29 01:31:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120214876370112512[0;39m <==    Updates: 0
2021-11-29 01:31:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120214876370112512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 01:31:04.664 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:31:04.773 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:31:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120214897312272384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:31:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120214897312272384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:31:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120214897312272384[0;39m ==> Parameters: 
2021-11-29 01:31:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120214897312272384[0;39m <==    Updates: 3
2021-11-29 01:31:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120214897312272384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 01:31:34.680 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:31:34.773 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:31:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120215023153975296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:31:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120215023153975296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:31:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120215023153975296[0;39m ==> Parameters: 
2021-11-29 01:31:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120215023153975296[0;39m <==    Updates: 3
2021-11-29 01:31:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120215023153975296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 01:32:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120215127998992384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:32:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120215127998992384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:32:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120215127998992384[0;39m ==> Parameters: 
2021-11-29 01:32:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120215127998992384[0;39m <==    Updates: 0
2021-11-29 01:32:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120215127998992384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 01:32:04.664 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:32:04.775 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:32:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120215148987289600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:32:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120215148987289600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:32:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120215148987289600[0;39m ==> Parameters: 
2021-11-29 01:32:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120215148987289600[0;39m <==    Updates: 3
2021-11-29 01:32:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120215148987289600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 01:32:34.649 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:32:34.760 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:32:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120215274828992512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:32:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120215274828992512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:32:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120215274828992512[0;39m ==> Parameters: 
2021-11-29 01:32:35.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120215274828992512[0;39m <==    Updates: 3
2021-11-29 01:32:35.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120215274828992512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶7æ¯«ç§’
2021-11-29 01:33:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120215379686592512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:33:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120215379686592512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:33:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120215379686592512[0;39m ==> Parameters: 
2021-11-29 01:33:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120215379686592512[0;39m <==    Updates: 0
2021-11-29 01:33:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120215379686592512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 01:33:04.671 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:33:04.795 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:33:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120215400649723904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:33:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120215400649723904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:33:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120215400649723904[0;39m ==> Parameters: 
2021-11-29 01:33:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120215400649723904[0;39m <==    Updates: 3
2021-11-29 01:33:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120215400649723904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 01:33:34.658 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:33:34.767 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:33:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120215526508204032[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:33:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120215526508204032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:33:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120215526508204032[0;39m ==> Parameters: 
2021-11-29 01:33:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120215526508204032[0;39m <==    Updates: 3
2021-11-29 01:33:35.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120215526508204032[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 01:34:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120215631332249600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:34:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120215631332249600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:34:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120215631332249600[0;39m ==> Parameters: 
2021-11-29 01:34:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120215631332249600[0;39m <==    Updates: 0
2021-11-29 01:34:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120215631332249600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 01:34:04.657 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:34:04.796 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:34:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120215652320546816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:34:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120215652320546816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:34:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120215652320546816[0;39m ==> Parameters: 
2021-11-29 01:34:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120215652320546816[0;39m <==    Updates: 3
2021-11-29 01:34:05.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120215652320546816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 01:34:34.686 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:34:34.793 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:34:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120215778137083904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:34:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120215778137083904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:34:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120215778137083904[0;39m ==> Parameters: 
2021-11-29 01:34:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120215778137083904[0;39m <==    Updates: 3
2021-11-29 01:34:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120215778137083904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 01:35:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120215882986295296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:35:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120215882986295296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:35:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120215882986295296[0;39m ==> Parameters: 
2021-11-29 01:35:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120215882986295296[0;39m <==    Updates: 0
2021-11-29 01:35:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120215882986295296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2021-11-29 01:35:04.655 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:35:04.762 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:35:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120215903957815296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:35:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120215903957815296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:35:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120215903957815296[0;39m ==> Parameters: 
2021-11-29 01:35:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120215903957815296[0;39m <==    Updates: 3
2021-11-29 01:35:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120215903957815296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 01:35:34.678 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:35:34.790 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:35:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120216029786935296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:35:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120216029786935296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:35:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120216029786935296[0;39m ==> Parameters: 
2021-11-29 01:35:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120216029786935296[0;39m <==    Updates: 3
2021-11-29 01:35:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120216029786935296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 01:36:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120216134636146688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:36:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120216134636146688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:36:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120216134636146688[0;39m ==> Parameters: 
2021-11-29 01:36:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120216134636146688[0;39m <==    Updates: 0
2021-11-29 01:36:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120216134636146688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 01:36:04.662 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:36:04.785 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:36:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120216155653804032[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:36:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120216155653804032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:36:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120216155653804032[0;39m ==> Parameters: 
2021-11-29 01:36:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120216155653804032[0;39m <==    Updates: 3
2021-11-29 01:36:05.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120216155653804032[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 01:36:34.675 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:36:34.784 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:36:35.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120216281424203776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:36:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120216281424203776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:36:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120216281424203776[0;39m ==> Parameters: 
2021-11-29 01:36:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120216281424203776[0;39m <==    Updates: 3
2021-11-29 01:36:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120216281424203776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 01:37:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120216386306969600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:37:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120216386306969600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:37:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120216386306969600[0;39m ==> Parameters: 
2021-11-29 01:37:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120216386306969600[0;39m <==    Updates: 0
2021-11-29 01:37:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120216386306969600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2021-11-29 01:37:04.682 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:37:04.789 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:37:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120216407270100992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:37:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120216407270100992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:37:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120216407270100992[0;39m ==> Parameters: 
2021-11-29 01:37:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120216407270100992[0;39m <==    Updates: 3
2021-11-29 01:37:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120216407270100992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 01:37:34.675 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:37:34.768 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:37:35.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120216533078249472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:37:35.001 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120216533078249472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:37:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120216533078249472[0;39m ==> Parameters: 
2021-11-29 01:37:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120216533078249472[0;39m <==    Updates: 3
2021-11-29 01:37:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120216533078249472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 01:38:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120216637986181120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:38:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120216637986181120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:38:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120216637986181120[0;39m ==> Parameters: 
2021-11-29 01:38:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120216637986181120[0;39m <==    Updates: 0
2021-11-29 01:38:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120216637986181120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 01:38:04.682 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:38:04.792 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:38:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120216658932535296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:38:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120216658932535296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:38:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120216658932535296[0;39m ==> Parameters: 
2021-11-29 01:38:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120216658932535296[0;39m <==    Updates: 3
2021-11-29 01:38:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120216658932535296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 01:38:34.662 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:38:34.786 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:38:35.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120216784736489472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:38:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120216784736489472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:38:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120216784736489472[0;39m ==> Parameters: 
2021-11-29 01:38:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120216784736489472[0;39m <==    Updates: 3
2021-11-29 01:38:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120216784736489472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 01:39:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120216889640226816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:39:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120216889640226816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:39:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120216889640226816[0;39m ==> Parameters: 
2021-11-29 01:39:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120216889640226816[0;39m <==    Updates: 0
2021-11-29 01:39:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120216889640226816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 01:39:04.686 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:39:04.796 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:39:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120216910615941120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:39:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120216910615941120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:39:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120216910615941120[0;39m ==> Parameters: 
2021-11-29 01:39:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120216910615941120[0;39m <==    Updates: 3
2021-11-29 01:39:05.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120216910615941120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 01:39:34.652 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:39:34.793 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:39:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120217036449255424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:39:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120217036449255424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:39:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120217036449255424[0;39m ==> Parameters: 
2021-11-29 01:39:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120217036449255424[0;39m <==    Updates: 3
2021-11-29 01:39:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120217036449255424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 01:40:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120217141306855424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:40:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120217141306855424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:40:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120217141306855424[0;39m ==> Parameters: 
2021-11-29 01:40:00.019 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120217141306855424[0;39m <==    Updates: 0
2021-11-29 01:40:00.019 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120217141306855424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 01:40:04.664 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:40:04.804 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:40:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120217162244820992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:40:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120217162244820992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:40:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120217162244820992[0;39m ==> Parameters: 
2021-11-29 01:40:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120217162244820992[0;39m <==    Updates: 3
2021-11-29 01:40:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120217162244820992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 01:40:34.649 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:40:34.775 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:40:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120217288073940992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:40:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120217288073940992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:40:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120217288073940992[0;39m ==> Parameters: 
2021-11-29 01:40:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120217288073940992[0;39m <==    Updates: 3
2021-11-29 01:40:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120217288073940992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 01:41:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120217392973484032[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:41:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120217392973484032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:41:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120217392973484032[0;39m ==> Parameters: 
2021-11-29 01:41:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120217392973484032[0;39m <==    Updates: 0
2021-11-29 01:41:00.018 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120217392973484032[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 01:41:04.668 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:41:04.778 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:41:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120217413919838208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:41:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120217413919838208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:41:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120217413919838208[0;39m ==> Parameters: 
2021-11-29 01:41:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120217413919838208[0;39m <==    Updates: 3
2021-11-29 01:41:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120217413919838208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 01:41:34.672 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:41:34.780 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:41:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120217539765735424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:41:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120217539765735424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:41:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120217539765735424[0;39m ==> Parameters: 
2021-11-29 01:41:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120217539765735424[0;39m <==    Updates: 3
2021-11-29 01:41:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120217539765735424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 01:42:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120217644610752512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:42:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120217644610752512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:42:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120217644610752512[0;39m ==> Parameters: 
2021-11-29 01:42:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120217644610752512[0;39m <==    Updates: 0
2021-11-29 01:42:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120217644610752512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 01:42:04.679 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:42:04.787 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:42:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120217665548718080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:42:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120217665548718080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:42:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120217665548718080[0;39m ==> Parameters: 
2021-11-29 01:42:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120217665548718080[0;39m <==    Updates: 3
2021-11-29 01:42:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120217665548718080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 01:42:34.687 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:42:34.779 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:42:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120217791419781120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:42:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120217791419781120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:42:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120217791419781120[0;39m ==> Parameters: 
2021-11-29 01:42:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120217791419781120[0;39m <==    Updates: 3
2021-11-29 01:42:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120217791419781120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 01:43:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120217896256409600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:43:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120217896256409600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:43:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120217896256409600[0;39m ==> Parameters: 
2021-11-29 01:43:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120217896256409600[0;39m <==    Updates: 0
2021-11-29 01:43:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120217896256409600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 01:43:04.666 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:43:04.792 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:43:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120217917227929600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:43:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120217917227929600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:43:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120217917227929600[0;39m ==> Parameters: 
2021-11-29 01:43:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120217917227929600[0;39m <==    Updates: 3
2021-11-29 01:43:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120217917227929600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 01:43:34.686 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:43:34.796 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:43:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120218043073826816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:43:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120218043073826816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:43:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120218043073826816[0;39m ==> Parameters: 
2021-11-29 01:43:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120218043073826816[0;39m <==    Updates: 3
2021-11-29 01:43:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120218043073826816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 01:44:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120218147952398336[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:44:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120218147952398336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:44:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120218147952398336[0;39m ==> Parameters: 
2021-11-29 01:44:00.020 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120218147952398336[0;39m <==    Updates: 0
2021-11-29 01:44:00.020 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120218147952398336[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 01:44:04.688 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:44:04.798 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:44:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120218168907141120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:44:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120218168907141120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:44:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120218168907141120[0;39m ==> Parameters: 
2021-11-29 01:44:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120218168907141120[0;39m <==    Updates: 3
2021-11-29 01:44:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120218168907141120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 01:44:34.685 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:44:34.792 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:44:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120218294723678208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:44:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120218294723678208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:44:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120218294723678208[0;39m ==> Parameters: 
2021-11-29 01:44:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120218294723678208[0;39m <==    Updates: 3
2021-11-29 01:44:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120218294723678208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 01:45:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120218399602249728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:45:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120218399602249728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:45:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120218399602249728[0;39m ==> Parameters: 
2021-11-29 01:45:00.020 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120218399602249728[0;39m <==    Updates: 0
2021-11-29 01:45:00.020 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120218399602249728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 01:45:04.649 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:45:04.788 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:45:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120218420536020992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:45:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120218420536020992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:45:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120218420536020992[0;39m ==> Parameters: 
2021-11-29 01:45:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120218420536020992[0;39m <==    Updates: 3
2021-11-29 01:45:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120218420536020992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 01:45:34.678 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:45:34.785 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:45:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120218546352558080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:45:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120218546352558080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:45:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120218546352558080[0;39m ==> Parameters: 
2021-11-29 01:45:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120218546352558080[0;39m <==    Updates: 3
2021-11-29 01:45:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120218546352558080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 01:46:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120218651214352384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:46:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120218651214352384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:46:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120218651214352384[0;39m ==> Parameters: 
2021-11-29 01:46:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120218651214352384[0;39m <==    Updates: 0
2021-11-29 01:46:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120218651214352384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 01:46:04.667 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:46:04.775 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:46:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120218672202649600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:46:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120218672202649600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:46:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120218672202649600[0;39m ==> Parameters: 
2021-11-29 01:46:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120218672202649600[0;39m <==    Updates: 3
2021-11-29 01:46:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120218672202649600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 01:46:34.697 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:46:34.807 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:46:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120218798044352512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:46:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120218798044352512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:46:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120218798044352512[0;39m ==> Parameters: 
2021-11-29 01:46:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120218798044352512[0;39m <==    Updates: 3
2021-11-29 01:46:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120218798044352512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 01:47:00.003 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120218902868398080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:47:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120218902868398080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:47:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120218902868398080[0;39m ==> Parameters: 
2021-11-29 01:47:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120218902868398080[0;39m <==    Updates: 0
2021-11-29 01:47:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120218902868398080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 01:47:04.669 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:47:04.762 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:47:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120218923869278208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:47:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120218923869278208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:47:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120218923869278208[0;39m ==> Parameters: 
2021-11-29 01:47:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120218923869278208[0;39m <==    Updates: 3
2021-11-29 01:47:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120218923869278208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 01:47:34.679 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:47:34.773 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:47:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120219049673232384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:47:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120219049673232384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:47:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120219049673232384[0;39m ==> Parameters: 
2021-11-29 01:47:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120219049673232384[0;39m <==    Updates: 3
2021-11-29 01:47:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120219049673232384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 01:48:00.002 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120219154522443776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:48:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120219154522443776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:48:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120219154522443776[0;39m ==> Parameters: 
2021-11-29 01:48:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120219154522443776[0;39m <==    Updates: 0
2021-11-29 01:48:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120219154522443776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 01:48:04.690 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:48:04.798 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:48:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120219175548489728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:48:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120219175548489728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:48:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120219175548489728[0;39m ==> Parameters: 
2021-11-29 01:48:05.019 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120219175548489728[0;39m <==    Updates: 3
2021-11-29 01:48:05.020 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120219175548489728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 01:48:34.669 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:48:34.794 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:48:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120219301365026816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:48:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120219301365026816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:48:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120219301365026816[0;39m ==> Parameters: 
2021-11-29 01:48:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120219301365026816[0;39m <==    Updates: 3
2021-11-29 01:48:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120219301365026816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 01:49:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120219406189072384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:49:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120219406189072384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:49:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120219406189072384[0;39m ==> Parameters: 
2021-11-29 01:49:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120219406189072384[0;39m <==    Updates: 0
2021-11-29 01:49:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120219406189072384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 01:49:04.656 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:49:04.780 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:49:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120219427198341120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:49:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120219427198341120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:49:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120219427198341120[0;39m ==> Parameters: 
2021-11-29 01:49:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120219427198341120[0;39m <==    Updates: 3
2021-11-29 01:49:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120219427198341120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 01:49:34.686 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:49:34.797 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:49:35.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120219552981323776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:49:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120219552981323776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:49:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120219552981323776[0;39m ==> Parameters: 
2021-11-29 01:49:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120219552981323776[0;39m <==    Updates: 3
2021-11-29 01:49:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120219552981323776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 01:50:00.002 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120219657838923776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:50:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120219657838923776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:50:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120219657838923776[0;39m ==> Parameters: 
2021-11-29 01:50:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120219657838923776[0;39m <==    Updates: 0
2021-11-29 01:50:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120219657838923776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 01:50:04.662 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:50:04.770 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:50:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120219678869164032[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:50:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120219678869164032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:50:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120219678869164032[0;39m ==> Parameters: 
2021-11-29 01:50:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120219678869164032[0;39m <==    Updates: 3
2021-11-29 01:50:05.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120219678869164032[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 01:50:34.668 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:50:34.808 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:50:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120219804685701120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:50:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120219804685701120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:50:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120219804685701120[0;39m ==> Parameters: 
2021-11-29 01:50:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120219804685701120[0;39m <==    Updates: 3
2021-11-29 01:50:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120219804685701120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 01:51:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120219909551689728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:51:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120219909551689728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:51:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120219909551689728[0;39m ==> Parameters: 
2021-11-29 01:51:00.021 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120219909551689728[0;39m <==    Updates: 0
2021-11-29 01:51:00.022 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120219909551689728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 01:51:04.678 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:51:04.803 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:51:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120219930481266688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:51:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120219930481266688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:51:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120219930481266688[0;39m ==> Parameters: 
2021-11-29 01:51:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120219930481266688[0;39m <==    Updates: 3
2021-11-29 01:51:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120219930481266688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 01:51:34.689 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:51:34.792 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:51:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120220056339746816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:51:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120220056339746816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:51:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120220056339746816[0;39m ==> Parameters: 
2021-11-29 01:51:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120220056339746816[0;39m <==    Updates: 3
2021-11-29 01:51:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120220056339746816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 01:52:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120220161188958208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:52:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120220161188958208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:52:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120220161188958208[0;39m ==> Parameters: 
2021-11-29 01:52:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120220161188958208[0;39m <==    Updates: 0
2021-11-29 01:52:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120220161188958208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 01:52:04.674 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:52:04.798 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:52:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120220182185644032[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:52:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120220182185644032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:52:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120220182185644032[0;39m ==> Parameters: 
2021-11-29 01:52:05.019 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120220182185644032[0;39m <==    Updates: 3
2021-11-29 01:52:05.019 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120220182185644032[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 01:52:34.673 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:52:34.798 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:52:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120220308006375424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:52:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120220308006375424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:52:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120220308006375424[0;39m ==> Parameters: 
2021-11-29 01:52:35.019 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120220308006375424[0;39m <==    Updates: 3
2021-11-29 01:52:35.020 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120220308006375424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶6æ¯«ç§’
2021-11-29 01:53:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120220412868169728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:53:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120220412868169728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:53:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120220412868169728[0;39m ==> Parameters: 
2021-11-29 01:53:00.019 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120220412868169728[0;39m <==    Updates: 0
2021-11-29 01:53:00.019 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120220412868169728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 01:53:04.676 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:53:04.786 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:53:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120220433793552384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:53:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120220433793552384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:53:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120220433793552384[0;39m ==> Parameters: 
2021-11-29 01:53:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120220433793552384[0;39m <==    Updates: 3
2021-11-29 01:53:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120220433793552384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 01:53:34.678 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:53:34.786 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:53:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120220559622672384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:53:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120220559622672384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:53:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120220559622672384[0;39m ==> Parameters: 
2021-11-29 01:53:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120220559622672384[0;39m <==    Updates: 3
2021-11-29 01:53:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120220559622672384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 01:54:00.002 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120220664471883776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:54:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120220664471883776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:54:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120220664471883776[0;39m ==> Parameters: 
2021-11-29 01:54:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120220664471883776[0;39m <==    Updates: 0
2021-11-29 01:54:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120220664471883776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 01:54:04.672 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:54:04.797 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:54:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120220685493735424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:54:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120220685493735424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:54:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120220685493735424[0;39m ==> Parameters: 
2021-11-29 01:54:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120220685493735424[0;39m <==    Updates: 3
2021-11-29 01:54:05.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120220685493735424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 01:54:34.686 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:54:34.812 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:54:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120220811322855424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:54:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120220811322855424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:54:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120220811322855424[0;39m ==> Parameters: 
2021-11-29 01:54:35.019 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120220811322855424[0;39m <==    Updates: 3
2021-11-29 01:54:35.019 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120220811322855424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 01:55:00.003 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120220916134318080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:55:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120220916134318080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:55:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120220916134318080[0;39m ==> Parameters: 
2021-11-29 01:55:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120220916134318080[0;39m <==    Updates: 0
2021-11-29 01:55:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120220916134318080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 01:55:04.659 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:55:04.768 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:55:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120220937143586816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:55:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120220937143586816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:55:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120220937143586816[0;39m ==> Parameters: 
2021-11-29 01:55:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120220937143586816[0;39m <==    Updates: 3
2021-11-29 01:55:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120220937143586816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 01:55:34.659 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:55:34.769 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:55:35.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120221062930763776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:55:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120221062930763776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:55:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120221062930763776[0;39m ==> Parameters: 
2021-11-29 01:55:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120221062930763776[0;39m <==    Updates: 3
2021-11-29 01:55:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120221062930763776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 01:56:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120221167796752384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:56:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120221167796752384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:56:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120221167796752384[0;39m ==> Parameters: 
2021-11-29 01:56:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120221167796752384[0;39m <==    Updates: 0
2021-11-29 01:56:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120221167796752384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 01:56:04.685 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:56:04.806 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:56:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120221188785049600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:56:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120221188785049600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:56:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120221188785049600[0;39m ==> Parameters: 
2021-11-29 01:56:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120221188785049600[0;39m <==    Updates: 3
2021-11-29 01:56:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120221188785049600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 01:56:34.679 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:56:34.789 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:56:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120221314601586688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:56:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120221314601586688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:56:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120221314601586688[0;39m ==> Parameters: 
2021-11-29 01:56:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120221314601586688[0;39m <==    Updates: 3
2021-11-29 01:56:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120221314601586688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 01:57:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120221419463380992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:57:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120221419463380992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:57:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120221419463380992[0;39m ==> Parameters: 
2021-11-29 01:57:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120221419463380992[0;39m <==    Updates: 0
2021-11-29 01:57:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120221419463380992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 01:57:04.689 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:57:04.812 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:57:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120221440451678208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:57:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120221440451678208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:57:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120221440451678208[0;39m ==> Parameters: 
2021-11-29 01:57:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120221440451678208[0;39m <==    Updates: 3
2021-11-29 01:57:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120221440451678208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 01:57:34.672 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:57:34.781 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:57:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120221566293381120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:57:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120221566293381120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:57:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120221566293381120[0;39m ==> Parameters: 
2021-11-29 01:57:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120221566293381120[0;39m <==    Updates: 3
2021-11-29 01:57:35.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120221566293381120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 01:58:00.003 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120221671109038080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:58:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120221671109038080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:58:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120221671109038080[0;39m ==> Parameters: 
2021-11-29 01:58:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120221671109038080[0;39m <==    Updates: 0
2021-11-29 01:58:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120221671109038080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 01:58:04.673 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:58:04.796 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:58:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120221692118306816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:58:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120221692118306816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:58:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120221692118306816[0;39m ==> Parameters: 
2021-11-29 01:58:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120221692118306816[0;39m <==    Updates: 3
2021-11-29 01:58:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120221692118306816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 01:58:34.709 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:58:34.800 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:58:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120221817913872384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:58:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120221817913872384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:58:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120221817913872384[0;39m ==> Parameters: 
2021-11-29 01:58:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120221817913872384[0;39m <==    Updates: 3
2021-11-29 01:58:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120221817913872384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 01:59:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120221922779860992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 01:59:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120221922779860992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 01:59:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120221922779860992[0;39m ==> Parameters: 
2021-11-29 01:59:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120221922779860992[0;39m <==    Updates: 0
2021-11-29 01:59:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120221922779860992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 01:59:04.699 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:59:04.806 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:59:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120221943763963904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:59:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120221943763963904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:59:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120221943763963904[0;39m ==> Parameters: 
2021-11-29 01:59:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120221943763963904[0;39m <==    Updates: 3
2021-11-29 01:59:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120221943763963904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 01:59:34.678 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:59:34.788 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 01:59:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120222069576306688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 01:59:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120222069576306688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 01:59:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120222069576306688[0;39m ==> Parameters: 
2021-11-29 01:59:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120222069576306688[0;39m <==    Updates: 3
2021-11-29 01:59:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120222069576306688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 02:00:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120222174450683904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:00:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120222174450683904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:00:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120222174450683904[0;39m ==> Parameters: 
2021-11-29 02:00:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120222174450683904[0;39m <==    Updates: 0
2021-11-29 02:00:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120222174450683904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 02:00:04.684 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:00:04.792 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:00:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120222195418009600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:00:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120222195418009600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:00:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120222195418009600[0;39m ==> Parameters: 
2021-11-29 02:00:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120222195418009600[0;39m <==    Updates: 3
2021-11-29 02:00:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120222195418009600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 02:00:34.681 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:00:34.790 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:00:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120222321251323904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:00:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120222321251323904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:00:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120222321251323904[0;39m ==> Parameters: 
2021-11-29 02:00:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120222321251323904[0;39m <==    Updates: 3
2021-11-29 02:00:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120222321251323904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 02:01:00.002 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120222426079563776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:01:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120222426079563776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:01:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120222426079563776[0;39m ==> Parameters: 
2021-11-29 02:01:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120222426079563776[0;39m <==    Updates: 0
2021-11-29 02:01:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120222426079563776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 02:01:04.689 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:01:04.797 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:01:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120222447097221120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:01:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120222447097221120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:01:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120222447097221120[0;39m ==> Parameters: 
2021-11-29 02:01:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120222447097221120[0;39m <==    Updates: 3
2021-11-29 02:01:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120222447097221120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 02:01:34.696 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:01:34.805 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:01:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120222572896980992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:01:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120222572896980992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:01:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120222572896980992[0;39m ==> Parameters: 
2021-11-29 02:01:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120222572896980992[0;39m <==    Updates: 3
2021-11-29 02:01:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120222572896980992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 02:02:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120222677767163904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:02:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120222677767163904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:02:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120222677767163904[0;39m ==> Parameters: 
2021-11-29 02:02:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120222677767163904[0;39m <==    Updates: 0
2021-11-29 02:02:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120222677767163904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 02:02:04.693 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:02:04.800 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:02:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120222698768044032[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:02:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120222698768044032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:02:05.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120222698768044032[0;39m ==> Parameters: 
2021-11-29 02:02:05.020 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120222698768044032[0;39m <==    Updates: 3
2021-11-29 02:02:05.020 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120222698768044032[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 02:02:34.703 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:02:34.811 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:02:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120222824588775424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:02:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120222824588775424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:02:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120222824588775424[0;39m ==> Parameters: 
2021-11-29 02:02:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120222824588775424[0;39m <==    Updates: 3
2021-11-29 02:02:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120222824588775424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 02:03:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120222929425403904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:03:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120222929425403904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:03:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120222929425403904[0;39m ==> Parameters: 
2021-11-29 02:03:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120222929425403904[0;39m <==    Updates: 0
2021-11-29 02:03:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120222929425403904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 02:03:04.688 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:03:04.798 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:03:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120222950413701120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:03:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120222950413701120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:03:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120222950413701120[0;39m ==> Parameters: 
2021-11-29 02:03:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120222950413701120[0;39m <==    Updates: 3
2021-11-29 02:03:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120222950413701120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 02:03:34.693 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:03:34.815 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:03:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120223076200878080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:03:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120223076200878080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:03:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120223076200878080[0;39m ==> Parameters: 
2021-11-29 02:03:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120223076200878080[0;39m <==    Updates: 3
2021-11-29 02:03:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120223076200878080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 02:04:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120223181104615424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:04:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120223181104615424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:04:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120223181104615424[0;39m ==> Parameters: 
2021-11-29 02:04:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120223181104615424[0;39m <==    Updates: 0
2021-11-29 02:04:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120223181104615424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 02:04:04.684 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:04:04.808 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:04:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120223202055163904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:04:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120223202055163904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:04:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120223202055163904[0;39m ==> Parameters: 
2021-11-29 02:04:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120223202055163904[0;39m <==    Updates: 3
2021-11-29 02:04:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120223202055163904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶6æ¯«ç§’
2021-11-29 02:04:34.704 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:04:34.812 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:04:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120223327913644032[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:04:35.019 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120223327913644032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:04:35.019 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120223327913644032[0;39m ==> Parameters: 
2021-11-29 02:04:35.022 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120223327913644032[0;39m <==    Updates: 3
2021-11-29 02:04:35.022 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120223327913644032[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶6æ¯«ç§’
2021-11-29 02:05:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120223432750272512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:05:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120223432750272512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:05:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120223432750272512[0;39m ==> Parameters: 
2021-11-29 02:05:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120223432750272512[0;39m <==    Updates: 0
2021-11-29 02:05:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120223432750272512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 02:05:04.683 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:05:04.790 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:05:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120223453688238080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:05:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120223453688238080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:05:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120223453688238080[0;39m ==> Parameters: 
2021-11-29 02:05:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120223453688238080[0;39m <==    Updates: 3
2021-11-29 02:05:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120223453688238080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 02:05:34.676 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:05:34.803 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:05:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120223579517358080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:05:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120223579517358080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:05:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120223579517358080[0;39m ==> Parameters: 
2021-11-29 02:05:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120223579517358080[0;39m <==    Updates: 3
2021-11-29 02:05:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120223579517358080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 02:06:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120223684387540992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:06:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120223684387540992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:06:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120223684387540992[0;39m ==> Parameters: 
2021-11-29 02:06:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120223684387540992[0;39m <==    Updates: 0
2021-11-29 02:06:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120223684387540992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 02:06:04.684 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:06:04.808 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:06:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120223705375838208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:06:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120223705375838208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:06:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120223705375838208[0;39m ==> Parameters: 
2021-11-29 02:06:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120223705375838208[0;39m <==    Updates: 3
2021-11-29 02:06:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120223705375838208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 02:06:34.685 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:06:34.810 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:06:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120223831217541120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:06:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120223831217541120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:06:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120223831217541120[0;39m ==> Parameters: 
2021-11-29 02:06:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120223831217541120[0;39m <==    Updates: 3
2021-11-29 02:06:35.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120223831217541120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 02:07:00.002 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120223936029003776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:07:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120223936029003776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:07:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120223936029003776[0;39m ==> Parameters: 
2021-11-29 02:07:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120223936029003776[0;39m <==    Updates: 0
2021-11-29 02:07:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120223936029003776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 02:07:04.683 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:07:04.793 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:07:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120223957029883904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:07:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120223957029883904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:07:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120223957029883904[0;39m ==> Parameters: 
2021-11-29 02:07:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120223957029883904[0;39m <==    Updates: 3
2021-11-29 02:07:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120223957029883904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 02:07:34.678 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:07:34.788 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:07:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120224082850615296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:07:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120224082850615296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:07:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120224082850615296[0;39m ==> Parameters: 
2021-11-29 02:07:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120224082850615296[0;39m <==    Updates: 3
2021-11-29 02:07:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120224082850615296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 02:08:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120224187720798208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:08:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120224187720798208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:08:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120224187720798208[0;39m ==> Parameters: 
2021-11-29 02:08:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120224187720798208[0;39m <==    Updates: 0
2021-11-29 02:08:00.018 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120224187720798208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 02:08:04.702 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:08:04.812 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:08:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120224208700706816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:08:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120224208700706816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:08:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120224208700706816[0;39m ==> Parameters: 
2021-11-29 02:08:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120224208700706816[0;39m <==    Updates: 3
2021-11-29 02:08:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120224208700706816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 02:08:34.685 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:08:34.811 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:08:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120224334529826816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:08:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120224334529826816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:08:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120224334529826816[0;39m ==> Parameters: 
2021-11-29 02:08:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120224334529826816[0;39m <==    Updates: 3
2021-11-29 02:08:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120224334529826816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 02:09:00.003 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120224439349678080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:09:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120224439349678080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:09:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120224439349678080[0;39m ==> Parameters: 
2021-11-29 02:09:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120224439349678080[0;39m <==    Updates: 0
2021-11-29 02:09:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120224439349678080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 02:09:04.685 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:09:04.795 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:09:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120224460363141120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:09:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120224460363141120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:09:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120224460363141120[0;39m ==> Parameters: 
2021-11-29 02:09:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120224460363141120[0;39m <==    Updates: 3
2021-11-29 02:09:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120224460363141120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 02:09:34.685 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:09:34.795 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:09:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120224586200649728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:09:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120224586200649728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:09:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120224586200649728[0;39m ==> Parameters: 
2021-11-29 02:09:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120224586200649728[0;39m <==    Updates: 3
2021-11-29 02:09:35.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120224586200649728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 02:10:00.003 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120224691007918080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:10:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120224691007918080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:10:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120224691007918080[0;39m ==> Parameters: 
2021-11-29 02:10:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120224691007918080[0;39m <==    Updates: 0
2021-11-29 02:10:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120224691007918080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 02:10:04.676 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:10:04.818 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:10:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120224711979438080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:10:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120224711979438080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:10:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120224711979438080[0;39m ==> Parameters: 
2021-11-29 02:10:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120224711979438080[0;39m <==    Updates: 3
2021-11-29 02:10:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120224711979438080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 02:10:34.666 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:10:34.807 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:10:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120224837829529600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:10:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120224837829529600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:10:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120224837829529600[0;39m ==> Parameters: 
2021-11-29 02:10:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120224837829529600[0;39m <==    Updates: 3
2021-11-29 02:10:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120224837829529600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 02:11:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120224942674546688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:11:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120224942674546688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:11:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120224942674546688[0;39m ==> Parameters: 
2021-11-29 02:11:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120224942674546688[0;39m <==    Updates: 0
2021-11-29 02:11:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120224942674546688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 02:11:04.688 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:11:04.812 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:11:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120224963679621120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:11:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120224963679621120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:11:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120224963679621120[0;39m ==> Parameters: 
2021-11-29 02:11:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120224963679621120[0;39m <==    Updates: 3
2021-11-29 02:11:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120224963679621120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 02:11:34.671 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:11:34.796 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:11:35.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120225089458409472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:11:35.001 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120225089458409472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:11:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120225089458409472[0;39m ==> Parameters: 
2021-11-29 02:11:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120225089458409472[0;39m <==    Updates: 3
2021-11-29 02:11:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120225089458409472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 02:12:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120225194341175296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:12:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120225194341175296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:12:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120225194341175296[0;39m ==> Parameters: 
2021-11-29 02:12:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120225194341175296[0;39m <==    Updates: 0
2021-11-29 02:12:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120225194341175296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 02:12:04.695 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:12:04.819 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:12:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120225215295918080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:12:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120225215295918080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:12:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120225215295918080[0;39m ==> Parameters: 
2021-11-29 02:12:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120225215295918080[0;39m <==    Updates: 3
2021-11-29 02:12:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120225215295918080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 02:12:34.670 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:12:34.782 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:12:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120225341175369728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:12:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120225341175369728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:12:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120225341175369728[0;39m ==> Parameters: 
2021-11-29 02:12:35.019 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120225341175369728[0;39m <==    Updates: 3
2021-11-29 02:12:35.019 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120225341175369728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 02:13:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120225445986832384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:13:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120225445986832384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:13:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120225445986832384[0;39m ==> Parameters: 
2021-11-29 02:13:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120225445986832384[0;39m <==    Updates: 0
2021-11-29 02:13:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120225445986832384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 02:13:04.700 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:13:04.809 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:13:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120225466983518208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:13:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120225466983518208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:13:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120225466983518208[0;39m ==> Parameters: 
2021-11-29 02:13:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120225466983518208[0;39m <==    Updates: 3
2021-11-29 02:13:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120225466983518208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 02:13:34.701 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:13:34.794 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:13:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120225592816832512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:13:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120225592816832512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:13:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120225592816832512[0;39m ==> Parameters: 
2021-11-29 02:13:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120225592816832512[0;39m <==    Updates: 3
2021-11-29 02:13:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120225592816832512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 02:14:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120225697687015424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:14:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120225697687015424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:14:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120225697687015424[0;39m ==> Parameters: 
2021-11-29 02:14:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120225697687015424[0;39m <==    Updates: 0
2021-11-29 02:14:00.018 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120225697687015424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 02:14:04.678 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:14:04.801 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:14:05.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120225718604009472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:14:05.001 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120225718604009472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:14:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120225718604009472[0;39m ==> Parameters: 
2021-11-29 02:14:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120225718604009472[0;39m <==    Updates: 3
2021-11-29 02:14:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120225718604009472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 02:14:34.702 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:14:34.812 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:14:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120225844491849728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:14:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120225844491849728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:14:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120225844491849728[0;39m ==> Parameters: 
2021-11-29 02:14:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120225844491849728[0;39m <==    Updates: 3
2021-11-29 02:14:35.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120225844491849728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 02:15:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120225949324283904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:15:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120225949324283904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:15:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120225949324283904[0;39m ==> Parameters: 
2021-11-29 02:15:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120225949324283904[0;39m <==    Updates: 0
2021-11-29 02:15:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120225949324283904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 02:15:04.683 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:15:04.791 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:15:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120225970295803904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:15:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120225970295803904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:15:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120225970295803904[0;39m ==> Parameters: 
2021-11-29 02:15:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120225970295803904[0;39m <==    Updates: 3
2021-11-29 02:15:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120225970295803904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 02:15:34.672 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:15:34.798 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:15:35.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120226096095563776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:15:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120226096095563776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:15:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120226096095563776[0;39m ==> Parameters: 
2021-11-29 02:15:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120226096095563776[0;39m <==    Updates: 3
2021-11-29 02:15:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120226096095563776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 02:16:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120226201007689728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:16:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120226201007689728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:16:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120226201007689728[0;39m ==> Parameters: 
2021-11-29 02:16:00.019 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120226201007689728[0;39m <==    Updates: 0
2021-11-29 02:16:00.019 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120226201007689728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 02:16:04.708 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:16:04.816 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:16:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120226221983404032[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:16:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120226221983404032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:16:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120226221983404032[0;39m ==> Parameters: 
2021-11-29 02:16:05.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120226221983404032[0;39m <==    Updates: 3
2021-11-29 02:16:05.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120226221983404032[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 02:16:34.681 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:16:34.791 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:16:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120226347778969600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:16:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120226347778969600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:16:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120226347778969600[0;39m ==> Parameters: 
2021-11-29 02:16:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120226347778969600[0;39m <==    Updates: 3
2021-11-29 02:16:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120226347778969600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 02:17:00.003 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120226452615598080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:17:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120226452615598080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:17:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120226452615598080[0;39m ==> Parameters: 
2021-11-29 02:17:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120226452615598080[0;39m <==    Updates: 0
2021-11-29 02:17:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120226452615598080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 02:17:04.682 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:17:04.805 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:17:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120226473595506688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:17:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120226473595506688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:17:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120226473595506688[0;39m ==> Parameters: 
2021-11-29 02:17:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120226473595506688[0;39m <==    Updates: 3
2021-11-29 02:17:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120226473595506688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 02:17:34.711 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:17:34.822 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:17:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120226599449792512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:17:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120226599449792512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:17:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120226599449792512[0;39m ==> Parameters: 
2021-11-29 02:17:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120226599449792512[0;39m <==    Updates: 3
2021-11-29 02:17:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120226599449792512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 02:18:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120226704286420992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:18:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120226704286420992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:18:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120226704286420992[0;39m ==> Parameters: 
2021-11-29 02:18:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120226704286420992[0;39m <==    Updates: 0
2021-11-29 02:18:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120226704286420992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 02:18:04.683 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:18:04.809 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:18:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120226725262135296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:18:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120226725262135296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:18:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120226725262135296[0;39m ==> Parameters: 
2021-11-29 02:18:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120226725262135296[0;39m <==    Updates: 3
2021-11-29 02:18:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120226725262135296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 02:18:34.689 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:18:34.813 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:18:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120226851112226816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:18:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120226851112226816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:18:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120226851112226816[0;39m ==> Parameters: 
2021-11-29 02:18:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120226851112226816[0;39m <==    Updates: 3
2021-11-29 02:18:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120226851112226816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 02:19:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120226955948855296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:19:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120226955948855296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:19:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120226955948855296[0;39m ==> Parameters: 
2021-11-29 02:19:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120226955948855296[0;39m <==    Updates: 0
2021-11-29 02:19:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120226955948855296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 02:19:04.700 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:19:04.809 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:19:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120226976932958208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:19:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120226976932958208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:19:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120226976932958208[0;39m ==> Parameters: 
2021-11-29 02:19:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120226976932958208[0;39m <==    Updates: 3
2021-11-29 02:19:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120226976932958208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 02:19:34.686 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:19:34.796 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:19:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120227102778855424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:19:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120227102778855424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:19:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120227102778855424[0;39m ==> Parameters: 
2021-11-29 02:19:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120227102778855424[0;39m <==    Updates: 3
2021-11-29 02:19:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120227102778855424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 02:20:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120227207636455424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:20:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120227207636455424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:20:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120227207636455424[0;39m ==> Parameters: 
2021-11-29 02:20:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120227207636455424[0;39m <==    Updates: 0
2021-11-29 02:20:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120227207636455424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 02:20:04.699 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:20:04.809 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:20:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120227228591198208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:20:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120227228591198208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:20:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120227228591198208[0;39m ==> Parameters: 
2021-11-29 02:20:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120227228591198208[0;39m <==    Updates: 3
2021-11-29 02:20:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120227228591198208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 02:20:34.717 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:20:34.810 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:20:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120227354428706816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:20:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120227354428706816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:20:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120227354428706816[0;39m ==> Parameters: 
2021-11-29 02:20:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120227354428706816[0;39m <==    Updates: 3
2021-11-29 02:20:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120227354428706816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 02:21:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120227459265335296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:21:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120227459265335296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:21:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120227459265335296[0;39m ==> Parameters: 
2021-11-29 02:21:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120227459265335296[0;39m <==    Updates: 0
2021-11-29 02:21:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120227459265335296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 02:21:04.671 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:21:04.812 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:21:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120227480257826816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:21:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120227480257826816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:21:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120227480257826816[0;39m ==> Parameters: 
2021-11-29 02:21:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120227480257826816[0;39m <==    Updates: 3
2021-11-29 02:21:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120227480257826816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 02:21:34.682 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:21:34.791 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:21:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120227606078558208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:21:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120227606078558208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:21:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120227606078558208[0;39m ==> Parameters: 
2021-11-29 02:21:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120227606078558208[0;39m <==    Updates: 3
2021-11-29 02:21:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120227606078558208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 02:22:00.002 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120227710902603776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:22:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120227710902603776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:22:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120227710902603776[0;39m ==> Parameters: 
2021-11-29 02:22:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120227710902603776[0;39m <==    Updates: 0
2021-11-29 02:22:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120227710902603776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 02:22:04.690 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:22:04.814 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:22:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120227731932844032[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:22:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120227731932844032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:22:05.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120227731932844032[0;39m ==> Parameters: 
2021-11-29 02:22:05.019 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120227731932844032[0;39m <==    Updates: 3
2021-11-29 02:22:05.020 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120227731932844032[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 02:22:34.693 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:22:34.802 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:22:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120227857711632384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:22:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120227857711632384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:22:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120227857711632384[0;39m ==> Parameters: 
2021-11-29 02:22:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120227857711632384[0;39m <==    Updates: 3
2021-11-29 02:22:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120227857711632384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 02:23:00.002 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120227962560843776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:23:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120227962560843776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:23:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120227962560843776[0;39m ==> Parameters: 
2021-11-29 02:23:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120227962560843776[0;39m <==    Updates: 0
2021-11-29 02:23:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120227962560843776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 02:23:04.691 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:23:04.814 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:23:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120227983578501120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:23:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120227983578501120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:23:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120227983578501120[0;39m ==> Parameters: 
2021-11-29 02:23:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120227983578501120[0;39m <==    Updates: 3
2021-11-29 02:23:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120227983578501120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 02:23:34.677 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:23:34.770 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:23:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120228109369872384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:23:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120228109369872384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:23:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120228109369872384[0;39m ==> Parameters: 
2021-11-29 02:23:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120228109369872384[0;39m <==    Updates: 3
2021-11-29 02:23:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120228109369872384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 02:24:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120228214281998336[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:24:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120228214281998336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:24:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120228214281998336[0;39m ==> Parameters: 
2021-11-29 02:24:00.019 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120228214281998336[0;39m <==    Updates: 0
2021-11-29 02:24:00.020 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120228214281998336[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 02:24:04.703 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:24:04.827 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:24:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120228235228352512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:24:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120228235228352512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:24:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120228235228352512[0;39m ==> Parameters: 
2021-11-29 02:24:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120228235228352512[0;39m <==    Updates: 3
2021-11-29 02:24:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120228235228352512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 02:24:34.686 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:24:34.811 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:24:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120228361074249728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:24:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120228361074249728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:24:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120228361074249728[0;39m ==> Parameters: 
2021-11-29 02:24:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120228361074249728[0;39m <==    Updates: 3
2021-11-29 02:24:35.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120228361074249728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 02:25:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120228465902489600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:25:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120228465902489600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:25:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120228465902489600[0;39m ==> Parameters: 
2021-11-29 02:25:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120228465902489600[0;39m <==    Updates: 0
2021-11-29 02:25:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120228465902489600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 02:25:04.665 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:25:04.803 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:25:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120228486857232384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:25:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120228486857232384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:25:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120228486857232384[0;39m ==> Parameters: 
2021-11-29 02:25:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120228486857232384[0;39m <==    Updates: 3
2021-11-29 02:25:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120228486857232384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 02:25:34.698 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:25:34.821 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:25:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120228612698935296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:25:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120228612698935296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:25:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120228612698935296[0;39m ==> Parameters: 
2021-11-29 02:25:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120228612698935296[0;39m <==    Updates: 3
2021-11-29 02:25:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120228612698935296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 02:26:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120228717564923904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:26:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120228717564923904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:26:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120228717564923904[0;39m ==> Parameters: 
2021-11-29 02:26:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120228717564923904[0;39m <==    Updates: 0
2021-11-29 02:26:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120228717564923904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 02:26:04.699 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:26:04.823 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:26:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120228738536443904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:26:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120228738536443904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:26:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120228738536443904[0;39m ==> Parameters: 
2021-11-29 02:26:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120228738536443904[0;39m <==    Updates: 3
2021-11-29 02:26:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120228738536443904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 02:26:34.696 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:26:34.804 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:26:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120228864373952512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:26:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120228864373952512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:26:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120228864373952512[0;39m ==> Parameters: 
2021-11-29 02:26:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120228864373952512[0;39m <==    Updates: 3
2021-11-29 02:26:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120228864373952512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 02:27:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120228969223163904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:27:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120228969223163904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:27:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120228969223163904[0;39m ==> Parameters: 
2021-11-29 02:27:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120228969223163904[0;39m <==    Updates: 0
2021-11-29 02:27:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120228969223163904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 02:27:04.697 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:27:04.804 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:27:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120228990173712384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:27:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120228990173712384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:27:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120228990173712384[0;39m ==> Parameters: 
2021-11-29 02:27:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120228990173712384[0;39m <==    Updates: 3
2021-11-29 02:27:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120228990173712384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 02:27:34.688 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:27:34.795 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:27:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120229116040581120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:27:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120229116040581120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:27:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120229116040581120[0;39m ==> Parameters: 
2021-11-29 02:27:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120229116040581120[0;39m <==    Updates: 3
2021-11-29 02:27:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120229116040581120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 02:28:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120229220889792512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:28:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120229220889792512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:28:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120229220889792512[0;39m ==> Parameters: 
2021-11-29 02:28:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120229220889792512[0;39m <==    Updates: 0
2021-11-29 02:28:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120229220889792512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 02:28:04.709 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:28:04.815 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:28:05.017 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120229241886478336[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:28:05.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120229241886478336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:28:05.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120229241886478336[0;39m ==> Parameters: 
2021-11-29 02:28:05.021 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120229241886478336[0;39m <==    Updates: 3
2021-11-29 02:28:05.022 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120229241886478336[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 02:28:34.713 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:28:34.808 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:28:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120229367677849600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:28:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120229367677849600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:28:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120229367677849600[0;39m ==> Parameters: 
2021-11-29 02:28:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120229367677849600[0;39m <==    Updates: 3
2021-11-29 02:28:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120229367677849600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 02:29:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120229472518672384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:29:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120229472518672384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:29:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120229472518672384[0;39m ==> Parameters: 
2021-11-29 02:29:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120229472518672384[0;39m <==    Updates: 0
2021-11-29 02:29:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120229472518672384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 02:29:04.704 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:29:04.812 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:29:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120229493527941120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:29:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120229493527941120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:29:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120229493527941120[0;39m ==> Parameters: 
2021-11-29 02:29:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120229493527941120[0;39m <==    Updates: 3
2021-11-29 02:29:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120229493527941120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 02:29:34.690 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:29:34.800 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:29:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120229619323506688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:29:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120229619323506688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:29:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120229619323506688[0;39m ==> Parameters: 
2021-11-29 02:29:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120229619323506688[0;39m <==    Updates: 3
2021-11-29 02:29:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120229619323506688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 02:30:00.003 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120229724172718080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:30:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120229724172718080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:30:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120229724172718080[0;39m ==> Parameters: 
2021-11-29 02:30:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120229724172718080[0;39m <==    Updates: 0
2021-11-29 02:30:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120229724172718080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 02:30:04.690 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:30:04.813 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:30:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120229745198764032[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:30:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120229745198764032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:30:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120229745198764032[0;39m ==> Parameters: 
2021-11-29 02:30:05.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120229745198764032[0;39m <==    Updates: 3
2021-11-29 02:30:05.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120229745198764032[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 02:30:34.708 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:30:34.802 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:30:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120229870977552384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:30:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120229870977552384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:30:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120229870977552384[0;39m ==> Parameters: 
2021-11-29 02:30:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120229870977552384[0;39m <==    Updates: 3
2021-11-29 02:30:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120229870977552384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 02:31:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120229975843540992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:31:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120229975843540992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:31:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120229975843540992[0;39m ==> Parameters: 
2021-11-29 02:31:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120229975843540992[0;39m <==    Updates: 0
2021-11-29 02:31:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120229975843540992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 02:31:04.713 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:31:04.821 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:31:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120229996815060992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:31:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120229996815060992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:31:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120229996815060992[0;39m ==> Parameters: 
2021-11-29 02:31:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120229996815060992[0;39m <==    Updates: 3
2021-11-29 02:31:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120229996815060992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 02:31:34.713 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:31:34.821 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:31:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120230122652569600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:31:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120230122652569600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:31:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120230122652569600[0;39m ==> Parameters: 
2021-11-29 02:31:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120230122652569600[0;39m <==    Updates: 3
2021-11-29 02:31:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120230122652569600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 02:32:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120230227539529728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:32:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120230227539529728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:32:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120230227539529728[0;39m ==> Parameters: 
2021-11-29 02:32:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120230227539529728[0;39m <==    Updates: 0
2021-11-29 02:32:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120230227539529728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 02:32:04.683 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:32:04.807 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:32:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120230248481689600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:32:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120230248481689600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:32:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120230248481689600[0;39m ==> Parameters: 
2021-11-29 02:32:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120230248481689600[0;39m <==    Updates: 3
2021-11-29 02:32:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120230248481689600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 02:32:34.696 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:32:34.806 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:32:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120230374302420992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:32:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120230374302420992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:32:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120230374302420992[0;39m ==> Parameters: 
2021-11-29 02:32:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120230374302420992[0;39m <==    Updates: 3
2021-11-29 02:32:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120230374302420992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 02:33:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120230479172603904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:33:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120230479172603904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:33:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120230479172603904[0;39m ==> Parameters: 
2021-11-29 02:33:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120230479172603904[0;39m <==    Updates: 0
2021-11-29 02:33:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120230479172603904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 02:33:04.691 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:33:04.800 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:33:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120230500169289728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:33:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120230500169289728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:33:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120230500169289728[0;39m ==> Parameters: 
2021-11-29 02:33:05.019 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120230500169289728[0;39m <==    Updates: 3
2021-11-29 02:33:05.020 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120230500169289728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 02:33:34.706 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:33:34.813 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:33:35.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120230625939689472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:33:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120230625939689472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:33:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120230625939689472[0;39m ==> Parameters: 
2021-11-29 02:33:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120230625939689472[0;39m <==    Updates: 3
2021-11-29 02:33:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120230625939689472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 02:34:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120230730822455296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:34:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120230730822455296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:34:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120230730822455296[0;39m ==> Parameters: 
2021-11-29 02:34:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120230730822455296[0;39m <==    Updates: 0
2021-11-29 02:34:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120230730822455296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 02:34:04.709 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:34:04.834 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:34:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120230751777198080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:34:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120230751777198080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:34:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120230751777198080[0;39m ==> Parameters: 
2021-11-29 02:34:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120230751777198080[0;39m <==    Updates: 3
2021-11-29 02:34:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120230751777198080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 02:34:34.701 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:34:34.809 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:34:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120230877656649728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:34:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120230877656649728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:34:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120230877656649728[0;39m ==> Parameters: 
2021-11-29 02:34:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120230877656649728[0;39m <==    Updates: 3
2021-11-29 02:34:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120230877656649728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 02:35:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120230982472306688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:35:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120230982472306688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:35:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120230982472306688[0;39m ==> Parameters: 
2021-11-29 02:35:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120230982472306688[0;39m <==    Updates: 0
2021-11-29 02:35:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120230982472306688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 02:35:04.693 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:35:04.801 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:35:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120231003435438080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:35:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120231003435438080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:35:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120231003435438080[0;39m ==> Parameters: 
2021-11-29 02:35:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120231003435438080[0;39m <==    Updates: 3
2021-11-29 02:35:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120231003435438080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 02:35:34.712 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:35:34.776 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:35:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120231129289723904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:35:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120231129289723904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:35:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120231129289723904[0;39m ==> Parameters: 
2021-11-29 02:35:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120231129289723904[0;39m <==    Updates: 3
2021-11-29 02:35:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120231129289723904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 02:36:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120231234168295424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:36:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120231234168295424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:36:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120231234168295424[0;39m ==> Parameters: 
2021-11-29 02:36:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120231234168295424[0;39m <==    Updates: 0
2021-11-29 02:36:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120231234168295424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 02:36:04.713 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:36:04.807 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:36:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120231255118843904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:36:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120231255118843904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:36:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120231255118843904[0;39m ==> Parameters: 
2021-11-29 02:36:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120231255118843904[0;39m <==    Updates: 3
2021-11-29 02:36:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120231255118843904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 02:36:34.718 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:36:34.827 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:36:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120231380964741120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:36:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120231380964741120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:36:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120231380964741120[0;39m ==> Parameters: 
2021-11-29 02:36:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120231380964741120[0;39m <==    Updates: 3
2021-11-29 02:36:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120231380964741120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 02:37:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120231485797175296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:37:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120231485797175296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:37:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120231485797175296[0;39m ==> Parameters: 
2021-11-29 02:37:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120231485797175296[0;39m <==    Updates: 0
2021-11-29 02:37:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120231485797175296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 02:37:04.712 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:37:04.820 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:37:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120231506760306688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:37:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120231506760306688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:37:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120231506760306688[0;39m ==> Parameters: 
2021-11-29 02:37:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120231506760306688[0;39m <==    Updates: 3
2021-11-29 02:37:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120231506760306688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 02:37:34.671 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:37:34.800 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:37:35.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120231632576843776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:37:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120231632576843776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:37:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120231632576843776[0;39m ==> Parameters: 
2021-11-29 02:37:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120231632576843776[0;39m <==    Updates: 3
2021-11-29 02:37:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120231632576843776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 02:38:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120231737459609600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:38:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120231737459609600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:38:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120231737459609600[0;39m ==> Parameters: 
2021-11-29 02:38:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120231737459609600[0;39m <==    Updates: 0
2021-11-29 02:38:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120231737459609600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 02:38:04.708 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:38:04.828 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:38:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120231758447906816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:38:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120231758447906816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:38:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120231758447906816[0;39m ==> Parameters: 
2021-11-29 02:38:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120231758447906816[0;39m <==    Updates: 3
2021-11-29 02:38:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120231758447906816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 02:38:34.698 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:38:34.823 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:38:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120231884260249600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:38:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120231884260249600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:38:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120231884260249600[0;39m ==> Parameters: 
2021-11-29 02:38:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120231884260249600[0;39m <==    Updates: 3
2021-11-29 02:38:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120231884260249600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 02:39:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120231989105266688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:39:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120231989105266688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:39:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120231989105266688[0;39m ==> Parameters: 
2021-11-29 02:39:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120231989105266688[0;39m <==    Updates: 0
2021-11-29 02:39:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120231989105266688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 02:39:04.706 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:39:04.812 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:39:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120232010110341120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:39:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120232010110341120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:39:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120232010110341120[0;39m ==> Parameters: 
2021-11-29 02:39:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120232010110341120[0;39m <==    Updates: 3
2021-11-29 02:39:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120232010110341120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 02:39:34.689 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:39:34.812 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:39:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120232135943655424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:39:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120232135943655424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:39:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120232135943655424[0;39m ==> Parameters: 
2021-11-29 02:39:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120232135943655424[0;39m <==    Updates: 3
2021-11-29 02:39:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120232135943655424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 02:40:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120232240780283904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:40:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120232240780283904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:40:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120232240780283904[0;39m ==> Parameters: 
2021-11-29 02:40:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120232240780283904[0;39m <==    Updates: 0
2021-11-29 02:40:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120232240780283904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 02:40:04.710 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:40:04.818 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:40:05.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120232261722443776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:40:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120232261722443776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:40:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120232261722443776[0;39m ==> Parameters: 
2021-11-29 02:40:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120232261722443776[0;39m <==    Updates: 3
2021-11-29 02:40:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120232261722443776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 02:40:34.697 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:40:34.823 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:40:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120232387576729600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:40:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120232387576729600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:40:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120232387576729600[0;39m ==> Parameters: 
2021-11-29 02:40:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120232387576729600[0;39m <==    Updates: 3
2021-11-29 02:40:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120232387576729600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 02:41:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120232492463689728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:41:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120232492463689728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:41:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120232492463689728[0;39m ==> Parameters: 
2021-11-29 02:41:00.021 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120232492463689728[0;39m <==    Updates: 0
2021-11-29 02:41:00.022 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120232492463689728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 02:41:04.712 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:41:04.820 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:41:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120232513397460992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:41:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120232513397460992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:41:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120232513397460992[0;39m ==> Parameters: 
2021-11-29 02:41:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120232513397460992[0;39m <==    Updates: 3
2021-11-29 02:41:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120232513397460992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 02:41:34.706 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:41:34.829 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:41:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120232639268524032[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:41:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120232639268524032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:41:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120232639268524032[0;39m ==> Parameters: 
2021-11-29 02:41:35.019 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120232639268524032[0;39m <==    Updates: 3
2021-11-29 02:41:35.020 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120232639268524032[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 02:42:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120232744105152512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:42:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120232744105152512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:42:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120232744105152512[0;39m ==> Parameters: 
2021-11-29 02:42:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120232744105152512[0;39m <==    Updates: 0
2021-11-29 02:42:00.019 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120232744105152512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 02:42:04.703 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:42:04.810 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:42:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120232765076672512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:42:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120232765076672512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:42:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120232765076672512[0;39m ==> Parameters: 
2021-11-29 02:42:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120232765076672512[0;39m <==    Updates: 3
2021-11-29 02:42:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120232765076672512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 02:42:34.722 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:42:34.831 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:42:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120232890872238080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:42:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120232890872238080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:42:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120232890872238080[0;39m ==> Parameters: 
2021-11-29 02:42:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120232890872238080[0;39m <==    Updates: 3
2021-11-29 02:42:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120232890872238080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 02:43:00.001 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120232995721449472[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:43:00.002 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120232995721449472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:43:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120232995721449472[0;39m ==> Parameters: 
2021-11-29 02:43:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120232995721449472[0;39m <==    Updates: 0
2021-11-29 02:43:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120232995721449472[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 02:43:04.709 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:43:04.816 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:43:05.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120233016692969472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:43:05.001 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120233016692969472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:43:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120233016692969472[0;39m ==> Parameters: 
2021-11-29 02:43:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120233016692969472[0;39m <==    Updates: 3
2021-11-29 02:43:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120233016692969472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 02:43:34.709 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:43:34.817 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:43:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120233142543060992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:43:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120233142543060992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:43:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120233142543060992[0;39m ==> Parameters: 
2021-11-29 02:43:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120233142543060992[0;39m <==    Updates: 3
2021-11-29 02:43:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120233142543060992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 02:44:00.001 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120233247379689472[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:44:00.002 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120233247379689472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:44:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120233247379689472[0;39m ==> Parameters: 
2021-11-29 02:44:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120233247379689472[0;39m <==    Updates: 0
2021-11-29 02:44:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120233247379689472[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 02:44:04.718 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:44:04.825 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:44:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120233268384763904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:44:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120233268384763904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:44:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120233268384763904[0;39m ==> Parameters: 
2021-11-29 02:44:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120233268384763904[0;39m <==    Updates: 3
2021-11-29 02:44:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120233268384763904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 02:44:34.722 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:44:34.831 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:44:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120233394188718080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:44:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120233394188718080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:44:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120233394188718080[0;39m ==> Parameters: 
2021-11-29 02:44:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120233394188718080[0;39m <==    Updates: 3
2021-11-29 02:44:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120233394188718080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 02:45:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120233499071483904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:45:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120233499071483904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:45:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120233499071483904[0;39m ==> Parameters: 
2021-11-29 02:45:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120233499071483904[0;39m <==    Updates: 0
2021-11-29 02:45:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120233499071483904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 02:45:04.688 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:45:04.810 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:45:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120233520038809600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:45:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120233520038809600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:45:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120233520038809600[0;39m ==> Parameters: 
2021-11-29 02:45:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120233520038809600[0;39m <==    Updates: 3
2021-11-29 02:45:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120233520038809600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 02:45:34.702 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:45:34.810 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:45:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120233645888901120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:45:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120233645888901120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:45:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120233645888901120[0;39m ==> Parameters: 
2021-11-29 02:45:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120233645888901120[0;39m <==    Updates: 3
2021-11-29 02:45:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120233645888901120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 02:46:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120233750721335296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:46:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120233750721335296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:46:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120233750721335296[0;39m ==> Parameters: 
2021-11-29 02:46:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120233750721335296[0;39m <==    Updates: 0
2021-11-29 02:46:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120233750721335296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 02:46:04.696 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:46:04.805 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:46:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120233771688660992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:46:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120233771688660992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:46:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120233771688660992[0;39m ==> Parameters: 
2021-11-29 02:46:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120233771688660992[0;39m <==    Updates: 3
2021-11-29 02:46:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120233771688660992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 02:46:34.699 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:46:34.823 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:46:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120233897517780992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:46:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120233897517780992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:46:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120233897517780992[0;39m ==> Parameters: 
2021-11-29 02:46:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120233897517780992[0;39m <==    Updates: 3
2021-11-29 02:46:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120233897517780992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 02:47:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120234002408935424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:47:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120234002408935424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:47:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120234002408935424[0;39m ==> Parameters: 
2021-11-29 02:47:00.022 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120234002408935424[0;39m <==    Updates: 0
2021-11-29 02:47:00.022 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120234002408935424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 02:47:04.714 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:47:04.823 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:47:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120234023351095296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:47:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120234023351095296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:47:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120234023351095296[0;39m ==> Parameters: 
2021-11-29 02:47:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120234023351095296[0;39m <==    Updates: 3
2021-11-29 02:47:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120234023351095296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 02:47:34.693 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:47:34.819 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:47:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120234149176020992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:47:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120234149176020992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:47:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120234149176020992[0;39m ==> Parameters: 
2021-11-29 02:47:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120234149176020992[0;39m <==    Updates: 3
2021-11-29 02:47:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120234149176020992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 02:48:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120234254025232384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:48:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120234254025232384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:48:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120234254025232384[0;39m ==> Parameters: 
2021-11-29 02:48:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120234254025232384[0;39m <==    Updates: 0
2021-11-29 02:48:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120234254025232384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 02:48:04.705 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:48:04.812 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:48:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120234275034501120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:48:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120234275034501120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:48:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120234275034501120[0;39m ==> Parameters: 
2021-11-29 02:48:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120234275034501120[0;39m <==    Updates: 3
2021-11-29 02:48:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120234275034501120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 02:48:34.702 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:48:34.826 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:48:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120234400859426816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:48:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120234400859426816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:48:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120234400859426816[0;39m ==> Parameters: 
2021-11-29 02:48:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120234400859426816[0;39m <==    Updates: 3
2021-11-29 02:48:35.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120234400859426816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 02:49:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120234505712832512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:49:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120234505712832512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:49:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120234505712832512[0;39m ==> Parameters: 
2021-11-29 02:49:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120234505712832512[0;39m <==    Updates: 0
2021-11-29 02:49:00.018 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120234505712832512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 02:49:04.723 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:49:04.816 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:49:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120234526650798080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:49:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120234526650798080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:49:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120234526650798080[0;39m ==> Parameters: 
2021-11-29 02:49:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120234526650798080[0;39m <==    Updates: 3
2021-11-29 02:49:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120234526650798080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 02:49:34.692 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:49:34.832 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:49:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120234652534444032[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:49:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120234652534444032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:49:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120234652534444032[0;39m ==> Parameters: 
2021-11-29 02:49:35.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120234652534444032[0;39m <==    Updates: 3
2021-11-29 02:49:35.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120234652534444032[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 02:50:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120234757358489600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:50:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120234757358489600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:50:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120234757358489600[0;39m ==> Parameters: 
2021-11-29 02:50:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120234757358489600[0;39m <==    Updates: 0
2021-11-29 02:50:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120234757358489600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 02:50:04.701 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:50:04.825 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:50:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120234778338398208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:50:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120234778338398208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:50:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120234778338398208[0;39m ==> Parameters: 
2021-11-29 02:50:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120234778338398208[0;39m <==    Updates: 3
2021-11-29 02:50:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120234778338398208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 02:50:34.710 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:50:34.818 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:50:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120234904138158080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:50:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120234904138158080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:50:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120234904138158080[0;39m ==> Parameters: 
2021-11-29 02:50:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120234904138158080[0;39m <==    Updates: 3
2021-11-29 02:50:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120234904138158080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 02:51:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120235009033506816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:51:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120235009033506816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:51:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120235009033506816[0;39m ==> Parameters: 
2021-11-29 02:51:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120235009033506816[0;39m <==    Updates: 0
2021-11-29 02:51:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120235009033506816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 02:51:04.714 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:51:04.802 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:51:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120235029967278080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:51:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120235029967278080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:51:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120235029967278080[0;39m ==> Parameters: 
2021-11-29 02:51:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120235029967278080[0;39m <==    Updates: 3
2021-11-29 02:51:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120235029967278080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 02:51:34.704 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:51:34.829 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:51:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120235155838341120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:51:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120235155838341120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:51:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120235155838341120[0;39m ==> Parameters: 
2021-11-29 02:51:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120235155838341120[0;39m <==    Updates: 3
2021-11-29 02:51:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120235155838341120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 02:52:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120235260674969600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:52:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120235260674969600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:52:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120235260674969600[0;39m ==> Parameters: 
2021-11-29 02:52:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120235260674969600[0;39m <==    Updates: 0
2021-11-29 02:52:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120235260674969600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 02:52:04.709 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:52:04.833 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:52:05.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120235281617129472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:52:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120235281617129472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:52:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120235281617129472[0;39m ==> Parameters: 
2021-11-29 02:52:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120235281617129472[0;39m <==    Updates: 3
2021-11-29 02:52:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120235281617129472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 02:52:34.706 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:52:34.802 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:52:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120235407475609600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:52:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120235407475609600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:52:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120235407475609600[0;39m ==> Parameters: 
2021-11-29 02:52:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120235407475609600[0;39m <==    Updates: 3
2021-11-29 02:52:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120235407475609600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 02:53:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120235512333209600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:53:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120235512333209600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:53:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120235512333209600[0;39m ==> Parameters: 
2021-11-29 02:53:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120235512333209600[0;39m <==    Updates: 0
2021-11-29 02:53:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120235512333209600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 02:53:04.708 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:53:04.832 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:53:05.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120235533279563776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:53:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120235533279563776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:53:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120235533279563776[0;39m ==> Parameters: 
2021-11-29 02:53:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120235533279563776[0;39m <==    Updates: 3
2021-11-29 02:53:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120235533279563776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 02:53:34.721 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:53:34.829 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:53:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120235659154821120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:53:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120235659154821120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:53:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120235659154821120[0;39m ==> Parameters: 
2021-11-29 02:53:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120235659154821120[0;39m <==    Updates: 3
2021-11-29 02:53:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120235659154821120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 02:54:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120235763987255296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:54:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120235763987255296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:54:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120235763987255296[0;39m ==> Parameters: 
2021-11-29 02:54:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120235763987255296[0;39m <==    Updates: 0
2021-11-29 02:54:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120235763987255296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 02:54:04.704 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:54:04.827 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:54:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120235784983941120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:54:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120235784983941120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:54:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120235784983941120[0;39m ==> Parameters: 
2021-11-29 02:54:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120235784983941120[0;39m <==    Updates: 3
2021-11-29 02:54:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120235784983941120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 02:54:34.726 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:54:34.835 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:54:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120235910783700992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:54:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120235910783700992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:54:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120235910783700992[0;39m ==> Parameters: 
2021-11-29 02:54:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120235910783700992[0;39m <==    Updates: 3
2021-11-29 02:54:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120235910783700992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 02:55:00.002 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120236015624523776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:55:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120236015624523776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:55:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120236015624523776[0;39m ==> Parameters: 
2021-11-29 02:55:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120236015624523776[0;39m <==    Updates: 0
2021-11-29 02:55:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120236015624523776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 02:55:04.704 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:55:04.813 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:55:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120236036633792512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:55:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120236036633792512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:55:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120236036633792512[0;39m ==> Parameters: 
2021-11-29 02:55:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120236036633792512[0;39m <==    Updates: 3
2021-11-29 02:55:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120236036633792512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 02:55:34.701 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:55:34.813 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:55:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120236162471301120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:55:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120236162471301120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:55:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120236162471301120[0;39m ==> Parameters: 
2021-11-29 02:55:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120236162471301120[0;39m <==    Updates: 3
2021-11-29 02:55:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120236162471301120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 02:56:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120236267312123904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:56:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120236267312123904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:56:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120236267312123904[0;39m ==> Parameters: 
2021-11-29 02:56:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120236267312123904[0;39m <==    Updates: 0
2021-11-29 02:56:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120236267312123904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 02:56:04.694 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:56:04.834 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:56:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120236288258478080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:56:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120236288258478080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:56:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120236288258478080[0;39m ==> Parameters: 
2021-11-29 02:56:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120236288258478080[0;39m <==    Updates: 3
2021-11-29 02:56:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120236288258478080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 02:56:34.707 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:56:34.831 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:56:35.000 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120236414075015168[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:56:35.001 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120236414075015168[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:56:35.001 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120236414075015168[0;39m ==> Parameters: 
2021-11-29 02:56:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120236414075015168[0;39m <==    Updates: 3
2021-11-29 02:56:35.002 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120236414075015168[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 02:57:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120236518991335424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:57:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120236518991335424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:57:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120236518991335424[0;39m ==> Parameters: 
2021-11-29 02:57:00.021 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120236518991335424[0;39m <==    Updates: 0
2021-11-29 02:57:00.022 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120236518991335424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 02:57:04.708 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:57:04.817 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:57:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120236539916718080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:57:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120236539916718080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:57:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120236539916718080[0;39m ==> Parameters: 
2021-11-29 02:57:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120236539916718080[0;39m <==    Updates: 3
2021-11-29 02:57:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120236539916718080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 02:57:34.708 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:57:34.819 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:57:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120236665758420992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:57:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120236665758420992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:57:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120236665758420992[0;39m ==> Parameters: 
2021-11-29 02:57:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120236665758420992[0;39m <==    Updates: 3
2021-11-29 02:57:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120236665758420992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 02:58:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120236770624409600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:58:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120236770624409600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:58:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120236770624409600[0;39m ==> Parameters: 
2021-11-29 02:58:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120236770624409600[0;39m <==    Updates: 0
2021-11-29 02:58:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120236770624409600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 02:58:04.711 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:58:04.836 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:58:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120236791579152384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:58:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120236791579152384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:58:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120236791579152384[0;39m ==> Parameters: 
2021-11-29 02:58:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120236791579152384[0;39m <==    Updates: 3
2021-11-29 02:58:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120236791579152384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 02:58:34.710 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:58:34.818 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:58:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120236917408272384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:58:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120236917408272384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:58:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120236917408272384[0;39m ==> Parameters: 
2021-11-29 02:58:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120236917408272384[0;39m <==    Updates: 3
2021-11-29 02:58:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120236917408272384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 02:59:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120237022295232512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 02:59:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120237022295232512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 02:59:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120237022295232512[0;39m ==> Parameters: 
2021-11-29 02:59:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120237022295232512[0;39m <==    Updates: 0
2021-11-29 02:59:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120237022295232512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 02:59:04.694 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:59:04.802 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:59:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120237043283529728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:59:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120237043283529728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:59:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120237043283529728[0;39m ==> Parameters: 
2021-11-29 02:59:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120237043283529728[0;39m <==    Updates: 3
2021-11-29 02:59:05.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120237043283529728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 02:59:34.709 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:59:34.818 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 02:59:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120237169066512384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 02:59:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120237169066512384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 02:59:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120237169066512384[0;39m ==> Parameters: 
2021-11-29 02:59:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120237169066512384[0;39m <==    Updates: 3
2021-11-29 02:59:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120237169066512384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 03:00:00.002 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120237273915723776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:00:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120237273915723776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:00:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120237273915723776[0;39m ==> Parameters: 
2021-11-29 03:00:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120237273915723776[0;39m <==    Updates: 0
2021-11-29 03:00:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120237273915723776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 03:00:04.713 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:00:04.822 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:00:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120237294916603904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:00:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120237294916603904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:00:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120237294916603904[0;39m ==> Parameters: 
2021-11-29 03:00:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120237294916603904[0;39m <==    Updates: 3
2021-11-29 03:00:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120237294916603904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 03:00:34.722 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:00:34.831 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:00:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120237420770889728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:00:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120237420770889728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:00:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120237420770889728[0;39m ==> Parameters: 
2021-11-29 03:00:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120237420770889728[0;39m <==    Updates: 3
2021-11-29 03:00:35.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120237420770889728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 03:01:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120237525628489728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:01:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120237525628489728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:01:00.019 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120237525628489728[0;39m ==> Parameters: 
2021-11-29 03:01:00.023 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120237525628489728[0;39m <==    Updates: 0
2021-11-29 03:01:00.024 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120237525628489728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2021-11-29 03:01:04.722 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:01:04.833 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:01:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120237546549678080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:01:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120237546549678080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:01:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120237546549678080[0;39m ==> Parameters: 
2021-11-29 03:01:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120237546549678080[0;39m <==    Updates: 3
2021-11-29 03:01:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120237546549678080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 03:01:34.712 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:01:34.837 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:01:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120237672391380992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:01:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120237672391380992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:01:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120237672391380992[0;39m ==> Parameters: 
2021-11-29 03:01:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120237672391380992[0;39m <==    Updates: 3
2021-11-29 03:01:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120237672391380992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 03:02:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120237777282535424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:02:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120237777282535424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:02:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120237777282535424[0;39m ==> Parameters: 
2021-11-29 03:02:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120237777282535424[0;39m <==    Updates: 0
2021-11-29 03:02:00.018 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120237777282535424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 03:02:04.724 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:02:04.817 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:02:05.000 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120237798195335168[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:02:05.001 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120237798195335168[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:02:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120237798195335168[0;39m ==> Parameters: 
2021-11-29 03:02:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120237798195335168[0;39m <==    Updates: 3
2021-11-29 03:02:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120237798195335168[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 03:02:34.719 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:02:34.827 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:02:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120237924070592512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:02:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120237924070592512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:02:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120237924070592512[0;39m ==> Parameters: 
2021-11-29 03:02:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120237924070592512[0;39m <==    Updates: 3
2021-11-29 03:02:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120237924070592512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 03:03:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120238028936581120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:03:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120238028936581120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:03:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120238028936581120[0;39m ==> Parameters: 
2021-11-29 03:03:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120238028936581120[0;39m <==    Updates: 0
2021-11-29 03:03:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120238028936581120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 03:03:04.715 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:03:04.824 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:03:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120238049891323904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:03:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120238049891323904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:03:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120238049891323904[0;39m ==> Parameters: 
2021-11-29 03:03:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120238049891323904[0;39m <==    Updates: 3
2021-11-29 03:03:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120238049891323904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 03:03:34.708 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:03:34.804 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:03:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120238175720443904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:03:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120238175720443904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:03:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120238175720443904[0;39m ==> Parameters: 
2021-11-29 03:03:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120238175720443904[0;39m <==    Updates: 3
2021-11-29 03:03:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120238175720443904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 03:04:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120238280578043904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:04:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120238280578043904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:04:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120238280578043904[0;39m ==> Parameters: 
2021-11-29 03:04:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120238280578043904[0;39m <==    Updates: 0
2021-11-29 03:04:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120238280578043904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 03:04:04.720 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:04:04.827 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:04:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120238301570535424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:04:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120238301570535424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:04:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120238301570535424[0;39m ==> Parameters: 
2021-11-29 03:04:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120238301570535424[0;39m <==    Updates: 3
2021-11-29 03:04:05.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120238301570535424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 03:04:34.690 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:04:34.813 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:04:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120238427403849728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:04:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120238427403849728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:04:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120238427403849728[0;39m ==> Parameters: 
2021-11-29 03:04:35.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120238427403849728[0;39m <==    Updates: 3
2021-11-29 03:04:35.019 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120238427403849728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 03:05:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120238532261449728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:05:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120238532261449728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:05:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120238532261449728[0;39m ==> Parameters: 
2021-11-29 03:05:00.020 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120238532261449728[0;39m <==    Updates: 0
2021-11-29 03:05:00.021 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120238532261449728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 03:05:04.689 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:05:04.796 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:05:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120238553232969728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:05:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120238553232969728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:05:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120238553232969728[0;39m ==> Parameters: 
2021-11-29 03:05:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120238553232969728[0;39m <==    Updates: 3
2021-11-29 03:05:05.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120238553232969728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 03:05:34.725 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:05:34.818 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:05:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120238679020146688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:05:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120238679020146688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:05:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120238679020146688[0;39m ==> Parameters: 
2021-11-29 03:05:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120238679020146688[0;39m <==    Updates: 3
2021-11-29 03:05:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120238679020146688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 03:06:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120238783877746688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:06:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120238783877746688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:06:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120238783877746688[0;39m ==> Parameters: 
2021-11-29 03:06:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120238783877746688[0;39m <==    Updates: 0
2021-11-29 03:06:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120238783877746688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 03:06:04.722 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:06:04.830 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:06:05.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120238804832489472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:06:05.001 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120238804832489472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:06:05.001 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120238804832489472[0;39m ==> Parameters: 
2021-11-29 03:06:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120238804832489472[0;39m <==    Updates: 3
2021-11-29 03:06:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120238804832489472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 03:06:34.734 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:06:34.841 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:06:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120238930716135424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:06:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120238930716135424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:06:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120238930716135424[0;39m ==> Parameters: 
2021-11-29 03:06:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120238930716135424[0;39m <==    Updates: 3
2021-11-29 03:06:35.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120238930716135424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 03:07:00.001 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120239035519209472[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:07:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120239035519209472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:07:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120239035519209472[0;39m ==> Parameters: 
2021-11-29 03:07:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120239035519209472[0;39m <==    Updates: 0
2021-11-29 03:07:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120239035519209472[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 03:07:04.717 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:07:04.827 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:07:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120239056541061120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:07:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120239056541061120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:07:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120239056541061120[0;39m ==> Parameters: 
2021-11-29 03:07:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120239056541061120[0;39m <==    Updates: 3
2021-11-29 03:07:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120239056541061120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 03:07:34.715 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:07:34.822 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:07:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120239182361792512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:07:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120239182361792512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:07:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120239182361792512[0;39m ==> Parameters: 
2021-11-29 03:07:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120239182361792512[0;39m <==    Updates: 3
2021-11-29 03:07:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120239182361792512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 03:08:00.002 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120239287181643776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:08:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120239287181643776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:08:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120239287181643776[0;39m ==> Parameters: 
2021-11-29 03:08:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120239287181643776[0;39m <==    Updates: 0
2021-11-29 03:08:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120239287181643776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 03:08:04.721 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:08:04.828 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:08:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120239308195106816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:08:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120239308195106816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:08:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120239308195106816[0;39m ==> Parameters: 
2021-11-29 03:08:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120239308195106816[0;39m <==    Updates: 3
2021-11-29 03:08:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120239308195106816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 03:08:34.721 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:08:34.831 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:08:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120239434041004032[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:08:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120239434041004032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:08:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120239434041004032[0;39m ==> Parameters: 
2021-11-29 03:08:35.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120239434041004032[0;39m <==    Updates: 3
2021-11-29 03:08:35.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120239434041004032[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 03:09:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120239538877632512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:09:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120239538877632512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:09:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120239538877632512[0;39m ==> Parameters: 
2021-11-29 03:09:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120239538877632512[0;39m <==    Updates: 0
2021-11-29 03:09:00.018 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120239538877632512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 03:09:04.703 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:09:04.825 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:09:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120239559836569600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:09:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120239559836569600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:09:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120239559836569600[0;39m ==> Parameters: 
2021-11-29 03:09:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120239559836569600[0;39m <==    Updates: 3
2021-11-29 03:09:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120239559836569600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 03:09:34.737 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:09:34.829 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:09:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120239685690855424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:09:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120239685690855424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:09:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120239685690855424[0;39m ==> Parameters: 
2021-11-29 03:09:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120239685690855424[0;39m <==    Updates: 3
2021-11-29 03:09:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120239685690855424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 03:10:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120239790531678208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:10:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120239790531678208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:10:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120239790531678208[0;39m ==> Parameters: 
2021-11-29 03:10:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120239790531678208[0;39m <==    Updates: 0
2021-11-29 03:10:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120239790531678208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 03:10:04.730 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:10:04.823 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:10:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120239811490615296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:10:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120239811490615296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:10:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120239811490615296[0;39m ==> Parameters: 
2021-11-29 03:10:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120239811490615296[0;39m <==    Updates: 3
2021-11-29 03:10:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120239811490615296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 03:10:34.716 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:10:34.824 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:10:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120239937336512512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:10:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120239937336512512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:10:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120239937336512512[0;39m ==> Parameters: 
2021-11-29 03:10:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120239937336512512[0;39m <==    Updates: 3
2021-11-29 03:10:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120239937336512512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 03:11:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120240042185723904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:11:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120240042185723904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:11:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120240042185723904[0;39m ==> Parameters: 
2021-11-29 03:11:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120240042185723904[0;39m <==    Updates: 0
2021-11-29 03:11:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120240042185723904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 03:11:04.724 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:11:04.833 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:11:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120240063132078080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:11:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120240063132078080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:11:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120240063132078080[0;39m ==> Parameters: 
2021-11-29 03:11:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120240063132078080[0;39m <==    Updates: 3
2021-11-29 03:11:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120240063132078080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 03:11:34.717 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:11:34.810 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:11:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120240188998946816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:11:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120240188998946816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:11:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120240188998946816[0;39m ==> Parameters: 
2021-11-29 03:11:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120240188998946816[0;39m <==    Updates: 3
2021-11-29 03:11:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120240188998946816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 03:12:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120240293835575296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:12:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120240293835575296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:12:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120240293835575296[0;39m ==> Parameters: 
2021-11-29 03:12:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120240293835575296[0;39m <==    Updates: 0
2021-11-29 03:12:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120240293835575296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 03:12:04.727 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:12:04.836 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:12:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120240314802900992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:12:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120240314802900992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:12:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120240314802900992[0;39m ==> Parameters: 
2021-11-29 03:12:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120240314802900992[0;39m <==    Updates: 3
2021-11-29 03:12:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120240314802900992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 03:12:34.718 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:12:34.842 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:12:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120240440665575424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:12:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120240440665575424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:12:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120240440665575424[0;39m ==> Parameters: 
2021-11-29 03:12:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120240440665575424[0;39m <==    Updates: 3
2021-11-29 03:12:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120240440665575424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 03:13:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120240545518981120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:13:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120240545518981120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:13:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120240545518981120[0;39m ==> Parameters: 
2021-11-29 03:13:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120240545518981120[0;39m <==    Updates: 0
2021-11-29 03:13:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120240545518981120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 03:13:04.702 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:13:04.828 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:13:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120240566486306816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:13:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120240566486306816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:13:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120240566486306816[0;39m ==> Parameters: 
2021-11-29 03:13:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120240566486306816[0;39m <==    Updates: 3
2021-11-29 03:13:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120240566486306816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 03:13:34.725 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:13:34.849 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:13:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120240692277678080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:13:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120240692277678080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:13:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120240692277678080[0;39m ==> Parameters: 
2021-11-29 03:13:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120240692277678080[0;39m <==    Updates: 3
2021-11-29 03:13:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120240692277678080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 03:14:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120240797181415424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:14:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120240797181415424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:14:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120240797181415424[0;39m ==> Parameters: 
2021-11-29 03:14:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120240797181415424[0;39m <==    Updates: 0
2021-11-29 03:14:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120240797181415424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 03:14:04.703 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:14:04.827 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:14:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120240818148741120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:14:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120240818148741120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:14:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120240818148741120[0;39m ==> Parameters: 
2021-11-29 03:14:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120240818148741120[0;39m <==    Updates: 3
2021-11-29 03:14:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120240818148741120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 03:14:34.702 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:14:34.841 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:14:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120240943969472512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:14:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120240943969472512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:14:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120240943969472512[0;39m ==> Parameters: 
2021-11-29 03:14:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120240943969472512[0;39m <==    Updates: 3
2021-11-29 03:14:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120240943969472512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 03:15:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120241048822878208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:15:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120241048822878208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:15:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120241048822878208[0;39m ==> Parameters: 
2021-11-29 03:15:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120241048822878208[0;39m <==    Updates: 0
2021-11-29 03:15:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120241048822878208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 03:15:04.714 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:15:04.836 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:15:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120241069777620992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:15:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120241069777620992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:15:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120241069777620992[0;39m ==> Parameters: 
2021-11-29 03:15:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120241069777620992[0;39m <==    Updates: 3
2021-11-29 03:15:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120241069777620992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 03:15:34.734 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:15:34.843 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:15:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120241195627712512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:15:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120241195627712512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:15:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120241195627712512[0;39m ==> Parameters: 
2021-11-29 03:15:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120241195627712512[0;39m <==    Updates: 3
2021-11-29 03:15:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120241195627712512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 03:16:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120241300510478336[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:16:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120241300510478336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:16:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120241300510478336[0;39m ==> Parameters: 
2021-11-29 03:16:00.019 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120241300510478336[0;39m <==    Updates: 0
2021-11-29 03:16:00.019 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120241300510478336[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 03:16:04.713 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:16:04.839 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:16:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120241321444249600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:16:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120241321444249600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:16:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120241321444249600[0;39m ==> Parameters: 
2021-11-29 03:16:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120241321444249600[0;39m <==    Updates: 3
2021-11-29 03:16:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120241321444249600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 03:16:34.723 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:16:34.832 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:16:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120241447256592384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:16:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120241447256592384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:16:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120241447256592384[0;39m ==> Parameters: 
2021-11-29 03:16:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120241447256592384[0;39m <==    Updates: 3
2021-11-29 03:16:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120241447256592384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 03:17:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120241552168718336[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:17:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120241552168718336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:17:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120241552168718336[0;39m ==> Parameters: 
2021-11-29 03:17:00.019 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120241552168718336[0;39m <==    Updates: 0
2021-11-29 03:17:00.020 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120241552168718336[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 03:17:04.722 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:17:04.846 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:17:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120241573131849728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:17:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120241573131849728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:17:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120241573131849728[0;39m ==> Parameters: 
2021-11-29 03:17:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120241573131849728[0;39m <==    Updates: 3
2021-11-29 03:17:05.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120241573131849728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 03:17:34.711 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:17:34.836 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:17:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120241698927415296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:17:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120241698927415296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:17:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120241698927415296[0;39m ==> Parameters: 
2021-11-29 03:17:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120241698927415296[0;39m <==    Updates: 3
2021-11-29 03:17:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120241698927415296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 03:18:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120241803785015296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:18:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120241803785015296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:18:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120241803785015296[0;39m ==> Parameters: 
2021-11-29 03:18:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120241803785015296[0;39m <==    Updates: 0
2021-11-29 03:18:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120241803785015296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 03:18:04.716 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:18:04.826 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:18:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120241824777506816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:18:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120241824777506816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:18:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120241824777506816[0;39m ==> Parameters: 
2021-11-29 03:18:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120241824777506816[0;39m <==    Updates: 3
2021-11-29 03:18:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120241824777506816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 03:18:34.715 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:18:34.840 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:18:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120241950594043904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:18:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120241950594043904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:18:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120241950594043904[0;39m ==> Parameters: 
2021-11-29 03:18:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120241950594043904[0;39m <==    Updates: 3
2021-11-29 03:18:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120241950594043904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 03:19:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120242055481004032[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:19:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120242055481004032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:19:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120242055481004032[0;39m ==> Parameters: 
2021-11-29 03:19:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120242055481004032[0;39m <==    Updates: 0
2021-11-29 03:19:00.019 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120242055481004032[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 03:19:04.710 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:19:04.834 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:19:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120242076402192384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:19:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120242076402192384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:19:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120242076402192384[0;39m ==> Parameters: 
2021-11-29 03:19:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120242076402192384[0;39m <==    Updates: 3
2021-11-29 03:19:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120242076402192384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 03:19:34.718 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:19:34.843 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:19:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120242202264866816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:19:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120242202264866816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:19:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120242202264866816[0;39m ==> Parameters: 
2021-11-29 03:19:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120242202264866816[0;39m <==    Updates: 3
2021-11-29 03:19:35.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120242202264866816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 03:20:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120242307130855424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:20:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120242307130855424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:20:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120242307130855424[0;39m ==> Parameters: 
2021-11-29 03:20:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120242307130855424[0;39m <==    Updates: 0
2021-11-29 03:20:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120242307130855424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 03:20:04.723 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:20:04.844 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:20:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120242328106569728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:20:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120242328106569728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:20:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120242328106569728[0;39m ==> Parameters: 
2021-11-29 03:20:05.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120242328106569728[0;39m <==    Updates: 3
2021-11-29 03:20:05.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120242328106569728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 03:20:34.736 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:20:34.846 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:20:35.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120242453876969472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:20:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120242453876969472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:20:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120242453876969472[0;39m ==> Parameters: 
2021-11-29 03:20:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120242453876969472[0;39m <==    Updates: 3
2021-11-29 03:20:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120242453876969472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 03:21:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120242558755540992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:21:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120242558755540992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:21:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120242558755540992[0;39m ==> Parameters: 
2021-11-29 03:21:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120242558755540992[0;39m <==    Updates: 0
2021-11-29 03:21:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120242558755540992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 03:21:04.722 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:21:04.845 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:21:05.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120242579706089472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:21:05.001 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120242579706089472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:21:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120242579706089472[0;39m ==> Parameters: 
2021-11-29 03:21:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120242579706089472[0;39m <==    Updates: 3
2021-11-29 03:21:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120242579706089472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 03:21:34.702 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:21:34.825 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:21:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120242705577152512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:21:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120242705577152512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:21:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120242705577152512[0;39m ==> Parameters: 
2021-11-29 03:21:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120242705577152512[0;39m <==    Updates: 3
2021-11-29 03:21:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120242705577152512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 03:22:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120242810434752512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:22:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120242810434752512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:22:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120242810434752512[0;39m ==> Parameters: 
2021-11-29 03:22:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120242810434752512[0;39m <==    Updates: 0
2021-11-29 03:22:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120242810434752512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 03:22:04.718 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:22:04.825 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:22:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120242831406272512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:22:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120242831406272512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:22:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120242831406272512[0;39m ==> Parameters: 
2021-11-29 03:22:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120242831406272512[0;39m <==    Updates: 3
2021-11-29 03:22:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120242831406272512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 03:22:34.715 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:22:34.856 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:22:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120242957239586816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:22:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120242957239586816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:22:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120242957239586816[0;39m ==> Parameters: 
2021-11-29 03:22:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120242957239586816[0;39m <==    Updates: 3
2021-11-29 03:22:35.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120242957239586816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 03:23:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120243062067826688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:23:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120243062067826688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:23:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120243062067826688[0;39m ==> Parameters: 
2021-11-29 03:23:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120243062067826688[0;39m <==    Updates: 0
2021-11-29 03:23:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120243062067826688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 03:23:04.730 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:23:04.840 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:23:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120243083056123904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:23:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120243083056123904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:23:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120243083056123904[0;39m ==> Parameters: 
2021-11-29 03:23:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120243083056123904[0;39m <==    Updates: 3
2021-11-29 03:23:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120243083056123904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 03:23:34.738 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:23:34.846 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:23:35.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120243208855883776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:23:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120243208855883776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:23:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120243208855883776[0;39m ==> Parameters: 
2021-11-29 03:23:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120243208855883776[0;39m <==    Updates: 3
2021-11-29 03:23:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120243208855883776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 03:24:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120243313738649600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:24:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120243313738649600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:24:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120243313738649600[0;39m ==> Parameters: 
2021-11-29 03:24:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120243313738649600[0;39m <==    Updates: 0
2021-11-29 03:24:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120243313738649600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 03:24:04.732 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:24:04.838 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:24:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120243334710169600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:24:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120243334710169600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:24:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120243334710169600[0;39m ==> Parameters: 
2021-11-29 03:24:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120243334710169600[0;39m <==    Updates: 3
2021-11-29 03:24:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120243334710169600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 03:24:34.702 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:24:34.843 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:24:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120243460568649728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:24:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120243460568649728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:24:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120243460568649728[0;39m ==> Parameters: 
2021-11-29 03:24:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120243460568649728[0;39m <==    Updates: 3
2021-11-29 03:24:35.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120243460568649728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 03:25:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120243565380112384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:25:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120243565380112384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:25:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120243565380112384[0;39m ==> Parameters: 
2021-11-29 03:25:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120243565380112384[0;39m <==    Updates: 0
2021-11-29 03:25:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120243565380112384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 03:25:04.700 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:25:04.807 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:25:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120243586376798208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:25:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120243586376798208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:25:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120243586376798208[0;39m ==> Parameters: 
2021-11-29 03:25:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120243586376798208[0;39m <==    Updates: 3
2021-11-29 03:25:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120243586376798208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 03:25:34.733 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:25:34.826 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:25:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120243712218501120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:25:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120243712218501120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:25:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120243712218501120[0;39m ==> Parameters: 
2021-11-29 03:25:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120243712218501120[0;39m <==    Updates: 3
2021-11-29 03:25:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120243712218501120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 03:26:00.001 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120243817025769472[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:26:00.002 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120243817025769472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:26:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120243817025769472[0;39m ==> Parameters: 
2021-11-29 03:26:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120243817025769472[0;39m <==    Updates: 0
2021-11-29 03:26:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120243817025769472[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 03:26:04.743 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:26:04.834 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:26:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120243838018260992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:26:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120243838018260992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:26:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120243838018260992[0;39m ==> Parameters: 
2021-11-29 03:26:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120243838018260992[0;39m <==    Updates: 3
2021-11-29 03:26:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120243838018260992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 03:26:34.730 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:26:34.855 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:26:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120243963859963904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:26:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120243963859963904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:26:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120243963859963904[0;39m ==> Parameters: 
2021-11-29 03:26:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120243963859963904[0;39m <==    Updates: 3
2021-11-29 03:26:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120243963859963904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 03:27:00.003 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120244068692398080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:27:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120244068692398080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:27:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120244068692398080[0;39m ==> Parameters: 
2021-11-29 03:27:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120244068692398080[0;39m <==    Updates: 0
2021-11-29 03:27:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120244068692398080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 03:27:04.708 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:27:04.817 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:27:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120244089663918080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:27:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120244089663918080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:27:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120244089663918080[0;39m ==> Parameters: 
2021-11-29 03:27:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120244089663918080[0;39m <==    Updates: 3
2021-11-29 03:27:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120244089663918080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 03:27:34.725 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:27:34.846 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:27:35.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120244215488843776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:27:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120244215488843776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:27:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120244215488843776[0;39m ==> Parameters: 
2021-11-29 03:27:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120244215488843776[0;39m <==    Updates: 3
2021-11-29 03:27:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120244215488843776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 03:28:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120244320363220992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:28:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120244320363220992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:28:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120244320363220992[0;39m ==> Parameters: 
2021-11-29 03:28:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120244320363220992[0;39m <==    Updates: 0
2021-11-29 03:28:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120244320363220992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 03:28:04.727 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:28:04.821 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:28:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120244341338935296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:28:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120244341338935296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:28:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120244341338935296[0;39m ==> Parameters: 
2021-11-29 03:28:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120244341338935296[0;39m <==    Updates: 3
2021-11-29 03:28:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120244341338935296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 03:28:34.710 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:28:34.836 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:28:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120244467159666688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:28:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120244467159666688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:28:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120244467159666688[0;39m ==> Parameters: 
2021-11-29 03:28:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120244467159666688[0;39m <==    Updates: 3
2021-11-29 03:28:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120244467159666688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 03:29:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120244572034043904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:29:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120244572034043904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:29:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120244572034043904[0;39m ==> Parameters: 
2021-11-29 03:29:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120244572034043904[0;39m <==    Updates: 0
2021-11-29 03:29:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120244572034043904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 03:29:04.727 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:29:04.851 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:29:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120244593001369600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:29:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120244593001369600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:29:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120244593001369600[0;39m ==> Parameters: 
2021-11-29 03:29:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120244593001369600[0;39m <==    Updates: 3
2021-11-29 03:29:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120244593001369600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 03:29:34.719 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:29:34.826 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:29:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120244718851461120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:29:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120244718851461120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:29:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120244718851461120[0;39m ==> Parameters: 
2021-11-29 03:29:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120244718851461120[0;39m <==    Updates: 3
2021-11-29 03:29:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120244718851461120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 03:30:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120244823675506688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:30:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120244823675506688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:30:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120244823675506688[0;39m ==> Parameters: 
2021-11-29 03:30:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120244823675506688[0;39m <==    Updates: 0
2021-11-29 03:30:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120244823675506688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 03:30:04.727 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:30:04.835 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:30:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120244844651220992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:30:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120244844651220992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:30:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120244844651220992[0;39m ==> Parameters: 
2021-11-29 03:30:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120244844651220992[0;39m <==    Updates: 3
2021-11-29 03:30:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120244844651220992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 03:30:34.730 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:30:34.838 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:30:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120244970484535296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:30:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120244970484535296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:30:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120244970484535296[0;39m ==> Parameters: 
2021-11-29 03:30:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120244970484535296[0;39m <==    Updates: 3
2021-11-29 03:30:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120244970484535296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 03:31:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120245075363106816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:31:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120245075363106816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:31:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120245075363106816[0;39m ==> Parameters: 
2021-11-29 03:31:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120245075363106816[0;39m <==    Updates: 0
2021-11-29 03:31:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120245075363106816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 03:31:04.739 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:31:04.830 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:31:05.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120245096288489472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:31:05.001 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120245096288489472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:31:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120245096288489472[0;39m ==> Parameters: 
2021-11-29 03:31:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120245096288489472[0;39m <==    Updates: 3
2021-11-29 03:31:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120245096288489472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 03:31:34.721 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:31:34.814 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:31:35.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120245222121803776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:31:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120245222121803776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:31:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120245222121803776[0;39m ==> Parameters: 
2021-11-29 03:31:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120245222121803776[0;39m <==    Updates: 3
2021-11-29 03:31:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120245222121803776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 03:32:00.002 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120245326979403776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:32:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120245326979403776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:32:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120245326979403776[0;39m ==> Parameters: 
2021-11-29 03:32:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120245326979403776[0;39m <==    Updates: 0
2021-11-29 03:32:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120245326979403776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 03:32:04.729 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:32:04.837 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:32:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120245347971895296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:32:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120245347971895296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:32:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120245347971895296[0;39m ==> Parameters: 
2021-11-29 03:32:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120245347971895296[0;39m <==    Updates: 3
2021-11-29 03:32:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120245347971895296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 03:32:34.720 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:32:34.845 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:32:35.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120245473775849472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:32:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120245473775849472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:32:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120245473775849472[0;39m ==> Parameters: 
2021-11-29 03:32:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120245473775849472[0;39m <==    Updates: 3
2021-11-29 03:32:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120245473775849472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 03:33:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120245578687975424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:33:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120245578687975424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:33:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120245578687975424[0;39m ==> Parameters: 
2021-11-29 03:33:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120245578687975424[0;39m <==    Updates: 0
2021-11-29 03:33:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120245578687975424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 03:33:04.714 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:33:04.823 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:33:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120245599634329600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:33:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120245599634329600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:33:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120245599634329600[0;39m ==> Parameters: 
2021-11-29 03:33:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120245599634329600[0;39m <==    Updates: 3
2021-11-29 03:33:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120245599634329600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 03:33:34.717 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:33:34.855 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:33:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120245725476032512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:33:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120245725476032512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:33:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120245725476032512[0;39m ==> Parameters: 
2021-11-29 03:33:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120245725476032512[0;39m <==    Updates: 3
2021-11-29 03:33:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120245725476032512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 03:34:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120245830316855296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:34:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120245830316855296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:34:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120245830316855296[0;39m ==> Parameters: 
2021-11-29 03:34:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120245830316855296[0;39m <==    Updates: 0
2021-11-29 03:34:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120245830316855296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 03:34:04.713 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:34:04.835 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:34:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120245851288375296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:34:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120245851288375296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:34:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120245851288375296[0;39m ==> Parameters: 
2021-11-29 03:34:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120245851288375296[0;39m <==    Updates: 3
2021-11-29 03:34:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120245851288375296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 03:34:34.719 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:34:34.845 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:34:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120245977100718080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:34:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120245977100718080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:34:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120245977100718080[0;39m ==> Parameters: 
2021-11-29 03:34:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120245977100718080[0;39m <==    Updates: 3
2021-11-29 03:34:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120245977100718080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 03:35:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120246081962512384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:35:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120246081962512384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:35:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120246081962512384[0;39m ==> Parameters: 
2021-11-29 03:35:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120246081962512384[0;39m <==    Updates: 0
2021-11-29 03:35:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120246081962512384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 03:35:04.702 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:35:04.823 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:35:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120246102955003904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:35:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120246102955003904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:35:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120246102955003904[0;39m ==> Parameters: 
2021-11-29 03:35:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120246102955003904[0;39m <==    Updates: 3
2021-11-29 03:35:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120246102955003904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 03:35:34.718 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:35:34.812 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:35:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120246228805095424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:35:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120246228805095424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:35:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120246228805095424[0;39m ==> Parameters: 
2021-11-29 03:35:35.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120246228805095424[0;39m <==    Updates: 3
2021-11-29 03:35:35.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120246228805095424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 03:36:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120246333666889728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:36:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120246333666889728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:36:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120246333666889728[0;39m ==> Parameters: 
2021-11-29 03:36:00.021 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120246333666889728[0;39m <==    Updates: 0
2021-11-29 03:36:00.022 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120246333666889728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 03:36:04.745 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:36:04.853 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:36:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120246354600660992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:36:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120246354600660992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:36:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120246354600660992[0;39m ==> Parameters: 
2021-11-29 03:36:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120246354600660992[0;39m <==    Updates: 3
2021-11-29 03:36:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120246354600660992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 03:36:34.737 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:36:34.832 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:36:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120246480421392384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:36:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120246480421392384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:36:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120246480421392384[0;39m ==> Parameters: 
2021-11-29 03:36:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120246480421392384[0;39m <==    Updates: 3
2021-11-29 03:36:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120246480421392384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 03:37:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120246585320935424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:37:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120246585320935424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:37:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120246585320935424[0;39m ==> Parameters: 
2021-11-29 03:37:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120246585320935424[0;39m <==    Updates: 0
2021-11-29 03:37:00.018 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120246585320935424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 03:37:04.725 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:37:04.849 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:37:05.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120246606242123776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:37:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120246606242123776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:37:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120246606242123776[0;39m ==> Parameters: 
2021-11-29 03:37:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120246606242123776[0;39m <==    Updates: 3
2021-11-29 03:37:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120246606242123776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 03:37:34.718 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:37:34.842 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:37:35.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120246732071243776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:37:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120246732071243776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:37:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120246732071243776[0;39m ==> Parameters: 
2021-11-29 03:37:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120246732071243776[0;39m <==    Updates: 3
2021-11-29 03:37:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120246732071243776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 03:38:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120246836983369728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:38:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120246836983369728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:38:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120246836983369728[0;39m ==> Parameters: 
2021-11-29 03:38:00.020 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120246836983369728[0;39m <==    Updates: 0
2021-11-29 03:38:00.020 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120246836983369728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 03:38:04.724 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:38:04.848 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:38:05.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120246857900363776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:38:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120246857900363776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:38:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120246857900363776[0;39m ==> Parameters: 
2021-11-29 03:38:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120246857900363776[0;39m <==    Updates: 3
2021-11-29 03:38:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120246857900363776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 03:38:34.734 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:38:34.844 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:38:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120246983784009728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:38:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120246983784009728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:38:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120246983784009728[0;39m ==> Parameters: 
2021-11-29 03:38:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120246983784009728[0;39m <==    Updates: 3
2021-11-29 03:38:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120246983784009728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 03:39:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120247088608055296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:39:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120247088608055296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:39:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120247088608055296[0;39m ==> Parameters: 
2021-11-29 03:39:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120247088608055296[0;39m <==    Updates: 0
2021-11-29 03:39:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120247088608055296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 03:39:04.718 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:39:04.840 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:39:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120247109592158208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:39:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120247109592158208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:39:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120247109592158208[0;39m ==> Parameters: 
2021-11-29 03:39:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120247109592158208[0;39m <==    Updates: 3
2021-11-29 03:39:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120247109592158208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 03:39:34.715 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:39:34.855 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:39:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120247235425472512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:39:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120247235425472512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:39:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120247235425472512[0;39m ==> Parameters: 
2021-11-29 03:39:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120247235425472512[0;39m <==    Updates: 3
2021-11-29 03:39:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120247235425472512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 03:40:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120247340266295296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:40:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120247340266295296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:40:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120247340266295296[0;39m ==> Parameters: 
2021-11-29 03:40:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120247340266295296[0;39m <==    Updates: 0
2021-11-29 03:40:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120247340266295296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 03:40:04.723 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:40:04.832 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:40:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120247361221038080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:40:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120247361221038080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:40:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120247361221038080[0;39m ==> Parameters: 
2021-11-29 03:40:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120247361221038080[0;39m <==    Updates: 3
2021-11-29 03:40:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120247361221038080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 03:40:34.747 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:40:34.853 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:40:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120247487075323904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:40:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120247487075323904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:40:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120247487075323904[0;39m ==> Parameters: 
2021-11-29 03:40:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120247487075323904[0;39m <==    Updates: 3
2021-11-29 03:40:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120247487075323904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 03:41:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120247591949701120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:41:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120247591949701120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:41:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120247591949701120[0;39m ==> Parameters: 
2021-11-29 03:41:00.019 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120247591949701120[0;39m <==    Updates: 0
2021-11-29 03:41:00.020 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120247591949701120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 03:41:04.721 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:41:04.830 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:41:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120247612929609728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:41:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120247612929609728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:41:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120247612929609728[0;39m ==> Parameters: 
2021-11-29 03:41:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120247612929609728[0;39m <==    Updates: 3
2021-11-29 03:41:05.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120247612929609728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 03:41:34.737 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:41:34.846 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:41:35.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120247738704203776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:41:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120247738704203776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:41:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120247738704203776[0;39m ==> Parameters: 
2021-11-29 03:41:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120247738704203776[0;39m <==    Updates: 3
2021-11-29 03:41:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120247738704203776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 03:42:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120247843620524032[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:42:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120247843620524032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:42:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120247843620524032[0;39m ==> Parameters: 
2021-11-29 03:42:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120247843620524032[0;39m <==    Updates: 0
2021-11-29 03:42:00.018 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120247843620524032[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 03:42:04.729 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:42:04.852 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:42:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120247864545906688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:42:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120247864545906688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:42:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120247864545906688[0;39m ==> Parameters: 
2021-11-29 03:42:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120247864545906688[0;39m <==    Updates: 3
2021-11-29 03:42:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120247864545906688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 03:42:34.740 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:42:34.835 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:42:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120247990379220992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:42:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120247990379220992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:42:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120247990379220992[0;39m ==> Parameters: 
2021-11-29 03:42:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120247990379220992[0;39m <==    Updates: 3
2021-11-29 03:42:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120247990379220992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 03:43:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120248095274569728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:43:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120248095274569728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:43:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120248095274569728[0;39m ==> Parameters: 
2021-11-29 03:43:00.020 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120248095274569728[0;39m <==    Updates: 0
2021-11-29 03:43:00.021 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120248095274569728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 03:43:04.734 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:43:04.859 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:43:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120248116250284032[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:43:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120248116250284032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:43:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120248116250284032[0;39m ==> Parameters: 
2021-11-29 03:43:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120248116250284032[0;39m <==    Updates: 3
2021-11-29 03:43:05.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120248116250284032[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 03:43:34.736 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:43:34.845 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:43:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120248242024878080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:43:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120248242024878080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:43:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120248242024878080[0;39m ==> Parameters: 
2021-11-29 03:43:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120248242024878080[0;39m <==    Updates: 3
2021-11-29 03:43:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120248242024878080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 03:44:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120248346916032512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:44:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120248346916032512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:44:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120248346916032512[0;39m ==> Parameters: 
2021-11-29 03:44:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120248346916032512[0;39m <==    Updates: 0
2021-11-29 03:44:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120248346916032512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 03:44:04.744 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:44:04.838 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:44:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120248367870775296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:44:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120248367870775296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:44:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120248367870775296[0;39m ==> Parameters: 
2021-11-29 03:44:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120248367870775296[0;39m <==    Updates: 3
2021-11-29 03:44:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120248367870775296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 03:44:34.749 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:44:34.842 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:44:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120248493720866816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:44:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120248493720866816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:44:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120248493720866816[0;39m ==> Parameters: 
2021-11-29 03:44:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120248493720866816[0;39m <==    Updates: 3
2021-11-29 03:44:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120248493720866816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 03:45:00.002 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120248598536523776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:45:00.002 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120248598536523776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:45:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120248598536523776[0;39m ==> Parameters: 
2021-11-29 03:45:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120248598536523776[0;39m <==    Updates: 0
2021-11-29 03:45:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120248598536523776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 03:45:04.694 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:45:04.818 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:45:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120248619516432384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:45:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120248619516432384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:45:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120248619516432384[0;39m ==> Parameters: 
2021-11-29 03:45:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120248619516432384[0;39m <==    Updates: 3
2021-11-29 03:45:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120248619516432384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 03:45:34.735 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:45:34.845 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:45:35.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120248745332969472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:45:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120248745332969472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:45:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120248745332969472[0;39m ==> Parameters: 
2021-11-29 03:45:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120248745332969472[0;39m <==    Updates: 3
2021-11-29 03:45:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120248745332969472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 03:46:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120248850203152384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:46:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120248850203152384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:46:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120248850203152384[0;39m ==> Parameters: 
2021-11-29 03:46:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120248850203152384[0;39m <==    Updates: 0
2021-11-29 03:46:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120248850203152384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 03:46:04.720 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:46:04.842 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:46:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120248871212421120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:46:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120248871212421120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:46:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120248871212421120[0;39m ==> Parameters: 
2021-11-29 03:46:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120248871212421120[0;39m <==    Updates: 3
2021-11-29 03:46:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120248871212421120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 03:46:34.724 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:46:34.851 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:46:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120248997016375296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:46:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120248997016375296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:46:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120248997016375296[0;39m ==> Parameters: 
2021-11-29 03:46:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120248997016375296[0;39m <==    Updates: 3
2021-11-29 03:46:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120248997016375296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 03:47:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120249101894946816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:47:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120249101894946816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:47:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120249101894946816[0;39m ==> Parameters: 
2021-11-29 03:47:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120249101894946816[0;39m <==    Updates: 0
2021-11-29 03:47:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120249101894946816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 03:47:04.736 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:47:04.843 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:47:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120249122870661120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:47:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120249122870661120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:47:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120249122870661120[0;39m ==> Parameters: 
2021-11-29 03:47:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120249122870661120[0;39m <==    Updates: 3
2021-11-29 03:47:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120249122870661120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 03:47:34.726 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:47:34.849 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:47:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120249248662032384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:47:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120249248662032384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:47:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120249248662032384[0;39m ==> Parameters: 
2021-11-29 03:47:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120249248662032384[0;39m <==    Updates: 3
2021-11-29 03:47:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120249248662032384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 03:48:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120249353536409600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:48:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120249353536409600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:48:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120249353536409600[0;39m ==> Parameters: 
2021-11-29 03:48:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120249353536409600[0;39m <==    Updates: 0
2021-11-29 03:48:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120249353536409600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 03:48:04.737 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:48:04.861 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:48:05.000 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120249374474375168[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:48:05.001 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120249374474375168[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:48:05.001 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120249374474375168[0;39m ==> Parameters: 
2021-11-29 03:48:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120249374474375168[0;39m <==    Updates: 3
2021-11-29 03:48:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120249374474375168[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 03:48:34.740 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:48:34.846 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:48:35.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120249500311883776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:48:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120249500311883776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:48:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120249500311883776[0;39m ==> Parameters: 
2021-11-29 03:48:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120249500311883776[0;39m <==    Updates: 3
2021-11-29 03:48:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120249500311883776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 03:49:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120249605190455296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:49:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120249605190455296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:49:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120249605190455296[0;39m ==> Parameters: 
2021-11-29 03:49:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120249605190455296[0;39m <==    Updates: 0
2021-11-29 03:49:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120249605190455296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 03:49:04.734 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:49:04.826 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:49:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120249626174558208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:49:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120249626174558208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:49:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120249626174558208[0;39m ==> Parameters: 
2021-11-29 03:49:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120249626174558208[0;39m <==    Updates: 3
2021-11-29 03:49:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120249626174558208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 03:49:34.748 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:49:34.855 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:49:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120249751999483904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:49:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120249751999483904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:49:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120249751999483904[0;39m ==> Parameters: 
2021-11-29 03:49:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120249751999483904[0;39m <==    Updates: 3
2021-11-29 03:49:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120249751999483904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 03:50:00.002 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120249856827723776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:50:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120249856827723776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:50:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120249856827723776[0;39m ==> Parameters: 
2021-11-29 03:50:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120249856827723776[0;39m <==    Updates: 0
2021-11-29 03:50:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120249856827723776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 03:50:04.724 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:50:04.848 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:50:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120249877811826688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:50:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120249877811826688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:50:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120249877811826688[0;39m ==> Parameters: 
2021-11-29 03:50:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120249877811826688[0;39m <==    Updates: 3
2021-11-29 03:50:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120249877811826688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 03:50:34.734 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:50:34.843 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:50:35.000 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120250003619975168[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:50:35.001 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120250003619975168[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:50:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120250003619975168[0;39m ==> Parameters: 
2021-11-29 03:50:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120250003619975168[0;39m <==    Updates: 3
2021-11-29 03:50:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120250003619975168[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 03:51:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120250108502740992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:51:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120250108502740992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:51:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120250108502740992[0;39m ==> Parameters: 
2021-11-29 03:51:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120250108502740992[0;39m <==    Updates: 0
2021-11-29 03:51:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120250108502740992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 03:51:04.726 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:51:04.850 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:51:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120250129474260992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:51:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120250129474260992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:51:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120250129474260992[0;39m ==> Parameters: 
2021-11-29 03:51:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120250129474260992[0;39m <==    Updates: 3
2021-11-29 03:51:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120250129474260992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 03:51:34.722 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:51:34.830 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:51:35.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120250255286603776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:51:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120250255286603776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:51:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120250255286603776[0;39m ==> Parameters: 
2021-11-29 03:51:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120250255286603776[0;39m <==    Updates: 3
2021-11-29 03:51:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120250255286603776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 03:52:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120250360156786688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:52:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120250360156786688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:52:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120250360156786688[0;39m ==> Parameters: 
2021-11-29 03:52:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120250360156786688[0;39m <==    Updates: 0
2021-11-29 03:52:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120250360156786688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 03:52:04.704 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:52:04.845 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:52:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120250381166055424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:52:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120250381166055424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:52:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120250381166055424[0;39m ==> Parameters: 
2021-11-29 03:52:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120250381166055424[0;39m <==    Updates: 3
2021-11-29 03:52:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120250381166055424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 03:52:34.727 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:52:34.852 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:52:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120250506965815296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:52:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120250506965815296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:52:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120250506965815296[0;39m ==> Parameters: 
2021-11-29 03:52:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120250506965815296[0;39m <==    Updates: 3
2021-11-29 03:52:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120250506965815296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 03:53:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120250611852775424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:53:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120250611852775424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:53:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120250611852775424[0;39m ==> Parameters: 
2021-11-29 03:53:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120250611852775424[0;39m <==    Updates: 0
2021-11-29 03:53:00.020 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120250611852775424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 03:53:04.715 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:53:04.839 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:53:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120250632811712512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:53:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120250632811712512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:53:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120250632811712512[0;39m ==> Parameters: 
2021-11-29 03:53:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120250632811712512[0;39m <==    Updates: 3
2021-11-29 03:53:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120250632811712512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 03:53:34.726 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:53:34.838 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:53:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120250758632443904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:53:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120250758632443904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:53:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120250758632443904[0;39m ==> Parameters: 
2021-11-29 03:53:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120250758632443904[0;39m <==    Updates: 3
2021-11-29 03:53:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120250758632443904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶6æ¯«ç§’
2021-11-29 03:54:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120250863515209728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:54:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120250863515209728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:54:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120250863515209728[0;39m ==> Parameters: 
2021-11-29 03:54:00.020 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120250863515209728[0;39m <==    Updates: 0
2021-11-29 03:54:00.020 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120250863515209728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 03:54:04.736 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:54:04.861 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:54:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120250884482535424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:54:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120250884482535424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:54:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120250884482535424[0;39m ==> Parameters: 
2021-11-29 03:54:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120250884482535424[0;39m <==    Updates: 3
2021-11-29 03:54:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120250884482535424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 03:54:34.717 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:54:34.826 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:54:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120251010307461120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:54:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120251010307461120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:54:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120251010307461120[0;39m ==> Parameters: 
2021-11-29 03:54:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120251010307461120[0;39m <==    Updates: 3
2021-11-29 03:54:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120251010307461120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 03:55:00.002 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120251115118923776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:55:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120251115118923776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:55:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120251115118923776[0;39m ==> Parameters: 
2021-11-29 03:55:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120251115118923776[0;39m <==    Updates: 0
2021-11-29 03:55:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120251115118923776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 03:55:04.707 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:55:04.831 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:55:05.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120251136090443776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:55:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120251136090443776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:55:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120251136090443776[0;39m ==> Parameters: 
2021-11-29 03:55:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120251136090443776[0;39m <==    Updates: 3
2021-11-29 03:55:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120251136090443776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 03:55:34.736 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:55:34.845 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:55:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120251261974089728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:55:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120251261974089728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:55:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120251261974089728[0;39m ==> Parameters: 
2021-11-29 03:55:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120251261974089728[0;39m <==    Updates: 3
2021-11-29 03:55:35.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120251261974089728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 03:56:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120251366789746688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:56:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120251366789746688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:56:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120251366789746688[0;39m ==> Parameters: 
2021-11-29 03:56:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120251366789746688[0;39m <==    Updates: 0
2021-11-29 03:56:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120251366789746688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 03:56:04.740 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:56:04.849 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:56:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120251387757072384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:56:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120251387757072384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:56:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120251387757072384[0;39m ==> Parameters: 
2021-11-29 03:56:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120251387757072384[0;39m <==    Updates: 3
2021-11-29 03:56:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120251387757072384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 03:56:34.753 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:56:34.862 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:56:35.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120251513577803776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:56:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120251513577803776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:56:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120251513577803776[0;39m ==> Parameters: 
2021-11-29 03:56:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120251513577803776[0;39m <==    Updates: 3
2021-11-29 03:56:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120251513577803776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 03:57:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120251618464763904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:57:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120251618464763904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:57:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120251618464763904[0;39m ==> Parameters: 
2021-11-29 03:57:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120251618464763904[0;39m <==    Updates: 0
2021-11-29 03:57:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120251618464763904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 03:57:04.739 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:57:04.863 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:57:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120251639411118080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:57:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120251639411118080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:57:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120251639411118080[0;39m ==> Parameters: 
2021-11-29 03:57:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120251639411118080[0;39m <==    Updates: 3
2021-11-29 03:57:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120251639411118080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 03:57:34.726 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:57:34.837 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:57:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120251765252820992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:57:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120251765252820992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:57:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120251765252820992[0;39m ==> Parameters: 
2021-11-29 03:57:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120251765252820992[0;39m <==    Updates: 3
2021-11-29 03:57:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120251765252820992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 03:58:00.002 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120251870093643776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:58:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120251870093643776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:58:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120251870093643776[0;39m ==> Parameters: 
2021-11-29 03:58:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120251870093643776[0;39m <==    Updates: 0
2021-11-29 03:58:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120251870093643776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 03:58:04.728 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:58:04.836 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:58:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120251891081940992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:58:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120251891081940992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:58:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120251891081940992[0;39m ==> Parameters: 
2021-11-29 03:58:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120251891081940992[0;39m <==    Updates: 3
2021-11-29 03:58:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120251891081940992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 03:58:34.733 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:58:34.842 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:58:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120252016940421120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:58:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120252016940421120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:58:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120252016940421120[0;39m ==> Parameters: 
2021-11-29 03:58:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120252016940421120[0;39m <==    Updates: 3
2021-11-29 03:58:35.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120252016940421120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 03:59:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120252121785438208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 03:59:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120252121785438208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 03:59:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120252121785438208[0;39m ==> Parameters: 
2021-11-29 03:59:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120252121785438208[0;39m <==    Updates: 0
2021-11-29 03:59:00.018 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120252121785438208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2021-11-29 03:59:04.748 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:59:04.856 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:59:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120252142756958208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:59:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120252142756958208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:59:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120252142756958208[0;39m ==> Parameters: 
2021-11-29 03:59:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120252142756958208[0;39m <==    Updates: 3
2021-11-29 03:59:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120252142756958208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 03:59:34.731 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:59:34.842 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 03:59:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120252268598661120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 03:59:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120252268598661120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 03:59:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120252268598661120[0;39m ==> Parameters: 
2021-11-29 03:59:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120252268598661120[0;39m <==    Updates: 3
2021-11-29 03:59:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120252268598661120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 04:00:00.002 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120252373410123776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:00:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120252373410123776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:00:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120252373410123776[0;39m ==> Parameters: 
2021-11-29 04:00:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120252373410123776[0;39m <==    Updates: 0
2021-11-29 04:00:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120252373410123776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 04:00:04.726 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:00:04.850 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:00:05.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120252394377449472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:00:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120252394377449472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:00:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120252394377449472[0;39m ==> Parameters: 
2021-11-29 04:00:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120252394377449472[0;39m <==    Updates: 3
2021-11-29 04:00:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120252394377449472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 04:00:34.730 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:00:34.855 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:00:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120252520235929600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:00:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120252520235929600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:00:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120252520235929600[0;39m ==> Parameters: 
2021-11-29 04:00:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120252520235929600[0;39m <==    Updates: 3
2021-11-29 04:00:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120252520235929600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 04:01:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120252625110306816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:01:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120252625110306816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:01:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120252625110306816[0;39m ==> Parameters: 
2021-11-29 04:01:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120252625110306816[0;39m <==    Updates: 0
2021-11-29 04:01:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120252625110306816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 04:01:04.734 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:01:04.844 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:01:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120252646086021120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:01:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120252646086021120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:01:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120252646086021120[0;39m ==> Parameters: 
2021-11-29 04:01:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120252646086021120[0;39m <==    Updates: 3
2021-11-29 04:01:05.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120252646086021120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 04:01:34.738 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:01:34.846 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:01:35.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120252771869003776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:01:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120252771869003776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:01:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120252771869003776[0;39m ==> Parameters: 
2021-11-29 04:01:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120252771869003776[0;39m <==    Updates: 3
2021-11-29 04:01:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120252771869003776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 04:02:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120252876747575296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:02:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120252876747575296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:02:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120252876747575296[0;39m ==> Parameters: 
2021-11-29 04:02:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120252876747575296[0;39m <==    Updates: 0
2021-11-29 04:02:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120252876747575296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 04:02:04.738 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:02:04.861 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:02:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120252897748455424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:02:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120252897748455424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:02:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120252897748455424[0;39m ==> Parameters: 
2021-11-29 04:02:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120252897748455424[0;39m <==    Updates: 3
2021-11-29 04:02:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120252897748455424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 04:02:34.726 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:02:34.868 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:02:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120253023544020992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:02:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120253023544020992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:02:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120253023544020992[0;39m ==> Parameters: 
2021-11-29 04:02:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120253023544020992[0;39m <==    Updates: 3
2021-11-29 04:02:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120253023544020992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 04:03:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120253128430981120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:03:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120253128430981120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:03:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120253128430981120[0;39m ==> Parameters: 
2021-11-29 04:03:00.020 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120253128430981120[0;39m <==    Updates: 0
2021-11-29 04:03:00.021 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120253128430981120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 04:03:04.740 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:03:04.850 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:03:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120253149364752384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:03:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120253149364752384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:03:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120253149364752384[0;39m ==> Parameters: 
2021-11-29 04:03:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120253149364752384[0;39m <==    Updates: 3
2021-11-29 04:03:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120253149364752384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 04:03:34.720 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:03:34.844 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:03:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120253275244204032[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:03:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120253275244204032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:03:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120253275244204032[0;39m ==> Parameters: 
2021-11-29 04:03:35.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120253275244204032[0;39m <==    Updates: 3
2021-11-29 04:03:35.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120253275244204032[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 04:04:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120253380059860992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:04:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120253380059860992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:04:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120253380059860992[0;39m ==> Parameters: 
2021-11-29 04:04:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120253380059860992[0;39m <==    Updates: 0
2021-11-29 04:04:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120253380059860992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 04:04:04.733 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:04:04.841 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:04:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120253401052352512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:04:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120253401052352512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:04:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120253401052352512[0;39m ==> Parameters: 
2021-11-29 04:04:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120253401052352512[0;39m <==    Updates: 3
2021-11-29 04:04:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120253401052352512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 04:04:34.720 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:04:34.856 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:04:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120253526889861120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:04:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120253526889861120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:04:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120253526889861120[0;39m ==> Parameters: 
2021-11-29 04:04:35.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120253526889861120[0;39m <==    Updates: 3
2021-11-29 04:04:35.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120253526889861120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 04:05:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120253631743266816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:05:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120253631743266816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:05:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120253631743266816[0;39m ==> Parameters: 
2021-11-29 04:05:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120253631743266816[0;39m <==    Updates: 0
2021-11-29 04:05:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120253631743266816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 04:05:04.724 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:05:04.831 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:05:05.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120253652672843776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:05:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120253652672843776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:05:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120253652672843776[0;39m ==> Parameters: 
2021-11-29 04:05:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120253652672843776[0;39m <==    Updates: 3
2021-11-29 04:05:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120253652672843776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 04:05:34.746 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:05:34.843 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:05:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120253778535518208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:05:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120253778535518208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:05:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120253778535518208[0;39m ==> Parameters: 
2021-11-29 04:05:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120253778535518208[0;39m <==    Updates: 3
2021-11-29 04:05:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120253778535518208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 04:06:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120253883405701120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:06:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120253883405701120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:06:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120253883405701120[0;39m ==> Parameters: 
2021-11-29 04:06:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120253883405701120[0;39m <==    Updates: 0
2021-11-29 04:06:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120253883405701120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 04:06:04.737 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:06:04.831 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:06:05.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120253904331083776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:06:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120253904331083776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:06:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120253904331083776[0;39m ==> Parameters: 
2021-11-29 04:06:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120253904331083776[0;39m <==    Updates: 3
2021-11-29 04:06:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120253904331083776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 04:06:34.741 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:06:34.851 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:06:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120254030181175296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:06:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120254030181175296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:06:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120254030181175296[0;39m ==> Parameters: 
2021-11-29 04:06:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120254030181175296[0;39m <==    Updates: 3
2021-11-29 04:06:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120254030181175296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 04:07:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120254135059746816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:07:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120254135059746816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:07:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120254135059746816[0;39m ==> Parameters: 
2021-11-29 04:07:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120254135059746816[0;39m <==    Updates: 0
2021-11-29 04:07:00.019 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120254135059746816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 04:07:04.722 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:07:04.847 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:07:05.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120254155985129472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:07:05.001 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120254155985129472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:07:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120254155985129472[0;39m ==> Parameters: 
2021-11-29 04:07:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120254155985129472[0;39m <==    Updates: 3
2021-11-29 04:07:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120254155985129472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 04:07:34.754 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:07:34.861 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:07:35.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120254281818443776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:07:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120254281818443776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:07:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120254281818443776[0;39m ==> Parameters: 
2021-11-29 04:07:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120254281818443776[0;39m <==    Updates: 3
2021-11-29 04:07:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120254281818443776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 04:08:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120254386730569728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:08:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120254386730569728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:08:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120254386730569728[0;39m ==> Parameters: 
2021-11-29 04:08:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120254386730569728[0;39m <==    Updates: 0
2021-11-29 04:08:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120254386730569728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 04:08:04.735 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:08:04.859 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:08:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120254407693701120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:08:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120254407693701120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:08:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120254407693701120[0;39m ==> Parameters: 
2021-11-29 04:08:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120254407693701120[0;39m <==    Updates: 3
2021-11-29 04:08:05.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120254407693701120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 04:08:34.725 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:08:34.834 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:08:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120254533489266688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:08:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120254533489266688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:08:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120254533489266688[0;39m ==> Parameters: 
2021-11-29 04:08:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120254533489266688[0;39m <==    Updates: 3
2021-11-29 04:08:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120254533489266688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 04:09:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120254638380421120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:09:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120254638380421120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:09:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120254638380421120[0;39m ==> Parameters: 
2021-11-29 04:09:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120254638380421120[0;39m <==    Updates: 0
2021-11-29 04:09:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120254638380421120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 04:09:04.749 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:09:04.842 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:09:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120254659339358208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:09:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120254659339358208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:09:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120254659339358208[0;39m ==> Parameters: 
2021-11-29 04:09:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120254659339358208[0;39m <==    Updates: 3
2021-11-29 04:09:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120254659339358208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 04:09:34.737 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:09:34.844 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:09:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120254785193644032[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:09:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120254785193644032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:09:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120254785193644032[0;39m ==> Parameters: 
2021-11-29 04:09:35.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120254785193644032[0;39m <==    Updates: 3
2021-11-29 04:09:35.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120254785193644032[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 04:10:00.002 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120254889992523776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:10:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120254889992523776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:10:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120254889992523776[0;39m ==> Parameters: 
2021-11-29 04:10:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120254889992523776[0;39m <==    Updates: 0
2021-11-29 04:10:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120254889992523776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 04:10:04.739 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:10:04.865 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:10:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120254910968238080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:10:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120254910968238080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:10:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120254910968238080[0;39m ==> Parameters: 
2021-11-29 04:10:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120254910968238080[0;39m <==    Updates: 3
2021-11-29 04:10:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120254910968238080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 04:10:34.741 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:10:34.851 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:10:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120255036805746688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:10:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120255036805746688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:10:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120255036805746688[0;39m ==> Parameters: 
2021-11-29 04:10:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120255036805746688[0;39m <==    Updates: 3
2021-11-29 04:10:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120255036805746688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 04:11:00.002 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120255141650763776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:11:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120255141650763776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:11:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120255141650763776[0;39m ==> Parameters: 
2021-11-29 04:11:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120255141650763776[0;39m <==    Updates: 0
2021-11-29 04:11:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120255141650763776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 04:11:04.751 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:11:04.859 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:11:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120255162672615424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:11:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120255162672615424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:11:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120255162672615424[0;39m ==> Parameters: 
2021-11-29 04:11:05.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120255162672615424[0;39m <==    Updates: 3
2021-11-29 04:11:05.019 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120255162672615424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 04:11:34.706 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:11:34.861 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:11:35.017 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120255288514318336[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:11:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120255288514318336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:11:35.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120255288514318336[0;39m ==> Parameters: 
2021-11-29 04:11:35.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120255288514318336[0;39m <==    Updates: 3
2021-11-29 04:11:35.019 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120255288514318336[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 04:12:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120255393363529728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:12:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120255393363529728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:12:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120255393363529728[0;39m ==> Parameters: 
2021-11-29 04:12:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120255393363529728[0;39m <==    Updates: 0
2021-11-29 04:12:00.019 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120255393363529728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 04:12:04.747 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:12:04.856 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:12:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120255414318272512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:12:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120255414318272512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:12:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120255414318272512[0;39m ==> Parameters: 
2021-11-29 04:12:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120255414318272512[0;39m <==    Updates: 3
2021-11-29 04:12:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120255414318272512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 04:12:34.740 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:12:34.849 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:12:35.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120255540109643776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:12:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120255540109643776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:12:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120255540109643776[0;39m ==> Parameters: 
2021-11-29 04:12:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120255540109643776[0;39m <==    Updates: 3
2021-11-29 04:12:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120255540109643776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 04:13:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120255644979826688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:13:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120255644979826688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:13:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120255644979826688[0;39m ==> Parameters: 
2021-11-29 04:13:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120255644979826688[0;39m <==    Updates: 0
2021-11-29 04:13:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120255644979826688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 04:13:04.737 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:13:04.862 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:13:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120255665993289728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:13:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120255665993289728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:13:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120255665993289728[0;39m ==> Parameters: 
2021-11-29 04:13:05.019 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120255665993289728[0;39m <==    Updates: 3
2021-11-29 04:13:05.019 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120255665993289728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 04:13:34.734 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:13:34.841 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:13:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120255791818215424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:13:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120255791818215424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:13:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120255791818215424[0;39m ==> Parameters: 
2021-11-29 04:13:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120255791818215424[0;39m <==    Updates: 3
2021-11-29 04:13:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120255791818215424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 04:14:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120255896671621120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:14:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120255896671621120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:14:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120255896671621120[0;39m ==> Parameters: 
2021-11-29 04:14:00.019 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120255896671621120[0;39m <==    Updates: 0
2021-11-29 04:14:00.020 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120255896671621120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 04:14:04.737 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:14:04.861 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:14:05.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120255917592809472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:14:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120255917592809472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:14:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120255917592809472[0;39m ==> Parameters: 
2021-11-29 04:14:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120255917592809472[0;39m <==    Updates: 3
2021-11-29 04:14:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120255917592809472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 04:14:34.723 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:14:34.848 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:14:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120256043430318080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:14:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120256043430318080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:14:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120256043430318080[0;39m ==> Parameters: 
2021-11-29 04:14:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120256043430318080[0;39m <==    Updates: 3
2021-11-29 04:14:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120256043430318080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 04:15:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120256148334055424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:15:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120256148334055424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:15:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120256148334055424[0;39m ==> Parameters: 
2021-11-29 04:15:00.020 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120256148334055424[0;39m <==    Updates: 0
2021-11-29 04:15:00.021 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120256148334055424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 04:15:04.725 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:15:04.835 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:15:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120256169272020992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:15:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120256169272020992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:15:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120256169272020992[0;39m ==> Parameters: 
2021-11-29 04:15:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120256169272020992[0;39m <==    Updates: 3
2021-11-29 04:15:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120256169272020992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 04:15:34.741 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:15:34.867 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:15:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120256295096946688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:15:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120256295096946688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:15:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120256295096946688[0;39m ==> Parameters: 
2021-11-29 04:15:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120256295096946688[0;39m <==    Updates: 3
2021-11-29 04:15:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120256295096946688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 04:16:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120256399958740992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:16:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120256399958740992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:16:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120256399958740992[0;39m ==> Parameters: 
2021-11-29 04:16:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120256399958740992[0;39m <==    Updates: 0
2021-11-29 04:16:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120256399958740992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 04:16:04.750 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:16:04.858 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:16:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120256420959621120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:16:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120256420959621120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:16:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120256420959621120[0;39m ==> Parameters: 
2021-11-29 04:16:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120256420959621120[0;39m <==    Updates: 3
2021-11-29 04:16:05.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120256420959621120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 04:16:34.758 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:16:34.853 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:16:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120256546767769600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:16:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120256546767769600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:16:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120256546767769600[0;39m ==> Parameters: 
2021-11-29 04:16:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120256546767769600[0;39m <==    Updates: 3
2021-11-29 04:16:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120256546767769600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 04:17:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120256651625369600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:17:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120256651625369600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:17:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120256651625369600[0;39m ==> Parameters: 
2021-11-29 04:17:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120256651625369600[0;39m <==    Updates: 0
2021-11-29 04:17:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120256651625369600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 04:17:04.747 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:17:04.855 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:17:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120256672605278208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:17:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120256672605278208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:17:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120256672605278208[0;39m ==> Parameters: 
2021-11-29 04:17:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120256672605278208[0;39m <==    Updates: 3
2021-11-29 04:17:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120256672605278208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 04:17:34.729 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:17:34.853 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:17:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120256798430203904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:17:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120256798430203904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:17:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120256798430203904[0;39m ==> Parameters: 
2021-11-29 04:17:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120256798430203904[0;39m <==    Updates: 3
2021-11-29 04:17:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120256798430203904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 04:18:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120256903266832384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:18:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120256903266832384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:18:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120256903266832384[0;39m ==> Parameters: 
2021-11-29 04:18:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120256903266832384[0;39m <==    Updates: 0
2021-11-29 04:18:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120256903266832384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 04:18:04.724 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:18:04.864 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:18:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120256924234158080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:18:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120256924234158080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:18:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120256924234158080[0;39m ==> Parameters: 
2021-11-29 04:18:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120256924234158080[0;39m <==    Updates: 3
2021-11-29 04:18:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120256924234158080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 04:18:34.738 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:18:34.863 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:18:35.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120257050059083776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:18:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120257050059083776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:18:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120257050059083776[0;39m ==> Parameters: 
2021-11-29 04:18:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120257050059083776[0;39m <==    Updates: 3
2021-11-29 04:18:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120257050059083776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 04:19:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120257154937655296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:19:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120257154937655296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:19:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120257154937655296[0;39m ==> Parameters: 
2021-11-29 04:19:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120257154937655296[0;39m <==    Updates: 0
2021-11-29 04:19:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120257154937655296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 04:19:04.753 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:19:04.860 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:19:05.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120257175888203776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:19:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120257175888203776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:19:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120257175888203776[0;39m ==> Parameters: 
2021-11-29 04:19:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120257175888203776[0;39m <==    Updates: 3
2021-11-29 04:19:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120257175888203776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 04:19:34.729 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:19:34.838 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:19:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120257301746683904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:19:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120257301746683904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:19:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120257301746683904[0;39m ==> Parameters: 
2021-11-29 04:19:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120257301746683904[0;39m <==    Updates: 3
2021-11-29 04:19:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120257301746683904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 04:20:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120257406608478208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:20:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120257406608478208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:20:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120257406608478208[0;39m ==> Parameters: 
2021-11-29 04:20:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120257406608478208[0;39m <==    Updates: 0
2021-11-29 04:20:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120257406608478208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 04:20:04.752 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:20:04.860 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:20:05.000 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120257427538055168[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:20:05.001 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120257427538055168[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:20:05.001 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120257427538055168[0;39m ==> Parameters: 
2021-11-29 04:20:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120257427538055168[0;39m <==    Updates: 3
2021-11-29 04:20:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120257427538055168[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 04:20:34.746 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:20:34.856 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:20:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120257553409118208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:20:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120257553409118208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:20:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120257553409118208[0;39m ==> Parameters: 
2021-11-29 04:20:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120257553409118208[0;39m <==    Updates: 3
2021-11-29 04:20:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120257553409118208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 04:21:00.001 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120257658228969472[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:21:00.002 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120257658228969472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:21:00.002 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120257658228969472[0;39m ==> Parameters: 
2021-11-29 04:21:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120257658228969472[0;39m <==    Updates: 0
2021-11-29 04:21:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120257658228969472[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 04:21:04.719 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:21:04.844 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:21:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120257679255015424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:21:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120257679255015424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:21:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120257679255015424[0;39m ==> Parameters: 
2021-11-29 04:21:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120257679255015424[0;39m <==    Updates: 3
2021-11-29 04:21:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120257679255015424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 04:21:34.736 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:21:34.843 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:21:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120257805088329728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:21:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120257805088329728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:21:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120257805088329728[0;39m ==> Parameters: 
2021-11-29 04:21:35.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120257805088329728[0;39m <==    Updates: 3
2021-11-29 04:21:35.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120257805088329728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 04:22:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120257909945929728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:22:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120257909945929728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:22:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120257909945929728[0;39m ==> Parameters: 
2021-11-29 04:22:00.022 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120257909945929728[0;39m <==    Updates: 0
2021-11-29 04:22:00.022 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120257909945929728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 04:22:04.741 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:22:04.864 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:22:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120257930867118080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:22:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120257930867118080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:22:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120257930867118080[0;39m ==> Parameters: 
2021-11-29 04:22:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120257930867118080[0;39m <==    Updates: 3
2021-11-29 04:22:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120257930867118080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 04:22:34.753 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:22:34.863 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:22:35.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120258056692043776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:22:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120258056692043776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:22:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120258056692043776[0;39m ==> Parameters: 
2021-11-29 04:22:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120258056692043776[0;39m <==    Updates: 3
2021-11-29 04:22:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120258056692043776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 04:23:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120258161562226688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:23:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120258161562226688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:23:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120258161562226688[0;39m ==> Parameters: 
2021-11-29 04:23:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120258161562226688[0;39m <==    Updates: 0
2021-11-29 04:23:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120258161562226688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 04:23:04.733 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:23:04.874 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:23:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120258182567301120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:23:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120258182567301120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:23:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120258182567301120[0;39m ==> Parameters: 
2021-11-29 04:23:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120258182567301120[0;39m <==    Updates: 3
2021-11-29 04:23:05.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120258182567301120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 04:23:34.735 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:23:34.860 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:23:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120258308404809728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:23:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120258308404809728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:23:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120258308404809728[0;39m ==> Parameters: 
2021-11-29 04:23:35.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120258308404809728[0;39m <==    Updates: 3
2021-11-29 04:23:35.019 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120258308404809728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 04:24:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120258413254021120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:24:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120258413254021120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:24:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120258413254021120[0;39m ==> Parameters: 
2021-11-29 04:24:00.019 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120258413254021120[0;39m <==    Updates: 0
2021-11-29 04:24:00.020 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120258413254021120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 04:24:04.758 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:24:04.858 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:24:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120258434204569600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:24:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120258434204569600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:24:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120258434204569600[0;39m ==> Parameters: 
2021-11-29 04:24:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120258434204569600[0;39m <==    Updates: 3
2021-11-29 04:24:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120258434204569600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 04:24:34.738 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:24:34.845 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:24:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120258560063049728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:24:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120258560063049728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:24:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120258560063049728[0;39m ==> Parameters: 
2021-11-29 04:24:35.020 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120258560063049728[0;39m <==    Updates: 3
2021-11-29 04:24:35.020 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120258560063049728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 04:25:00.002 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120258664866123776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:25:00.002 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120258664866123776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:25:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120258664866123776[0;39m ==> Parameters: 
2021-11-29 04:25:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120258664866123776[0;39m <==    Updates: 0
2021-11-29 04:25:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120258664866123776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 04:25:04.730 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:25:04.839 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:25:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120258685875392512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:25:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120258685875392512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:25:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120258685875392512[0;39m ==> Parameters: 
2021-11-29 04:25:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120258685875392512[0;39m <==    Updates: 3
2021-11-29 04:25:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120258685875392512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 04:25:34.733 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:25:34.842 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:25:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120258811708706816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:25:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120258811708706816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:25:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120258811708706816[0;39m ==> Parameters: 
2021-11-29 04:25:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120258811708706816[0;39m <==    Updates: 3
2021-11-29 04:25:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120258811708706816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 04:26:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120258916536946688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:26:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120258916536946688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:26:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120258916536946688[0;39m ==> Parameters: 
2021-11-29 04:26:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120258916536946688[0;39m <==    Updates: 0
2021-11-29 04:26:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120258916536946688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 04:26:04.749 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:26:04.856 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:26:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120258937529438208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:26:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120258937529438208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:26:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120258937529438208[0;39m ==> Parameters: 
2021-11-29 04:26:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120258937529438208[0;39m <==    Updates: 3
2021-11-29 04:26:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120258937529438208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 04:26:34.738 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:26:34.865 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:26:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120259063345975296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:26:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120259063345975296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:26:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120259063345975296[0;39m ==> Parameters: 
2021-11-29 04:26:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120259063345975296[0;39m <==    Updates: 3
2021-11-29 04:26:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120259063345975296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 04:27:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120259168232935424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:27:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120259168232935424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:27:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120259168232935424[0;39m ==> Parameters: 
2021-11-29 04:27:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120259168232935424[0;39m <==    Updates: 0
2021-11-29 04:27:00.018 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120259168232935424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 04:27:04.745 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:27:04.855 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:27:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120259189179289600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:27:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120259189179289600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:27:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120259189179289600[0;39m ==> Parameters: 
2021-11-29 04:27:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120259189179289600[0;39m <==    Updates: 3
2021-11-29 04:27:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120259189179289600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 04:27:34.748 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:27:34.860 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:27:35.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120259314983243776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:27:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120259314983243776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:27:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120259314983243776[0;39m ==> Parameters: 
2021-11-29 04:27:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120259314983243776[0;39m <==    Updates: 3
2021-11-29 04:27:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120259314983243776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 04:28:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120259419861815296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:28:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120259419861815296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:28:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120259419861815296[0;39m ==> Parameters: 
2021-11-29 04:28:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120259419861815296[0;39m <==    Updates: 0
2021-11-29 04:28:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120259419861815296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 04:28:04.737 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:28:04.862 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:28:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120259440866889728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:28:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120259440866889728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:28:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120259440866889728[0;39m ==> Parameters: 
2021-11-29 04:28:05.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120259440866889728[0;39m <==    Updates: 3
2021-11-29 04:28:05.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120259440866889728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 04:28:34.738 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:28:34.849 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:28:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120259566654066688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:28:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120259566654066688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:28:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120259566654066688[0;39m ==> Parameters: 
2021-11-29 04:28:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120259566654066688[0;39m <==    Updates: 3
2021-11-29 04:28:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120259566654066688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 04:29:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120259671553609728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:29:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120259671553609728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:29:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120259671553609728[0;39m ==> Parameters: 
2021-11-29 04:29:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120259671553609728[0;39m <==    Updates: 0
2021-11-29 04:29:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120259671553609728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 04:29:04.744 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:29:04.867 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:29:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120259692487380992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:29:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120259692487380992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:29:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120259692487380992[0;39m ==> Parameters: 
2021-11-29 04:29:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120259692487380992[0;39m <==    Updates: 3
2021-11-29 04:29:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120259692487380992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 04:29:34.738 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:29:34.830 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:29:35.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120259818299723776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:29:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120259818299723776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:29:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120259818299723776[0;39m ==> Parameters: 
2021-11-29 04:29:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120259818299723776[0;39m <==    Updates: 3
2021-11-29 04:29:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120259818299723776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 04:30:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120259923182489600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:30:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120259923182489600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:30:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120259923182489600[0;39m ==> Parameters: 
2021-11-29 04:30:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120259923182489600[0;39m <==    Updates: 0
2021-11-29 04:30:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120259923182489600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 04:30:04.736 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:30:04.843 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:30:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120259944174981120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:30:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120259944174981120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:30:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120259944174981120[0;39m ==> Parameters: 
2021-11-29 04:30:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120259944174981120[0;39m <==    Updates: 3
2021-11-29 04:30:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120259944174981120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 04:30:34.758 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:30:34.851 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:30:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120260069983129600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:30:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120260069983129600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:30:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120260069983129600[0;39m ==> Parameters: 
2021-11-29 04:30:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120260069983129600[0;39m <==    Updates: 3
2021-11-29 04:30:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120260069983129600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 04:31:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120260174870089728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:31:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120260174870089728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:31:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120260174870089728[0;39m ==> Parameters: 
2021-11-29 04:31:00.020 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120260174870089728[0;39m <==    Updates: 0
2021-11-29 04:31:00.021 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120260174870089728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 04:31:04.746 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:31:04.871 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:31:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120260195820638208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:31:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120260195820638208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:31:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120260195820638208[0;39m ==> Parameters: 
2021-11-29 04:31:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120260195820638208[0;39m <==    Updates: 3
2021-11-29 04:31:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120260195820638208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 04:31:34.750 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:31:34.859 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:31:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120260321670729728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:31:35.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120260321670729728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:31:35.019 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120260321670729728[0;39m ==> Parameters: 
2021-11-29 04:31:35.021 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120260321670729728[0;39m <==    Updates: 3
2021-11-29 04:31:35.022 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120260321670729728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶7æ¯«ç§’
2021-11-29 04:32:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120260426486386688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:32:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120260426486386688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:32:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120260426486386688[0;39m ==> Parameters: 
2021-11-29 04:32:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120260426486386688[0;39m <==    Updates: 0
2021-11-29 04:32:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120260426486386688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 04:32:04.746 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:32:04.855 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:32:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120260447478878208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:32:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120260447478878208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:32:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120260447478878208[0;39m ==> Parameters: 
2021-11-29 04:32:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120260447478878208[0;39m <==    Updates: 3
2021-11-29 04:32:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120260447478878208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 04:32:34.760 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:32:34.855 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:32:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120260573307998208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:32:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120260573307998208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:32:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120260573307998208[0;39m ==> Parameters: 
2021-11-29 04:32:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120260573307998208[0;39m <==    Updates: 3
2021-11-29 04:32:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120260573307998208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 04:33:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120260678173986816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:33:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120260678173986816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:33:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120260678173986816[0;39m ==> Parameters: 
2021-11-29 04:33:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120260678173986816[0;39m <==    Updates: 0
2021-11-29 04:33:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120260678173986816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 04:33:04.761 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:33:04.854 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:33:05.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120260699099369472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:33:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120260699099369472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:33:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120260699099369472[0;39m ==> Parameters: 
2021-11-29 04:33:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120260699099369472[0;39m <==    Updates: 3
2021-11-29 04:33:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120260699099369472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 04:33:34.751 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:33:34.860 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:33:35.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120260824928489472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:33:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120260824928489472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:33:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120260824928489472[0;39m ==> Parameters: 
2021-11-29 04:33:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120260824928489472[0;39m <==    Updates: 3
2021-11-29 04:33:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120260824928489472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 04:34:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120260929798672384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:34:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120260929798672384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:34:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120260929798672384[0;39m ==> Parameters: 
2021-11-29 04:34:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120260929798672384[0;39m <==    Updates: 0
2021-11-29 04:34:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120260929798672384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 04:34:04.748 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:34:04.842 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:34:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120260950807941120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:34:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120260950807941120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:34:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120260950807941120[0;39m ==> Parameters: 
2021-11-29 04:34:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120260950807941120[0;39m <==    Updates: 3
2021-11-29 04:34:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120260950807941120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 04:34:34.747 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:34:34.840 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:34:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120261076620283904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:34:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120261076620283904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:34:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120261076620283904[0;39m ==> Parameters: 
2021-11-29 04:34:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120261076620283904[0;39m <==    Updates: 3
2021-11-29 04:34:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120261076620283904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 04:35:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120261181477883904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:35:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120261181477883904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:35:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120261181477883904[0;39m ==> Parameters: 
2021-11-29 04:35:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120261181477883904[0;39m <==    Updates: 0
2021-11-29 04:35:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120261181477883904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 04:35:04.721 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:35:04.861 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:35:05.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120261202420043776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:35:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120261202420043776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:35:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120261202420043776[0;39m ==> Parameters: 
2021-11-29 04:35:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120261202420043776[0;39m <==    Updates: 3
2021-11-29 04:35:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120261202420043776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 04:35:34.744 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:35:34.855 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:35:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120261328291106816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:35:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120261328291106816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:35:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120261328291106816[0;39m ==> Parameters: 
2021-11-29 04:35:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120261328291106816[0;39m <==    Updates: 3
2021-11-29 04:35:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120261328291106816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 04:36:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120261433127735296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:36:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120261433127735296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:36:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120261433127735296[0;39m ==> Parameters: 
2021-11-29 04:36:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120261433127735296[0;39m <==    Updates: 0
2021-11-29 04:36:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120261433127735296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 04:36:04.754 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:36:04.861 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:36:05.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120261454074089472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:36:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120261454074089472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:36:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120261454074089472[0;39m ==> Parameters: 
2021-11-29 04:36:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120261454074089472[0;39m <==    Updates: 3
2021-11-29 04:36:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120261454074089472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 04:36:34.753 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:36:34.850 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:36:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120261579961929728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:36:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120261579961929728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:36:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120261579961929728[0;39m ==> Parameters: 
2021-11-29 04:36:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120261579961929728[0;39m <==    Updates: 3
2021-11-29 04:36:35.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120261579961929728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 04:37:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120261684806946816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:37:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120261684806946816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:37:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120261684806946816[0;39m ==> Parameters: 
2021-11-29 04:37:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120261684806946816[0;39m <==    Updates: 0
2021-11-29 04:37:00.018 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120261684806946816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 04:37:04.760 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:37:04.869 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:37:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120261705757495296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:37:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120261705757495296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:37:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120261705757495296[0;39m ==> Parameters: 
2021-11-29 04:37:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120261705757495296[0;39m <==    Updates: 3
2021-11-29 04:37:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120261705757495296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 04:37:34.750 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:37:34.860 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:37:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120261831569838080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:37:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120261831569838080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:37:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120261831569838080[0;39m ==> Parameters: 
2021-11-29 04:37:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120261831569838080[0;39m <==    Updates: 3
2021-11-29 04:37:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120261831569838080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 04:38:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120261936473575424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:38:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120261936473575424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:38:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120261936473575424[0;39m ==> Parameters: 
2021-11-29 04:38:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120261936473575424[0;39m <==    Updates: 0
2021-11-29 04:38:00.018 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120261936473575424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 04:38:04.766 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:38:04.859 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:38:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120261957436706816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:38:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120261957436706816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:38:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120261957436706816[0;39m ==> Parameters: 
2021-11-29 04:38:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120261957436706816[0;39m <==    Updates: 3
2021-11-29 04:38:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120261957436706816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 04:38:34.747 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:38:34.871 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:38:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120262083261632512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:38:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120262083261632512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:38:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120262083261632512[0;39m ==> Parameters: 
2021-11-29 04:38:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120262083261632512[0;39m <==    Updates: 3
2021-11-29 04:38:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120262083261632512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 04:39:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120262188115038208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:39:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120262188115038208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:39:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120262188115038208[0;39m ==> Parameters: 
2021-11-29 04:39:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120262188115038208[0;39m <==    Updates: 0
2021-11-29 04:39:00.018 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120262188115038208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 04:39:04.762 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:39:04.869 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:39:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120262209082363904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:39:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120262209082363904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:39:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120262209082363904[0;39m ==> Parameters: 
2021-11-29 04:39:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120262209082363904[0;39m <==    Updates: 3
2021-11-29 04:39:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120262209082363904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 04:39:34.758 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:39:34.865 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:39:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120262334894706688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:39:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120262334894706688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:39:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120262334894706688[0;39m ==> Parameters: 
2021-11-29 04:39:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120262334894706688[0;39m <==    Updates: 3
2021-11-29 04:39:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120262334894706688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 04:40:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120262439773278208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:40:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120262439773278208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:40:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120262439773278208[0;39m ==> Parameters: 
2021-11-29 04:40:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120262439773278208[0;39m <==    Updates: 0
2021-11-29 04:40:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120262439773278208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 04:40:04.757 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:40:04.865 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:40:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120262460723826688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:40:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120262460723826688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:40:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120262460723826688[0;39m ==> Parameters: 
2021-11-29 04:40:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120262460723826688[0;39m <==    Updates: 3
2021-11-29 04:40:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120262460723826688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 04:40:34.722 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:40:34.851 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:40:35.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120262586540363776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:40:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120262586540363776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:40:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120262586540363776[0;39m ==> Parameters: 
2021-11-29 04:40:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120262586540363776[0;39m <==    Updates: 3
2021-11-29 04:40:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120262586540363776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 04:41:00.003 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120262691402158080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:41:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120262691402158080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:41:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120262691402158080[0;39m ==> Parameters: 
2021-11-29 04:41:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120262691402158080[0;39m <==    Updates: 0
2021-11-29 04:41:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120262691402158080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 04:41:04.758 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:41:04.866 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:41:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120262712382066688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:41:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120262712382066688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:41:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120262712382066688[0;39m ==> Parameters: 
2021-11-29 04:41:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120262712382066688[0;39m <==    Updates: 3
2021-11-29 04:41:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120262712382066688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 04:41:34.732 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:41:34.841 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:41:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120262838236352512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:41:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120262838236352512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:41:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120262838236352512[0;39m ==> Parameters: 
2021-11-29 04:41:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120262838236352512[0;39m <==    Updates: 3
2021-11-29 04:41:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120262838236352512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 04:42:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120262943114924032[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:42:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120262943114924032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:42:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120262943114924032[0;39m ==> Parameters: 
2021-11-29 04:42:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120262943114924032[0;39m <==    Updates: 0
2021-11-29 04:42:00.018 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120262943114924032[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 04:42:04.737 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:42:04.845 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:42:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120262964086444032[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:42:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120262964086444032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:42:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120262964086444032[0;39m ==> Parameters: 
2021-11-29 04:42:05.019 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120262964086444032[0;39m <==    Updates: 3
2021-11-29 04:42:05.019 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120262964086444032[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 04:42:34.728 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:42:34.851 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:42:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120263089869426688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:42:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120263089869426688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:42:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120263089869426688[0;39m ==> Parameters: 
2021-11-29 04:42:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120263089869426688[0;39m <==    Updates: 3
2021-11-29 04:42:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120263089869426688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 04:43:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120263194739609600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:43:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120263194739609600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:43:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120263194739609600[0;39m ==> Parameters: 
2021-11-29 04:43:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120263194739609600[0;39m <==    Updates: 0
2021-11-29 04:43:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120263194739609600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 04:43:04.746 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:43:04.854 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:43:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120263215715323904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:43:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120263215715323904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:43:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120263215715323904[0;39m ==> Parameters: 
2021-11-29 04:43:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120263215715323904[0;39m <==    Updates: 3
2021-11-29 04:43:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120263215715323904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 04:43:34.748 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:43:34.874 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:43:35.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120263341515083776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:43:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120263341515083776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:43:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120263341515083776[0;39m ==> Parameters: 
2021-11-29 04:43:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120263341515083776[0;39m <==    Updates: 3
2021-11-29 04:43:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120263341515083776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 04:44:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120263446423015424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:44:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120263446423015424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:44:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120263446423015424[0;39m ==> Parameters: 
2021-11-29 04:44:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120263446423015424[0;39m <==    Updates: 0
2021-11-29 04:44:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120263446423015424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 04:44:04.753 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:44:04.868 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:44:05.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120263467340009472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:44:05.001 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120263467340009472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:44:05.001 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120263467340009472[0;39m ==> Parameters: 
2021-11-29 04:44:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120263467340009472[0;39m <==    Updates: 3
2021-11-29 04:44:05.002 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120263467340009472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 04:44:34.750 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:44:34.872 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:44:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120263593215266816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:44:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120263593215266816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:44:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120263593215266816[0;39m ==> Parameters: 
2021-11-29 04:44:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120263593215266816[0;39m <==    Updates: 3
2021-11-29 04:44:35.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120263593215266816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 04:45:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120263698039312384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:45:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120263698039312384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:45:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120263698039312384[0;39m ==> Parameters: 
2021-11-29 04:45:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120263698039312384[0;39m <==    Updates: 0
2021-11-29 04:45:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120263698039312384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 04:45:04.745 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:45:04.854 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:45:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120263719023415296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:45:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120263719023415296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:45:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120263719023415296[0;39m ==> Parameters: 
2021-11-29 04:45:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120263719023415296[0;39m <==    Updates: 3
2021-11-29 04:45:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120263719023415296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 04:45:34.745 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:45:34.840 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:45:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120263844865118208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:45:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120263844865118208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:45:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120263844865118208[0;39m ==> Parameters: 
2021-11-29 04:45:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120263844865118208[0;39m <==    Updates: 3
2021-11-29 04:45:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120263844865118208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 04:46:00.003 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120263949693358080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:46:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120263949693358080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:46:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120263949693358080[0;39m ==> Parameters: 
2021-11-29 04:46:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120263949693358080[0;39m <==    Updates: 0
2021-11-29 04:46:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120263949693358080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 04:46:04.764 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:46:04.871 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:46:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120263970685849600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:46:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120263970685849600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:46:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120263970685849600[0;39m ==> Parameters: 
2021-11-29 04:46:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120263970685849600[0;39m <==    Updates: 3
2021-11-29 04:46:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120263970685849600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 04:46:34.761 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:46:34.869 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:46:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120264096519163904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:46:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120264096519163904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:46:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120264096519163904[0;39m ==> Parameters: 
2021-11-29 04:46:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120264096519163904[0;39m <==    Updates: 3
2021-11-29 04:46:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120264096519163904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 04:47:00.002 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120264201347403776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:47:00.002 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120264201347403776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:47:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120264201347403776[0;39m ==> Parameters: 
2021-11-29 04:47:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120264201347403776[0;39m <==    Updates: 0
2021-11-29 04:47:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120264201347403776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 04:47:04.755 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:47:04.863 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:47:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120264222327312384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:47:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120264222327312384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:47:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120264222327312384[0;39m ==> Parameters: 
2021-11-29 04:47:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120264222327312384[0;39m <==    Updates: 3
2021-11-29 04:47:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120264222327312384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 04:47:34.756 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:47:34.865 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:47:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120264348156432384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:47:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120264348156432384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:47:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120264348156432384[0;39m ==> Parameters: 
2021-11-29 04:47:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120264348156432384[0;39m <==    Updates: 3
2021-11-29 04:47:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120264348156432384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 04:48:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120264453064364032[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:48:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120264453064364032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:48:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120264453064364032[0;39m ==> Parameters: 
2021-11-29 04:48:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120264453064364032[0;39m <==    Updates: 0
2021-11-29 04:48:00.019 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120264453064364032[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 04:48:04.740 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:48:04.879 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:48:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120264473981358080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:48:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120264473981358080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:48:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120264473981358080[0;39m ==> Parameters: 
2021-11-29 04:48:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120264473981358080[0;39m <==    Updates: 3
2021-11-29 04:48:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120264473981358080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 04:48:34.735 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:48:34.860 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:48:35.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120264599802089472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:48:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120264599802089472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:48:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120264599802089472[0;39m ==> Parameters: 
2021-11-29 04:48:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120264599802089472[0;39m <==    Updates: 3
2021-11-29 04:48:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120264599802089472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 04:49:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120264704689049600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:49:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120264704689049600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:49:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120264704689049600[0;39m ==> Parameters: 
2021-11-29 04:49:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120264704689049600[0;39m <==    Updates: 0
2021-11-29 04:49:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120264704689049600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 04:49:04.739 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:49:04.878 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:49:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120264725639598080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:49:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120264725639598080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:49:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120264725639598080[0;39m ==> Parameters: 
2021-11-29 04:49:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120264725639598080[0;39m <==    Updates: 3
2021-11-29 04:49:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120264725639598080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 04:49:34.743 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:49:34.867 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:49:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120264851493883904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:49:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120264851493883904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:49:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120264851493883904[0;39m ==> Parameters: 
2021-11-29 04:49:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120264851493883904[0;39m <==    Updates: 3
2021-11-29 04:49:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120264851493883904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 04:50:00.003 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120264956326318080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:50:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120264956326318080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:50:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120264956326318080[0;39m ==> Parameters: 
2021-11-29 04:50:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120264956326318080[0;39m <==    Updates: 0
2021-11-29 04:50:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120264956326318080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 04:50:04.733 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:50:04.857 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:50:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120264977339781120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:50:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120264977339781120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:50:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120264977339781120[0;39m ==> Parameters: 
2021-11-29 04:50:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120264977339781120[0;39m <==    Updates: 3
2021-11-29 04:50:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120264977339781120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 04:50:34.741 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:50:34.851 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:50:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120265103131152384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:50:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120265103131152384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:50:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120265103131152384[0;39m ==> Parameters: 
2021-11-29 04:50:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120265103131152384[0;39m <==    Updates: 3
2021-11-29 04:50:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120265103131152384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 04:51:00.003 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120265207984558080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:51:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120265207984558080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:51:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120265207984558080[0;39m ==> Parameters: 
2021-11-29 04:51:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120265207984558080[0;39m <==    Updates: 0
2021-11-29 04:51:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120265207984558080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 04:51:04.740 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:51:04.878 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:51:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120265228956078080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:51:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120265228956078080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:51:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120265228956078080[0;39m ==> Parameters: 
2021-11-29 04:51:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120265228956078080[0;39m <==    Updates: 3
2021-11-29 04:51:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120265228956078080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 04:51:34.759 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:51:34.868 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:51:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120265354810363904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:51:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120265354810363904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:51:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120265354810363904[0;39m ==> Parameters: 
2021-11-29 04:51:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120265354810363904[0;39m <==    Updates: 3
2021-11-29 04:51:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120265354810363904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 04:52:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120265459663769600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:52:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120265459663769600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:52:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120265459663769600[0;39m ==> Parameters: 
2021-11-29 04:52:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120265459663769600[0;39m <==    Updates: 0
2021-11-29 04:52:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120265459663769600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 04:52:04.756 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:52:04.852 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:52:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120265480626900992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:52:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120265480626900992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:52:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120265480626900992[0;39m ==> Parameters: 
2021-11-29 04:52:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120265480626900992[0;39m <==    Updates: 3
2021-11-29 04:52:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120265480626900992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 04:52:34.758 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:52:34.885 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:52:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120265606468603904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:52:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120265606468603904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:52:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120265606468603904[0;39m ==> Parameters: 
2021-11-29 04:52:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120265606468603904[0;39m <==    Updates: 3
2021-11-29 04:52:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120265606468603904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 04:53:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120265711309426688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:53:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120265711309426688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:53:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120265711309426688[0;39m ==> Parameters: 
2021-11-29 04:53:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120265711309426688[0;39m <==    Updates: 0
2021-11-29 04:53:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120265711309426688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 04:53:04.760 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:53:04.884 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:53:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120265732289335296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:53:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120265732289335296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:53:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120265732289335296[0;39m ==> Parameters: 
2021-11-29 04:53:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120265732289335296[0;39m <==    Updates: 3
2021-11-29 04:53:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120265732289335296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 04:53:34.756 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:53:34.878 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:53:35.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120265858097483776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:53:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120265858097483776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:53:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120265858097483776[0;39m ==> Parameters: 
2021-11-29 04:53:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120265858097483776[0;39m <==    Updates: 3
2021-11-29 04:53:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120265858097483776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 04:54:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120265963005415424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:54:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120265963005415424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:54:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120265963005415424[0;39m ==> Parameters: 
2021-11-29 04:54:00.020 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120265963005415424[0;39m <==    Updates: 0
2021-11-29 04:54:00.021 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120265963005415424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 04:54:04.761 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:54:04.870 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:54:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120265983951769600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:54:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120265983951769600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:54:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120265983951769600[0;39m ==> Parameters: 
2021-11-29 04:54:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120265983951769600[0;39m <==    Updates: 3
2021-11-29 04:54:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120265983951769600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 04:54:34.736 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:54:34.859 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:54:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120266109801861120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:54:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120266109801861120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:54:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120266109801861120[0;39m ==> Parameters: 
2021-11-29 04:54:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120266109801861120[0;39m <==    Updates: 3
2021-11-29 04:54:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120266109801861120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 04:55:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120266214634295296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:55:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120266214634295296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:55:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120266214634295296[0;39m ==> Parameters: 
2021-11-29 04:55:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120266214634295296[0;39m <==    Updates: 0
2021-11-29 04:55:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120266214634295296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 04:55:04.732 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:55:04.854 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:55:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120266235601620992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:55:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120266235601620992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:55:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120266235601620992[0;39m ==> Parameters: 
2021-11-29 04:55:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120266235601620992[0;39m <==    Updates: 3
2021-11-29 04:55:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120266235601620992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 04:55:34.753 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:55:34.863 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:55:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120266361422352384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:55:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120266361422352384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:55:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120266361422352384[0;39m ==> Parameters: 
2021-11-29 04:55:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120266361422352384[0;39m <==    Updates: 3
2021-11-29 04:55:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120266361422352384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 04:56:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120266466321895424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:56:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120266466321895424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:56:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120266466321895424[0;39m ==> Parameters: 
2021-11-29 04:56:00.019 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120266466321895424[0;39m <==    Updates: 0
2021-11-29 04:56:00.019 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120266466321895424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 04:56:04.735 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:56:04.843 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:56:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120266487285026816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:56:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120266487285026816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:56:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120266487285026816[0;39m ==> Parameters: 
2021-11-29 04:56:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120266487285026816[0;39m <==    Updates: 3
2021-11-29 04:56:05.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120266487285026816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 04:56:34.736 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:56:34.860 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:56:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120266613122535424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:56:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120266613122535424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:56:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120266613122535424[0;39m ==> Parameters: 
2021-11-29 04:56:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120266613122535424[0;39m <==    Updates: 3
2021-11-29 04:56:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120266613122535424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 04:57:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120266717971746816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:57:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120266717971746816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:57:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120266717971746816[0;39m ==> Parameters: 
2021-11-29 04:57:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120266717971746816[0;39m <==    Updates: 0
2021-11-29 04:57:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120266717971746816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 04:57:04.743 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:57:04.881 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:57:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120266738905518080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:57:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120266738905518080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:57:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120266738905518080[0;39m ==> Parameters: 
2021-11-29 04:57:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120266738905518080[0;39m <==    Updates: 3
2021-11-29 04:57:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120266738905518080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 04:57:34.760 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:57:34.867 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:57:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120266864755609600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:57:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120266864755609600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:57:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120266864755609600[0;39m ==> Parameters: 
2021-11-29 04:57:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120266864755609600[0;39m <==    Updates: 3
2021-11-29 04:57:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120266864755609600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 04:58:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120266969596432384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:58:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120266969596432384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:58:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120266969596432384[0;39m ==> Parameters: 
2021-11-29 04:58:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120266969596432384[0;39m <==    Updates: 0
2021-11-29 04:58:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120266969596432384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 04:58:04.735 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:58:04.861 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:58:05.000 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120266990551175168[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:58:05.000 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120266990551175168[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:58:05.000 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120266990551175168[0;39m ==> Parameters: 
2021-11-29 04:58:05.001 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120266990551175168[0;39m <==    Updates: 3
2021-11-29 04:58:05.001 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120266990551175168[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 04:58:34.745 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:58:34.883 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:58:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120267116401266688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:58:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120267116401266688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:58:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120267116401266688[0;39m ==> Parameters: 
2021-11-29 04:58:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120267116401266688[0;39m <==    Updates: 3
2021-11-29 04:58:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120267116401266688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 04:59:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120267221267255296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 04:59:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120267221267255296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 04:59:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120267221267255296[0;39m ==> Parameters: 
2021-11-29 04:59:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120267221267255296[0;39m <==    Updates: 0
2021-11-29 04:59:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120267221267255296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 04:59:04.760 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:59:04.868 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:59:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120267242238775296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:59:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120267242238775296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:59:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120267242238775296[0;39m ==> Parameters: 
2021-11-29 04:59:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120267242238775296[0;39m <==    Updates: 3
2021-11-29 04:59:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120267242238775296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 04:59:34.747 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:59:34.888 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 04:59:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120267368088866816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 04:59:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120267368088866816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 04:59:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120267368088866816[0;39m ==> Parameters: 
2021-11-29 04:59:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120267368088866816[0;39m <==    Updates: 3
2021-11-29 04:59:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120267368088866816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 05:00:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120267472950661120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:00:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120267472950661120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:00:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120267472950661120[0;39m ==> Parameters: 
2021-11-29 05:00:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120267472950661120[0;39m <==    Updates: 0
2021-11-29 05:00:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120267472950661120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 05:00:04.744 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:00:04.852 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:00:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120267493901209600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:00:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120267493901209600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:00:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120267493901209600[0;39m ==> Parameters: 
2021-11-29 05:00:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120267493901209600[0;39m <==    Updates: 3
2021-11-29 05:00:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120267493901209600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 05:00:34.761 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:00:34.854 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:00:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120267619738718208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:00:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120267619738718208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:00:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120267619738718208[0;39m ==> Parameters: 
2021-11-29 05:00:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120267619738718208[0;39m <==    Updates: 3
2021-11-29 05:00:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120267619738718208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:01:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120267724587929600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:01:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120267724587929600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:01:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120267724587929600[0;39m ==> Parameters: 
2021-11-29 05:01:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120267724587929600[0;39m <==    Updates: 0
2021-11-29 05:01:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120267724587929600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 05:01:04.762 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:01:04.869 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:01:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120267745555255296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:01:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120267745555255296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:01:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120267745555255296[0;39m ==> Parameters: 
2021-11-29 05:01:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120267745555255296[0;39m <==    Updates: 3
2021-11-29 05:01:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120267745555255296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:01:34.740 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:01:34.849 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:01:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120267871375986688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:01:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120267871375986688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:01:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120267871375986688[0;39m ==> Parameters: 
2021-11-29 05:01:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120267871375986688[0;39m <==    Updates: 3
2021-11-29 05:01:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120267871375986688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 05:02:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120267976258752512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:02:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120267976258752512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:02:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120267976258752512[0;39m ==> Parameters: 
2021-11-29 05:02:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120267976258752512[0;39m <==    Updates: 0
2021-11-29 05:02:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120267976258752512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 05:02:04.764 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:02:04.871 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:02:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120267997226078208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:02:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120267997226078208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:02:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120267997226078208[0;39m ==> Parameters: 
2021-11-29 05:02:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120267997226078208[0;39m <==    Updates: 3
2021-11-29 05:02:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120267997226078208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:02:34.738 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:02:34.863 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:02:35.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120268123017449472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:02:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120268123017449472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:02:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120268123017449472[0;39m ==> Parameters: 
2021-11-29 05:02:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120268123017449472[0;39m <==    Updates: 3
2021-11-29 05:02:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120268123017449472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶6æ¯«ç§’
2021-11-29 05:03:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120268227887632384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:03:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120268227887632384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:03:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120268227887632384[0;39m ==> Parameters: 
2021-11-29 05:03:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120268227887632384[0;39m <==    Updates: 0
2021-11-29 05:03:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120268227887632384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 05:03:04.755 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:03:04.864 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:03:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120268248854958080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:03:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120268248854958080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:03:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120268248854958080[0;39m ==> Parameters: 
2021-11-29 05:03:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120268248854958080[0;39m <==    Updates: 3
2021-11-29 05:03:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120268248854958080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 05:03:34.757 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:03:34.881 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:03:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120268374700855296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:03:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120268374700855296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:03:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120268374700855296[0;39m ==> Parameters: 
2021-11-29 05:03:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120268374700855296[0;39m <==    Updates: 3
2021-11-29 05:03:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120268374700855296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:04:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120268479558455296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:04:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120268479558455296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:04:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120268479558455296[0;39m ==> Parameters: 
2021-11-29 05:04:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120268479558455296[0;39m <==    Updates: 0
2021-11-29 05:04:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120268479558455296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 05:04:04.760 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:04:04.885 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:04:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120268500534169600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:04:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120268500534169600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:04:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120268500534169600[0;39m ==> Parameters: 
2021-11-29 05:04:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120268500534169600[0;39m <==    Updates: 3
2021-11-29 05:04:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120268500534169600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 05:04:34.747 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:04:34.839 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:04:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120268626367483904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:04:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120268626367483904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:04:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120268626367483904[0;39m ==> Parameters: 
2021-11-29 05:04:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120268626367483904[0;39m <==    Updates: 3
2021-11-29 05:04:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120268626367483904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 05:05:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120268731229278208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:05:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120268731229278208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:05:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120268731229278208[0;39m ==> Parameters: 
2021-11-29 05:05:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120268731229278208[0;39m <==    Updates: 0
2021-11-29 05:05:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120268731229278208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 05:05:04.728 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:05:04.852 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:05:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120268752196603904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:05:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120268752196603904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:05:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120268752196603904[0;39m ==> Parameters: 
2021-11-29 05:05:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120268752196603904[0;39m <==    Updates: 3
2021-11-29 05:05:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120268752196603904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 05:05:34.752 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:05:34.876 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:05:35.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120268877992169472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:05:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120268877992169472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:05:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120268877992169472[0;39m ==> Parameters: 
2021-11-29 05:05:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120268877992169472[0;39m <==    Updates: 3
2021-11-29 05:05:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120268877992169472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 05:06:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120268982874935296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:06:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120268982874935296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:06:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120268982874935296[0;39m ==> Parameters: 
2021-11-29 05:06:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120268982874935296[0;39m <==    Updates: 0
2021-11-29 05:06:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120268982874935296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 05:06:04.736 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:06:04.843 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:06:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120269003871621120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:06:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120269003871621120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:06:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120269003871621120[0;39m ==> Parameters: 
2021-11-29 05:06:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120269003871621120[0;39m <==    Updates: 3
2021-11-29 05:06:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120269003871621120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:06:34.751 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:06:34.876 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:06:35.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120269129650409472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:06:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120269129650409472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:06:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120269129650409472[0;39m ==> Parameters: 
2021-11-29 05:06:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120269129650409472[0;39m <==    Updates: 3
2021-11-29 05:06:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120269129650409472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:07:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120269234554146816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:07:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120269234554146816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:07:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120269234554146816[0;39m ==> Parameters: 
2021-11-29 05:07:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120269234554146816[0;39m <==    Updates: 0
2021-11-29 05:07:00.019 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120269234554146816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 05:07:04.757 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:07:04.864 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:07:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120269255487918080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:07:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120269255487918080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:07:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120269255487918080[0;39m ==> Parameters: 
2021-11-29 05:07:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120269255487918080[0;39m <==    Updates: 3
2021-11-29 05:07:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120269255487918080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 05:07:34.751 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:07:34.861 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:07:35.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120269381308649472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:07:35.001 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120269381308649472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:07:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120269381308649472[0;39m ==> Parameters: 
2021-11-29 05:07:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120269381308649472[0;39m <==    Updates: 3
2021-11-29 05:07:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120269381308649472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:08:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120269486183026688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:08:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120269486183026688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:08:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120269486183026688[0;39m ==> Parameters: 
2021-11-29 05:08:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120269486183026688[0;39m <==    Updates: 0
2021-11-29 05:08:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120269486183026688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 05:08:04.757 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:08:04.882 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:08:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120269507154546688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:08:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120269507154546688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:08:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120269507154546688[0;39m ==> Parameters: 
2021-11-29 05:08:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120269507154546688[0;39m <==    Updates: 3
2021-11-29 05:08:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120269507154546688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:08:34.755 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:08:34.864 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:08:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120269632975278080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:08:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120269632975278080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:08:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120269632975278080[0;39m ==> Parameters: 
2021-11-29 05:08:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120269632975278080[0;39m <==    Updates: 3
2021-11-29 05:08:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120269632975278080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 05:09:00.002 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120269737828683776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:09:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120269737828683776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:09:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120269737828683776[0;39m ==> Parameters: 
2021-11-29 05:09:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120269737828683776[0;39m <==    Updates: 0
2021-11-29 05:09:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120269737828683776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 05:09:04.748 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:09:04.871 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:09:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120269758837952512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:09:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120269758837952512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:09:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120269758837952512[0;39m ==> Parameters: 
2021-11-29 05:09:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120269758837952512[0;39m <==    Updates: 3
2021-11-29 05:09:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120269758837952512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 05:09:34.753 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:09:34.860 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:09:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120269884683849728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:09:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120269884683849728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:09:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120269884683849728[0;39m ==> Parameters: 
2021-11-29 05:09:35.019 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120269884683849728[0;39m <==    Updates: 3
2021-11-29 05:09:35.020 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120269884683849728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 05:10:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120269989524672512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:10:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120269989524672512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:10:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120269989524672512[0;39m ==> Parameters: 
2021-11-29 05:10:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120269989524672512[0;39m <==    Updates: 0
2021-11-29 05:10:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120269989524672512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 05:10:04.765 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:10:04.874 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:10:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120270010512969728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:10:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120270010512969728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:10:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120270010512969728[0;39m ==> Parameters: 
2021-11-29 05:10:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120270010512969728[0;39m <==    Updates: 3
2021-11-29 05:10:05.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120270010512969728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:10:34.764 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:10:34.857 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:10:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120270136325312512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:10:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120270136325312512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:10:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120270136325312512[0;39m ==> Parameters: 
2021-11-29 05:10:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120270136325312512[0;39m <==    Updates: 3
2021-11-29 05:10:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120270136325312512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 05:11:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120270241195495424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:11:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120270241195495424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:11:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120270241195495424[0;39m ==> Parameters: 
2021-11-29 05:11:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120270241195495424[0;39m <==    Updates: 0
2021-11-29 05:11:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120270241195495424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 05:11:04.733 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:11:04.857 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:11:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120270262158626816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:11:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120270262158626816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:11:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120270262158626816[0;39m ==> Parameters: 
2021-11-29 05:11:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120270262158626816[0;39m <==    Updates: 3
2021-11-29 05:11:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120270262158626816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:11:34.766 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:11:34.888 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:11:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120270388000329728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:11:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120270388000329728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:11:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120270388000329728[0;39m ==> Parameters: 
2021-11-29 05:11:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120270388000329728[0;39m <==    Updates: 3
2021-11-29 05:11:35.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120270388000329728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:12:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120270492824375296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:12:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120270492824375296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:12:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120270492824375296[0;39m ==> Parameters: 
2021-11-29 05:12:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120270492824375296[0;39m <==    Updates: 0
2021-11-29 05:12:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120270492824375296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 05:12:04.769 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:12:04.876 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:12:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120270513829449728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:12:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120270513829449728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:12:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120270513829449728[0;39m ==> Parameters: 
2021-11-29 05:12:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120270513829449728[0;39m <==    Updates: 3
2021-11-29 05:12:05.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120270513829449728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:12:34.765 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:12:34.861 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:12:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120270639658569728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:12:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120270639658569728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:12:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120270639658569728[0;39m ==> Parameters: 
2021-11-29 05:12:35.019 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120270639658569728[0;39m <==    Updates: 3
2021-11-29 05:12:35.019 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120270639658569728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 05:13:00.001 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120270744457449472[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:13:00.002 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120270744457449472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:13:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120270744457449472[0;39m ==> Parameters: 
2021-11-29 05:13:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120270744457449472[0;39m <==    Updates: 0
2021-11-29 05:13:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120270744457449472[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 05:13:04.768 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:13:04.875 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:13:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120270765487689728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:13:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120270765487689728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:13:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120270765487689728[0;39m ==> Parameters: 
2021-11-29 05:13:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120270765487689728[0;39m <==    Updates: 3
2021-11-29 05:13:05.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120270765487689728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:13:34.765 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:13:34.875 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:13:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120270891316809728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:13:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120270891316809728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:13:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120270891316809728[0;39m ==> Parameters: 
2021-11-29 05:13:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120270891316809728[0;39m <==    Updates: 3
2021-11-29 05:13:35.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120270891316809728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:14:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120270996153438208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:14:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120270996153438208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:14:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120270996153438208[0;39m ==> Parameters: 
2021-11-29 05:14:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120270996153438208[0;39m <==    Updates: 0
2021-11-29 05:14:00.018 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120270996153438208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 05:14:04.750 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:14:04.859 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:14:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120271017137541120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:14:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120271017137541120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:14:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120271017137541120[0;39m ==> Parameters: 
2021-11-29 05:14:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120271017137541120[0;39m <==    Updates: 3
2021-11-29 05:14:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120271017137541120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:14:34.742 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:14:34.865 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:14:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120271142933106688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:14:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120271142933106688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:14:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120271142933106688[0;39m ==> Parameters: 
2021-11-29 05:14:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120271142933106688[0;39m <==    Updates: 3
2021-11-29 05:14:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120271142933106688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:15:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120271247799095296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:15:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120271247799095296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:15:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120271247799095296[0;39m ==> Parameters: 
2021-11-29 05:15:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120271247799095296[0;39m <==    Updates: 0
2021-11-29 05:15:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120271247799095296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 05:15:04.749 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:15:04.857 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:15:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120271268791586816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:15:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120271268791586816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:15:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120271268791586816[0;39m ==> Parameters: 
2021-11-29 05:15:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120271268791586816[0;39m <==    Updates: 3
2021-11-29 05:15:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120271268791586816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:15:34.745 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:15:34.855 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:15:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120271394608123904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:15:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120271394608123904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:15:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120271394608123904[0;39m ==> Parameters: 
2021-11-29 05:15:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120271394608123904[0;39m <==    Updates: 3
2021-11-29 05:15:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120271394608123904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:16:00.001 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120271499432169472[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:16:00.001 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120271499432169472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:16:00.002 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120271499432169472[0;39m ==> Parameters: 
2021-11-29 05:16:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120271499432169472[0;39m <==    Updates: 0
2021-11-29 05:16:00.003 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120271499432169472[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 05:16:04.762 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:16:04.883 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:16:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120271520428855296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:16:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120271520428855296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:16:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120271520428855296[0;39m ==> Parameters: 
2021-11-29 05:16:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120271520428855296[0;39m <==    Updates: 3
2021-11-29 05:16:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120271520428855296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:16:34.763 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:16:34.871 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:16:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120271646274752512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:16:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120271646274752512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:16:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120271646274752512[0;39m ==> Parameters: 
2021-11-29 05:16:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120271646274752512[0;39m <==    Updates: 3
2021-11-29 05:16:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120271646274752512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:17:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120271751111380992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:17:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120271751111380992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:17:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120271751111380992[0;39m ==> Parameters: 
2021-11-29 05:17:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120271751111380992[0;39m <==    Updates: 0
2021-11-29 05:17:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120271751111380992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 05:17:04.768 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:17:04.877 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:17:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120271772116455424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:17:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120271772116455424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:17:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120271772116455424[0;39m ==> Parameters: 
2021-11-29 05:17:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120271772116455424[0;39m <==    Updates: 3
2021-11-29 05:17:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120271772116455424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:17:34.753 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:17:34.860 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:17:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120271897953964032[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:17:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120271897953964032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:17:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120271897953964032[0;39m ==> Parameters: 
2021-11-29 05:17:35.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120271897953964032[0;39m <==    Updates: 3
2021-11-29 05:17:35.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120271897953964032[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:18:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120272002786398208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:18:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120272002786398208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:18:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120272002786398208[0;39m ==> Parameters: 
2021-11-29 05:18:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120272002786398208[0;39m <==    Updates: 0
2021-11-29 05:18:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120272002786398208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 05:18:04.761 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:18:04.871 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:18:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120272023753723904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:18:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120272023753723904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:18:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120272023753723904[0;39m ==> Parameters: 
2021-11-29 05:18:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120272023753723904[0;39m <==    Updates: 3
2021-11-29 05:18:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120272023753723904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 05:18:34.764 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:18:34.860 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:18:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120272149603815424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:18:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120272149603815424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:18:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120272149603815424[0;39m ==> Parameters: 
2021-11-29 05:18:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120272149603815424[0;39m <==    Updates: 3
2021-11-29 05:18:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120272149603815424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:19:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120272254465609728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:19:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120272254465609728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:19:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120272254465609728[0;39m ==> Parameters: 
2021-11-29 05:19:00.020 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120272254465609728[0;39m <==    Updates: 0
2021-11-29 05:19:00.021 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120272254465609728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 05:19:04.753 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:19:04.878 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:19:05.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120272275382603776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:19:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120272275382603776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:19:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120272275382603776[0;39m ==> Parameters: 
2021-11-29 05:19:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120272275382603776[0;39m <==    Updates: 3
2021-11-29 05:19:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120272275382603776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 05:19:34.774 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:19:34.868 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:19:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120272401228500992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:19:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120272401228500992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:19:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120272401228500992[0;39m ==> Parameters: 
2021-11-29 05:19:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120272401228500992[0;39m <==    Updates: 3
2021-11-29 05:19:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120272401228500992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 05:20:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120272506094489600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:20:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120272506094489600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:20:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120272506094489600[0;39m ==> Parameters: 
2021-11-29 05:20:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120272506094489600[0;39m <==    Updates: 0
2021-11-29 05:20:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120272506094489600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 05:20:04.769 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:20:04.879 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:20:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120272527045038080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:20:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120272527045038080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:20:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120272527045038080[0;39m ==> Parameters: 
2021-11-29 05:20:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120272527045038080[0;39m <==    Updates: 3
2021-11-29 05:20:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120272527045038080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 05:20:34.762 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:20:34.872 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:20:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120272652911906816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:20:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120272652911906816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:20:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120272652911906816[0;39m ==> Parameters: 
2021-11-29 05:20:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120272652911906816[0;39m <==    Updates: 3
2021-11-29 05:20:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120272652911906816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 05:21:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120272757782089728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:21:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120272757782089728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:21:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120272757782089728[0;39m ==> Parameters: 
2021-11-29 05:21:00.020 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120272757782089728[0;39m <==    Updates: 0
2021-11-29 05:21:00.021 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120272757782089728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 05:21:04.771 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:21:04.880 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:21:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120272778703278080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:21:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120272778703278080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:21:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120272778703278080[0;39m ==> Parameters: 
2021-11-29 05:21:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120272778703278080[0;39m <==    Updates: 3
2021-11-29 05:21:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120272778703278080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 05:21:34.767 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:21:34.875 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:21:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120272904586924032[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:21:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120272904586924032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:21:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120272904586924032[0;39m ==> Parameters: 
2021-11-29 05:21:35.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120272904586924032[0;39m <==    Updates: 3
2021-11-29 05:21:35.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120272904586924032[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:22:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120273009440329728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:22:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120273009440329728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:22:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120273009440329728[0;39m ==> Parameters: 
2021-11-29 05:22:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120273009440329728[0;39m <==    Updates: 0
2021-11-29 05:22:00.018 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120273009440329728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 05:22:04.747 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:22:04.872 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:22:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120273030395072512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:22:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120273030395072512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:22:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120273030395072512[0;39m ==> Parameters: 
2021-11-29 05:22:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120273030395072512[0;39m <==    Updates: 3
2021-11-29 05:22:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120273030395072512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:22:34.756 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:22:34.883 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:22:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120273156194832384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:22:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120273156194832384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:22:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120273156194832384[0;39m ==> Parameters: 
2021-11-29 05:22:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120273156194832384[0;39m <==    Updates: 3
2021-11-29 05:22:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120273156194832384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:23:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120273261090181120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:23:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120273261090181120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:23:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120273261090181120[0;39m ==> Parameters: 
2021-11-29 05:23:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120273261090181120[0;39m <==    Updates: 0
2021-11-29 05:23:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120273261090181120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 05:23:04.769 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:23:04.878 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:23:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120273282019758080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:23:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120273282019758080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:23:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120273282019758080[0;39m ==> Parameters: 
2021-11-29 05:23:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120273282019758080[0;39m <==    Updates: 3
2021-11-29 05:23:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120273282019758080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:23:34.745 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:23:34.884 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:23:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120273407874043904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:23:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120273407874043904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:23:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120273407874043904[0;39m ==> Parameters: 
2021-11-29 05:23:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120273407874043904[0;39m <==    Updates: 3
2021-11-29 05:23:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120273407874043904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 05:24:00.001 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120273512698089472[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:24:00.002 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120273512698089472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:24:00.002 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120273512698089472[0;39m ==> Parameters: 
2021-11-29 05:24:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120273512698089472[0;39m <==    Updates: 0
2021-11-29 05:24:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120273512698089472[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 05:24:04.754 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:24:04.876 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:24:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120273533728329728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:24:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120273533728329728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:24:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120273533728329728[0;39m ==> Parameters: 
2021-11-29 05:24:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120273533728329728[0;39m <==    Updates: 3
2021-11-29 05:24:05.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120273533728329728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:24:34.755 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:24:34.878 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:24:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120273659511312384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:24:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120273659511312384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:24:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120273659511312384[0;39m ==> Parameters: 
2021-11-29 05:24:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120273659511312384[0;39m <==    Updates: 3
2021-11-29 05:24:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120273659511312384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 05:25:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120273764394078208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:25:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120273764394078208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:25:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120273764394078208[0;39m ==> Parameters: 
2021-11-29 05:25:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120273764394078208[0;39m <==    Updates: 0
2021-11-29 05:25:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120273764394078208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 05:25:04.736 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:25:04.876 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:25:05.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120273785327849472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:25:05.001 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120273785327849472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:25:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120273785327849472[0;39m ==> Parameters: 
2021-11-29 05:25:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120273785327849472[0;39m <==    Updates: 3
2021-11-29 05:25:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120273785327849472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:25:34.767 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:25:34.892 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:25:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120273911219884032[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:25:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120273911219884032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:25:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120273911219884032[0;39m ==> Parameters: 
2021-11-29 05:25:35.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120273911219884032[0;39m <==    Updates: 3
2021-11-29 05:25:35.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120273911219884032[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:26:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120274016043929600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:26:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120274016043929600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:26:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120274016043929600[0;39m ==> Parameters: 
2021-11-29 05:26:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120274016043929600[0;39m <==    Updates: 0
2021-11-29 05:26:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120274016043929600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 05:26:04.774 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:26:04.884 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:26:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120274037015449600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:26:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120274037015449600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:26:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120274037015449600[0;39m ==> Parameters: 
2021-11-29 05:26:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120274037015449600[0;39m <==    Updates: 3
2021-11-29 05:26:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120274037015449600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 05:26:34.765 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:26:34.877 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:26:35.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120274162815209472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:26:35.001 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120274162815209472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:26:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120274162815209472[0;39m ==> Parameters: 
2021-11-29 05:26:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120274162815209472[0;39m <==    Updates: 3
2021-11-29 05:26:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120274162815209472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:27:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120274267693780992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:27:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120274267693780992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:27:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120274267693780992[0;39m ==> Parameters: 
2021-11-29 05:27:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120274267693780992[0;39m <==    Updates: 0
2021-11-29 05:27:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120274267693780992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 05:27:04.768 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:27:04.875 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:27:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120274288690466816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:27:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120274288690466816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:27:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120274288690466816[0;39m ==> Parameters: 
2021-11-29 05:27:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120274288690466816[0;39m <==    Updates: 3
2021-11-29 05:27:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120274288690466816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 05:27:34.762 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:27:34.871 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:27:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120274414519586816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:27:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120274414519586816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:27:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120274414519586816[0;39m ==> Parameters: 
2021-11-29 05:27:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120274414519586816[0;39m <==    Updates: 3
2021-11-29 05:27:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120274414519586816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 05:28:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120274519377186816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:28:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120274519377186816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:28:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120274519377186816[0;39m ==> Parameters: 
2021-11-29 05:28:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120274519377186816[0;39m <==    Updates: 0
2021-11-29 05:28:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120274519377186816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 05:28:04.764 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:28:04.887 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:28:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120274540336123904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:28:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120274540336123904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:28:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120274540336123904[0;39m ==> Parameters: 
2021-11-29 05:28:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120274540336123904[0;39m <==    Updates: 3
2021-11-29 05:28:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120274540336123904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:28:34.763 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:28:34.870 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:28:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120274666161049600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:28:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120274666161049600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:28:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120274666161049600[0;39m ==> Parameters: 
2021-11-29 05:28:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120274666161049600[0;39m <==    Updates: 3
2021-11-29 05:28:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120274666161049600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 05:29:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120274771014455296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:29:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120274771014455296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:29:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120274771014455296[0;39m ==> Parameters: 
2021-11-29 05:29:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120274771014455296[0;39m <==    Updates: 0
2021-11-29 05:29:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120274771014455296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 05:29:04.778 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:29:04.872 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:29:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120274792002752512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:29:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120274792002752512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:29:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120274792002752512[0;39m ==> Parameters: 
2021-11-29 05:29:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120274792002752512[0;39m <==    Updates: 3
2021-11-29 05:29:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120274792002752512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 05:29:34.762 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:29:34.871 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:29:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120274917831872512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:29:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120274917831872512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:29:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120274917831872512[0;39m ==> Parameters: 
2021-11-29 05:29:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120274917831872512[0;39m <==    Updates: 3
2021-11-29 05:29:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120274917831872512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 05:30:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120275022681083904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:30:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120275022681083904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:30:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120275022681083904[0;39m ==> Parameters: 
2021-11-29 05:30:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120275022681083904[0;39m <==    Updates: 0
2021-11-29 05:30:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120275022681083904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 05:30:04.741 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:30:04.878 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:30:05.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120275043623243776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:30:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120275043623243776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:30:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120275043623243776[0;39m ==> Parameters: 
2021-11-29 05:30:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120275043623243776[0;39m <==    Updates: 3
2021-11-29 05:30:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120275043623243776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:30:34.760 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:30:34.869 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:30:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120275169477529600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:30:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120275169477529600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:30:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120275169477529600[0;39m ==> Parameters: 
2021-11-29 05:30:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120275169477529600[0;39m <==    Updates: 3
2021-11-29 05:30:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120275169477529600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 05:31:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120275274351906816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:31:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120275274351906816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:31:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120275274351906816[0;39m ==> Parameters: 
2021-11-29 05:31:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120275274351906816[0;39m <==    Updates: 0
2021-11-29 05:31:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120275274351906816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 05:31:04.756 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:31:04.878 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:31:05.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120275295281483776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:31:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120275295281483776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:31:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120275295281483776[0;39m ==> Parameters: 
2021-11-29 05:31:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120275295281483776[0;39m <==    Updates: 3
2021-11-29 05:31:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120275295281483776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 05:31:34.763 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:31:34.887 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:31:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120275421148352512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:31:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120275421148352512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:31:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120275421148352512[0;39m ==> Parameters: 
2021-11-29 05:31:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120275421148352512[0;39m <==    Updates: 3
2021-11-29 05:31:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120275421148352512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:32:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120275526018535424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:32:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120275526018535424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:32:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120275526018535424[0;39m ==> Parameters: 
2021-11-29 05:32:00.019 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120275526018535424[0;39m <==    Updates: 0
2021-11-29 05:32:00.020 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120275526018535424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 05:32:04.761 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:32:04.870 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:32:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120275546969083904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:32:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120275546969083904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:32:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120275546969083904[0;39m ==> Parameters: 
2021-11-29 05:32:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120275546969083904[0;39m <==    Updates: 3
2021-11-29 05:32:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120275546969083904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:32:34.752 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:32:34.860 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:32:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120275672819175424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:32:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120275672819175424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:32:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120275672819175424[0;39m ==> Parameters: 
2021-11-29 05:32:35.019 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120275672819175424[0;39m <==    Updates: 3
2021-11-29 05:32:35.019 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120275672819175424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 05:33:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120275777643220992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:33:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120275777643220992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:33:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120275777643220992[0;39m ==> Parameters: 
2021-11-29 05:33:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120275777643220992[0;39m <==    Updates: 0
2021-11-29 05:33:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120275777643220992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 05:33:04.755 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:33:04.881 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:33:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120275798602158080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:33:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120275798602158080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:33:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120275798602158080[0;39m ==> Parameters: 
2021-11-29 05:33:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120275798602158080[0;39m <==    Updates: 3
2021-11-29 05:33:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120275798602158080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 05:33:34.744 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:33:34.854 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:33:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120275924452249600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:33:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120275924452249600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:33:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120275924452249600[0;39m ==> Parameters: 
2021-11-29 05:33:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120275924452249600[0;39m <==    Updates: 3
2021-11-29 05:33:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120275924452249600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶6æ¯«ç§’
2021-11-29 05:34:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120276029322432512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:34:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120276029322432512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:34:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120276029322432512[0;39m ==> Parameters: 
2021-11-29 05:34:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120276029322432512[0;39m <==    Updates: 0
2021-11-29 05:34:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120276029322432512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 05:34:04.778 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:34:04.885 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:34:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120276050285563904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:34:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120276050285563904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:34:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120276050285563904[0;39m ==> Parameters: 
2021-11-29 05:34:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120276050285563904[0;39m <==    Updates: 3
2021-11-29 05:34:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120276050285563904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 05:34:34.758 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:34:34.885 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:34:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120276176106295296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:34:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120276176106295296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:34:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120276176106295296[0;39m ==> Parameters: 
2021-11-29 05:34:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120276176106295296[0;39m <==    Updates: 3
2021-11-29 05:34:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120276176106295296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 05:35:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120276280972283904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:35:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120276280972283904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:35:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120276280972283904[0;39m ==> Parameters: 
2021-11-29 05:35:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120276280972283904[0;39m <==    Updates: 0
2021-11-29 05:35:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120276280972283904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 05:35:04.755 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:35:04.862 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:35:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120276301918638080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:35:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120276301918638080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:35:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120276301918638080[0;39m ==> Parameters: 
2021-11-29 05:35:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120276301918638080[0;39m <==    Updates: 3
2021-11-29 05:35:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120276301918638080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 05:35:34.771 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:35:34.896 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:35:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120276427760340992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:35:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120276427760340992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:35:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120276427760340992[0;39m ==> Parameters: 
2021-11-29 05:35:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120276427760340992[0;39m <==    Updates: 3
2021-11-29 05:35:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120276427760340992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶7æ¯«ç§’
2021-11-29 05:36:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120276532643106816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:36:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120276532643106816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:36:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120276532643106816[0;39m ==> Parameters: 
2021-11-29 05:36:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120276532643106816[0;39m <==    Updates: 0
2021-11-29 05:36:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120276532643106816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 05:36:04.767 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:36:04.876 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:36:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120276553627209728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:36:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120276553627209728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:36:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120276553627209728[0;39m ==> Parameters: 
2021-11-29 05:36:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120276553627209728[0;39m <==    Updates: 3
2021-11-29 05:36:05.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120276553627209728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 05:36:34.758 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:36:34.884 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:36:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120276679443746816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:36:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120276679443746816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:36:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120276679443746816[0;39m ==> Parameters: 
2021-11-29 05:36:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120276679443746816[0;39m <==    Updates: 3
2021-11-29 05:36:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120276679443746816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:37:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120276784271986688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:37:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120276784271986688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:37:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120276784271986688[0;39m ==> Parameters: 
2021-11-29 05:37:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120276784271986688[0;39m <==    Updates: 0
2021-11-29 05:37:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120276784271986688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 05:37:04.744 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:37:04.867 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:37:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120276805247700992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:37:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120276805247700992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:37:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120276805247700992[0;39m ==> Parameters: 
2021-11-29 05:37:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120276805247700992[0;39m <==    Updates: 3
2021-11-29 05:37:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120276805247700992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 05:37:34.744 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:37:34.870 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:37:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120276931097792512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:37:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120276931097792512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:37:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120276931097792512[0;39m ==> Parameters: 
2021-11-29 05:37:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120276931097792512[0;39m <==    Updates: 3
2021-11-29 05:37:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120276931097792512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 05:38:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120277035947003904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:38:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120277035947003904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:38:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120277035947003904[0;39m ==> Parameters: 
2021-11-29 05:38:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120277035947003904[0;39m <==    Updates: 0
2021-11-29 05:38:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120277035947003904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 05:38:04.767 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:38:04.877 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:38:05.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120277056884969472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:38:05.001 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120277056884969472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:38:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120277056884969472[0;39m ==> Parameters: 
2021-11-29 05:38:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120277056884969472[0;39m <==    Updates: 3
2021-11-29 05:38:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120277056884969472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:38:34.752 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:38:34.868 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:38:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120277182772809728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:38:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120277182772809728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:38:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120277182772809728[0;39m ==> Parameters: 
2021-11-29 05:38:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120277182772809728[0;39m <==    Updates: 3
2021-11-29 05:38:35.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120277182772809728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:39:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120277287584272384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:39:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120277287584272384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:39:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120277287584272384[0;39m ==> Parameters: 
2021-11-29 05:39:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120277287584272384[0;39m <==    Updates: 0
2021-11-29 05:39:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120277287584272384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 05:39:04.759 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:39:04.868 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:39:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120277308564180992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:39:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120277308564180992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:39:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120277308564180992[0;39m ==> Parameters: 
2021-11-29 05:39:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120277308564180992[0;39m <==    Updates: 3
2021-11-29 05:39:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120277308564180992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 05:39:34.779 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:39:34.888 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:39:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120277434426855424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:39:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120277434426855424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:39:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120277434426855424[0;39m ==> Parameters: 
2021-11-29 05:39:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120277434426855424[0;39m <==    Updates: 3
2021-11-29 05:39:35.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120277434426855424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 05:40:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120277539288649728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:40:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120277539288649728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:40:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120277539288649728[0;39m ==> Parameters: 
2021-11-29 05:40:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120277539288649728[0;39m <==    Updates: 0
2021-11-29 05:40:00.018 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120277539288649728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 05:40:04.762 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:40:04.871 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:40:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120277560239198208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:40:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120277560239198208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:40:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120277560239198208[0;39m ==> Parameters: 
2021-11-29 05:40:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120277560239198208[0;39m <==    Updates: 3
2021-11-29 05:40:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120277560239198208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:40:34.772 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:40:34.882 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:40:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120277686047346688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:40:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120277686047346688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:40:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120277686047346688[0;39m ==> Parameters: 
2021-11-29 05:40:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120277686047346688[0;39m <==    Updates: 3
2021-11-29 05:40:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120277686047346688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 05:41:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120277790900752384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:41:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120277790900752384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:41:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120277790900752384[0;39m ==> Parameters: 
2021-11-29 05:41:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120277790900752384[0;39m <==    Updates: 0
2021-11-29 05:41:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120277790900752384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 05:41:04.763 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:41:04.871 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:41:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120277811897438208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:41:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120277811897438208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:41:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120277811897438208[0;39m ==> Parameters: 
2021-11-29 05:41:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120277811897438208[0;39m <==    Updates: 3
2021-11-29 05:41:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120277811897438208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 05:41:34.761 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:41:34.887 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:41:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120277937743335424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:41:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120277937743335424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:41:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120277937743335424[0;39m ==> Parameters: 
2021-11-29 05:41:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120277937743335424[0;39m <==    Updates: 3
2021-11-29 05:41:35.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120277937743335424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 05:42:00.003 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120278042554798080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:42:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120278042554798080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:42:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120278042554798080[0;39m ==> Parameters: 
2021-11-29 05:42:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120278042554798080[0;39m <==    Updates: 0
2021-11-29 05:42:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120278042554798080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 05:42:04.770 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:42:04.893 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:42:05.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120278063517929472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:42:05.001 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120278063517929472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:42:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120278063517929472[0;39m ==> Parameters: 
2021-11-29 05:42:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120278063517929472[0;39m <==    Updates: 3
2021-11-29 05:42:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120278063517929472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 05:42:34.780 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:42:34.890 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:42:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120278189405769728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:42:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120278189405769728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:42:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120278189405769728[0;39m ==> Parameters: 
2021-11-29 05:42:35.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120278189405769728[0;39m <==    Updates: 3
2021-11-29 05:42:35.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120278189405769728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 05:43:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120278294221426688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:43:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120278294221426688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:43:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120278294221426688[0;39m ==> Parameters: 
2021-11-29 05:43:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120278294221426688[0;39m <==    Updates: 0
2021-11-29 05:43:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120278294221426688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 05:43:04.757 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:43:04.866 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:43:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120278315192946688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:43:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120278315192946688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:43:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120278315192946688[0;39m ==> Parameters: 
2021-11-29 05:43:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120278315192946688[0;39m <==    Updates: 3
2021-11-29 05:43:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120278315192946688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 05:43:34.777 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:43:34.867 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:43:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120278441034649600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:43:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120278441034649600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:43:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120278441034649600[0;39m ==> Parameters: 
2021-11-29 05:43:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120278441034649600[0;39m <==    Updates: 3
2021-11-29 05:43:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120278441034649600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 05:44:00.001 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120278545862889472[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:44:00.002 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120278545862889472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:44:00.002 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120278545862889472[0;39m ==> Parameters: 
2021-11-29 05:44:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120278545862889472[0;39m <==    Updates: 0
2021-11-29 05:44:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120278545862889472[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 05:44:04.763 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:44:04.886 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:44:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120278566872158208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:44:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120278566872158208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:44:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120278566872158208[0;39m ==> Parameters: 
2021-11-29 05:44:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120278566872158208[0;39m <==    Updates: 3
2021-11-29 05:44:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120278566872158208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 05:44:34.764 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:44:34.875 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:44:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120278692726444032[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:44:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120278692726444032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:44:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120278692726444032[0;39m ==> Parameters: 
2021-11-29 05:44:35.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120278692726444032[0;39m <==    Updates: 3
2021-11-29 05:44:35.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120278692726444032[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:45:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120278797546295296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:45:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120278797546295296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:45:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120278797546295296[0;39m ==> Parameters: 
2021-11-29 05:45:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120278797546295296[0;39m <==    Updates: 0
2021-11-29 05:45:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120278797546295296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 05:45:04.765 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:45:04.859 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:45:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120278818542981120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:45:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120278818542981120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:45:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120278818542981120[0;39m ==> Parameters: 
2021-11-29 05:45:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120278818542981120[0;39m <==    Updates: 3
2021-11-29 05:45:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120278818542981120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:45:34.768 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:45:34.863 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:45:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120278944334352384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:45:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120278944334352384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:45:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120278944334352384[0;39m ==> Parameters: 
2021-11-29 05:45:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120278944334352384[0;39m <==    Updates: 3
2021-11-29 05:45:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120278944334352384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 05:46:00.002 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120279049183563776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:46:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120279049183563776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:46:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120279049183563776[0;39m ==> Parameters: 
2021-11-29 05:46:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120279049183563776[0;39m <==    Updates: 0
2021-11-29 05:46:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120279049183563776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 05:46:04.785 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:46:04.894 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:46:05.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120279070155083776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:46:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120279070155083776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:46:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120279070155083776[0;39m ==> Parameters: 
2021-11-29 05:46:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120279070155083776[0;39m <==    Updates: 3
2021-11-29 05:46:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120279070155083776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:46:34.774 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:46:34.886 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:46:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120279196017758208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:46:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120279196017758208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:46:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120279196017758208[0;39m ==> Parameters: 
2021-11-29 05:46:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120279196017758208[0;39m <==    Updates: 3
2021-11-29 05:46:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120279196017758208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:47:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120279300871163904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:47:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120279300871163904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:47:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120279300871163904[0;39m ==> Parameters: 
2021-11-29 05:47:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120279300871163904[0;39m <==    Updates: 0
2021-11-29 05:47:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120279300871163904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 05:47:04.764 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:47:04.871 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:47:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120279321842683904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:47:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120279321842683904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:47:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120279321842683904[0;39m ==> Parameters: 
2021-11-29 05:47:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120279321842683904[0;39m <==    Updates: 3
2021-11-29 05:47:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120279321842683904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 05:47:34.759 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:47:34.885 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:47:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120279447675998208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:47:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120279447675998208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:47:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120279447675998208[0;39m ==> Parameters: 
2021-11-29 05:47:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120279447675998208[0;39m <==    Updates: 3
2021-11-29 05:47:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120279447675998208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:48:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120279552541986816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:48:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120279552541986816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:48:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120279552541986816[0;39m ==> Parameters: 
2021-11-29 05:48:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120279552541986816[0;39m <==    Updates: 0
2021-11-29 05:48:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120279552541986816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 05:48:04.762 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:48:04.872 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:48:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120279573500923904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:48:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120279573500923904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:48:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120279573500923904[0;39m ==> Parameters: 
2021-11-29 05:48:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120279573500923904[0;39m <==    Updates: 3
2021-11-29 05:48:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120279573500923904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 05:48:34.783 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:48:34.892 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:48:35.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120279699296489472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:48:35.001 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120279699296489472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:48:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120279699296489472[0;39m ==> Parameters: 
2021-11-29 05:48:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120279699296489472[0;39m <==    Updates: 3
2021-11-29 05:48:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120279699296489472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:49:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120279804200226816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:49:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120279804200226816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:49:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120279804200226816[0;39m ==> Parameters: 
2021-11-29 05:49:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120279804200226816[0;39m <==    Updates: 0
2021-11-29 05:49:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120279804200226816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 05:49:04.784 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:49:04.893 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:49:05.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120279825129803776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:49:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120279825129803776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:49:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120279825129803776[0;39m ==> Parameters: 
2021-11-29 05:49:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120279825129803776[0;39m <==    Updates: 3
2021-11-29 05:49:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120279825129803776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:49:34.750 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:49:34.891 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:49:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120279951009255424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:49:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120279951009255424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:49:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120279951009255424[0;39m ==> Parameters: 
2021-11-29 05:49:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120279951009255424[0;39m <==    Updates: 3
2021-11-29 05:49:35.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120279951009255424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 05:50:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120280055845883904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:50:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120280055845883904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:50:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120280055845883904[0;39m ==> Parameters: 
2021-11-29 05:50:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120280055845883904[0;39m <==    Updates: 0
2021-11-29 05:50:00.018 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120280055845883904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2021-11-29 05:50:04.772 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:50:04.894 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:50:05.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120280076788043776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:50:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120280076788043776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:50:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120280076788043776[0;39m ==> Parameters: 
2021-11-29 05:50:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120280076788043776[0;39m <==    Updates: 3
2021-11-29 05:50:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120280076788043776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 05:50:34.756 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:50:34.864 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:50:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120280202629746688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:50:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120280202629746688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:50:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120280202629746688[0;39m ==> Parameters: 
2021-11-29 05:50:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120280202629746688[0;39m <==    Updates: 3
2021-11-29 05:50:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120280202629746688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:51:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120280307504123904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:51:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120280307504123904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:51:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120280307504123904[0;39m ==> Parameters: 
2021-11-29 05:51:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120280307504123904[0;39m <==    Updates: 0
2021-11-29 05:51:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120280307504123904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 05:51:04.776 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:51:04.886 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:51:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120280328475643904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:51:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120280328475643904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:51:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120280328475643904[0;39m ==> Parameters: 
2021-11-29 05:51:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120280328475643904[0;39m <==    Updates: 3
2021-11-29 05:51:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120280328475643904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 05:51:34.764 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:51:34.875 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:51:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120280454321541120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:51:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120280454321541120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:51:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120280454321541120[0;39m ==> Parameters: 
2021-11-29 05:51:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120280454321541120[0;39m <==    Updates: 3
2021-11-29 05:51:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120280454321541120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:52:00.001 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120280559128809472[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:52:00.001 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120280559128809472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:52:00.001 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120280559128809472[0;39m ==> Parameters: 
2021-11-29 05:52:00.002 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120280559128809472[0;39m <==    Updates: 0
2021-11-29 05:52:00.003 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120280559128809472[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 05:52:04.774 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:52:04.883 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:52:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120280580121300992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:52:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120280580121300992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:52:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120280580121300992[0;39m ==> Parameters: 
2021-11-29 05:52:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120280580121300992[0;39m <==    Updates: 3
2021-11-29 05:52:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120280580121300992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:52:34.763 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:52:34.902 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:52:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120280705971392512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:52:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120280705971392512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:52:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120280705971392512[0;39m ==> Parameters: 
2021-11-29 05:52:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120280705971392512[0;39m <==    Updates: 3
2021-11-29 05:52:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120280705971392512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 05:53:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120280810845769728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:53:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120280810845769728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:53:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120280810845769728[0;39m ==> Parameters: 
2021-11-29 05:53:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120280810845769728[0;39m <==    Updates: 0
2021-11-29 05:53:00.018 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120280810845769728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 05:53:04.776 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:53:04.883 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:53:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120280831783735296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:53:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120280831783735296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:53:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120280831783735296[0;39m ==> Parameters: 
2021-11-29 05:53:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120280831783735296[0;39m <==    Updates: 3
2021-11-29 05:53:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120280831783735296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 05:53:34.777 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:53:34.901 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:53:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120280957629632512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:53:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120280957629632512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:53:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120280957629632512[0;39m ==> Parameters: 
2021-11-29 05:53:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120280957629632512[0;39m <==    Updates: 3
2021-11-29 05:53:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120280957629632512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:54:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120281062499815424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:54:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120281062499815424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:54:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120281062499815424[0;39m ==> Parameters: 
2021-11-29 05:54:00.021 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120281062499815424[0;39m <==    Updates: 0
2021-11-29 05:54:00.022 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120281062499815424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 05:54:04.761 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:54:04.871 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:54:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120281083454558208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:54:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120281083454558208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:54:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120281083454558208[0;39m ==> Parameters: 
2021-11-29 05:54:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120281083454558208[0;39m <==    Updates: 3
2021-11-29 05:54:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120281083454558208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:54:34.750 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:54:34.875 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:54:35.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120281209245929472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:54:35.001 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120281209245929472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:54:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120281209245929472[0;39m ==> Parameters: 
2021-11-29 05:54:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120281209245929472[0;39m <==    Updates: 3
2021-11-29 05:54:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120281209245929472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:55:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120281314145472512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:55:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120281314145472512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:55:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120281314145472512[0;39m ==> Parameters: 
2021-11-29 05:55:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120281314145472512[0;39m <==    Updates: 0
2021-11-29 05:55:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120281314145472512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 05:55:04.751 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:55:04.859 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:55:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120281335125381120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:55:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120281335125381120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:55:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120281335125381120[0;39m ==> Parameters: 
2021-11-29 05:55:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120281335125381120[0;39m <==    Updates: 3
2021-11-29 05:55:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120281335125381120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:55:34.776 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:55:34.887 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:55:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120281460954501120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:55:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120281460954501120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:55:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120281460954501120[0;39m ==> Parameters: 
2021-11-29 05:55:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120281460954501120[0;39m <==    Updates: 3
2021-11-29 05:55:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120281460954501120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:56:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120281565816295424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:56:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120281565816295424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:56:00.019 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120281565816295424[0;39m ==> Parameters: 
2021-11-29 05:56:00.021 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120281565816295424[0;39m <==    Updates: 0
2021-11-29 05:56:00.021 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120281565816295424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 05:56:04.760 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:56:04.884 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:56:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120281586758455296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:56:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120281586758455296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:56:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120281586758455296[0;39m ==> Parameters: 
2021-11-29 05:56:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120281586758455296[0;39m <==    Updates: 3
2021-11-29 05:56:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120281586758455296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 05:56:34.774 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:56:34.884 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:56:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120281712579186688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:56:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120281712579186688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:56:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120281712579186688[0;39m ==> Parameters: 
2021-11-29 05:56:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120281712579186688[0;39m <==    Updates: 3
2021-11-29 05:56:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120281712579186688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:57:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120281817445175296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:57:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120281817445175296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:57:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120281817445175296[0;39m ==> Parameters: 
2021-11-29 05:57:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120281817445175296[0;39m <==    Updates: 0
2021-11-29 05:57:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120281817445175296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2021-11-29 05:57:04.769 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:57:04.880 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:57:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120281838399918080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:57:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120281838399918080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:57:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120281838399918080[0;39m ==> Parameters: 
2021-11-29 05:57:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120281838399918080[0;39m <==    Updates: 3
2021-11-29 05:57:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120281838399918080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 05:57:34.751 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:57:34.891 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:57:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120281964283564032[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:57:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120281964283564032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:57:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120281964283564032[0;39m ==> Parameters: 
2021-11-29 05:57:35.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120281964283564032[0;39m <==    Updates: 3
2021-11-29 05:57:35.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120281964283564032[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:58:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120282069145358336[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:58:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120282069145358336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:58:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120282069145358336[0;39m ==> Parameters: 
2021-11-29 05:58:00.019 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120282069145358336[0;39m <==    Updates: 0
2021-11-29 05:58:00.020 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120282069145358336[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 05:58:04.761 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:58:04.885 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:58:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120282090083323904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:58:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120282090083323904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:58:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120282090083323904[0;39m ==> Parameters: 
2021-11-29 05:58:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120282090083323904[0;39m <==    Updates: 3
2021-11-29 05:58:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120282090083323904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:58:34.768 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:58:34.879 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:58:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120282215891472384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:58:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120282215891472384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:58:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120282215891472384[0;39m ==> Parameters: 
2021-11-29 05:58:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120282215891472384[0;39m <==    Updates: 3
2021-11-29 05:58:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120282215891472384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 05:59:00.001 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120282320736489472[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 05:59:00.002 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120282320736489472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 05:59:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120282320736489472[0;39m ==> Parameters: 
2021-11-29 05:59:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120282320736489472[0;39m <==    Updates: 0
2021-11-29 05:59:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120282320736489472[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 05:59:04.773 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:59:04.880 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:59:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120282341716398080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:59:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120282341716398080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:59:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120282341716398080[0;39m ==> Parameters: 
2021-11-29 05:59:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120282341716398080[0;39m <==    Updates: 3
2021-11-29 05:59:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120282341716398080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 05:59:34.750 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:59:34.859 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 05:59:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120282467591655424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 05:59:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120282467591655424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 05:59:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120282467591655424[0;39m ==> Parameters: 
2021-11-29 05:59:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120282467591655424[0;39m <==    Updates: 3
2021-11-29 05:59:35.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120282467591655424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 06:00:00.003 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120282572403118080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:00:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120282572403118080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:00:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120282572403118080[0;39m ==> Parameters: 
2021-11-29 06:00:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120282572403118080[0;39m <==    Updates: 0
2021-11-29 06:00:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120282572403118080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 06:00:04.776 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:00:04.869 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:00:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120282593387220992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:00:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120282593387220992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:00:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120282593387220992[0;39m ==> Parameters: 
2021-11-29 06:00:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120282593387220992[0;39m <==    Updates: 3
2021-11-29 06:00:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120282593387220992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 06:00:34.772 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:00:34.879 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:00:35.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120282719199563776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:00:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120282719199563776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:00:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120282719199563776[0;39m ==> Parameters: 
2021-11-29 06:00:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120282719199563776[0;39m <==    Updates: 3
2021-11-29 06:00:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120282719199563776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 06:01:00.002 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120282824057163776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:01:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120282824057163776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:01:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120282824057163776[0;39m ==> Parameters: 
2021-11-29 06:01:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120282824057163776[0;39m <==    Updates: 0
2021-11-29 06:01:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120282824057163776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 06:01:04.775 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:01:04.884 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:01:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120282845045460992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:01:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120282845045460992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:01:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120282845045460992[0;39m ==> Parameters: 
2021-11-29 06:01:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120282845045460992[0;39m <==    Updates: 3
2021-11-29 06:01:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120282845045460992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 06:01:34.782 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:01:34.875 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:01:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120282970916524032[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:01:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120282970916524032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:01:35.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120282970916524032[0;39m ==> Parameters: 
2021-11-29 06:01:35.020 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120282970916524032[0;39m <==    Updates: 3
2021-11-29 06:01:35.021 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120282970916524032[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 06:02:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120283075723792384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:02:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120283075723792384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:02:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120283075723792384[0;39m ==> Parameters: 
2021-11-29 06:02:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120283075723792384[0;39m <==    Updates: 0
2021-11-29 06:02:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120283075723792384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2021-11-29 06:02:04.784 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:02:04.877 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:02:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120283096741449728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:02:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120283096741449728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:02:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120283096741449728[0;39m ==> Parameters: 
2021-11-29 06:02:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120283096741449728[0;39m <==    Updates: 3
2021-11-29 06:02:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120283096741449728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 06:02:34.748 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:02:34.877 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:02:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120283222562181120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:02:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120283222562181120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:02:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120283222562181120[0;39m ==> Parameters: 
2021-11-29 06:02:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120283222562181120[0;39m <==    Updates: 3
2021-11-29 06:02:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120283222562181120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 06:03:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120283327386226688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:03:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120283327386226688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:03:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120283327386226688[0;39m ==> Parameters: 
2021-11-29 06:03:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120283327386226688[0;39m <==    Updates: 0
2021-11-29 06:03:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120283327386226688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 06:03:04.777 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:03:04.885 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:03:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120283348361940992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:03:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120283348361940992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:03:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120283348361940992[0;39m ==> Parameters: 
2021-11-29 06:03:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120283348361940992[0;39m <==    Updates: 3
2021-11-29 06:03:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120283348361940992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 06:03:34.747 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:03:34.889 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:03:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120283474220421120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:03:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120283474220421120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:03:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120283474220421120[0;39m ==> Parameters: 
2021-11-29 06:03:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120283474220421120[0;39m <==    Updates: 3
2021-11-29 06:03:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120283474220421120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 06:04:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120283579078021120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:04:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120283579078021120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:04:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120283579078021120[0;39m ==> Parameters: 
2021-11-29 06:04:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120283579078021120[0;39m <==    Updates: 0
2021-11-29 06:04:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120283579078021120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 06:04:04.778 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:04:04.900 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:04:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120283600028569600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:04:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120283600028569600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:04:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120283600028569600[0;39m ==> Parameters: 
2021-11-29 06:04:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120283600028569600[0;39m <==    Updates: 3
2021-11-29 06:04:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120283600028569600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 06:04:34.771 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:04:34.894 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:04:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120283725887049728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:04:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120283725887049728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:04:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120283725887049728[0;39m ==> Parameters: 
2021-11-29 06:04:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120283725887049728[0;39m <==    Updates: 3
2021-11-29 06:04:35.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120283725887049728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 06:05:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120283830727872512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:05:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120283830727872512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:05:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120283830727872512[0;39m ==> Parameters: 
2021-11-29 06:05:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120283830727872512[0;39m <==    Updates: 0
2021-11-29 06:05:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120283830727872512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 06:05:04.769 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:05:04.875 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:05:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120283851711975424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:05:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120283851711975424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:05:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120283851711975424[0;39m ==> Parameters: 
2021-11-29 06:05:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120283851711975424[0;39m <==    Updates: 3
2021-11-29 06:05:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120283851711975424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 06:05:34.796 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:05:34.874 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:05:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120283977536901120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:05:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120283977536901120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:05:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120283977536901120[0;39m ==> Parameters: 
2021-11-29 06:05:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120283977536901120[0;39m <==    Updates: 3
2021-11-29 06:05:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120283977536901120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 06:06:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120284082398695424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:06:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120284082398695424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:06:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120284082398695424[0;39m ==> Parameters: 
2021-11-29 06:06:00.020 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120284082398695424[0;39m <==    Updates: 0
2021-11-29 06:06:00.021 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120284082398695424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 06:06:04.776 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:06:04.900 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:06:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120284103340855296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:06:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120284103340855296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:06:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120284103340855296[0;39m ==> Parameters: 
2021-11-29 06:06:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120284103340855296[0;39m <==    Updates: 3
2021-11-29 06:06:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120284103340855296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 06:06:34.778 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:06:34.886 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:06:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120284229178363904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:06:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120284229178363904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:06:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120284229178363904[0;39m ==> Parameters: 
2021-11-29 06:06:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120284229178363904[0;39m <==    Updates: 3
2021-11-29 06:06:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120284229178363904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 06:07:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120284334023380992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:07:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120284334023380992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:07:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120284334023380992[0;39m ==> Parameters: 
2021-11-29 06:07:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120284334023380992[0;39m <==    Updates: 0
2021-11-29 06:07:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120284334023380992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 06:07:04.778 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:07:04.885 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:07:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120284355007483904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:07:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120284355007483904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:07:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120284355007483904[0;39m ==> Parameters: 
2021-11-29 06:07:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120284355007483904[0;39m <==    Updates: 3
2021-11-29 06:07:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120284355007483904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 06:07:34.787 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:07:34.897 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:07:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120284480824020992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:07:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120284480824020992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:07:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120284480824020992[0;39m ==> Parameters: 
2021-11-29 06:07:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120284480824020992[0;39m <==    Updates: 3
2021-11-29 06:07:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120284480824020992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 06:08:00.001 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120284585660649472[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:08:00.001 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120284585660649472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:08:00.002 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120284585660649472[0;39m ==> Parameters: 
2021-11-29 06:08:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120284585660649472[0;39m <==    Updates: 0
2021-11-29 06:08:00.003 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120284585660649472[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 06:08:04.793 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:08:04.901 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:08:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120284606669918208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:08:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120284606669918208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:08:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120284606669918208[0;39m ==> Parameters: 
2021-11-29 06:08:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120284606669918208[0;39m <==    Updates: 3
2021-11-29 06:08:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120284606669918208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 06:08:34.786 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:08:34.878 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:08:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120284732469678080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:08:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120284732469678080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:08:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120284732469678080[0;39m ==> Parameters: 
2021-11-29 06:08:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120284732469678080[0;39m <==    Updates: 3
2021-11-29 06:08:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120284732469678080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 06:09:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120284837365026816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:09:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120284837365026816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:09:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120284837365026816[0;39m ==> Parameters: 
2021-11-29 06:09:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120284837365026816[0;39m <==    Updates: 0
2021-11-29 06:09:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120284837365026816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 06:09:04.765 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:09:04.874 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:09:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120284858340741120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:09:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120284858340741120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:09:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120284858340741120[0;39m ==> Parameters: 
2021-11-29 06:09:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120284858340741120[0;39m <==    Updates: 3
2021-11-29 06:09:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120284858340741120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 06:09:34.755 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:09:34.863 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:09:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120284984136306688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:09:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120284984136306688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:09:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120284984136306688[0;39m ==> Parameters: 
2021-11-29 06:09:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120284984136306688[0;39m <==    Updates: 3
2021-11-29 06:09:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120284984136306688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 06:10:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120285088993906688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:10:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120285088993906688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:10:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120285088993906688[0;39m ==> Parameters: 
2021-11-29 06:10:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120285088993906688[0;39m <==    Updates: 0
2021-11-29 06:10:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120285088993906688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 06:10:04.774 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:10:04.883 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:10:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120285109973815296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:10:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120285109973815296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:10:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120285109973815296[0;39m ==> Parameters: 
2021-11-29 06:10:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120285109973815296[0;39m <==    Updates: 3
2021-11-29 06:10:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120285109973815296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 06:10:34.751 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:10:34.907 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:10:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120285235836489728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:10:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120285235836489728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:10:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120285235836489728[0;39m ==> Parameters: 
2021-11-29 06:10:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120285235836489728[0;39m <==    Updates: 3
2021-11-29 06:10:35.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120285235836489728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 06:11:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120285340664729600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:11:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120285340664729600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:11:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120285340664729600[0;39m ==> Parameters: 
2021-11-29 06:11:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120285340664729600[0;39m <==    Updates: 0
2021-11-29 06:11:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120285340664729600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 06:11:04.780 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:11:04.873 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:11:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120285361653026816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:11:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120285361653026816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:11:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120285361653026816[0;39m ==> Parameters: 
2021-11-29 06:11:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120285361653026816[0;39m <==    Updates: 3
2021-11-29 06:11:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120285361653026816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 06:11:34.773 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:11:34.883 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:11:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120285487465369600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:11:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120285487465369600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:11:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120285487465369600[0;39m ==> Parameters: 
2021-11-29 06:11:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120285487465369600[0;39m <==    Updates: 3
2021-11-29 06:11:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120285487465369600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 06:12:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120285592339746816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:12:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120285592339746816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:12:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120285592339746816[0;39m ==> Parameters: 
2021-11-29 06:12:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120285592339746816[0;39m <==    Updates: 0
2021-11-29 06:12:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120285592339746816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š1æ¯«ç§’
2021-11-29 06:12:04.780 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:12:04.904 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:12:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120285613302878208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:12:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120285613302878208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:12:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120285613302878208[0;39m ==> Parameters: 
2021-11-29 06:12:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120285613302878208[0;39m <==    Updates: 3
2021-11-29 06:12:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120285613302878208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 06:12:34.781 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:12:34.890 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:12:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120285739148775424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:12:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120285739148775424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:12:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120285739148775424[0;39m ==> Parameters: 
2021-11-29 06:12:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120285739148775424[0;39m <==    Updates: 3
2021-11-29 06:12:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120285739148775424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 06:13:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120285844014764032[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:13:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120285844014764032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:13:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120285844014764032[0;39m ==> Parameters: 
2021-11-29 06:13:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120285844014764032[0;39m <==    Updates: 0
2021-11-29 06:13:00.019 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120285844014764032[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 06:13:04.774 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:13:04.881 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:13:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120285864935952384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:13:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120285864935952384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:13:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120285864935952384[0;39m ==> Parameters: 
2021-11-29 06:13:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120285864935952384[0;39m <==    Updates: 3
2021-11-29 06:13:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120285864935952384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 06:13:34.771 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:13:34.883 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:13:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120285990790238208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:13:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120285990790238208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:13:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120285990790238208[0;39m ==> Parameters: 
2021-11-29 06:13:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120285990790238208[0;39m <==    Updates: 3
2021-11-29 06:13:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120285990790238208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 06:14:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120286095668809728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:14:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120286095668809728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:14:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120286095668809728[0;39m ==> Parameters: 
2021-11-29 06:14:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120286095668809728[0;39m <==    Updates: 0
2021-11-29 06:14:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120286095668809728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 06:14:04.774 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:14:04.881 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:14:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120286116606775296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:14:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120286116606775296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:14:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120286116606775296[0;39m ==> Parameters: 
2021-11-29 06:14:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120286116606775296[0;39m <==    Updates: 3
2021-11-29 06:14:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120286116606775296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 06:14:34.775 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:14:34.883 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:14:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120286242435895296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:14:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120286242435895296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:14:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120286242435895296[0;39m ==> Parameters: 
2021-11-29 06:14:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120286242435895296[0;39m <==    Updates: 3
2021-11-29 06:14:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120286242435895296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 06:15:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120286347310272512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:15:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120286347310272512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:15:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120286347310272512[0;39m ==> Parameters: 
2021-11-29 06:15:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120286347310272512[0;39m <==    Updates: 0
2021-11-29 06:15:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120286347310272512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 06:15:04.747 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:15:04.872 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:15:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120286368290181120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:15:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120286368290181120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:15:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120286368290181120[0;39m ==> Parameters: 
2021-11-29 06:15:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120286368290181120[0;39m <==    Updates: 3
2021-11-29 06:15:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120286368290181120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 06:15:34.769 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:15:34.879 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:15:35.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120286494068969472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:15:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120286494068969472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:15:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120286494068969472[0;39m ==> Parameters: 
2021-11-29 06:15:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120286494068969472[0;39m <==    Updates: 3
2021-11-29 06:15:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120286494068969472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 06:16:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120286598976901120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:16:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120286598976901120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:16:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120286598976901120[0;39m ==> Parameters: 
2021-11-29 06:16:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120286598976901120[0;39m <==    Updates: 0
2021-11-29 06:16:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120286598976901120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 06:16:04.768 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:16:04.875 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:16:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120286619956809728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:16:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120286619956809728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:16:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120286619956809728[0;39m ==> Parameters: 
2021-11-29 06:16:05.019 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120286619956809728[0;39m <==    Updates: 3
2021-11-29 06:16:05.020 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120286619956809728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 06:16:34.772 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:16:34.883 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:16:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120286745760763904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:16:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120286745760763904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:16:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120286745760763904[0;39m ==> Parameters: 
2021-11-29 06:16:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120286745760763904[0;39m <==    Updates: 3
2021-11-29 06:16:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120286745760763904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 06:17:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120286850647724032[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:17:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120286850647724032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:17:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120286850647724032[0;39m ==> Parameters: 
2021-11-29 06:17:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120286850647724032[0;39m <==    Updates: 0
2021-11-29 06:17:00.018 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120286850647724032[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 06:17:04.786 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:17:04.895 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:17:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120286871564718080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:17:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120286871564718080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:17:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120286871564718080[0;39m ==> Parameters: 
2021-11-29 06:17:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120286871564718080[0;39m <==    Updates: 3
2021-11-29 06:17:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120286871564718080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 06:17:34.766 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:17:34.892 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:17:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120286997435781120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:17:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120286997435781120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:17:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120286997435781120[0;39m ==> Parameters: 
2021-11-29 06:17:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120286997435781120[0;39m <==    Updates: 3
2021-11-29 06:17:35.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120286997435781120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 06:18:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120287102297575424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:18:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120287102297575424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:18:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120287102297575424[0;39m ==> Parameters: 
2021-11-29 06:18:00.020 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120287102297575424[0;39m <==    Updates: 0
2021-11-29 06:18:00.021 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120287102297575424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 06:18:04.782 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:18:04.890 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:18:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120287123273289728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:18:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120287123273289728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:18:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120287123273289728[0;39m ==> Parameters: 
2021-11-29 06:18:05.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120287123273289728[0;39m <==    Updates: 3
2021-11-29 06:18:05.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120287123273289728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 06:18:34.768 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:18:34.862 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:18:35.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120287249047883776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:18:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120287249047883776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:18:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120287249047883776[0;39m ==> Parameters: 
2021-11-29 06:18:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120287249047883776[0;39m <==    Updates: 3
2021-11-29 06:18:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120287249047883776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 06:19:00.002 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120287353905483776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:19:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120287353905483776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:19:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120287353905483776[0;39m ==> Parameters: 
2021-11-29 06:19:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120287353905483776[0;39m <==    Updates: 0
2021-11-29 06:19:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120287353905483776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 06:19:04.777 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:19:04.899 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:19:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120287374897975296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:19:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120287374897975296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:19:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120287374897975296[0;39m ==> Parameters: 
2021-11-29 06:19:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120287374897975296[0;39m <==    Updates: 3
2021-11-29 06:19:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120287374897975296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 06:19:34.780 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:19:34.889 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:19:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120287500743872512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:19:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120287500743872512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:19:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120287500743872512[0;39m ==> Parameters: 
2021-11-29 06:19:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120287500743872512[0;39m <==    Updates: 3
2021-11-29 06:19:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120287500743872512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 06:20:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120287605588889600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:20:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120287605588889600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:20:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120287605588889600[0;39m ==> Parameters: 
2021-11-29 06:20:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120287605588889600[0;39m <==    Updates: 0
2021-11-29 06:20:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120287605588889600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 06:20:04.776 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:20:04.901 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:20:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120287626568798208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:20:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120287626568798208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:20:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120287626568798208[0;39m ==> Parameters: 
2021-11-29 06:20:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120287626568798208[0;39m <==    Updates: 3
2021-11-29 06:20:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120287626568798208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 06:20:34.781 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:20:34.895 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:20:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120287752414695424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:20:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120287752414695424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:20:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120287752414695424[0;39m ==> Parameters: 
2021-11-29 06:20:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120287752414695424[0;39m <==    Updates: 3
2021-11-29 06:20:35.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120287752414695424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 06:21:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120287857268101120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:21:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120287857268101120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:21:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120287857268101120[0;39m ==> Parameters: 
2021-11-29 06:21:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120287857268101120[0;39m <==    Updates: 0
2021-11-29 06:21:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120287857268101120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 06:21:04.760 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:21:04.884 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:21:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120287878218649600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:21:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120287878218649600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:21:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120287878218649600[0;39m ==> Parameters: 
2021-11-29 06:21:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120287878218649600[0;39m <==    Updates: 3
2021-11-29 06:21:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120287878218649600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 06:21:34.775 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:21:34.900 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:21:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120288004056158208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:21:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120288004056158208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:21:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120288004056158208[0;39m ==> Parameters: 
2021-11-29 06:21:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120288004056158208[0;39m <==    Updates: 3
2021-11-29 06:21:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120288004056158208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 06:22:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120288108934729728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:22:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120288108934729728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:22:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120288108934729728[0;39m ==> Parameters: 
2021-11-29 06:22:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120288108934729728[0;39m <==    Updates: 0
2021-11-29 06:22:00.018 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120288108934729728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 06:22:04.788 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:22:04.896 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:22:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120288129860112384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:22:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120288129860112384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:22:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120288129860112384[0;39m ==> Parameters: 
2021-11-29 06:22:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120288129860112384[0;39m <==    Updates: 3
2021-11-29 06:22:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120288129860112384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 06:22:34.762 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:22:34.903 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:22:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120288255722786816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:22:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120288255722786816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:22:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120288255722786816[0;39m ==> Parameters: 
2021-11-29 06:22:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120288255722786816[0;39m <==    Updates: 3
2021-11-29 06:22:35.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120288255722786816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 06:23:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120288360580386816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:23:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120288360580386816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:23:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120288360580386816[0;39m ==> Parameters: 
2021-11-29 06:23:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120288360580386816[0;39m <==    Updates: 0
2021-11-29 06:23:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120288360580386816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 06:23:04.796 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:23:04.889 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:23:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120288381547712512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:23:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120288381547712512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:23:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120288381547712512[0;39m ==> Parameters: 
2021-11-29 06:23:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120288381547712512[0;39m <==    Updates: 3
2021-11-29 06:23:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120288381547712512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 06:23:34.779 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:23:34.873 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:23:35.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120288507334889472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:23:35.001 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120288507334889472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:23:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120288507334889472[0;39m ==> Parameters: 
2021-11-29 06:23:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120288507334889472[0;39m <==    Updates: 3
2021-11-29 06:23:35.002 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120288507334889472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 06:24:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120288612221849600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:24:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120288612221849600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:24:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120288612221849600[0;39m ==> Parameters: 
2021-11-29 06:24:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120288612221849600[0;39m <==    Updates: 0
2021-11-29 06:24:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120288612221849600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 06:24:04.785 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:24:04.893 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:24:05.000 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120288633159815168[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:24:05.000 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120288633159815168[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:24:05.001 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120288633159815168[0;39m ==> Parameters: 
2021-11-29 06:24:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120288633159815168[0;39m <==    Updates: 3
2021-11-29 06:24:05.002 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120288633159815168[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 06:24:34.784 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:24:34.877 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:24:35.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120288758993129472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:24:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120288758993129472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:24:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120288758993129472[0;39m ==> Parameters: 
2021-11-29 06:24:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120288758993129472[0;39m <==    Updates: 3
2021-11-29 06:24:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120288758993129472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 06:25:00.001 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120288863850729472[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:25:00.001 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120288863850729472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:25:00.002 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120288863850729472[0;39m ==> Parameters: 
2021-11-29 06:25:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120288863850729472[0;39m <==    Updates: 0
2021-11-29 06:25:00.003 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120288863850729472[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 06:25:04.764 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:25:04.872 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:25:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120288884868386816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:25:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120288884868386816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:25:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120288884868386816[0;39m ==> Parameters: 
2021-11-29 06:25:05.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120288884868386816[0;39m <==    Updates: 3
2021-11-29 06:25:05.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120288884868386816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶6æ¯«ç§’
2021-11-29 06:25:34.776 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:25:34.901 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:25:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120289010693312512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:25:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120289010693312512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:25:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120289010693312512[0;39m ==> Parameters: 
2021-11-29 06:25:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120289010693312512[0;39m <==    Updates: 3
2021-11-29 06:25:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120289010693312512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 06:26:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120289115550912512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:26:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120289115550912512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:26:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120289115550912512[0;39m ==> Parameters: 
2021-11-29 06:26:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120289115550912512[0;39m <==    Updates: 0
2021-11-29 06:26:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120289115550912512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 06:26:04.769 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:26:04.890 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:26:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120289136535015424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:26:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120289136535015424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:26:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120289136535015424[0;39m ==> Parameters: 
2021-11-29 06:26:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120289136535015424[0;39m <==    Updates: 3
2021-11-29 06:26:05.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120289136535015424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 06:26:34.789 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:26:34.885 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:26:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120289262330580992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:26:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120289262330580992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:26:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120289262330580992[0;39m ==> Parameters: 
2021-11-29 06:26:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120289262330580992[0;39m <==    Updates: 3
2021-11-29 06:26:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120289262330580992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 06:27:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120289367204958208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:27:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120289367204958208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:27:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120289367204958208[0;39m ==> Parameters: 
2021-11-29 06:27:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120289367204958208[0;39m <==    Updates: 0
2021-11-29 06:27:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120289367204958208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 06:27:04.792 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:27:04.900 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:27:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120289388172283904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:27:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120289388172283904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:27:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120289388172283904[0;39m ==> Parameters: 
2021-11-29 06:27:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120289388172283904[0;39m <==    Updates: 3
2021-11-29 06:27:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120289388172283904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 06:27:34.779 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:27:34.887 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:27:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120289514018181120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:27:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120289514018181120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:27:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120289514018181120[0;39m ==> Parameters: 
2021-11-29 06:27:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120289514018181120[0;39m <==    Updates: 3
2021-11-29 06:27:35.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120289514018181120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 06:28:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120289618854809600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:28:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120289618854809600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:28:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120289618854809600[0;39m ==> Parameters: 
2021-11-29 06:28:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120289618854809600[0;39m <==    Updates: 0
2021-11-29 06:28:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120289618854809600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 06:28:04.778 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:28:04.901 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:28:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120289639830523904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:28:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120289639830523904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:28:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120289639830523904[0;39m ==> Parameters: 
2021-11-29 06:28:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120289639830523904[0;39m <==    Updates: 3
2021-11-29 06:28:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120289639830523904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 06:28:34.760 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:28:34.886 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:28:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120289765659643904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:28:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120289765659643904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:28:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120289765659643904[0;39m ==> Parameters: 
2021-11-29 06:28:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120289765659643904[0;39m <==    Updates: 3
2021-11-29 06:28:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120289765659643904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 06:29:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120289870534021120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:29:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120289870534021120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:29:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120289870534021120[0;39m ==> Parameters: 
2021-11-29 06:29:00.019 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120289870534021120[0;39m <==    Updates: 0
2021-11-29 06:29:00.019 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120289870534021120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 06:29:04.777 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:29:04.884 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:29:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120289891484569600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:29:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120289891484569600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:29:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120289891484569600[0;39m ==> Parameters: 
2021-11-29 06:29:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120289891484569600[0;39m <==    Updates: 3
2021-11-29 06:29:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120289891484569600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 06:29:34.792 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:29:34.900 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:29:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120290017322078208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:29:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120290017322078208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:29:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120290017322078208[0;39m ==> Parameters: 
2021-11-29 06:29:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120290017322078208[0;39m <==    Updates: 3
2021-11-29 06:29:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120290017322078208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 06:30:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120290122167095296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:30:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120290122167095296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:30:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120290122167095296[0;39m ==> Parameters: 
2021-11-29 06:30:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120290122167095296[0;39m <==    Updates: 0
2021-11-29 06:30:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120290122167095296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 06:30:04.788 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:30:04.897 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:30:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120290143134420992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:30:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120290143134420992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:30:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120290143134420992[0;39m ==> Parameters: 
2021-11-29 06:30:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120290143134420992[0;39m <==    Updates: 3
2021-11-29 06:30:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120290143134420992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶8æ¯«ç§’
2021-11-29 06:30:34.789 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:30:34.911 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:30:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120290268950958080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:30:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120290268950958080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:30:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120290268950958080[0;39m ==> Parameters: 
2021-11-29 06:30:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120290268950958080[0;39m <==    Updates: 3
2021-11-29 06:30:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120290268950958080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 06:31:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120290373842112512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:31:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120290373842112512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:31:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120290373842112512[0;39m ==> Parameters: 
2021-11-29 06:31:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120290373842112512[0;39m <==    Updates: 0
2021-11-29 06:31:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120290373842112512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 06:31:04.798 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:31:04.908 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:31:05.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120290394775883776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:31:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120290394775883776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:31:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120290394775883776[0;39m ==> Parameters: 
2021-11-29 06:31:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120290394775883776[0;39m <==    Updates: 3
2021-11-29 06:31:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120290394775883776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 06:31:34.776 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:31:34.900 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:31:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120290520634363904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:31:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120290520634363904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:31:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120290520634363904[0;39m ==> Parameters: 
2021-11-29 06:31:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120290520634363904[0;39m <==    Updates: 3
2021-11-29 06:31:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120290520634363904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 06:32:00.002 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120290625462603776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:32:00.002 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120290625462603776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:32:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120290625462603776[0;39m ==> Parameters: 
2021-11-29 06:32:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120290625462603776[0;39m <==    Updates: 0
2021-11-29 06:32:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120290625462603776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 06:32:04.790 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:32:04.883 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:32:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120290646459289600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:32:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120290646459289600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:32:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120290646459289600[0;39m ==> Parameters: 
2021-11-29 06:32:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120290646459289600[0;39m <==    Updates: 3
2021-11-29 06:32:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120290646459289600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 06:32:34.770 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:32:34.893 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:32:35.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120290772263243776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:32:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120290772263243776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:32:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120290772263243776[0;39m ==> Parameters: 
2021-11-29 06:32:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120290772263243776[0;39m <==    Updates: 3
2021-11-29 06:32:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120290772263243776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶7æ¯«ç§’
2021-11-29 06:33:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120290877150203904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:33:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120290877150203904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:33:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120290877150203904[0;39m ==> Parameters: 
2021-11-29 06:33:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120290877150203904[0;39m <==    Updates: 0
2021-11-29 06:33:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120290877150203904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 06:33:04.792 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:33:04.886 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:33:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120290898125918208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:33:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120290898125918208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:33:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120290898125918208[0;39m ==> Parameters: 
2021-11-29 06:33:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120290898125918208[0;39m <==    Updates: 3
2021-11-29 06:33:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120290898125918208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 06:33:34.759 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:33:34.898 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:33:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120291023942455296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:33:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120291023942455296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:33:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120291023942455296[0;39m ==> Parameters: 
2021-11-29 06:33:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120291023942455296[0;39m <==    Updates: 3
2021-11-29 06:33:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120291023942455296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 06:34:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120291128808443904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:34:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120291128808443904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:34:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120291128808443904[0;39m ==> Parameters: 
2021-11-29 06:34:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120291128808443904[0;39m <==    Updates: 0
2021-11-29 06:34:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120291128808443904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 06:34:04.767 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:34:04.909 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:34:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120291149809324032[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:34:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120291149809324032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:34:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120291149809324032[0;39m ==> Parameters: 
2021-11-29 06:34:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120291149809324032[0;39m <==    Updates: 3
2021-11-29 06:34:05.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120291149809324032[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 06:34:34.759 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:34:34.885 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:34:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120291275621666816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:34:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120291275621666816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:34:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120291275621666816[0;39m ==> Parameters: 
2021-11-29 06:34:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120291275621666816[0;39m <==    Updates: 3
2021-11-29 06:34:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120291275621666816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 06:35:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120291380470878208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:35:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120291380470878208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:35:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120291380470878208[0;39m ==> Parameters: 
2021-11-29 06:35:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120291380470878208[0;39m <==    Updates: 0
2021-11-29 06:35:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120291380470878208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 06:35:04.770 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:35:04.877 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:35:05.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120291401404649472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:35:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120291401404649472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:35:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120291401404649472[0;39m ==> Parameters: 
2021-11-29 06:35:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120291401404649472[0;39m <==    Updates: 3
2021-11-29 06:35:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120291401404649472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 06:35:34.778 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:35:34.901 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:35:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120291527275712512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:35:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120291527275712512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:35:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120291527275712512[0;39m ==> Parameters: 
2021-11-29 06:35:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120291527275712512[0;39m <==    Updates: 3
2021-11-29 06:35:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120291527275712512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 06:36:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120291632150089728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:36:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120291632150089728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:36:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120291632150089728[0;39m ==> Parameters: 
2021-11-29 06:36:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120291632150089728[0;39m <==    Updates: 0
2021-11-29 06:36:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120291632150089728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 06:36:04.767 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:36:04.890 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:36:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120291653117415424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:36:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120291653117415424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:36:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120291653117415424[0;39m ==> Parameters: 
2021-11-29 06:36:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120291653117415424[0;39m <==    Updates: 3
2021-11-29 06:36:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120291653117415424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 06:36:34.777 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:36:34.884 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:36:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120291778925563904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:36:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120291778925563904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:36:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120291778925563904[0;39m ==> Parameters: 
2021-11-29 06:36:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120291778925563904[0;39m <==    Updates: 3
2021-11-29 06:36:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120291778925563904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 06:37:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120291883787358208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:37:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120291883787358208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:37:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120291883787358208[0;39m ==> Parameters: 
2021-11-29 06:37:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120291883787358208[0;39m <==    Updates: 0
2021-11-29 06:37:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120291883787358208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 06:37:04.768 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:37:04.892 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:37:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120291904779849728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:37:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120291904779849728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:37:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120291904779849728[0;39m ==> Parameters: 
2021-11-29 06:37:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120291904779849728[0;39m <==    Updates: 3
2021-11-29 06:37:05.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120291904779849728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 06:37:34.801 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:37:34.907 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:37:35.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120292030550249472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:37:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120292030550249472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:37:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120292030550249472[0;39m ==> Parameters: 
2021-11-29 06:37:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120292030550249472[0;39m <==    Updates: 3
2021-11-29 06:37:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120292030550249472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 06:38:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120292135449792512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:38:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120292135449792512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:38:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120292135449792512[0;39m ==> Parameters: 
2021-11-29 06:38:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120292135449792512[0;39m <==    Updates: 0
2021-11-29 06:38:00.019 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120292135449792512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 06:38:04.774 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:38:04.896 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:38:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120292156387758080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:38:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120292156387758080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:38:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120292156387758080[0;39m ==> Parameters: 
2021-11-29 06:38:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120292156387758080[0;39m <==    Updates: 3
2021-11-29 06:38:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120292156387758080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 06:38:34.779 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:38:34.903 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:38:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120292282250432512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:38:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120292282250432512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:38:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120292282250432512[0;39m ==> Parameters: 
2021-11-29 06:38:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120292282250432512[0;39m <==    Updates: 3
2021-11-29 06:38:35.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120292282250432512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶6æ¯«ç§’
2021-11-29 06:39:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120292387116421120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:39:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120292387116421120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:39:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120292387116421120[0;39m ==> Parameters: 
2021-11-29 06:39:00.019 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120292387116421120[0;39m <==    Updates: 0
2021-11-29 06:39:00.019 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120292387116421120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 06:39:04.792 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:39:04.901 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:39:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120292408062775296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:39:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120292408062775296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:39:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120292408062775296[0;39m ==> Parameters: 
2021-11-29 06:39:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120292408062775296[0;39m <==    Updates: 3
2021-11-29 06:39:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120292408062775296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 06:39:34.789 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:39:34.913 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:39:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120292533900283904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:39:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120292533900283904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:39:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120292533900283904[0;39m ==> Parameters: 
2021-11-29 06:39:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120292533900283904[0;39m <==    Updates: 3
2021-11-29 06:39:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120292533900283904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 06:40:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120292638736912384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:40:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120292638736912384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:40:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120292638736912384[0;39m ==> Parameters: 
2021-11-29 06:40:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120292638736912384[0;39m <==    Updates: 0
2021-11-29 06:40:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120292638736912384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 06:40:04.792 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:40:04.901 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:40:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120292659733598208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:40:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120292659733598208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:40:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120292659733598208[0;39m ==> Parameters: 
2021-11-29 06:40:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120292659733598208[0;39m <==    Updates: 3
2021-11-29 06:40:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120292659733598208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 06:40:34.768 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:40:34.893 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:40:35.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120292785529163776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:40:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120292785529163776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:40:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120292785529163776[0;39m ==> Parameters: 
2021-11-29 06:40:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120292785529163776[0;39m <==    Updates: 3
2021-11-29 06:40:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120292785529163776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 06:41:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120292890428706816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:41:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120292890428706816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:41:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120292890428706816[0;39m ==> Parameters: 
2021-11-29 06:41:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120292890428706816[0;39m <==    Updates: 0
2021-11-29 06:41:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120292890428706816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 06:41:04.787 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:41:04.911 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:41:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120292911362478080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:41:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120292911362478080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:41:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120292911362478080[0;39m ==> Parameters: 
2021-11-29 06:41:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120292911362478080[0;39m <==    Updates: 3
2021-11-29 06:41:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120292911362478080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 06:41:34.777 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:41:34.888 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:41:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120293037233541120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:41:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120293037233541120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:41:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120293037233541120[0;39m ==> Parameters: 
2021-11-29 06:41:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120293037233541120[0;39m <==    Updates: 3
2021-11-29 06:41:35.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120293037233541120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 06:42:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120293142099529728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:42:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120293142099529728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:42:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120293142099529728[0;39m ==> Parameters: 
2021-11-29 06:42:00.022 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120293142099529728[0;39m <==    Updates: 0
2021-11-29 06:42:00.023 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120293142099529728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 06:42:04.788 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:42:04.896 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:42:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120293163020718080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:42:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120293163020718080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:42:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120293163020718080[0;39m ==> Parameters: 
2021-11-29 06:42:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120293163020718080[0;39m <==    Updates: 3
2021-11-29 06:42:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120293163020718080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 06:42:34.791 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:42:34.913 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:42:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120293288866615296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:42:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120293288866615296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:42:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120293288866615296[0;39m ==> Parameters: 
2021-11-29 06:42:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120293288866615296[0;39m <==    Updates: 3
2021-11-29 06:42:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120293288866615296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 06:43:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120293393745186816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:43:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120293393745186816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:43:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120293393745186816[0;39m ==> Parameters: 
2021-11-29 06:43:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120293393745186816[0;39m <==    Updates: 0
2021-11-29 06:43:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120293393745186816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 06:43:04.795 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:43:04.905 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:43:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120293414720901120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:43:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120293414720901120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:43:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120293414720901120[0;39m ==> Parameters: 
2021-11-29 06:43:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120293414720901120[0;39m <==    Updates: 3
2021-11-29 06:43:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120293414720901120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 06:43:34.791 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:43:34.883 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:43:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120293540516466688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:43:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120293540516466688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:43:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120293540516466688[0;39m ==> Parameters: 
2021-11-29 06:43:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120293540516466688[0;39m <==    Updates: 3
2021-11-29 06:43:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120293540516466688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 06:44:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120293645390843904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:44:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120293645390843904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:44:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120293645390843904[0;39m ==> Parameters: 
2021-11-29 06:44:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120293645390843904[0;39m <==    Updates: 0
2021-11-29 06:44:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120293645390843904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 06:44:04.784 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:44:04.908 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:44:05.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120293666328809472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:44:05.001 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120293666328809472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:44:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120293666328809472[0;39m ==> Parameters: 
2021-11-29 06:44:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120293666328809472[0;39m <==    Updates: 3
2021-11-29 06:44:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120293666328809472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 06:44:34.792 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:44:34.886 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:44:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120293792199872512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:44:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120293792199872512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:44:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120293792199872512[0;39m ==> Parameters: 
2021-11-29 06:44:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120293792199872512[0;39m <==    Updates: 3
2021-11-29 06:44:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120293792199872512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 06:45:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120293897053278208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:45:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120293897053278208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:45:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120293897053278208[0;39m ==> Parameters: 
2021-11-29 06:45:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120293897053278208[0;39m <==    Updates: 0
2021-11-29 06:45:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120293897053278208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 06:45:04.761 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:45:04.885 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:45:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120293918016409600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:45:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120293918016409600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:45:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120293918016409600[0;39m ==> Parameters: 
2021-11-29 06:45:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120293918016409600[0;39m <==    Updates: 3
2021-11-29 06:45:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120293918016409600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 06:45:34.766 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:45:34.891 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:45:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120294043874889728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:45:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120294043874889728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:45:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120294043874889728[0;39m ==> Parameters: 
2021-11-29 06:45:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120294043874889728[0;39m <==    Updates: 3
2021-11-29 06:45:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120294043874889728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 06:46:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120294148686352384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:46:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120294148686352384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:46:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120294148686352384[0;39m ==> Parameters: 
2021-11-29 06:46:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120294148686352384[0;39m <==    Updates: 0
2021-11-29 06:46:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120294148686352384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 06:46:04.784 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:46:04.892 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:46:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120294169704009728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:46:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120294169704009728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:46:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120294169704009728[0;39m ==> Parameters: 
2021-11-29 06:46:05.020 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120294169704009728[0;39m <==    Updates: 3
2021-11-29 06:46:05.020 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120294169704009728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 06:46:34.780 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:46:34.906 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:46:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120294295524741120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:46:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120294295524741120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:46:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120294295524741120[0;39m ==> Parameters: 
2021-11-29 06:46:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120294295524741120[0;39m <==    Updates: 3
2021-11-29 06:46:35.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120294295524741120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 06:47:00.000 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120294400327815168[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:47:00.001 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120294400327815168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:47:00.002 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120294400327815168[0;39m ==> Parameters: 
2021-11-29 06:47:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120294400327815168[0;39m <==    Updates: 0
2021-11-29 06:47:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120294400327815168[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 06:47:04.798 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:47:04.905 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:47:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120294421353861120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:47:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120294421353861120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:47:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120294421353861120[0;39m ==> Parameters: 
2021-11-29 06:47:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120294421353861120[0;39m <==    Updates: 3
2021-11-29 06:47:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120294421353861120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 06:47:34.791 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:47:34.868 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:47:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120294547157815296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:47:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120294547157815296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:47:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120294547157815296[0;39m ==> Parameters: 
2021-11-29 06:47:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120294547157815296[0;39m <==    Updates: 3
2021-11-29 06:47:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120294547157815296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 06:48:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120294652002832384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:48:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120294652002832384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:48:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120294652002832384[0;39m ==> Parameters: 
2021-11-29 06:48:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120294652002832384[0;39m <==    Updates: 0
2021-11-29 06:48:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120294652002832384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 06:48:04.790 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:48:04.913 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:48:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120294672978546688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:48:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120294672978546688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:48:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120294672978546688[0;39m ==> Parameters: 
2021-11-29 06:48:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120294672978546688[0;39m <==    Updates: 3
2021-11-29 06:48:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120294672978546688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 06:48:34.781 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:48:34.889 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:48:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120294798845415424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:48:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120294798845415424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:48:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120294798845415424[0;39m ==> Parameters: 
2021-11-29 06:48:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120294798845415424[0;39m <==    Updates: 3
2021-11-29 06:48:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120294798845415424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 06:49:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120294903661072384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:49:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120294903661072384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:49:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120294903661072384[0;39m ==> Parameters: 
2021-11-29 06:49:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120294903661072384[0;39m <==    Updates: 0
2021-11-29 06:49:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120294903661072384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 06:49:04.791 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:49:04.901 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:49:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120294924645175296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:49:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120294924645175296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:49:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120294924645175296[0;39m ==> Parameters: 
2021-11-29 06:49:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120294924645175296[0;39m <==    Updates: 3
2021-11-29 06:49:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120294924645175296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 06:49:34.789 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:49:34.882 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:49:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120295050470100992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:49:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120295050470100992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:49:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120295050470100992[0;39m ==> Parameters: 
2021-11-29 06:49:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120295050470100992[0;39m <==    Updates: 3
2021-11-29 06:49:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120295050470100992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 06:50:00.001 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120295155306729472[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:50:00.002 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120295155306729472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:50:00.002 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120295155306729472[0;39m ==> Parameters: 
2021-11-29 06:50:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120295155306729472[0;39m <==    Updates: 0
2021-11-29 06:50:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120295155306729472[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 06:50:04.759 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:50:04.883 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:50:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120295176299220992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:50:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120295176299220992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:50:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120295176299220992[0;39m ==> Parameters: 
2021-11-29 06:50:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120295176299220992[0;39m <==    Updates: 3
2021-11-29 06:50:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120295176299220992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 06:50:34.768 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:50:34.907 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:50:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120295302161895424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:50:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120295302161895424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:50:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120295302161895424[0;39m ==> Parameters: 
2021-11-29 06:50:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120295302161895424[0;39m <==    Updates: 3
2021-11-29 06:50:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120295302161895424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 06:51:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120295406998523904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:51:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120295406998523904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:51:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120295406998523904[0;39m ==> Parameters: 
2021-11-29 06:51:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120295406998523904[0;39m <==    Updates: 0
2021-11-29 06:51:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120295406998523904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 06:51:04.780 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:51:04.904 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:51:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120295427991015424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:51:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120295427991015424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:51:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120295427991015424[0;39m ==> Parameters: 
2021-11-29 06:51:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120295427991015424[0;39m <==    Updates: 3
2021-11-29 06:51:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120295427991015424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 06:51:34.778 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:51:34.902 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:51:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120295553807552512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:51:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120295553807552512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:51:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120295553807552512[0;39m ==> Parameters: 
2021-11-29 06:51:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120295553807552512[0;39m <==    Updates: 3
2021-11-29 06:51:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120295553807552512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 06:52:00.003 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120295658631598080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:52:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120295658631598080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:52:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120295658631598080[0;39m ==> Parameters: 
2021-11-29 06:52:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120295658631598080[0;39m <==    Updates: 0
2021-11-29 06:52:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120295658631598080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 06:52:04.798 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:52:04.906 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:52:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120295679645061120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:52:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120295679645061120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:52:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120295679645061120[0;39m ==> Parameters: 
2021-11-29 06:52:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120295679645061120[0;39m <==    Updates: 3
2021-11-29 06:52:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120295679645061120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 06:52:34.790 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:52:34.898 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:52:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120295805436432384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:52:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120295805436432384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:52:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120295805436432384[0;39m ==> Parameters: 
2021-11-29 06:52:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120295805436432384[0;39m <==    Updates: 3
2021-11-29 06:52:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120295805436432384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 06:53:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120295910335975424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:53:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120295910335975424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:53:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120295910335975424[0;39m ==> Parameters: 
2021-11-29 06:53:00.022 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120295910335975424[0;39m <==    Updates: 0
2021-11-29 06:53:00.023 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120295910335975424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2021-11-29 06:53:04.791 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:53:04.905 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:53:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120295931286523904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:53:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120295931286523904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:53:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120295931286523904[0;39m ==> Parameters: 
2021-11-29 06:53:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120295931286523904[0;39m <==    Updates: 3
2021-11-29 06:53:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120295931286523904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 06:53:34.787 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:53:34.911 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:53:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120296057094672384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:53:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120296057094672384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:53:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120296057094672384[0;39m ==> Parameters: 
2021-11-29 06:53:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120296057094672384[0;39m <==    Updates: 3
2021-11-29 06:53:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120296057094672384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 06:54:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120296161952272384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:54:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120296161952272384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:54:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120296161952272384[0;39m ==> Parameters: 
2021-11-29 06:54:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120296161952272384[0;39m <==    Updates: 0
2021-11-29 06:54:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120296161952272384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 06:54:04.795 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:54:04.903 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:54:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120296182957346816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:54:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120296182957346816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:54:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120296182957346816[0;39m ==> Parameters: 
2021-11-29 06:54:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120296182957346816[0;39m <==    Updates: 3
2021-11-29 06:54:05.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120296182957346816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 06:54:34.779 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:54:34.903 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:54:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120296308790661120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:54:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120296308790661120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:54:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120296308790661120[0;39m ==> Parameters: 
2021-11-29 06:54:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120296308790661120[0;39m <==    Updates: 3
2021-11-29 06:54:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120296308790661120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 06:55:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120296413631483904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:55:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120296413631483904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:55:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120296413631483904[0;39m ==> Parameters: 
2021-11-29 06:55:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120296413631483904[0;39m <==    Updates: 0
2021-11-29 06:55:00.018 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120296413631483904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2021-11-29 06:55:04.780 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:55:04.888 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:55:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120296434611392512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:55:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120296434611392512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:55:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120296434611392512[0;39m ==> Parameters: 
2021-11-29 06:55:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120296434611392512[0;39m <==    Updates: 3
2021-11-29 06:55:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120296434611392512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 06:55:34.784 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:55:34.892 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:55:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120296560457289728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:55:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120296560457289728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:55:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120296560457289728[0;39m ==> Parameters: 
2021-11-29 06:55:35.019 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120296560457289728[0;39m <==    Updates: 3
2021-11-29 06:55:35.020 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120296560457289728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 06:56:00.003 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120296665264558080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:56:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120296665264558080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:56:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120296665264558080[0;39m ==> Parameters: 
2021-11-29 06:56:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120296665264558080[0;39m <==    Updates: 0
2021-11-29 06:56:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120296665264558080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 06:56:04.799 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:56:04.907 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:56:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120296686290604032[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:56:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120296686290604032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:56:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120296686290604032[0;39m ==> Parameters: 
2021-11-29 06:56:05.019 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120296686290604032[0;39m <==    Updates: 3
2021-11-29 06:56:05.019 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120296686290604032[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 06:56:34.790 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:56:34.881 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:56:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120296812077780992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:56:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120296812077780992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:56:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120296812077780992[0;39m ==> Parameters: 
2021-11-29 06:56:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120296812077780992[0;39m <==    Updates: 3
2021-11-29 06:56:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120296812077780992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 06:57:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120296916952158208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:57:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120296916952158208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:57:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120296916952158208[0;39m ==> Parameters: 
2021-11-29 06:57:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120296916952158208[0;39m <==    Updates: 0
2021-11-29 06:57:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120296916952158208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 06:57:04.791 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:57:04.899 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:57:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120296937915289600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:57:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120296937915289600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:57:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120296937915289600[0;39m ==> Parameters: 
2021-11-29 06:57:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120296937915289600[0;39m <==    Updates: 3
2021-11-29 06:57:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120296937915289600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 06:57:34.795 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:57:34.891 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:57:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120297063773769728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:57:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120297063773769728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:57:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120297063773769728[0;39m ==> Parameters: 
2021-11-29 06:57:35.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120297063773769728[0;39m <==    Updates: 3
2021-11-29 06:57:35.019 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120297063773769728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 06:58:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120297168618786816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:58:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120297168618786816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:58:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120297168618786816[0;39m ==> Parameters: 
2021-11-29 06:58:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120297168618786816[0;39m <==    Updates: 0
2021-11-29 06:58:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120297168618786816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 06:58:04.766 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:58:04.906 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:58:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120297189598695424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:58:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120297189598695424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:58:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120297189598695424[0;39m ==> Parameters: 
2021-11-29 06:58:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120297189598695424[0;39m <==    Updates: 3
2021-11-29 06:58:05.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120297189598695424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 06:58:34.796 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:58:34.919 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:58:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120297315423621120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:58:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120297315423621120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:58:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120297315423621120[0;39m ==> Parameters: 
2021-11-29 06:58:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120297315423621120[0;39m <==    Updates: 3
2021-11-29 06:58:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120297315423621120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 06:59:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120297420289609728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 06:59:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120297420289609728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 06:59:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120297420289609728[0;39m ==> Parameters: 
2021-11-29 06:59:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120297420289609728[0;39m <==    Updates: 0
2021-11-29 06:59:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120297420289609728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 06:59:04.789 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:59:04.897 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:59:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120297441219186688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:59:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120297441219186688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:59:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120297441219186688[0;39m ==> Parameters: 
2021-11-29 06:59:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120297441219186688[0;39m <==    Updates: 3
2021-11-29 06:59:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120297441219186688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 06:59:34.795 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:59:34.921 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 06:59:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120297567086055424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 06:59:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120297567086055424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 06:59:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120297567086055424[0;39m ==> Parameters: 
2021-11-29 06:59:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120297567086055424[0;39m <==    Updates: 3
2021-11-29 06:59:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120297567086055424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:00:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120297671922683904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:00:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120297671922683904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:00:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120297671922683904[0;39m ==> Parameters: 
2021-11-29 07:00:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120297671922683904[0;39m <==    Updates: 0
2021-11-29 07:00:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120297671922683904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 07:00:04.799 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:00:04.907 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:00:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120297692919369728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:00:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120297692919369728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:00:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120297692919369728[0;39m ==> Parameters: 
2021-11-29 07:00:05.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120297692919369728[0;39m <==    Updates: 3
2021-11-29 07:00:05.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120297692919369728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 07:00:34.784 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:00:34.911 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:00:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120297818698158080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:00:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120297818698158080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:00:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120297818698158080[0;39m ==> Parameters: 
2021-11-29 07:00:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120297818698158080[0;39m <==    Updates: 3
2021-11-29 07:00:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120297818698158080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:01:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120297923580923904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:01:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120297923580923904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:01:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120297923580923904[0;39m ==> Parameters: 
2021-11-29 07:01:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120297923580923904[0;39m <==    Updates: 0
2021-11-29 07:01:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120297923580923904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 07:01:04.777 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:01:04.901 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:01:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120297944548249600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:01:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120297944548249600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:01:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120297944548249600[0;39m ==> Parameters: 
2021-11-29 07:01:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120297944548249600[0;39m <==    Updates: 3
2021-11-29 07:01:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120297944548249600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 07:01:34.796 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:01:34.888 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:01:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120298070398341120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:01:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120298070398341120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:01:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120298070398341120[0;39m ==> Parameters: 
2021-11-29 07:01:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120298070398341120[0;39m <==    Updates: 3
2021-11-29 07:01:35.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120298070398341120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 07:02:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120298175247552512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:02:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120298175247552512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:02:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120298175247552512[0;39m ==> Parameters: 
2021-11-29 07:02:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120298175247552512[0;39m <==    Updates: 0
2021-11-29 07:02:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120298175247552512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 07:02:04.796 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:02:04.906 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:02:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120298196235849728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:02:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120298196235849728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:02:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120298196235849728[0;39m ==> Parameters: 
2021-11-29 07:02:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120298196235849728[0;39m <==    Updates: 3
2021-11-29 07:02:05.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120298196235849728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:02:34.792 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:02:34.919 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:02:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120298322052386816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:02:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120298322052386816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:02:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120298322052386816[0;39m ==> Parameters: 
2021-11-29 07:02:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120298322052386816[0;39m <==    Updates: 3
2021-11-29 07:02:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120298322052386816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 07:03:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120298426897403904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:03:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120298426897403904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:03:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120298426897403904[0;39m ==> Parameters: 
2021-11-29 07:03:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120298426897403904[0;39m <==    Updates: 0
2021-11-29 07:03:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120298426897403904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 07:03:04.796 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:03:04.906 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:03:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120298447881506816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:03:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120298447881506816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:03:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120298447881506816[0;39m ==> Parameters: 
2021-11-29 07:03:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120298447881506816[0;39m <==    Updates: 3
2021-11-29 07:03:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120298447881506816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 07:03:34.781 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:03:34.890 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:03:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120298573710626816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:03:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120298573710626816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:03:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120298573710626816[0;39m ==> Parameters: 
2021-11-29 07:03:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120298573710626816[0;39m <==    Updates: 3
2021-11-29 07:03:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120298573710626816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 07:04:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120298678572421120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:04:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120298678572421120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:04:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120298678572421120[0;39m ==> Parameters: 
2021-11-29 07:04:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120298678572421120[0;39m <==    Updates: 0
2021-11-29 07:04:00.018 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120298678572421120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 07:04:04.796 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:04:04.905 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:04:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120298699539746816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:04:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120298699539746816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:04:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120298699539746816[0;39m ==> Parameters: 
2021-11-29 07:04:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120298699539746816[0;39m <==    Updates: 3
2021-11-29 07:04:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120298699539746816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 07:04:34.786 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:04:34.894 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:04:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120298825339506688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:04:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120298825339506688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:04:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120298825339506688[0;39m ==> Parameters: 
2021-11-29 07:04:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120298825339506688[0;39m <==    Updates: 3
2021-11-29 07:04:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120298825339506688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 07:05:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120298930192912384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:05:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120298930192912384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:05:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120298930192912384[0;39m ==> Parameters: 
2021-11-29 07:05:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120298930192912384[0;39m <==    Updates: 0
2021-11-29 07:05:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120298930192912384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 07:05:04.764 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:05:04.888 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:05:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120298951202181120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:05:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120298951202181120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:05:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120298951202181120[0;39m ==> Parameters: 
2021-11-29 07:05:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120298951202181120[0;39m <==    Updates: 3
2021-11-29 07:05:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120298951202181120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:05:34.786 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:05:34.894 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:05:35.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120299076980969472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:05:35.001 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120299076980969472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:05:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120299076980969472[0;39m ==> Parameters: 
2021-11-29 07:05:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120299076980969472[0;39m <==    Updates: 3
2021-11-29 07:05:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120299076980969472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:06:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120299181872123904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:06:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120299181872123904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:06:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120299181872123904[0;39m ==> Parameters: 
2021-11-29 07:06:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120299181872123904[0;39m <==    Updates: 0
2021-11-29 07:06:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120299181872123904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 07:06:04.799 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:06:04.891 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:06:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120299202868809728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:06:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120299202868809728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:06:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120299202868809728[0;39m ==> Parameters: 
2021-11-29 07:06:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120299202868809728[0;39m <==    Updates: 3
2021-11-29 07:06:05.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120299202868809728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:06:34.781 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:06:34.890 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:06:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120299328697929728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:06:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120299328697929728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:06:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120299328697929728[0;39m ==> Parameters: 
2021-11-29 07:06:35.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120299328697929728[0;39m <==    Updates: 3
2021-11-29 07:06:35.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120299328697929728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 07:07:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120299433534558208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:07:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120299433534558208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:07:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120299433534558208[0;39m ==> Parameters: 
2021-11-29 07:07:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120299433534558208[0;39m <==    Updates: 0
2021-11-29 07:07:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120299433534558208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 07:07:04.798 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:07:04.906 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:07:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120299454522855424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:07:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120299454522855424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:07:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120299454522855424[0;39m ==> Parameters: 
2021-11-29 07:07:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120299454522855424[0;39m <==    Updates: 3
2021-11-29 07:07:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120299454522855424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:07:34.800 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:07:34.895 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:07:35.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120299580301643776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:07:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120299580301643776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:07:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120299580301643776[0;39m ==> Parameters: 
2021-11-29 07:07:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120299580301643776[0;39m <==    Updates: 3
2021-11-29 07:07:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120299580301643776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:08:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120299685209575424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:08:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120299685209575424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:08:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120299685209575424[0;39m ==> Parameters: 
2021-11-29 07:08:00.019 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120299685209575424[0;39m <==    Updates: 0
2021-11-29 07:08:00.020 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120299685209575424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 07:08:04.797 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:08:04.923 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:08:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120299706176901120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:08:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120299706176901120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:08:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120299706176901120[0;39m ==> Parameters: 
2021-11-29 07:08:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120299706176901120[0;39m <==    Updates: 3
2021-11-29 07:08:05.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120299706176901120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 07:08:34.762 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:08:34.886 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:08:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120299831997632512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:08:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120299831997632512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:08:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120299831997632512[0;39m ==> Parameters: 
2021-11-29 07:08:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120299831997632512[0;39m <==    Updates: 3
2021-11-29 07:08:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120299831997632512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:09:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120299936872009728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:09:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120299936872009728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:09:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120299936872009728[0;39m ==> Parameters: 
2021-11-29 07:09:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120299936872009728[0;39m <==    Updates: 0
2021-11-29 07:09:00.018 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120299936872009728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 07:09:04.801 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:09:04.910 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:09:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120299957793198080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:09:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120299957793198080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:09:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120299957793198080[0;39m ==> Parameters: 
2021-11-29 07:09:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120299957793198080[0;39m <==    Updates: 3
2021-11-29 07:09:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120299957793198080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:09:34.796 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:09:34.904 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:09:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120300083664261120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:09:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120300083664261120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:09:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120300083664261120[0;39m ==> Parameters: 
2021-11-29 07:09:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120300083664261120[0;39m <==    Updates: 3
2021-11-29 07:09:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120300083664261120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:10:00.003 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120300188479918080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:10:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120300188479918080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:10:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120300188479918080[0;39m ==> Parameters: 
2021-11-29 07:10:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120300188479918080[0;39m <==    Updates: 0
2021-11-29 07:10:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120300188479918080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 07:10:04.791 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:10:04.914 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:10:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120300209464020992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:10:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120300209464020992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:10:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120300209464020992[0;39m ==> Parameters: 
2021-11-29 07:10:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120300209464020992[0;39m <==    Updates: 3
2021-11-29 07:10:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120300209464020992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 07:10:34.797 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:10:34.903 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:10:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120300335314112512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:10:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120300335314112512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:10:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120300335314112512[0;39m ==> Parameters: 
2021-11-29 07:10:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120300335314112512[0;39m <==    Updates: 3
2021-11-29 07:10:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120300335314112512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 07:11:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120300440167518208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:11:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120300440167518208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:11:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120300440167518208[0;39m ==> Parameters: 
2021-11-29 07:11:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120300440167518208[0;39m <==    Updates: 0
2021-11-29 07:11:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120300440167518208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 07:11:04.791 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:11:04.896 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:11:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120300461118066688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:11:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120300461118066688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:11:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120300461118066688[0;39m ==> Parameters: 
2021-11-29 07:11:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120300461118066688[0;39m <==    Updates: 3
2021-11-29 07:11:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120300461118066688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 07:11:34.788 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:11:34.912 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:11:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120300586955575296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:11:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120300586955575296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:11:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120300586955575296[0;39m ==> Parameters: 
2021-11-29 07:11:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120300586955575296[0;39m <==    Updates: 3
2021-11-29 07:11:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120300586955575296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:12:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120300691842535424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:12:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120300691842535424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:12:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120300691842535424[0;39m ==> Parameters: 
2021-11-29 07:12:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120300691842535424[0;39m <==    Updates: 0
2021-11-29 07:12:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120300691842535424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 07:12:04.805 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:12:04.915 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:12:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120300712784695296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:12:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120300712784695296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:12:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120300712784695296[0;39m ==> Parameters: 
2021-11-29 07:12:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120300712784695296[0;39m <==    Updates: 3
2021-11-29 07:12:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120300712784695296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:12:34.811 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:12:34.920 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:12:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120300838638981120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:12:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120300838638981120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:12:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120300838638981120[0;39m ==> Parameters: 
2021-11-29 07:12:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120300838638981120[0;39m <==    Updates: 3
2021-11-29 07:12:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120300838638981120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 07:13:00.002 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120300943450443776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:13:00.002 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120300943450443776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:13:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120300943450443776[0;39m ==> Parameters: 
2021-11-29 07:13:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120300943450443776[0;39m <==    Updates: 0
2021-11-29 07:13:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120300943450443776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 07:13:04.795 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:13:04.920 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:13:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120300964463906816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:13:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120300964463906816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:13:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120300964463906816[0;39m ==> Parameters: 
2021-11-29 07:13:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120300964463906816[0;39m <==    Updates: 3
2021-11-29 07:13:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120300964463906816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 07:13:34.796 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:13:34.906 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:13:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120301090305609728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:13:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120301090305609728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:13:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120301090305609728[0;39m ==> Parameters: 
2021-11-29 07:13:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120301090305609728[0;39m <==    Updates: 3
2021-11-29 07:13:35.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120301090305609728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:14:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120301195125460992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:14:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120301195125460992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:14:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120301195125460992[0;39m ==> Parameters: 
2021-11-29 07:14:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120301195125460992[0;39m <==    Updates: 0
2021-11-29 07:14:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120301195125460992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 07:14:04.777 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:14:04.887 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:14:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120301216113758208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:14:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120301216113758208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:14:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120301216113758208[0;39m ==> Parameters: 
2021-11-29 07:14:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120301216113758208[0;39m <==    Updates: 3
2021-11-29 07:14:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120301216113758208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 07:14:34.800 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:14:34.910 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:14:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120301341913518080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:14:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120301341913518080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:14:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120301341913518080[0;39m ==> Parameters: 
2021-11-29 07:14:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120301341913518080[0;39m <==    Updates: 3
2021-11-29 07:14:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120301341913518080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:15:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120301446796283904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:15:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120301446796283904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:15:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120301446796283904[0;39m ==> Parameters: 
2021-11-29 07:15:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120301446796283904[0;39m <==    Updates: 0
2021-11-29 07:15:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120301446796283904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 07:15:04.801 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:15:04.901 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:15:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120301467767803904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:15:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120301467767803904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:15:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120301467767803904[0;39m ==> Parameters: 
2021-11-29 07:15:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120301467767803904[0;39m <==    Updates: 3
2021-11-29 07:15:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120301467767803904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 07:15:34.800 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:15:34.908 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:15:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120301593622089728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:15:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120301593622089728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:15:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120301593622089728[0;39m ==> Parameters: 
2021-11-29 07:15:35.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120301593622089728[0;39m <==    Updates: 3
2021-11-29 07:15:35.019 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120301593622089728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 07:16:00.002 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120301698425163776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:16:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120301698425163776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:16:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120301698425163776[0;39m ==> Parameters: 
2021-11-29 07:16:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120301698425163776[0;39m <==    Updates: 0
2021-11-29 07:16:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120301698425163776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 07:16:04.780 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:16:04.904 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:16:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120301719434432512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:16:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120301719434432512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:16:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120301719434432512[0;39m ==> Parameters: 
2021-11-29 07:16:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120301719434432512[0;39m <==    Updates: 3
2021-11-29 07:16:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120301719434432512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:16:34.783 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:16:34.923 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:16:35.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120301845225803776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:16:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120301845225803776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:16:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120301845225803776[0;39m ==> Parameters: 
2021-11-29 07:16:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120301845225803776[0;39m <==    Updates: 3
2021-11-29 07:16:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120301845225803776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:17:00.001 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120301950079209472[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:17:00.001 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120301950079209472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:17:00.002 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120301950079209472[0;39m ==> Parameters: 
2021-11-29 07:17:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120301950079209472[0;39m <==    Updates: 0
2021-11-29 07:17:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120301950079209472[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 07:17:04.774 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:17:04.911 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:17:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120301971063312384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:17:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120301971063312384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:17:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120301971063312384[0;39m ==> Parameters: 
2021-11-29 07:17:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120301971063312384[0;39m <==    Updates: 3
2021-11-29 07:17:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120301971063312384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 07:17:34.806 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:17:34.916 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:17:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120302096913403904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:17:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120302096913403904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:17:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120302096913403904[0;39m ==> Parameters: 
2021-11-29 07:17:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120302096913403904[0;39m <==    Updates: 3
2021-11-29 07:17:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120302096913403904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 07:18:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120302201787781120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:18:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120302201787781120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:18:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120302201787781120[0;39m ==> Parameters: 
2021-11-29 07:18:00.020 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120302201787781120[0;39m <==    Updates: 0
2021-11-29 07:18:00.020 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120302201787781120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 07:18:04.797 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:18:04.920 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:18:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120302222755106816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:18:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120302222755106816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:18:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120302222755106816[0;39m ==> Parameters: 
2021-11-29 07:18:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120302222755106816[0;39m <==    Updates: 3
2021-11-29 07:18:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120302222755106816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 07:18:34.810 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:18:34.890 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:18:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120302348588421120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:18:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120302348588421120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:18:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120302348588421120[0;39m ==> Parameters: 
2021-11-29 07:18:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120302348588421120[0;39m <==    Updates: 3
2021-11-29 07:18:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120302348588421120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 07:19:00.002 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120302453399883776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:19:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120302453399883776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:19:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120302453399883776[0;39m ==> Parameters: 
2021-11-29 07:19:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120302453399883776[0;39m <==    Updates: 0
2021-11-29 07:19:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120302453399883776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 07:19:04.789 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:19:04.913 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:19:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120302474383986688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:19:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120302474383986688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:19:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120302474383986688[0;39m ==> Parameters: 
2021-11-29 07:19:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120302474383986688[0;39m <==    Updates: 3
2021-11-29 07:19:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120302474383986688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 07:19:34.761 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:19:34.870 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:19:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120302600234078208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:19:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120302600234078208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:19:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120302600234078208[0;39m ==> Parameters: 
2021-11-29 07:19:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120302600234078208[0;39m <==    Updates: 3
2021-11-29 07:19:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120302600234078208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 07:20:00.001 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120302705053929472[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:20:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120302705053929472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:20:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120302705053929472[0;39m ==> Parameters: 
2021-11-29 07:20:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120302705053929472[0;39m <==    Updates: 0
2021-11-29 07:20:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120302705053929472[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 07:20:04.800 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:20:04.909 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:20:05.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120302726025449472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:20:05.001 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120302726025449472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:20:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120302726025449472[0;39m ==> Parameters: 
2021-11-29 07:20:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120302726025449472[0;39m <==    Updates: 3
2021-11-29 07:20:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120302726025449472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:20:34.771 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:20:34.882 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:20:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120302851862958080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:20:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120302851862958080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:20:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120302851862958080[0;39m ==> Parameters: 
2021-11-29 07:20:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120302851862958080[0;39m <==    Updates: 3
2021-11-29 07:20:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120302851862958080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:21:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120302956766695424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:21:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120302956766695424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:21:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120302956766695424[0;39m ==> Parameters: 
2021-11-29 07:21:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120302956766695424[0;39m <==    Updates: 0
2021-11-29 07:21:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120302956766695424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 07:21:04.792 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:21:04.900 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:21:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120302977708855296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:21:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120302977708855296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:21:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120302977708855296[0;39m ==> Parameters: 
2021-11-29 07:21:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120302977708855296[0;39m <==    Updates: 3
2021-11-29 07:21:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120302977708855296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 07:21:34.788 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:21:34.910 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:21:35.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120303103517003776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:21:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120303103517003776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:21:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120303103517003776[0;39m ==> Parameters: 
2021-11-29 07:21:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120303103517003776[0;39m <==    Updates: 3
2021-11-29 07:21:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120303103517003776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:22:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120303208408158208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:22:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120303208408158208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:22:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120303208408158208[0;39m ==> Parameters: 
2021-11-29 07:22:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120303208408158208[0;39m <==    Updates: 0
2021-11-29 07:22:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120303208408158208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 07:22:04.786 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:22:04.909 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:22:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120303229350318080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:22:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120303229350318080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:22:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120303229350318080[0;39m ==> Parameters: 
2021-11-29 07:22:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120303229350318080[0;39m <==    Updates: 3
2021-11-29 07:22:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120303229350318080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 07:22:34.797 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:22:34.904 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:22:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120303355217186816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:22:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120303355217186816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:22:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120303355217186816[0;39m ==> Parameters: 
2021-11-29 07:22:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120303355217186816[0;39m <==    Updates: 3
2021-11-29 07:22:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120303355217186816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 07:23:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120303460058009600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:23:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120303460058009600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:23:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120303460058009600[0;39m ==> Parameters: 
2021-11-29 07:23:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120303460058009600[0;39m <==    Updates: 0
2021-11-29 07:23:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120303460058009600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 07:23:04.801 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:23:04.911 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:23:05.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120303481004363776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:23:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120303481004363776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:23:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120303481004363776[0;39m ==> Parameters: 
2021-11-29 07:23:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120303481004363776[0;39m <==    Updates: 3
2021-11-29 07:23:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120303481004363776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:23:34.807 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:23:34.916 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:23:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120303606862843904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:23:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120303606862843904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:23:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120303606862843904[0;39m ==> Parameters: 
2021-11-29 07:23:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120303606862843904[0;39m <==    Updates: 3
2021-11-29 07:23:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120303606862843904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:24:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120303711753998336[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:24:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120303711753998336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:24:00.019 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120303711753998336[0;39m ==> Parameters: 
2021-11-29 07:24:00.021 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120303711753998336[0;39m <==    Updates: 0
2021-11-29 07:24:00.021 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120303711753998336[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 07:24:04.791 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:24:04.898 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:24:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120303732679380992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:24:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120303732679380992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:24:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120303732679380992[0;39m ==> Parameters: 
2021-11-29 07:24:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120303732679380992[0;39m <==    Updates: 3
2021-11-29 07:24:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120303732679380992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:24:34.802 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:24:34.909 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:24:35.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120303858491723776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:24:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120303858491723776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:24:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120303858491723776[0;39m ==> Parameters: 
2021-11-29 07:24:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120303858491723776[0;39m <==    Updates: 3
2021-11-29 07:24:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120303858491723776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 07:25:00.003 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120303963353518080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:25:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120303963353518080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:25:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120303963353518080[0;39m ==> Parameters: 
2021-11-29 07:25:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120303963353518080[0;39m <==    Updates: 0
2021-11-29 07:25:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120303963353518080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 07:25:04.775 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:25:04.897 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:25:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120303984329232384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:25:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120303984329232384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:25:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120303984329232384[0;39m ==> Parameters: 
2021-11-29 07:25:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120303984329232384[0;39m <==    Updates: 3
2021-11-29 07:25:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120303984329232384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:25:34.790 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:25:34.900 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:25:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120304110170935296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:25:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120304110170935296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:25:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120304110170935296[0;39m ==> Parameters: 
2021-11-29 07:25:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120304110170935296[0;39m <==    Updates: 3
2021-11-29 07:25:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120304110170935296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:26:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120304215062089728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:26:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120304215062089728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:26:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120304215062089728[0;39m ==> Parameters: 
2021-11-29 07:26:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120304215062089728[0;39m <==    Updates: 0
2021-11-29 07:26:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120304215062089728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 07:26:04.793 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:26:04.917 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:26:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120304236016832512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:26:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120304236016832512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:26:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120304236016832512[0;39m ==> Parameters: 
2021-11-29 07:26:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120304236016832512[0;39m <==    Updates: 3
2021-11-29 07:26:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120304236016832512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 07:26:34.797 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:26:34.922 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:26:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120304361866924032[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:26:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120304361866924032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:26:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120304361866924032[0;39m ==> Parameters: 
2021-11-29 07:26:35.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120304361866924032[0;39m <==    Updates: 3
2021-11-29 07:26:35.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120304361866924032[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:27:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120304466711941120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:27:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120304466711941120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:27:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120304466711941120[0;39m ==> Parameters: 
2021-11-29 07:27:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120304466711941120[0;39m <==    Updates: 0
2021-11-29 07:27:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120304466711941120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 07:27:04.801 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:27:04.906 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:27:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120304487691849728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:27:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120304487691849728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:27:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120304487691849728[0;39m ==> Parameters: 
2021-11-29 07:27:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120304487691849728[0;39m <==    Updates: 3
2021-11-29 07:27:05.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120304487691849728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:27:34.809 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:27:34.904 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:27:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120304613499998208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:27:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120304613499998208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:27:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120304613499998208[0;39m ==> Parameters: 
2021-11-29 07:27:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120304613499998208[0;39m <==    Updates: 3
2021-11-29 07:27:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120304613499998208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 07:28:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120304718370181120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:28:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120304718370181120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:28:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120304718370181120[0;39m ==> Parameters: 
2021-11-29 07:28:00.020 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120304718370181120[0;39m <==    Updates: 0
2021-11-29 07:28:00.020 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120304718370181120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 07:28:04.812 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:28:04.917 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:28:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120304739324923904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:28:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120304739324923904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:28:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120304739324923904[0;39m ==> Parameters: 
2021-11-29 07:28:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120304739324923904[0;39m <==    Updates: 3
2021-11-29 07:28:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120304739324923904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 07:28:34.802 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:28:34.909 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:28:35.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120304865124683776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:28:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120304865124683776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:28:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120304865124683776[0;39m ==> Parameters: 
2021-11-29 07:28:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120304865124683776[0;39m <==    Updates: 3
2021-11-29 07:28:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120304865124683776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:29:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120304969999060992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:29:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120304969999060992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:29:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120304969999060992[0;39m ==> Parameters: 
2021-11-29 07:29:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120304969999060992[0;39m <==    Updates: 0
2021-11-29 07:29:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120304969999060992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 07:29:04.801 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:29:04.925 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:29:05.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120304990953803776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:29:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120304990953803776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:29:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120304990953803776[0;39m ==> Parameters: 
2021-11-29 07:29:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120304990953803776[0;39m <==    Updates: 3
2021-11-29 07:29:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120304990953803776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶6æ¯«ç§’
2021-11-29 07:29:34.770 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:29:34.909 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:29:35.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120305116782923776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:29:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120305116782923776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:29:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120305116782923776[0;39m ==> Parameters: 
2021-11-29 07:29:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120305116782923776[0;39m <==    Updates: 3
2021-11-29 07:29:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120305116782923776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 07:30:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120305221690855424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:30:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120305221690855424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:30:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120305221690855424[0;39m ==> Parameters: 
2021-11-29 07:30:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120305221690855424[0;39m <==    Updates: 0
2021-11-29 07:30:00.019 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120305221690855424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 07:30:04.801 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:30:04.908 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:30:05.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120305242612043776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:30:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120305242612043776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:30:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120305242612043776[0;39m ==> Parameters: 
2021-11-29 07:30:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120305242612043776[0;39m <==    Updates: 3
2021-11-29 07:30:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120305242612043776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 07:30:34.783 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:30:34.890 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:30:35.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120305368441163776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:30:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120305368441163776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:30:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120305368441163776[0;39m ==> Parameters: 
2021-11-29 07:30:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120305368441163776[0;39m <==    Updates: 3
2021-11-29 07:30:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120305368441163776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 07:31:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120305473311346688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:31:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120305473311346688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:31:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120305473311346688[0;39m ==> Parameters: 
2021-11-29 07:31:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120305473311346688[0;39m <==    Updates: 0
2021-11-29 07:31:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120305473311346688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 07:31:04.793 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:31:04.917 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:31:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120305494308032512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:31:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120305494308032512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:31:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120305494308032512[0;39m ==> Parameters: 
2021-11-29 07:31:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120305494308032512[0;39m <==    Updates: 3
2021-11-29 07:31:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120305494308032512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:31:34.795 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:31:34.904 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:31:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120305620141346816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:31:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120305620141346816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:31:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120305620141346816[0;39m ==> Parameters: 
2021-11-29 07:31:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120305620141346816[0;39m <==    Updates: 3
2021-11-29 07:31:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120305620141346816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:32:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120305725007335424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:32:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120305725007335424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:32:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120305725007335424[0;39m ==> Parameters: 
2021-11-29 07:32:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120305725007335424[0;39m <==    Updates: 0
2021-11-29 07:32:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120305725007335424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 07:32:04.806 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:32:04.916 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:32:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120305745957883904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:32:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120305745957883904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:32:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120305745957883904[0;39m ==> Parameters: 
2021-11-29 07:32:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120305745957883904[0;39m <==    Updates: 3
2021-11-29 07:32:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120305745957883904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:32:34.781 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:32:34.920 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:32:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120305871795392512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:32:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120305871795392512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:32:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120305871795392512[0;39m ==> Parameters: 
2021-11-29 07:32:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120305871795392512[0;39m <==    Updates: 3
2021-11-29 07:32:35.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120305871795392512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶6æ¯«ç§’
2021-11-29 07:33:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120305976661381120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:33:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120305976661381120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:33:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120305976661381120[0;39m ==> Parameters: 
2021-11-29 07:33:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120305976661381120[0;39m <==    Updates: 0
2021-11-29 07:33:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120305976661381120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 07:33:04.797 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:33:04.906 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:33:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120305997637095424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:33:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120305997637095424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:33:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120305997637095424[0;39m ==> Parameters: 
2021-11-29 07:33:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120305997637095424[0;39m <==    Updates: 3
2021-11-29 07:33:05.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120305997637095424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 07:33:34.794 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:33:34.919 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:33:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120306123453632512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:33:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120306123453632512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:33:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120306123453632512[0;39m ==> Parameters: 
2021-11-29 07:33:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120306123453632512[0;39m <==    Updates: 3
2021-11-29 07:33:35.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120306123453632512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶7æ¯«ç§’
2021-11-29 07:34:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120306228294455296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:34:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120306228294455296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:34:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120306228294455296[0;39m ==> Parameters: 
2021-11-29 07:34:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120306228294455296[0;39m <==    Updates: 0
2021-11-29 07:34:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120306228294455296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 07:34:04.810 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:34:04.903 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:34:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120306249286946816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:34:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120306249286946816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:34:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120306249286946816[0;39m ==> Parameters: 
2021-11-29 07:34:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120306249286946816[0;39m <==    Updates: 3
2021-11-29 07:34:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120306249286946816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:34:34.808 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:34:34.916 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:34:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120306375099289600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:34:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120306375099289600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:34:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120306375099289600[0;39m ==> Parameters: 
2021-11-29 07:34:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120306375099289600[0;39m <==    Updates: 3
2021-11-29 07:34:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120306375099289600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:35:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120306479961083904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:35:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120306479961083904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:35:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120306479961083904[0;39m ==> Parameters: 
2021-11-29 07:35:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120306479961083904[0;39m <==    Updates: 0
2021-11-29 07:35:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120306479961083904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 07:35:04.772 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:35:04.896 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:35:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120306500907438080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:35:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120306500907438080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:35:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120306500907438080[0;39m ==> Parameters: 
2021-11-29 07:35:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120306500907438080[0;39m <==    Updates: 3
2021-11-29 07:35:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120306500907438080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 07:35:34.809 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:35:34.891 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:35:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120306626786889728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:35:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120306626786889728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:35:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120306626786889728[0;39m ==> Parameters: 
2021-11-29 07:35:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120306626786889728[0;39m <==    Updates: 3
2021-11-29 07:35:35.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120306626786889728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:36:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120306731598352384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:36:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120306731598352384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:36:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120306731598352384[0;39m ==> Parameters: 
2021-11-29 07:36:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120306731598352384[0;39m <==    Updates: 0
2021-11-29 07:36:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120306731598352384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 07:36:04.797 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:36:04.919 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:36:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120306752599232512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:36:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120306752599232512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:36:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120306752599232512[0;39m ==> Parameters: 
2021-11-29 07:36:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120306752599232512[0;39m <==    Updates: 3
2021-11-29 07:36:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120306752599232512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 07:36:34.804 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:36:34.913 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:36:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120306878403186688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:36:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120306878403186688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:36:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120306878403186688[0;39m ==> Parameters: 
2021-11-29 07:36:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120306878403186688[0;39m <==    Updates: 3
2021-11-29 07:36:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120306878403186688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:37:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120306983306924032[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:37:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120306983306924032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:37:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120306983306924032[0;39m ==> Parameters: 
2021-11-29 07:37:00.020 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120306983306924032[0;39m <==    Updates: 0
2021-11-29 07:37:00.020 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120306983306924032[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 07:37:04.805 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:37:04.914 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:37:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120307004240695296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:37:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120307004240695296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:37:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120307004240695296[0;39m ==> Parameters: 
2021-11-29 07:37:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120307004240695296[0;39m <==    Updates: 3
2021-11-29 07:37:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120307004240695296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 07:37:34.795 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:37:34.917 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:37:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120307130086592512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:37:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120307130086592512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:37:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120307130086592512[0;39m ==> Parameters: 
2021-11-29 07:37:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120307130086592512[0;39m <==    Updates: 3
2021-11-29 07:37:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120307130086592512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:38:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120307234935803904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:38:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120307234935803904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:38:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120307234935803904[0;39m ==> Parameters: 
2021-11-29 07:38:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120307234935803904[0;39m <==    Updates: 0
2021-11-29 07:38:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120307234935803904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 07:38:04.788 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:38:04.910 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:38:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120307255886352384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:38:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120307255886352384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:38:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120307255886352384[0;39m ==> Parameters: 
2021-11-29 07:38:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120307255886352384[0;39m <==    Updates: 3
2021-11-29 07:38:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120307255886352384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:38:34.788 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:38:34.912 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:38:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120307381723860992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:38:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120307381723860992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:38:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120307381723860992[0;39m ==> Parameters: 
2021-11-29 07:38:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120307381723860992[0;39m <==    Updates: 3
2021-11-29 07:38:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120307381723860992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 07:39:00.002 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120307486564683776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:39:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120307486564683776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:39:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120307486564683776[0;39m ==> Parameters: 
2021-11-29 07:39:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120307486564683776[0;39m <==    Updates: 0
2021-11-29 07:39:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120307486564683776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 07:39:04.788 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:39:04.895 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:39:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120307507544592384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:39:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120307507544592384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:39:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120307507544592384[0;39m ==> Parameters: 
2021-11-29 07:39:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120307507544592384[0;39m <==    Updates: 3
2021-11-29 07:39:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120307507544592384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:39:34.780 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:39:34.907 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:39:35.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120307633361129472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:39:35.001 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120307633361129472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:39:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120307633361129472[0;39m ==> Parameters: 
2021-11-29 07:39:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120307633361129472[0;39m <==    Updates: 3
2021-11-29 07:39:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120307633361129472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:40:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120307738252283904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:40:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120307738252283904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:40:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120307738252283904[0;39m ==> Parameters: 
2021-11-29 07:40:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120307738252283904[0;39m <==    Updates: 0
2021-11-29 07:40:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120307738252283904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 07:40:04.806 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:40:04.898 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:40:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120307759211220992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:40:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120307759211220992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:40:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120307759211220992[0;39m ==> Parameters: 
2021-11-29 07:40:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120307759211220992[0;39m <==    Updates: 3
2021-11-29 07:40:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120307759211220992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 07:40:34.783 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:40:34.907 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:40:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120307885065506816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:40:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120307885065506816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:40:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120307885065506816[0;39m ==> Parameters: 
2021-11-29 07:40:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120307885065506816[0;39m <==    Updates: 3
2021-11-29 07:40:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120307885065506816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:41:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120307989935689728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:41:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120307989935689728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:41:00.019 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120307989935689728[0;39m ==> Parameters: 
2021-11-29 07:41:00.021 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120307989935689728[0;39m <==    Updates: 0
2021-11-29 07:41:00.022 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120307989935689728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 07:41:04.775 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:41:04.899 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:41:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120308010869460992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:41:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120308010869460992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:41:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120308010869460992[0;39m ==> Parameters: 
2021-11-29 07:41:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120308010869460992[0;39m <==    Updates: 3
2021-11-29 07:41:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120308010869460992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:41:34.811 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:41:34.921 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:41:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120308136736329728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:41:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120308136736329728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:41:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120308136736329728[0;39m ==> Parameters: 
2021-11-29 07:41:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120308136736329728[0;39m <==    Updates: 3
2021-11-29 07:41:35.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120308136736329728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:42:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120308241551986688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:42:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120308241551986688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:42:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120308241551986688[0;39m ==> Parameters: 
2021-11-29 07:42:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120308241551986688[0;39m <==    Updates: 0
2021-11-29 07:42:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120308241551986688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 07:42:04.797 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:42:04.921 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:42:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120308262561255424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:42:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120308262561255424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:42:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120308262561255424[0;39m ==> Parameters: 
2021-11-29 07:42:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120308262561255424[0;39m <==    Updates: 3
2021-11-29 07:42:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120308262561255424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 07:42:34.794 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:42:34.902 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:42:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120308388381986816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:42:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120308388381986816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:42:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120308388381986816[0;39m ==> Parameters: 
2021-11-29 07:42:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120308388381986816[0;39m <==    Updates: 3
2021-11-29 07:42:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120308388381986816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:43:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120308493218615296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:43:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120308493218615296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:43:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120308493218615296[0;39m ==> Parameters: 
2021-11-29 07:43:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120308493218615296[0;39m <==    Updates: 0
2021-11-29 07:43:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120308493218615296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 07:43:04.787 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:43:04.913 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:43:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120308514181746688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:43:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120308514181746688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:43:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120308514181746688[0;39m ==> Parameters: 
2021-11-29 07:43:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120308514181746688[0;39m <==    Updates: 3
2021-11-29 07:43:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120308514181746688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:43:34.797 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:43:34.922 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:43:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120308640052809728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:43:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120308640052809728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:43:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120308640052809728[0;39m ==> Parameters: 
2021-11-29 07:43:35.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120308640052809728[0;39m <==    Updates: 3
2021-11-29 07:43:35.019 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120308640052809728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 07:44:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120308744881049600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:44:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120308744881049600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:44:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120308744881049600[0;39m ==> Parameters: 
2021-11-29 07:44:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120308744881049600[0;39m <==    Updates: 0
2021-11-29 07:44:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120308744881049600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 07:44:04.805 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:44:04.912 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:44:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120308765839986688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:44:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120308765839986688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:44:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120308765839986688[0;39m ==> Parameters: 
2021-11-29 07:44:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120308765839986688[0;39m <==    Updates: 3
2021-11-29 07:44:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120308765839986688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 07:44:34.801 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:44:34.927 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:44:35.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120308891656523776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:44:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120308891656523776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:44:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120308891656523776[0;39m ==> Parameters: 
2021-11-29 07:44:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120308891656523776[0;39m <==    Updates: 3
2021-11-29 07:44:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120308891656523776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:45:00.003 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120308996518318080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:45:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120308996518318080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:45:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120308996518318080[0;39m ==> Parameters: 
2021-11-29 07:45:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120308996518318080[0;39m <==    Updates: 0
2021-11-29 07:45:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120308996518318080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 07:45:04.795 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:45:04.917 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:45:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120309017527586816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:45:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120309017527586816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:45:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120309017527586816[0;39m ==> Parameters: 
2021-11-29 07:45:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120309017527586816[0;39m <==    Updates: 3
2021-11-29 07:45:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120309017527586816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 07:45:34.783 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:45:34.922 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:45:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120309143365095424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:45:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120309143365095424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:45:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120309143365095424[0;39m ==> Parameters: 
2021-11-29 07:45:35.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120309143365095424[0;39m <==    Updates: 3
2021-11-29 07:45:35.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120309143365095424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 07:46:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120309248210112512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:46:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120309248210112512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:46:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120309248210112512[0;39m ==> Parameters: 
2021-11-29 07:46:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120309248210112512[0;39m <==    Updates: 0
2021-11-29 07:46:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120309248210112512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 07:46:04.791 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:46:04.917 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:46:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120309269164855296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:46:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120309269164855296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:46:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120309269164855296[0;39m ==> Parameters: 
2021-11-29 07:46:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120309269164855296[0;39m <==    Updates: 3
2021-11-29 07:46:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120309269164855296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:46:34.812 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:46:34.921 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:46:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120309395027529728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:46:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120309395027529728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:46:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120309395027529728[0;39m ==> Parameters: 
2021-11-29 07:46:35.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120309395027529728[0;39m <==    Updates: 3
2021-11-29 07:46:35.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120309395027529728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 07:47:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120309499864158208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:47:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120309499864158208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:47:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120309499864158208[0;39m ==> Parameters: 
2021-11-29 07:47:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120309499864158208[0;39m <==    Updates: 0
2021-11-29 07:47:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120309499864158208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 07:47:04.794 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:47:04.903 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:47:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120309520839872512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:47:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120309520839872512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:47:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120309520839872512[0;39m ==> Parameters: 
2021-11-29 07:47:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120309520839872512[0;39m <==    Updates: 3
2021-11-29 07:47:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120309520839872512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 07:47:34.793 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:47:34.921 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:47:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120309646673186816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:47:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120309646673186816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:47:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120309646673186816[0;39m ==> Parameters: 
2021-11-29 07:47:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120309646673186816[0;39m <==    Updates: 3
2021-11-29 07:47:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120309646673186816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:48:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120309751534981120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:48:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120309751534981120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:48:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120309751534981120[0;39m ==> Parameters: 
2021-11-29 07:48:00.019 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120309751534981120[0;39m <==    Updates: 0
2021-11-29 07:48:00.019 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120309751534981120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 07:48:04.810 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:48:04.919 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:48:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120309772502306816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:48:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120309772502306816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:48:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120309772502306816[0;39m ==> Parameters: 
2021-11-29 07:48:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120309772502306816[0;39m <==    Updates: 3
2021-11-29 07:48:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120309772502306816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 07:48:34.812 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:48:34.904 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:48:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120309898335621120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:48:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120309898335621120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:48:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120309898335621120[0;39m ==> Parameters: 
2021-11-29 07:48:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120309898335621120[0;39m <==    Updates: 3
2021-11-29 07:48:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120309898335621120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 07:49:00.002 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120310003147083776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:49:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120310003147083776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:49:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120310003147083776[0;39m ==> Parameters: 
2021-11-29 07:49:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120310003147083776[0;39m <==    Updates: 0
2021-11-29 07:49:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120310003147083776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 07:49:04.788 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:49:04.913 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:49:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120310024135380992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:49:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120310024135380992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:49:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120310024135380992[0;39m ==> Parameters: 
2021-11-29 07:49:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120310024135380992[0;39m <==    Updates: 3
2021-11-29 07:49:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120310024135380992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 07:49:34.804 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:49:34.896 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:49:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120310149960306688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:49:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120310149960306688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:49:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120310149960306688[0;39m ==> Parameters: 
2021-11-29 07:49:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120310149960306688[0;39m <==    Updates: 3
2021-11-29 07:49:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120310149960306688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 07:50:00.003 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120310254809518080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:50:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120310254809518080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:50:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120310254809518080[0;39m ==> Parameters: 
2021-11-29 07:50:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120310254809518080[0;39m <==    Updates: 0
2021-11-29 07:50:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120310254809518080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 07:50:04.795 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:50:04.919 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:50:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120310275814592512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:50:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120310275814592512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:50:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120310275814592512[0;39m ==> Parameters: 
2021-11-29 07:50:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120310275814592512[0;39m <==    Updates: 3
2021-11-29 07:50:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120310275814592512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:50:34.792 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:50:34.917 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:50:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120310401639518208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:50:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120310401639518208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:50:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120310401639518208[0;39m ==> Parameters: 
2021-11-29 07:50:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120310401639518208[0;39m <==    Updates: 3
2021-11-29 07:50:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120310401639518208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:51:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120310506497118208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:51:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120310506497118208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:51:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120310506497118208[0;39m ==> Parameters: 
2021-11-29 07:51:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120310506497118208[0;39m <==    Updates: 0
2021-11-29 07:51:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120310506497118208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 07:51:04.803 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:51:04.926 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:51:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120310527439278080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:51:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120310527439278080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:51:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120310527439278080[0;39m ==> Parameters: 
2021-11-29 07:51:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120310527439278080[0;39m <==    Updates: 3
2021-11-29 07:51:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120310527439278080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:51:34.800 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:51:34.924 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:51:35.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120310653264203776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:51:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120310653264203776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:51:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120310653264203776[0;39m ==> Parameters: 
2021-11-29 07:51:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120310653264203776[0;39m <==    Updates: 3
2021-11-29 07:51:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120310653264203776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 07:52:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120310758130192384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:52:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120310758130192384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:52:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120310758130192384[0;39m ==> Parameters: 
2021-11-29 07:52:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120310758130192384[0;39m <==    Updates: 0
2021-11-29 07:52:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120310758130192384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 07:52:04.795 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:52:04.918 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:52:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120310779131072512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:52:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120310779131072512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:52:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120310779131072512[0;39m ==> Parameters: 
2021-11-29 07:52:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120310779131072512[0;39m <==    Updates: 3
2021-11-29 07:52:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120310779131072512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:52:34.801 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:52:34.895 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:52:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120310904935026688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:52:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120310904935026688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:52:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120310904935026688[0;39m ==> Parameters: 
2021-11-29 07:52:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120310904935026688[0;39m <==    Updates: 3
2021-11-29 07:52:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120310904935026688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:53:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120311009834569728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:53:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120311009834569728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:53:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120311009834569728[0;39m ==> Parameters: 
2021-11-29 07:53:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120311009834569728[0;39m <==    Updates: 0
2021-11-29 07:53:00.018 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120311009834569728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 07:53:04.798 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:53:04.920 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:53:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120311030780923904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:53:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120311030780923904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:53:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120311030780923904[0;39m ==> Parameters: 
2021-11-29 07:53:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120311030780923904[0;39m <==    Updates: 3
2021-11-29 07:53:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120311030780923904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:53:34.818 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:53:34.912 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:53:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120311156593266688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:53:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120311156593266688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:53:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120311156593266688[0;39m ==> Parameters: 
2021-11-29 07:53:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120311156593266688[0;39m <==    Updates: 3
2021-11-29 07:53:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120311156593266688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 07:54:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120311261471838208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:54:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120311261471838208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:54:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120311261471838208[0;39m ==> Parameters: 
2021-11-29 07:54:00.020 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120311261471838208[0;39m <==    Updates: 0
2021-11-29 07:54:00.020 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120311261471838208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2021-11-29 07:54:04.818 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:54:04.909 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:54:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120311282468524032[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:54:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120311282468524032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:54:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120311282468524032[0;39m ==> Parameters: 
2021-11-29 07:54:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120311282468524032[0;39m <==    Updates: 3
2021-11-29 07:54:05.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120311282468524032[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:54:34.804 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:54:34.899 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:54:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120311408255700992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:54:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120311408255700992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:54:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120311408255700992[0;39m ==> Parameters: 
2021-11-29 07:54:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120311408255700992[0;39m <==    Updates: 3
2021-11-29 07:54:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120311408255700992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 07:55:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120311513121689600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:55:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120311513121689600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:55:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120311513121689600[0;39m ==> Parameters: 
2021-11-29 07:55:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120311513121689600[0;39m <==    Updates: 0
2021-11-29 07:55:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120311513121689600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 07:55:04.800 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:55:04.908 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:55:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120311534126764032[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:55:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120311534126764032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:55:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120311534126764032[0;39m ==> Parameters: 
2021-11-29 07:55:05.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120311534126764032[0;39m <==    Updates: 3
2021-11-29 07:55:05.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120311534126764032[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:55:34.813 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:55:34.921 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:55:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120311659955884032[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:55:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120311659955884032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:55:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120311659955884032[0;39m ==> Parameters: 
2021-11-29 07:55:35.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120311659955884032[0;39m <==    Updates: 3
2021-11-29 07:55:35.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120311659955884032[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:56:00.018 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120311764821872640[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:56:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120311764821872640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:56:00.019 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120311764821872640[0;39m ==> Parameters: 
2021-11-29 07:56:00.020 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120311764821872640[0;39m <==    Updates: 0
2021-11-29 07:56:00.020 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120311764821872640[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 07:56:04.816 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:56:04.936 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:56:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120311785772421120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:56:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120311785772421120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:56:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120311785772421120[0;39m ==> Parameters: 
2021-11-29 07:56:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120311785772421120[0;39m <==    Updates: 3
2021-11-29 07:56:05.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120311785772421120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 07:56:34.795 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:56:34.934 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:56:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120311911588958208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:56:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120311911588958208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:56:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120311911588958208[0;39m ==> Parameters: 
2021-11-29 07:56:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120311911588958208[0;39m <==    Updates: 3
2021-11-29 07:56:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120311911588958208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 07:57:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120312016471724032[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:57:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120312016471724032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:57:00.019 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120312016471724032[0;39m ==> Parameters: 
2021-11-29 07:57:00.022 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120312016471724032[0;39m <==    Updates: 0
2021-11-29 07:57:00.023 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120312016471724032[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 07:57:04.822 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:57:04.932 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:57:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120312037413883904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:57:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120312037413883904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:57:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120312037413883904[0;39m ==> Parameters: 
2021-11-29 07:57:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120312037413883904[0;39m <==    Updates: 3
2021-11-29 07:57:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120312037413883904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:57:34.811 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:57:34.934 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:57:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120312163263975424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:57:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120312163263975424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:57:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120312163263975424[0;39m ==> Parameters: 
2021-11-29 07:57:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120312163263975424[0;39m <==    Updates: 3
2021-11-29 07:57:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120312163263975424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:58:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120312268129964032[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:58:00.019 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120312268129964032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:58:00.020 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120312268129964032[0;39m ==> Parameters: 
2021-11-29 07:58:00.022 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120312268129964032[0;39m <==    Updates: 0
2021-11-29 07:58:00.023 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120312268129964032[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 07:58:04.819 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:58:04.927 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:58:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120312289051152384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:58:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120312289051152384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:58:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120312289051152384[0;39m ==> Parameters: 
2021-11-29 07:58:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120312289051152384[0;39m <==    Updates: 3
2021-11-29 07:58:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120312289051152384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 07:58:34.807 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:58:34.917 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:58:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120312414905438208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:58:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120312414905438208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:58:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120312414905438208[0;39m ==> Parameters: 
2021-11-29 07:58:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120312414905438208[0;39m <==    Updates: 3
2021-11-29 07:58:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120312414905438208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:59:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120312519775621120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 07:59:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120312519775621120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 07:59:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120312519775621120[0;39m ==> Parameters: 
2021-11-29 07:59:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120312519775621120[0;39m <==    Updates: 0
2021-11-29 07:59:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120312519775621120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 07:59:04.818 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:59:04.941 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:59:05.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120312540701003776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:59:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120312540701003776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:59:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120312540701003776[0;39m ==> Parameters: 
2021-11-29 07:59:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120312540701003776[0;39m <==    Updates: 3
2021-11-29 07:59:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120312540701003776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 07:59:34.835 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:59:34.943 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 07:59:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120312666542706688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 07:59:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120312666542706688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 07:59:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120312666542706688[0;39m ==> Parameters: 
2021-11-29 07:59:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120312666542706688[0;39m <==    Updates: 3
2021-11-29 07:59:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120312666542706688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 08:00:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120312771404500992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:00:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120312771404500992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:00:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120312771404500992[0;39m ==> Parameters: 
2021-11-29 08:00:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120312771404500992[0;39m <==    Updates: 0
2021-11-29 08:00:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120312771404500992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 08:00:04.805 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:00:04.930 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:00:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120312792380215296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:00:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120312792380215296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:00:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120312792380215296[0;39m ==> Parameters: 
2021-11-29 08:00:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120312792380215296[0;39m <==    Updates: 3
2021-11-29 08:00:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120312792380215296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 08:00:34.815 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:00:34.926 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:00:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120312918192558080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:00:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120312918192558080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:00:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120312918192558080[0;39m ==> Parameters: 
2021-11-29 08:00:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120312918192558080[0;39m <==    Updates: 3
2021-11-29 08:00:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120312918192558080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 08:01:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120313023071129600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:01:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120313023071129600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:01:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120313023071129600[0;39m ==> Parameters: 
2021-11-29 08:01:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120313023071129600[0;39m <==    Updates: 0
2021-11-29 08:01:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120313023071129600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 08:01:04.803 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:01:04.926 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:01:05.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120313044017483776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:01:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120313044017483776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:01:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120313044017483776[0;39m ==> Parameters: 
2021-11-29 08:01:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120313044017483776[0;39m <==    Updates: 3
2021-11-29 08:01:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120313044017483776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 08:01:34.823 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:01:34.931 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:01:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120313169875963904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:01:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120313169875963904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:01:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120313169875963904[0;39m ==> Parameters: 
2021-11-29 08:01:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120313169875963904[0;39m <==    Updates: 3
2021-11-29 08:01:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120313169875963904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 08:02:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120313274712592384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:02:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120313274712592384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:02:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120313274712592384[0;39m ==> Parameters: 
2021-11-29 08:02:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120313274712592384[0;39m <==    Updates: 0
2021-11-29 08:02:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120313274712592384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2021-11-29 08:02:04.830 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:02:04.940 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:02:05.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120313295675723776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:02:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120313295675723776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:02:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120313295675723776[0;39m ==> Parameters: 
2021-11-29 08:02:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120313295675723776[0;39m <==    Updates: 3
2021-11-29 08:02:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120313295675723776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 08:02:34.793 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:02:34.931 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:02:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120313421538398208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:02:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120313421538398208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:02:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120313421538398208[0;39m ==> Parameters: 
2021-11-29 08:02:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120313421538398208[0;39m <==    Updates: 3
2021-11-29 08:02:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120313421538398208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 08:03:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120313526379220992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:03:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120313526379220992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:03:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120313526379220992[0;39m ==> Parameters: 
2021-11-29 08:03:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120313526379220992[0;39m <==    Updates: 0
2021-11-29 08:03:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120313526379220992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 08:03:04.821 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:03:04.931 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:03:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120313547363323904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:03:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120313547363323904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:03:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120313547363323904[0;39m ==> Parameters: 
2021-11-29 08:03:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120313547363323904[0;39m <==    Updates: 3
2021-11-29 08:03:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120313547363323904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 08:03:34.829 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:03:34.936 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:03:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120313673217609728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:03:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120313673217609728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:03:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120313673217609728[0;39m ==> Parameters: 
2021-11-29 08:03:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120313673217609728[0;39m <==    Updates: 3
2021-11-29 08:03:35.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120313673217609728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 08:04:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120313778071015424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:04:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120313778071015424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:04:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120313778071015424[0;39m ==> Parameters: 
2021-11-29 08:04:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120313778071015424[0;39m <==    Updates: 0
2021-11-29 08:04:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120313778071015424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 08:04:04.807 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:04:04.946 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:04:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120313799017369600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:04:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120313799017369600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:04:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120313799017369600[0;39m ==> Parameters: 
2021-11-29 08:04:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120313799017369600[0;39m <==    Updates: 3
2021-11-29 08:04:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120313799017369600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 08:04:34.829 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:04:34.955 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:04:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120313924875849728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:04:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120313924875849728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:04:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120313924875849728[0;39m ==> Parameters: 
2021-11-29 08:04:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120313924875849728[0;39m <==    Updates: 3
2021-11-29 08:04:35.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120313924875849728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 08:05:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120314029708283904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:05:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120314029708283904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:05:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120314029708283904[0;39m ==> Parameters: 
2021-11-29 08:05:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120314029708283904[0;39m <==    Updates: 0
2021-11-29 08:05:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120314029708283904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 08:05:04.809 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:05:04.934 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:05:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120314050679803904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:05:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120314050679803904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:05:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120314050679803904[0;39m ==> Parameters: 
2021-11-29 08:05:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120314050679803904[0;39m <==    Updates: 3
2021-11-29 08:05:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120314050679803904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 08:05:34.833 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:05:34.944 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:05:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120314176500535296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:05:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120314176500535296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:05:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120314176500535296[0;39m ==> Parameters: 
2021-11-29 08:05:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120314176500535296[0;39m <==    Updates: 3
2021-11-29 08:05:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120314176500535296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 08:06:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120314281391689728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:06:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120314281391689728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:06:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120314281391689728[0;39m ==> Parameters: 
2021-11-29 08:06:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120314281391689728[0;39m <==    Updates: 0
2021-11-29 08:06:00.019 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120314281391689728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 08:06:04.823 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:06:04.948 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:06:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120314302342238208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:06:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120314302342238208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:06:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120314302342238208[0;39m ==> Parameters: 
2021-11-29 08:06:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120314302342238208[0;39m <==    Updates: 3
2021-11-29 08:06:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120314302342238208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 08:06:34.826 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:06:34.953 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:06:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120314428188135424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:06:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120314428188135424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:06:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120314428188135424[0;39m ==> Parameters: 
2021-11-29 08:06:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120314428188135424[0;39m <==    Updates: 3
2021-11-29 08:06:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120314428188135424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 08:07:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120314533049929728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:07:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120314533049929728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:07:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120314533049929728[0;39m ==> Parameters: 
2021-11-29 08:07:00.021 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120314533049929728[0;39m <==    Updates: 0
2021-11-29 08:07:00.021 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120314533049929728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 08:07:04.818 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:07:04.958 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:07:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120314553971118080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:07:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120314553971118080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:07:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120314553971118080[0;39m ==> Parameters: 
2021-11-29 08:07:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120314553971118080[0;39m <==    Updates: 3
2021-11-29 08:07:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120314553971118080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 08:07:34.847 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:07:34.956 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:07:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120314679804432384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:07:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120314679804432384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:07:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120314679804432384[0;39m ==> Parameters: 
2021-11-29 08:07:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120314679804432384[0;39m <==    Updates: 3
2021-11-29 08:07:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120314679804432384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 08:08:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120314784699781120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:08:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120314784699781120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:08:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120314784699781120[0;39m ==> Parameters: 
2021-11-29 08:08:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120314784699781120[0;39m <==    Updates: 0
2021-11-29 08:08:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120314784699781120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 08:08:04.825 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:08:04.935 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:08:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120314805667106816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:08:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120314805667106816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:08:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120314805667106816[0;39m ==> Parameters: 
2021-11-29 08:08:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120314805667106816[0;39m <==    Updates: 3
2021-11-29 08:08:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120314805667106816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 08:08:34.835 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:08:34.941 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:08:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120314931458478080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:08:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120314931458478080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:08:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120314931458478080[0;39m ==> Parameters: 
2021-11-29 08:08:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120314931458478080[0;39m <==    Updates: 3
2021-11-29 08:08:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120314931458478080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 08:09:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120315036328660992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:09:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120315036328660992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:09:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120315036328660992[0;39m ==> Parameters: 
2021-11-29 08:09:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120315036328660992[0;39m <==    Updates: 0
2021-11-29 08:09:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120315036328660992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 08:09:04.835 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:09:04.958 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:09:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120315057291792384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:09:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120315057291792384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:09:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120315057291792384[0;39m ==> Parameters: 
2021-11-29 08:09:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120315057291792384[0;39m <==    Updates: 3
2021-11-29 08:09:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120315057291792384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 08:09:34.820 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:09:34.927 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:09:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120315183120912384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:09:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120315183120912384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:09:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120315183120912384[0;39m ==> Parameters: 
2021-11-29 08:09:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120315183120912384[0;39m <==    Updates: 3
2021-11-29 08:09:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120315183120912384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 08:10:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120315288020455424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:10:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120315288020455424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:10:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120315288020455424[0;39m ==> Parameters: 
2021-11-29 08:10:00.019 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120315288020455424[0;39m <==    Updates: 0
2021-11-29 08:10:00.020 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120315288020455424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 08:10:04.818 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:10:04.958 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:10:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120315308945838080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:10:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120315308945838080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:10:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120315308945838080[0;39m ==> Parameters: 
2021-11-29 08:10:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120315308945838080[0;39m <==    Updates: 3
2021-11-29 08:10:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120315308945838080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 08:10:34.840 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:10:34.963 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:10:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120315434804318208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:10:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120315434804318208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:10:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120315434804318208[0;39m ==> Parameters: 
2021-11-29 08:10:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120315434804318208[0;39m <==    Updates: 3
2021-11-29 08:10:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120315434804318208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 08:11:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120315539687084032[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:11:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120315539687084032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:11:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120315539687084032[0;39m ==> Parameters: 
2021-11-29 08:11:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120315539687084032[0;39m <==    Updates: 0
2021-11-29 08:11:00.019 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120315539687084032[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 08:11:04.821 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:11:04.945 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:11:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120315560620855296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:11:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120315560620855296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:11:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120315560620855296[0;39m ==> Parameters: 
2021-11-29 08:11:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120315560620855296[0;39m <==    Updates: 3
2021-11-29 08:11:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120315560620855296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 08:11:34.828 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:11:34.941 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:11:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120315686487724032[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:11:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120315686487724032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:11:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120315686487724032[0;39m ==> Parameters: 
2021-11-29 08:11:35.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120315686487724032[0;39m <==    Updates: 3
2021-11-29 08:11:35.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120315686487724032[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 08:12:00.003 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120315791290798080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:12:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120315791290798080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:12:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120315791290798080[0;39m ==> Parameters: 
2021-11-29 08:12:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120315791290798080[0;39m <==    Updates: 0
2021-11-29 08:12:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120315791290798080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 08:12:04.829 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:12:04.953 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:12:05.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120315812258123776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:12:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120315812258123776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:12:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120315812258123776[0;39m ==> Parameters: 
2021-11-29 08:12:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120315812258123776[0;39m <==    Updates: 3
2021-11-29 08:12:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120315812258123776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 08:12:34.845 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:12:34.926 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:12:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120315938091438080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:12:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120315938091438080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:12:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120315938091438080[0;39m ==> Parameters: 
2021-11-29 08:12:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120315938091438080[0;39m <==    Updates: 3
2021-11-29 08:12:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120315938091438080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 08:13:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120316042953232384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:13:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120316042953232384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:13:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120316042953232384[0;39m ==> Parameters: 
2021-11-29 08:13:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120316042953232384[0;39m <==    Updates: 0
2021-11-29 08:13:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120316042953232384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 08:13:04.847 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:13:04.937 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:13:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120316063966695424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:13:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120316063966695424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:13:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120316063966695424[0;39m ==> Parameters: 
2021-11-29 08:13:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120316063966695424[0;39m <==    Updates: 3
2021-11-29 08:13:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120316063966695424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 08:13:34.848 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:13:34.941 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:13:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120316189758066688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:13:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120316189758066688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:13:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120316189758066688[0;39m ==> Parameters: 
2021-11-29 08:13:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120316189758066688[0;39m <==    Updates: 3
2021-11-29 08:13:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120316189758066688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 08:14:00.003 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120316294607278080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:14:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120316294607278080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:14:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120316294607278080[0;39m ==> Parameters: 
2021-11-29 08:14:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120316294607278080[0;39m <==    Updates: 0
2021-11-29 08:14:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120316294607278080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 08:14:04.854 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:14:04.963 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:14:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120316315608158208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:14:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120316315608158208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:14:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120316315608158208[0;39m ==> Parameters: 
2021-11-29 08:14:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120316315608158208[0;39m <==    Updates: 3
2021-11-29 08:14:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120316315608158208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 08:14:34.860 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:14:34.967 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:14:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120316441454055424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:14:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120316441454055424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:14:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120316441454055424[0;39m ==> Parameters: 
2021-11-29 08:14:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120316441454055424[0;39m <==    Updates: 3
2021-11-29 08:14:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120316441454055424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 08:15:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120316546320044032[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:15:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120316546320044032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:15:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120316546320044032[0;39m ==> Parameters: 
2021-11-29 08:15:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120316546320044032[0;39m <==    Updates: 0
2021-11-29 08:15:00.019 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120316546320044032[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 08:15:04.837 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:15:04.946 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:15:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120316567258009600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:15:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120316567258009600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:15:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120316567258009600[0;39m ==> Parameters: 
2021-11-29 08:15:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120316567258009600[0;39m <==    Updates: 3
2021-11-29 08:15:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120316567258009600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 08:15:34.856 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:15:34.964 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:15:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120316693099712512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:15:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120316693099712512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:15:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120316693099712512[0;39m ==> Parameters: 
2021-11-29 08:15:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120316693099712512[0;39m <==    Updates: 3
2021-11-29 08:15:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120316693099712512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 08:16:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120316797982478336[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:16:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120316797982478336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:16:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120316797982478336[0;39m ==> Parameters: 
2021-11-29 08:16:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120316797982478336[0;39m <==    Updates: 0
2021-11-29 08:16:00.018 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120316797982478336[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š1æ¯«ç§’
2021-11-29 08:16:04.835 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:16:04.974 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:16:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120316818899472384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:16:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120316818899472384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:16:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120316818899472384[0;39m ==> Parameters: 
2021-11-29 08:16:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120316818899472384[0;39m <==    Updates: 3
2021-11-29 08:16:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120316818899472384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 08:16:34.850 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:16:34.958 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:16:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120316944728592384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:16:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120316944728592384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:16:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120316944728592384[0;39m ==> Parameters: 
2021-11-29 08:16:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120316944728592384[0;39m <==    Updates: 3
2021-11-29 08:16:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120316944728592384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 08:17:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120317049607163904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:17:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120317049607163904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:17:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120317049607163904[0;39m ==> Parameters: 
2021-11-29 08:17:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120317049607163904[0;39m <==    Updates: 0
2021-11-29 08:17:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120317049607163904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 08:17:04.836 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:17:04.959 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:17:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120317070557712384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:17:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120317070557712384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:17:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120317070557712384[0;39m ==> Parameters: 
2021-11-29 08:17:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120317070557712384[0;39m <==    Updates: 3
2021-11-29 08:17:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120317070557712384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 08:17:34.841 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:17:34.967 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:17:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120317196428775424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:17:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120317196428775424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:17:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120317196428775424[0;39m ==> Parameters: 
2021-11-29 08:17:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120317196428775424[0;39m <==    Updates: 3
2021-11-29 08:17:35.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120317196428775424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 08:18:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120317301290569728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:18:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120317301290569728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:18:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120317301290569728[0;39m ==> Parameters: 
2021-11-29 08:18:00.021 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120317301290569728[0;39m <==    Updates: 0
2021-11-29 08:18:00.021 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120317301290569728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 08:18:04.850 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:18:04.957 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:18:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120317322215952384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:18:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120317322215952384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:18:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120317322215952384[0;39m ==> Parameters: 
2021-11-29 08:18:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120317322215952384[0;39m <==    Updates: 3
2021-11-29 08:18:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120317322215952384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 08:18:34.853 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:18:34.963 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:18:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120317448070238208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:18:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120317448070238208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:18:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120317448070238208[0;39m ==> Parameters: 
2021-11-29 08:18:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120317448070238208[0;39m <==    Updates: 3
2021-11-29 08:18:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120317448070238208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 08:19:00.003 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120317552898478080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:19:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120317552898478080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:19:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120317552898478080[0;39m ==> Parameters: 
2021-11-29 08:19:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120317552898478080[0;39m <==    Updates: 0
2021-11-29 08:19:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120317552898478080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 08:19:04.847 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:19:04.954 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:19:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120317573920329728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:19:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120317573920329728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:19:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120317573920329728[0;39m ==> Parameters: 
2021-11-29 08:19:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120317573920329728[0;39m <==    Updates: 3
2021-11-29 08:19:05.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120317573920329728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 08:19:34.873 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:19:34.965 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:19:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120317699736866816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:19:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120317699736866816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:19:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120317699736866816[0;39m ==> Parameters: 
2021-11-29 08:19:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120317699736866816[0;39m <==    Updates: 3
2021-11-29 08:19:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120317699736866816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 08:20:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120317804607049728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:20:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120317804607049728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:20:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120317804607049728[0;39m ==> Parameters: 
2021-11-29 08:20:00.021 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120317804607049728[0;39m <==    Updates: 0
2021-11-29 08:20:00.021 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120317804607049728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 08:20:04.845 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:20:04.954 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:20:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120317825582764032[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:20:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120317825582764032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:20:05.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120317825582764032[0;39m ==> Parameters: 
2021-11-29 08:20:05.019 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120317825582764032[0;39m <==    Updates: 3
2021-11-29 08:20:05.020 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120317825582764032[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 08:20:34.826 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:20:34.966 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:20:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120317951395106816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:20:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120317951395106816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:20:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120317951395106816[0;39m ==> Parameters: 
2021-11-29 08:20:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120317951395106816[0;39m <==    Updates: 3
2021-11-29 08:20:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120317951395106816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 08:21:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120318056269484032[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:21:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120318056269484032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:21:00.019 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120318056269484032[0;39m ==> Parameters: 
2021-11-29 08:21:00.022 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120318056269484032[0;39m <==    Updates: 0
2021-11-29 08:21:00.022 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120318056269484032[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 08:21:04.843 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:21:04.966 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:21:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120318077224226816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:21:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120318077224226816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:21:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120318077224226816[0;39m ==> Parameters: 
2021-11-29 08:21:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120318077224226816[0;39m <==    Updates: 3
2021-11-29 08:21:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120318077224226816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 08:21:34.858 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:21:34.968 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:21:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120318203061735424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:21:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120318203061735424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:21:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120318203061735424[0;39m ==> Parameters: 
2021-11-29 08:21:35.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120318203061735424[0;39m <==    Updates: 3
2021-11-29 08:21:35.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120318203061735424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 08:22:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120318307927724032[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:22:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120318307927724032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:22:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120318307927724032[0;39m ==> Parameters: 
2021-11-29 08:22:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120318307927724032[0;39m <==    Updates: 0
2021-11-29 08:22:00.018 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120318307927724032[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 08:22:04.851 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:22:04.959 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:22:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120318328857300992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:22:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120318328857300992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:22:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120318328857300992[0;39m ==> Parameters: 
2021-11-29 08:22:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120318328857300992[0;39m <==    Updates: 3
2021-11-29 08:22:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120318328857300992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 08:22:34.854 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:22:34.963 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:22:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120318454703198208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:22:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120318454703198208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:22:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120318454703198208[0;39m ==> Parameters: 
2021-11-29 08:22:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120318454703198208[0;39m <==    Updates: 3
2021-11-29 08:22:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120318454703198208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 08:23:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120318559548215296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:23:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120318559548215296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:23:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120318559548215296[0;39m ==> Parameters: 
2021-11-29 08:23:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120318559548215296[0;39m <==    Updates: 0
2021-11-29 08:23:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120318559548215296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 08:23:04.855 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:23:04.979 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:23:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120318580532318208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:23:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120318580532318208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:23:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120318580532318208[0;39m ==> Parameters: 
2021-11-29 08:23:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120318580532318208[0;39m <==    Updates: 3
2021-11-29 08:23:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120318580532318208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 08:23:34.856 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:23:34.936 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:23:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120318706361438208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:23:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120318706361438208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:23:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120318706361438208[0;39m ==> Parameters: 
2021-11-29 08:23:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120318706361438208[0;39m <==    Updates: 3
2021-11-29 08:23:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120318706361438208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 08:24:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120318811248398336[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:24:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120318811248398336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:24:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120318811248398336[0;39m ==> Parameters: 
2021-11-29 08:24:00.020 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120318811248398336[0;39m <==    Updates: 0
2021-11-29 08:24:00.021 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120318811248398336[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 08:24:04.854 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:24:04.978 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:24:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120318832186363904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:24:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120318832186363904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:24:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120318832186363904[0;39m ==> Parameters: 
2021-11-29 08:24:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120318832186363904[0;39m <==    Updates: 3
2021-11-29 08:24:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120318832186363904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 08:24:34.862 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:24:34.956 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:24:35.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120318957986123776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:24:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120318957986123776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:24:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120318957986123776[0;39m ==> Parameters: 
2021-11-29 08:24:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120318957986123776[0;39m <==    Updates: 3
2021-11-29 08:24:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120318957986123776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 08:25:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120319062864695296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:25:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120319062864695296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:25:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120319062864695296[0;39m ==> Parameters: 
2021-11-29 08:25:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120319062864695296[0;39m <==    Updates: 0
2021-11-29 08:25:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120319062864695296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 08:25:04.836 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:25:04.960 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:25:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120319083836215296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:25:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120319083836215296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:25:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120319083836215296[0;39m ==> Parameters: 
2021-11-29 08:25:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120319083836215296[0;39m <==    Updates: 3
2021-11-29 08:25:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120319083836215296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 08:25:34.862 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:25:34.986 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:25:35.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120319209644363776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:25:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120319209644363776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:25:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120319209644363776[0;39m ==> Parameters: 
2021-11-29 08:25:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120319209644363776[0;39m <==    Updates: 3
2021-11-29 08:25:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120319209644363776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 08:26:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120319314522935296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:26:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120319314522935296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:26:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120319314522935296[0;39m ==> Parameters: 
2021-11-29 08:26:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120319314522935296[0;39m <==    Updates: 0
2021-11-29 08:26:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120319314522935296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 08:26:04.853 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:26:04.977 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:26:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120319335494455296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:26:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120319335494455296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:26:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120319335494455296[0;39m ==> Parameters: 
2021-11-29 08:26:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120319335494455296[0;39m <==    Updates: 3
2021-11-29 08:26:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120319335494455296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 08:26:34.838 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:26:34.943 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:26:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120319461319380992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:26:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120319461319380992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:26:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120319461319380992[0;39m ==> Parameters: 
2021-11-29 08:26:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120319461319380992[0;39m <==    Updates: 3
2021-11-29 08:26:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120319461319380992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 08:27:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120319566168592384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:27:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120319566168592384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:27:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120319566168592384[0;39m ==> Parameters: 
2021-11-29 08:27:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120319566168592384[0;39m <==    Updates: 0
2021-11-29 08:27:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120319566168592384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 08:27:04.868 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:27:04.977 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:27:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120319587148500992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:27:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120319587148500992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:27:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120319587148500992[0;39m ==> Parameters: 
2021-11-29 08:27:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120319587148500992[0;39m <==    Updates: 3
2021-11-29 08:27:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120319587148500992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 08:27:34.868 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:27:34.961 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:27:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120319712977620992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:27:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120319712977620992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:27:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120319712977620992[0;39m ==> Parameters: 
2021-11-29 08:27:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120319712977620992[0;39m <==    Updates: 3
2021-11-29 08:27:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120319712977620992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 08:28:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120319817851998208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:28:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120319817851998208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:28:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120319817851998208[0;39m ==> Parameters: 
2021-11-29 08:28:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120319817851998208[0;39m <==    Updates: 0
2021-11-29 08:28:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120319817851998208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 08:28:04.874 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:28:04.980 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:28:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120319838823518208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:28:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120319838823518208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:28:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120319838823518208[0;39m ==> Parameters: 
2021-11-29 08:28:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120319838823518208[0;39m <==    Updates: 3
2021-11-29 08:28:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120319838823518208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 08:28:34.863 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:28:34.973 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:28:35.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120319964619083776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:28:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120319964619083776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:28:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120319964619083776[0;39m ==> Parameters: 
2021-11-29 08:28:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120319964619083776[0;39m <==    Updates: 3
2021-11-29 08:28:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120319964619083776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 08:29:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120320069518626816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:29:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120320069518626816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:29:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120320069518626816[0;39m ==> Parameters: 
2021-11-29 08:29:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120320069518626816[0;39m <==    Updates: 0
2021-11-29 08:29:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120320069518626816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 08:29:04.863 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:29:04.988 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:29:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120320090456592384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:29:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120320090456592384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:29:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120320090456592384[0;39m ==> Parameters: 
2021-11-29 08:29:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120320090456592384[0;39m <==    Updates: 3
2021-11-29 08:29:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120320090456592384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 08:29:34.868 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:29:34.979 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:29:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120320216302489600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:29:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120320216302489600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:29:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120320216302489600[0;39m ==> Parameters: 
2021-11-29 08:29:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120320216302489600[0;39m <==    Updates: 3
2021-11-29 08:29:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120320216302489600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 08:30:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120320321172672512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:30:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120320321172672512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:30:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120320321172672512[0;39m ==> Parameters: 
2021-11-29 08:30:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120320321172672512[0;39m <==    Updates: 0
2021-11-29 08:30:00.018 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120320321172672512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 08:30:04.873 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:30:04.981 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:30:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120320342148386816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:30:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120320342148386816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:30:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120320342148386816[0;39m ==> Parameters: 
2021-11-29 08:30:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120320342148386816[0;39m <==    Updates: 3
2021-11-29 08:30:05.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120320342148386816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 08:30:34.886 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:30:34.996 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:30:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120320467973312512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:30:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120320467973312512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:30:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120320467973312512[0;39m ==> Parameters: 
2021-11-29 08:30:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120320467973312512[0;39m <==    Updates: 3
2021-11-29 08:30:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120320467973312512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 08:31:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120320572835106816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:31:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120320572835106816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:31:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120320572835106816[0;39m ==> Parameters: 
2021-11-29 08:31:00.019 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120320572835106816[0;39m <==    Updates: 0
2021-11-29 08:31:00.019 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120320572835106816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 08:31:04.865 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:31:04.973 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:31:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120320593781460992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:31:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120320593781460992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:31:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120320593781460992[0;39m ==> Parameters: 
2021-11-29 08:31:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120320593781460992[0;39m <==    Updates: 3
2021-11-29 08:31:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120320593781460992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 08:31:34.879 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:31:34.972 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:31:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120320719602192384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:31:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120320719602192384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:31:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120320719602192384[0;39m ==> Parameters: 
2021-11-29 08:31:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120320719602192384[0;39m <==    Updates: 3
2021-11-29 08:31:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120320719602192384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 08:32:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120320824489152512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:32:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120320824489152512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:32:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120320824489152512[0;39m ==> Parameters: 
2021-11-29 08:32:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120320824489152512[0;39m <==    Updates: 0
2021-11-29 08:32:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120320824489152512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 08:32:04.885 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:32:04.994 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:32:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120320845452283904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:32:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120320845452283904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:32:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120320845452283904[0;39m ==> Parameters: 
2021-11-29 08:32:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120320845452283904[0;39m <==    Updates: 3
2021-11-29 08:32:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120320845452283904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 08:32:34.854 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:32:34.979 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:32:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120320971289792512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:32:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120320971289792512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:32:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120320971289792512[0;39m ==> Parameters: 
2021-11-29 08:32:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120320971289792512[0;39m <==    Updates: 3
2021-11-29 08:32:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120320971289792512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 08:33:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120321076143198208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:33:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120321076143198208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:33:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120321076143198208[0;39m ==> Parameters: 
2021-11-29 08:33:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120321076143198208[0;39m <==    Updates: 0
2021-11-29 08:33:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120321076143198208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 08:33:04.867 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:33:04.975 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:33:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120321097093746688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:33:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120321097093746688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:33:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120321097093746688[0;39m ==> Parameters: 
2021-11-29 08:33:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120321097093746688[0;39m <==    Updates: 3
2021-11-29 08:33:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120321097093746688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 08:33:34.865 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:33:34.989 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:33:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120321222922866688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:33:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120321222922866688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:33:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120321222922866688[0;39m ==> Parameters: 
2021-11-29 08:33:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120321222922866688[0;39m <==    Updates: 3
2021-11-29 08:33:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120321222922866688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 08:34:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120321327780466688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:34:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120321327780466688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:34:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120321327780466688[0;39m ==> Parameters: 
2021-11-29 08:34:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120321327780466688[0;39m <==    Updates: 0
2021-11-29 08:34:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120321327780466688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 08:34:04.871 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:34:04.981 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:34:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120321348781346816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:34:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120321348781346816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:34:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120321348781346816[0;39m ==> Parameters: 
2021-11-29 08:34:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120321348781346816[0;39m <==    Updates: 3
2021-11-29 08:34:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120321348781346816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 08:34:34.880 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:34:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120321474576912384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:34:35.004 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:34:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120321474576912384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:34:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120321474576912384[0;39m ==> Parameters: 
2021-11-29 08:34:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120321474576912384[0;39m <==    Updates: 3
2021-11-29 08:34:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120321474576912384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 08:35:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120321579472261120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:35:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120321579472261120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:35:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120321579472261120[0;39m ==> Parameters: 
2021-11-29 08:35:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120321579472261120[0;39m <==    Updates: 0
2021-11-29 08:35:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120321579472261120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 08:35:04.857 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:35:04.981 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:35:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120321600439586816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:35:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120321600439586816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:35:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120321600439586816[0;39m ==> Parameters: 
2021-11-29 08:35:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120321600439586816[0;39m <==    Updates: 3
2021-11-29 08:35:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120321600439586816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 08:35:34.878 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:35:34.988 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:35:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120321726235152384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:35:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120321726235152384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:35:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120321726235152384[0;39m ==> Parameters: 
2021-11-29 08:35:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120321726235152384[0;39m <==    Updates: 3
2021-11-29 08:35:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120321726235152384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 08:36:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120321831122112512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:36:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120321831122112512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:36:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120321831122112512[0;39m ==> Parameters: 
2021-11-29 08:36:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120321831122112512[0;39m <==    Updates: 0
2021-11-29 08:36:00.018 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120321831122112512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 08:36:04.874 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:36:04.982 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:36:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120321852097826816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:36:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120321852097826816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:36:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120321852097826816[0;39m ==> Parameters: 
2021-11-29 08:36:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120321852097826816[0;39m <==    Updates: 3
2021-11-29 08:36:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120321852097826816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 08:36:34.883 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:36:34.993 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:36:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120321977910169600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:36:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120321977910169600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:36:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120321977910169600[0;39m ==> Parameters: 
2021-11-29 08:36:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120321977910169600[0;39m <==    Updates: 3
2021-11-29 08:36:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120321977910169600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 08:37:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120322082763575296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:37:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120322082763575296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:37:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120322082763575296[0;39m ==> Parameters: 
2021-11-29 08:37:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120322082763575296[0;39m <==    Updates: 0
2021-11-29 08:37:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120322082763575296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 08:37:04.885 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:37:04.995 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:37:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120322103747678208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:37:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120322103747678208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:37:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120322103747678208[0;39m ==> Parameters: 
2021-11-29 08:37:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120322103747678208[0;39m <==    Updates: 3
2021-11-29 08:37:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120322103747678208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 08:37:34.883 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:37:34.976 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:37:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120322229564215296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:37:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120322229564215296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:37:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120322229564215296[0;39m ==> Parameters: 
2021-11-29 08:37:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120322229564215296[0;39m <==    Updates: 3
2021-11-29 08:37:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120322229564215296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 08:38:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120322334451175424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:38:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120322334451175424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:38:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120322334451175424[0;39m ==> Parameters: 
2021-11-29 08:38:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120322334451175424[0;39m <==    Updates: 0
2021-11-29 08:38:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120322334451175424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 08:38:04.870 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:38:04.978 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:38:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120322355397529600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:38:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120322355397529600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:38:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120322355397529600[0;39m ==> Parameters: 
2021-11-29 08:38:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120322355397529600[0;39m <==    Updates: 3
2021-11-29 08:38:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120322355397529600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 08:38:34.874 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:38:34.985 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:38:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120322481260204032[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:38:35.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120322481260204032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:38:35.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120322481260204032[0;39m ==> Parameters: 
2021-11-29 08:38:35.020 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120322481260204032[0;39m <==    Updates: 3
2021-11-29 08:38:35.021 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120322481260204032[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 08:39:00.003 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120322586063278080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:39:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120322586063278080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:39:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120322586063278080[0;39m ==> Parameters: 
2021-11-29 08:39:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120322586063278080[0;39m <==    Updates: 0
2021-11-29 08:39:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120322586063278080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 08:39:04.877 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:39:04.988 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:39:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120322607034798080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:39:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120322607034798080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:39:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120322607034798080[0;39m ==> Parameters: 
2021-11-29 08:39:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120322607034798080[0;39m <==    Updates: 3
2021-11-29 08:39:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120322607034798080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 08:39:34.863 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:39:34.987 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:39:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120322732863918080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:39:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120322732863918080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:39:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120322732863918080[0;39m ==> Parameters: 
2021-11-29 08:39:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120322732863918080[0;39m <==    Updates: 3
2021-11-29 08:39:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120322732863918080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 08:40:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120322837738295296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:40:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120322837738295296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:40:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120322837738295296[0;39m ==> Parameters: 
2021-11-29 08:40:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120322837738295296[0;39m <==    Updates: 0
2021-11-29 08:40:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120322837738295296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 08:40:04.889 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:40:04.996 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:40:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120322858726592512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:40:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120322858726592512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:40:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120322858726592512[0;39m ==> Parameters: 
2021-11-29 08:40:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120322858726592512[0;39m <==    Updates: 3
2021-11-29 08:40:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120322858726592512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 08:40:34.885 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:40:34.993 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:40:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120322984538935296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:40:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120322984538935296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:40:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120322984538935296[0;39m ==> Parameters: 
2021-11-29 08:40:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120322984538935296[0;39m <==    Updates: 3
2021-11-29 08:40:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120322984538935296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 08:41:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120323089388146688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:41:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120323089388146688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:41:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120323089388146688[0;39m ==> Parameters: 
2021-11-29 08:41:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120323089388146688[0;39m <==    Updates: 0
2021-11-29 08:41:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120323089388146688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 08:41:04.880 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:41:04.990 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:41:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120323110355472384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:41:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120323110355472384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:41:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120323110355472384[0;39m ==> Parameters: 
2021-11-29 08:41:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120323110355472384[0;39m <==    Updates: 3
2021-11-29 08:41:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120323110355472384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 08:41:34.887 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:41:34.983 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:41:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120323236226535424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:41:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120323236226535424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:41:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120323236226535424[0;39m ==> Parameters: 
2021-11-29 08:41:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120323236226535424[0;39m <==    Updates: 3
2021-11-29 08:41:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120323236226535424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 08:42:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120323341092524032[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:42:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120323341092524032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:42:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120323341092524032[0;39m ==> Parameters: 
2021-11-29 08:42:00.019 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120323341092524032[0;39m <==    Updates: 0
2021-11-29 08:42:00.019 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120323341092524032[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 08:42:04.900 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:42:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120323362038878208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:42:05.011 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:42:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120323362038878208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:42:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120323362038878208[0;39m ==> Parameters: 
2021-11-29 08:42:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120323362038878208[0;39m <==    Updates: 3
2021-11-29 08:42:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120323362038878208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 08:42:34.896 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:42:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120323487842832384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:42:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120323487842832384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:42:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120323487842832384[0;39m ==> Parameters: 
2021-11-29 08:42:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120323487842832384[0;39m <==    Updates: 3
2021-11-29 08:42:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120323487842832384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 08:42:35.021 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:43:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120323592733986816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:43:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120323592733986816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:43:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120323592733986816[0;39m ==> Parameters: 
2021-11-29 08:43:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120323592733986816[0;39m <==    Updates: 0
2021-11-29 08:43:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120323592733986816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 08:43:04.877 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:43:04.985 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:43:05.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120323613659369472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:43:05.001 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120323613659369472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:43:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120323613659369472[0;39m ==> Parameters: 
2021-11-29 08:43:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120323613659369472[0;39m <==    Updates: 3
2021-11-29 08:43:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120323613659369472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 08:43:34.898 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:43:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120323739509460992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:43:35.006 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:43:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120323739509460992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:43:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120323739509460992[0;39m ==> Parameters: 
2021-11-29 08:43:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120323739509460992[0;39m <==    Updates: 3
2021-11-29 08:43:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120323739509460992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 08:44:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120323844400615424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:44:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120323844400615424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:44:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120323844400615424[0;39m ==> Parameters: 
2021-11-29 08:44:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120323844400615424[0;39m <==    Updates: 0
2021-11-29 08:44:00.018 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120323844400615424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 08:44:04.891 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:44:05.000 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:44:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120323865372135424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:44:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120323865372135424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:44:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120323865372135424[0;39m ==> Parameters: 
2021-11-29 08:44:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120323865372135424[0;39m <==    Updates: 3
2021-11-29 08:44:05.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120323865372135424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 08:44:34.881 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:44:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120323991167700992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:44:35.007 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:44:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120323991167700992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:44:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120323991167700992[0;39m ==> Parameters: 
2021-11-29 08:44:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120323991167700992[0;39m <==    Updates: 3
2021-11-29 08:44:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120323991167700992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 08:45:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120324096067244032[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:45:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120324096067244032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:45:00.019 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120324096067244032[0;39m ==> Parameters: 
2021-11-29 08:45:00.023 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120324096067244032[0;39m <==    Updates: 0
2021-11-29 08:45:00.024 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120324096067244032[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 08:45:04.883 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:45:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120324116992626688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:45:05.005 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:45:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120324116992626688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:45:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120324116992626688[0;39m ==> Parameters: 
2021-11-29 08:45:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120324116992626688[0;39m <==    Updates: 3
2021-11-29 08:45:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120324116992626688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 08:45:34.895 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:45:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120324242817552384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:45:35.005 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:45:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120324242817552384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:45:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120324242817552384[0;39m ==> Parameters: 
2021-11-29 08:45:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120324242817552384[0;39m <==    Updates: 3
2021-11-29 08:45:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120324242817552384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 08:46:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120324347729678336[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:46:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120324347729678336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:46:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120324347729678336[0;39m ==> Parameters: 
2021-11-29 08:46:00.020 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120324347729678336[0;39m <==    Updates: 0
2021-11-29 08:46:00.020 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120324347729678336[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 08:46:04.878 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:46:05.002 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:46:05.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120324368638283776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:46:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120324368638283776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:46:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120324368638283776[0;39m ==> Parameters: 
2021-11-29 08:46:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120324368638283776[0;39m <==    Updates: 3
2021-11-29 08:46:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120324368638283776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 08:46:34.879 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:46:35.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120324494463209472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:46:35.003 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:46:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120324494463209472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:46:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120324494463209472[0;39m ==> Parameters: 
2021-11-29 08:46:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120324494463209472[0;39m <==    Updates: 3
2021-11-29 08:46:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120324494463209472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 08:47:00.002 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120324599325003776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:47:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120324599325003776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:47:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120324599325003776[0;39m ==> Parameters: 
2021-11-29 08:47:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120324599325003776[0;39m <==    Updates: 0
2021-11-29 08:47:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120324599325003776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2021-11-29 08:47:04.890 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:47:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120324620351049728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:47:05.015 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:47:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120324620351049728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:47:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120324620351049728[0;39m ==> Parameters: 
2021-11-29 08:47:05.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120324620351049728[0;39m <==    Updates: 3
2021-11-29 08:47:05.019 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120324620351049728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 08:47:34.914 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:47:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120324746142420992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:47:35.008 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:47:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120324746142420992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:47:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120324746142420992[0;39m ==> Parameters: 
2021-11-29 08:47:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120324746142420992[0;39m <==    Updates: 3
2021-11-29 08:47:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120324746142420992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶6æ¯«ç§’
2021-11-29 08:48:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120324851012603904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:48:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120324851012603904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:48:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120324851012603904[0;39m ==> Parameters: 
2021-11-29 08:48:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120324851012603904[0;39m <==    Updates: 0
2021-11-29 08:48:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120324851012603904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 08:48:04.882 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:48:04.989 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:48:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120324871963152384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:48:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120324871963152384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:48:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120324871963152384[0;39m ==> Parameters: 
2021-11-29 08:48:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120324871963152384[0;39m <==    Updates: 3
2021-11-29 08:48:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120324871963152384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 08:48:13.124 INFO  com.suplin.demo.websocket.WebSocketServer         :40   [32m119426873913643008[0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼šGZtOfc3juXï¼Œsession idï¼š3ï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2021-11-29 08:48:14.071 INFO  com.suplin.demo.websocket.WebSocketServer         :31   [32m119427387954958336[0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼šWsOTBzJAk0ï¼Œsession idï¼š4ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2021-11-29 08:48:14.200 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120324910533971968[0;39m ------------- å¼€å§‹ -------------
2021-11-29 08:48:14.200 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120324910533971969[0;39m ------------- å¼€å§‹ -------------
2021-11-29 08:48:14.202 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120324910533971968[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 08:48:14.202 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120324910533971969[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 08:48:14.202 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120324910533971968[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 08:48:14.202 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120324910533971969[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 08:48:14.202 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120324910533971968[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 08:48:14.202 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120324910533971969[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 08:48:14.203 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120324910533971969[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 08:48:14.203 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120324910533971968[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 08:48:14.205 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120324910533971968[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 08:48:14.206 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120324910533971968[0;39m ==> Parameters: 
2021-11-29 08:48:14.206 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120324910533971969[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 08:48:14.206 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120324910533971969[0;39m ==> Parameters: 
2021-11-29 08:48:14.208 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120324910533971969[0;39m <==    Columns: id, parent, name, sort
2021-11-29 08:48:14.208 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120324910533971969[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 08:48:14.209 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120324910533971969[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 08:48:14.209 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120324910533971969[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 08:48:14.209 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120324910533971969[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 08:48:14.209 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120324910533971969[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 08:48:14.210 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120324910533971969[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 08:48:14.210 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120324910533971969[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 08:48:14.210 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120324910533971969[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 08:48:14.211 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120324910533971969[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 08:48:14.211 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120324910533971969[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 08:48:14.211 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120324910533971969[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 08:48:14.211 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120324910533971969[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 08:48:14.212 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120324910533971969[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 08:48:14.212 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120324910533971969[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 08:48:14.212 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120324910533971969[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 08:48:14.212 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120324910533971969[0;39m <==      Total: 15
2021-11-29 08:48:14.218 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120324910533971968[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 08:48:14.219 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120324910533971968[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 08:48:14.220 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120324910533971968[0;39m <==        Row: 2021-11-29, 125, 69, 0, 0
2021-11-29 08:48:14.220 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120324910533971968[0;39m <==      Total: 2
2021-11-29 08:48:14.221 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120324910533971968[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0}],"success":true}
2021-11-29 08:48:14.221 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120324910533971968[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š21 ms -------------
2021-11-29 08:48:14.223 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120324910533971969[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 08:48:14.223 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120324910533971969[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š23 ms -------------
2021-11-29 08:48:14.402 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120324911381221376[0;39m ------------- å¼€å§‹ -------------
2021-11-29 08:48:14.402 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120324911381221376[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 08:48:14.402 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120324911381221376[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 08:48:14.402 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120324911381221376[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 08:48:14.402 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120324911381221376[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 08:48:14.408 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120324911381221376[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 08:48:14.408 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120324911381221376[0;39m ==> Parameters: 0(Long)
2021-11-29 08:48:14.409 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120324911381221376[0;39m <==    Columns: count(0)
2021-11-29 08:48:14.409 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120324911381221376[0;39m <==        Row: 0
2021-11-29 08:48:14.410 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120324911381221376[0;39m <==      Total: 1
2021-11-29 08:48:14.410 INFO  com.suplin.demo.service.EbookTable                :50   [32m120324911381221376[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 08:48:14.410 INFO  com.suplin.demo.service.EbookTable                :51   [32m120324911381221376[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 08:48:14.410 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120324911381221376[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 08:48:14.411 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120324911381221376[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š9 ms -------------
2021-11-29 08:48:41.599 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.2.0.Final
2021-11-29 08:48:41.630 INFO  com.suplin.demo.DemoApplication                   :55   [32m                  [0;39m Starting DemoApplication using Java 1.8.0_212 on DESKTOP-74D8R3R with PID 38048 (C:\Users\Hadoop\Desktop\springboot\target\classes started by Hadoop in C:\Users\Hadoop\Desktop\springboot)
2021-11-29 08:48:41.631 INFO  com.suplin.demo.DemoApplication                   :659  [32m                  [0;39m No active profile set, falling back to default profiles: default
2021-11-29 08:48:41.679 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2021-11-29 08:48:41.680 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2021-11-29 08:48:43.023 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :262  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2021-11-29 08:48:43.025 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :132  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2021-11-29 08:48:43.062 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :201  [32m                  [0;39m Finished Spring Data repository scanning in 21 ms. Found 0 Redis repository interfaces.
2021-11-29 08:48:43.291 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:376  [32m                  [0;39m Bean 'org.apache.rocketmq.spring.autoconfigure.RocketMQAutoConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQAutoConfiguration$$EnhancerBySpringCGLIB$$3b5af022] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-29 08:48:43.302 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:376  [32m                  [0;39m Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-29 08:48:43.425 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:376  [32m                  [0;39m Bean 'defaultMQProducer' of type [org.apache.rocketmq.client.producer.DefaultMQProducer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-29 08:48:43.427 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:376  [32m                  [0;39m Bean 'jacksonConfig' of type [com.suplin.demo.config.JacksonConfig$$EnhancerBySpringCGLIB$$836d2f41] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-29 08:48:43.428 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:376  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperBuilderConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperBuilderConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-29 08:48:43.429 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:376  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-29 08:48:43.432 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:376  [32m                  [0;39m Bean 'spring.jackson-org.springframework.boot.autoconfigure.jackson.JacksonProperties' of type [org.springframework.boot.autoconfigure.jackson.JacksonProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-29 08:48:43.433 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:376  [32m                  [0;39m Bean 'standardJacksonObjectMapperBuilderCustomizer' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration$StandardJackson2ObjectMapperBuilderCustomizer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-29 08:48:43.436 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:376  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$ParameterNamesModuleConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$ParameterNamesModuleConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-29 08:48:43.439 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:376  [32m                  [0;39m Bean 'parameterNamesModule' of type [com.fasterxml.jackson.module.paramnames.ParameterNamesModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-29 08:48:43.439 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:376  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-29 08:48:43.443 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:376  [32m                  [0;39m Bean 'jsonComponentModule' of type [org.springframework.boot.jackson.JsonComponentModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-29 08:48:43.444 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:376  [32m                  [0;39m Bean 'org.springframework.data.web.config.SpringDataJacksonConfiguration' of type [org.springframework.data.web.config.SpringDataJacksonConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-29 08:48:43.446 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:376  [32m                  [0;39m Bean 'jacksonGeoModule' of type [org.springframework.data.geo.GeoModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-29 08:48:43.450 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:376  [32m                  [0;39m Bean 'jacksonObjectMapperBuilder' of type [org.springframework.http.converter.json.Jackson2ObjectMapperBuilder] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-29 08:48:43.467 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:376  [32m                  [0;39m Bean 'jacksonObjectMapper' of type [com.fasterxml.jackson.databind.ObjectMapper] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-29 08:48:43.806 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:376  [32m                  [0;39m Bean 'rocketMQTemplate' of type [org.apache.rocketmq.spring.core.RocketMQTemplate] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-29 08:48:43.807 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:376  [32m                  [0;39m Bean 'transactionHandlerRegistry' of type [org.apache.rocketmq.spring.config.TransactionHandlerRegistry] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-29 08:48:44.207 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8089 (http)
2021-11-29 08:48:44.214 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8089"]
2021-11-29 08:48:44.214 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2021-11-29 08:48:44.214 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.54]
2021-11-29 08:48:44.272 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2021-11-29 08:48:44.273 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :290  [32m                  [0;39m Root WebApplicationContext: initialization completed in 2593 ms
2021-11-29 08:48:45.942 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:48:45.942 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:48:46.133 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2021-11-29 08:48:46.161 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8089"]
2021-11-29 08:48:46.170 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8089 (http) with context path ''
2021-11-29 08:48:46.182 INFO  com.suplin.demo.DemoApplication                   :61   [32m                  [0;39m Started DemoApplication in 4.966 seconds (JVM running for 7.046)
2021-11-29 08:48:46.185 INFO  com.suplin.demo.DemoApplication                   :24   [32m                  [0;39m å¯åŠ¨æˆåŠŸ
2021-11-29 08:48:46.186 INFO  com.suplin.demo.DemoApplication                   :25   [32m                  [0;39m http://localhost:8089
2021-11-29 08:48:50.981 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-11-29 08:48:50.982 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2021-11-29 08:48:50.984 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 2 ms
2021-11-29 08:48:51.022 INFO  com.suplin.demo.websocket.WebSocketServer         :31   [32m                  [0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼šAlw5rE1T46ï¼Œsession idï¼š0ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2021-11-29 08:48:51.106 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120325065303789569[0;39m ------------- å¼€å§‹ -------------
2021-11-29 08:48:51.106 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120325065303789568[0;39m ------------- å¼€å§‹ -------------
2021-11-29 08:48:51.107 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120325065303789568[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 08:48:51.107 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120325065303789569[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 08:48:51.107 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120325065303789568[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 08:48:51.107 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120325065303789569[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 08:48:51.107 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120325065303789569[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 08:48:51.107 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120325065303789568[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 08:48:51.150 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120325065303789569[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 08:48:51.150 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120325065303789568[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 08:48:51.179 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m120325065303789568[0;39m HikariPool-1 - Starting...
2021-11-29 08:48:51.772 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m120325065303789568[0;39m HikariPool-1 - Start completed.
2021-11-29 08:48:51.778 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120325065303789568[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 08:48:51.786 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120325065303789569[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 08:48:51.795 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120325065303789568[0;39m ==> Parameters: 
2021-11-29 08:48:51.795 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120325065303789569[0;39m ==> Parameters: 
2021-11-29 08:48:51.809 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120325065303789568[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 08:48:51.809 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120325065303789569[0;39m <==    Columns: id, parent, name, sort
2021-11-29 08:48:51.810 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120325065303789569[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 08:48:51.810 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120325065303789568[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 08:48:51.811 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120325065303789569[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 08:48:51.811 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120325065303789569[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 08:48:51.812 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120325065303789569[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 08:48:51.812 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120325065303789568[0;39m <==        Row: 2021-11-29, 125, 69, 0, 0
2021-11-29 08:48:51.812 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120325065303789569[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 08:48:51.813 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120325065303789569[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 08:48:51.813 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120325065303789568[0;39m <==      Total: 2
2021-11-29 08:48:51.813 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120325065303789569[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 08:48:51.814 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120325065303789569[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 08:48:51.815 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120325065303789569[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 08:48:51.815 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120325065303789569[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 08:48:51.816 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120325065303789569[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 08:48:51.816 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120325065303789569[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 08:48:51.817 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120325065303789569[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 08:48:51.817 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120325065303789569[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 08:48:51.818 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120325065303789569[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 08:48:51.819 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120325065303789569[0;39m <==      Total: 15
2021-11-29 08:48:51.836 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120325065303789569[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 08:48:51.836 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120325065303789569[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š736 ms -------------
2021-11-29 08:48:51.837 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120325065303789568[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0}],"success":true}
2021-11-29 08:48:51.837 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120325065303789568[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š737 ms -------------
2021-11-29 08:48:52.010 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120325069120606208[0;39m ------------- å¼€å§‹ -------------
2021-11-29 08:48:52.010 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120325069120606208[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 08:48:52.010 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120325069120606208[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 08:48:52.010 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120325069120606208[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 08:48:52.014 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120325069120606208[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 08:48:52.073 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120325069120606208[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 08:48:52.074 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120325069120606208[0;39m ==> Parameters: 0(Long)
2021-11-29 08:48:52.075 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120325069120606208[0;39m <==    Columns: count(0)
2021-11-29 08:48:52.075 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120325069120606208[0;39m <==        Row: 0
2021-11-29 08:48:52.076 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120325069120606208[0;39m <==      Total: 1
2021-11-29 08:48:52.077 INFO  com.suplin.demo.service.EbookTable                :50   [32m120325069120606208[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 08:48:52.078 INFO  com.suplin.demo.service.EbookTable                :51   [32m120325069120606208[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 08:48:52.080 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120325069120606208[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 08:48:52.080 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120325069120606208[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š70 ms -------------
2021-11-29 08:49:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120325102654066688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:49:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120325102654066688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:49:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120325102654066688[0;39m ==> Parameters: 
2021-11-29 08:49:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120325102654066688[0;39m <==    Updates: 0
2021-11-29 08:49:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120325102654066688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 08:49:05.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120325123608809472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:49:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120325123608809472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:49:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120325123608809472[0;39m ==> Parameters: 
2021-11-29 08:49:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120325123608809472[0;39m <==    Updates: 3
2021-11-29 08:49:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120325123608809472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶13æ¯«ç§’
2021-11-29 08:49:15.788 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:49:15.879 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:49:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120325249484066816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:49:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120325249484066816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:49:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120325249484066816[0;39m ==> Parameters: 
2021-11-29 08:49:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120325249484066816[0;39m <==    Updates: 3
2021-11-29 08:49:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120325249484066816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 08:49:45.767 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:49:45.830 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:50:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120325354308112384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:50:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120325354308112384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:50:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120325354308112384[0;39m ==> Parameters: 
2021-11-29 08:50:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120325354308112384[0;39m <==    Updates: 0
2021-11-29 08:50:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120325354308112384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 08:50:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120325375283826688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:50:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120325375283826688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:50:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120325375283826688[0;39m ==> Parameters: 
2021-11-29 08:50:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120325375283826688[0;39m <==    Updates: 3
2021-11-29 08:50:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120325375283826688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 08:50:15.754 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:50:15.865 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:50:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120325501129723904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:50:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120325501129723904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:50:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120325501129723904[0;39m ==> Parameters: 
2021-11-29 08:50:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120325501129723904[0;39m <==    Updates: 3
2021-11-29 08:50:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120325501129723904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 08:50:45.770 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:50:45.863 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:51:00.002 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120325605957963776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:51:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120325605957963776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:51:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120325605957963776[0;39m ==> Parameters: 
2021-11-29 08:51:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120325605957963776[0;39m <==    Updates: 0
2021-11-29 08:51:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120325605957963776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 08:51:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120325626942066688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:51:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120325626942066688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:51:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120325626942066688[0;39m ==> Parameters: 
2021-11-29 08:51:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120325626942066688[0;39m <==    Updates: 3
2021-11-29 08:51:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120325626942066688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶7æ¯«ç§’
2021-11-29 08:51:15.759 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:51:15.883 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:51:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120325752787963904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:51:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120325752787963904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:51:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120325752787963904[0;39m ==> Parameters: 
2021-11-29 08:51:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120325752787963904[0;39m <==    Updates: 3
2021-11-29 08:51:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120325752787963904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶7æ¯«ç§’
2021-11-29 08:51:45.787 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:51:45.865 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:52:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120325857670729728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:52:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120325857670729728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:52:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120325857670729728[0;39m ==> Parameters: 
2021-11-29 08:52:00.020 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120325857670729728[0;39m <==    Updates: 0
2021-11-29 08:52:00.021 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120325857670729728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 08:52:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120325878629666816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:52:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120325878629666816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:52:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120325878629666816[0;39m ==> Parameters: 
2021-11-29 08:52:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120325878629666816[0;39m <==    Updates: 3
2021-11-29 08:52:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120325878629666816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 08:52:15.760 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:52:15.853 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:52:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120326004421038080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:52:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120326004421038080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:52:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120326004421038080[0;39m ==> Parameters: 
2021-11-29 08:52:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120326004421038080[0;39m <==    Updates: 3
2021-11-29 08:52:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120326004421038080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 08:52:45.784 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:52:45.875 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:53:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120326109316386816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:53:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120326109316386816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:53:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120326109316386816[0;39m ==> Parameters: 
2021-11-29 08:53:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120326109316386816[0;39m <==    Updates: 0
2021-11-29 08:53:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120326109316386816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 08:53:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120326130254352384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:53:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120326130254352384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:53:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120326130254352384[0;39m ==> Parameters: 
2021-11-29 08:53:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120326130254352384[0;39m <==    Updates: 3
2021-11-29 08:53:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120326130254352384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 08:53:15.763 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:53:15.875 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:53:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120326256104443904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:53:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120326256104443904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:53:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120326256104443904[0;39m ==> Parameters: 
2021-11-29 08:53:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120326256104443904[0;39m <==    Updates: 3
2021-11-29 08:53:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120326256104443904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶6æ¯«ç§’
2021-11-29 08:53:45.757 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:53:45.883 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:54:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120326360966238208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:54:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120326360966238208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:54:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120326360966238208[0;39m ==> Parameters: 
2021-11-29 08:54:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120326360966238208[0;39m <==    Updates: 0
2021-11-29 08:54:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120326360966238208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 08:54:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120326381908398080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:54:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120326381908398080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:54:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120326381908398080[0;39m ==> Parameters: 
2021-11-29 08:54:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120326381908398080[0;39m <==    Updates: 3
2021-11-29 08:54:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120326381908398080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 08:54:15.783 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:54:15.893 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:54:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120326507792044032[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:54:35.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120326507792044032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:54:35.019 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120326507792044032[0;39m ==> Parameters: 
2021-11-29 08:54:35.021 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120326507792044032[0;39m <==    Updates: 3
2021-11-29 08:54:35.021 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120326507792044032[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 08:54:45.787 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:54:45.894 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:55:00.003 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120326612595118080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:55:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120326612595118080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:55:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120326612595118080[0;39m ==> Parameters: 
2021-11-29 08:55:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120326612595118080[0;39m <==    Updates: 0
2021-11-29 08:55:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120326612595118080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 08:55:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120326633579220992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:55:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120326633579220992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:55:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120326633579220992[0;39m ==> Parameters: 
2021-11-29 08:55:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120326633579220992[0;39m <==    Updates: 3
2021-11-29 08:55:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120326633579220992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 08:55:15.800 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:55:15.848 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:55:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120326759395758080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:55:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120326759395758080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:55:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120326759395758080[0;39m ==> Parameters: 
2021-11-29 08:55:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120326759395758080[0;39m <==    Updates: 3
2021-11-29 08:55:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120326759395758080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶6æ¯«ç§’
2021-11-29 08:55:45.762 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:55:45.885 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:56:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120326864291106816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:56:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120326864291106816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:56:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120326864291106816[0;39m ==> Parameters: 
2021-11-29 08:56:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120326864291106816[0;39m <==    Updates: 0
2021-11-29 08:56:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120326864291106816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 08:56:05.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120326885220683776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:56:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120326885220683776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:56:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120326885220683776[0;39m ==> Parameters: 
2021-11-29 08:56:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120326885220683776[0;39m <==    Updates: 3
2021-11-29 08:56:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120326885220683776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 08:56:15.777 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:56:15.856 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:56:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120327011083358208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:56:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120327011083358208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:56:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120327011083358208[0;39m ==> Parameters: 
2021-11-29 08:56:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120327011083358208[0;39m <==    Updates: 3
2021-11-29 08:56:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120327011083358208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 08:56:45.770 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:56:45.864 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:57:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120327115970318336[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:57:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120327115970318336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:57:00.019 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120327115970318336[0;39m ==> Parameters: 
2021-11-29 08:57:00.022 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120327115970318336[0;39m <==    Updates: 0
2021-11-29 08:57:00.022 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120327115970318336[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 08:57:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120327136912478208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:57:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120327136912478208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:57:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120327136912478208[0;39m ==> Parameters: 
2021-11-29 08:57:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120327136912478208[0;39m <==    Updates: 3
2021-11-29 08:57:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120327136912478208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 08:57:15.778 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:57:15.872 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:57:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120327262766764032[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:57:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120327262766764032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:57:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120327262766764032[0;39m ==> Parameters: 
2021-11-29 08:57:35.019 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120327262766764032[0;39m <==    Updates: 3
2021-11-29 08:57:35.019 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120327262766764032[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 08:57:45.762 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:57:45.870 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:58:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120327367603392512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:58:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120327367603392512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:58:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120327367603392512[0;39m ==> Parameters: 
2021-11-29 08:58:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120327367603392512[0;39m <==    Updates: 0
2021-11-29 08:58:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120327367603392512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 08:58:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120327388587495424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:58:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120327388587495424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:58:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120327388587495424[0;39m ==> Parameters: 
2021-11-29 08:58:05.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120327388587495424[0;39m <==    Updates: 3
2021-11-29 08:58:05.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120327388587495424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 08:58:15.794 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:58:15.858 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:58:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120327514370478080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:58:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120327514370478080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:58:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120327514370478080[0;39m ==> Parameters: 
2021-11-29 08:58:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120327514370478080[0;39m <==    Updates: 3
2021-11-29 08:58:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120327514370478080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 08:58:45.783 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:58:45.862 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:59:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120327619232272384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 08:59:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120327619232272384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 08:59:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120327619232272384[0;39m ==> Parameters: 
2021-11-29 08:59:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120327619232272384[0;39m <==    Updates: 0
2021-11-29 08:59:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120327619232272384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 08:59:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120327640228958208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:59:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120327640228958208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:59:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120327640228958208[0;39m ==> Parameters: 
2021-11-29 08:59:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120327640228958208[0;39m <==    Updates: 3
2021-11-29 08:59:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120327640228958208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 08:59:15.773 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:59:15.882 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:59:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120327766058078208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 08:59:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120327766058078208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 08:59:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120327766058078208[0;39m ==> Parameters: 
2021-11-29 08:59:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120327766058078208[0;39m <==    Updates: 3
2021-11-29 08:59:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120327766058078208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 08:59:45.781 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:59:45.858 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 08:59:49.856 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120327828322521088[0;39m ------------- å¼€å§‹ -------------
2021-11-29 08:59:49.856 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120327828322521088[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 08:59:49.856 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120327828322521088[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 08:59:49.857 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120327828322521088[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 08:59:49.857 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120327828322521088[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 08:59:49.858 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120327828322521088[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 08:59:49.858 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120327828322521088[0;39m ==> Parameters: 
2021-11-29 08:59:49.859 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120327828322521088[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 08:59:49.860 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120327828322521088[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 08:59:49.860 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120327828322521088[0;39m <==        Row: 2021-11-29, 125, 69, 0, 0
2021-11-29 08:59:49.861 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120327828322521088[0;39m <==      Total: 2
2021-11-29 08:59:49.861 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120327828322521088[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0}],"success":true}
2021-11-29 08:59:49.862 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120327828322521088[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2021-11-29 09:00:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120327870924066816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:00:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120327870924066816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:00:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120327870924066816[0;39m ==> Parameters: 
2021-11-29 09:00:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120327870924066816[0;39m <==    Updates: 0
2021-11-29 09:00:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120327870924066816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 09:00:05.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120327891849449472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:00:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120327891849449472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:00:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120327891849449472[0;39m ==> Parameters: 
2021-11-29 09:00:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120327891849449472[0;39m <==    Updates: 3
2021-11-29 09:00:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120327891849449472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶6æ¯«ç§’
2021-11-29 09:00:15.778 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:00:15.886 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:00:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120328017728901120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:00:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120328017728901120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:00:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120328017728901120[0;39m ==> Parameters: 
2021-11-29 09:00:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120328017728901120[0;39m <==    Updates: 3
2021-11-29 09:00:35.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120328017728901120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 09:00:45.768 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:00:45.877 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:00:58.529 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120328116362153984[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:00:58.529 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120328116362153984[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 09:00:58.529 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120328116362153984[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 09:00:58.529 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120328116362153984[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:00:58.530 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120328116362153984[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 09:00:58.531 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120328116362153984[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 09:00:58.531 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120328116362153984[0;39m ==> Parameters: 
2021-11-29 09:00:58.532 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120328116362153984[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 09:00:58.533 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120328116362153984[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 09:00:58.534 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120328116362153984[0;39m <==        Row: 2021-11-29, 125, 69, 0, 0
2021-11-29 09:00:58.534 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120328116362153984[0;39m <==      Total: 2
2021-11-29 09:00:58.534 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120328116362153984[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0}],"success":true}
2021-11-29 09:00:58.535 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120328116362153984[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2021-11-29 09:00:58.563 INFO  com.suplin.demo.interceptor.LoginInterceptor      :29   [32m                  [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2021-11-29 09:00:58.563 INFO  com.suplin.demo.interceptor.LoginInterceptor      :40   [32m                  [0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://127.0.0.1:8089/error
2021-11-29 09:00:58.563 INFO  com.suplin.demo.interceptor.LoginInterceptor      :44   [32m                  [0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼šnull
2021-11-29 09:00:58.563 INFO  com.suplin.demo.interceptor.LoginInterceptor      :46   [32m                  [0;39m tokenä¸ºç©ºï¼Œè¯·æ±‚è¢«æ‹¦æˆª
2021-11-29 09:01:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120328122582306816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:01:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120328122582306816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:01:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120328122582306816[0;39m ==> Parameters: 
2021-11-29 09:01:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120328122582306816[0;39m <==    Updates: 0
2021-11-29 09:01:00.018 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120328122582306816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 09:01:01.511 INFO  com.suplin.demo.websocket.WebSocketServer         :40   [32m                  [0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼šAlw5rE1T46ï¼Œsession idï¼š0ï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2021-11-29 09:01:02.440 INFO  com.suplin.demo.websocket.WebSocketServer         :31   [32m120325065303789569[0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼šMdPAgJALRVï¼Œsession idï¼š1ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2021-11-29 09:01:02.531 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120328133147758592[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:01:02.532 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120328133147758592[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 09:01:02.532 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120328133147758592[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 09:01:02.532 INFO  com.suplin.demo.interceptor.LoginInterceptor      :29   [32m120325065303789568[0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2021-11-29 09:01:02.532 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120328133151952896[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:01:02.533 INFO  com.suplin.demo.interceptor.LoginInterceptor      :40   [32m120325065303789568[0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://127.0.0.1:8089/error
2021-11-29 09:01:02.532 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120328133147758592[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:01:02.533 INFO  com.suplin.demo.interceptor.LoginInterceptor      :44   [32m120325065303789568[0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼šnull
2021-11-29 09:01:02.533 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120328133147758592[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 09:01:02.533 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120328133151952896[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 09:01:02.533 INFO  com.suplin.demo.interceptor.LoginInterceptor      :46   [32m120325065303789568[0;39m tokenä¸ºç©ºï¼Œè¯·æ±‚è¢«æ‹¦æˆª
2021-11-29 09:01:02.533 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120328133151952896[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 09:01:02.533 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120328133151952896[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:01:02.533 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120328133151952896[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 09:01:02.533 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120328133147758592[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 09:01:02.534 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120328133147758592[0;39m ==> Parameters: 
2021-11-29 09:01:02.535 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120328133151952896[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 09:01:02.535 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120328133151952896[0;39m ==> Parameters: 
2021-11-29 09:01:02.535 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120328133147758592[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 09:01:02.535 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120328133147758592[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 09:01:02.536 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120328133151952896[0;39m <==    Columns: id, parent, name, sort
2021-11-29 09:01:02.536 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120328133151952896[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 09:01:02.537 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120328133147758592[0;39m <==        Row: 2021-11-29, 125, 69, 0, 0
2021-11-29 09:01:02.537 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120328133147758592[0;39m <==      Total: 2
2021-11-29 09:01:02.538 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120328133147758592[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0}],"success":true}
2021-11-29 09:01:02.538 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120328133147758592[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2021-11-29 09:01:02.538 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120328133151952896[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 09:01:02.538 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120328133151952896[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 09:01:02.539 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120328133151952896[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 09:01:02.539 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120328133151952896[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 09:01:02.540 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120328133151952896[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 09:01:02.540 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120328133151952896[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 09:01:02.541 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120328133151952896[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 09:01:02.541 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120328133151952896[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 09:01:02.542 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120328133151952896[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 09:01:02.542 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120328133151952896[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 09:01:02.543 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120328133151952896[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 09:01:02.543 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120328133151952896[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 09:01:02.543 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120328133151952896[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 09:01:02.544 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120328133151952896[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 09:01:02.544 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120328133151952896[0;39m <==      Total: 15
2021-11-29 09:01:02.547 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120328133151952896[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 09:01:02.547 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120328133151952896[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š15 ms -------------
2021-11-29 09:01:02.679 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120328133768515584[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:01:02.680 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120328133768515584[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 09:01:02.680 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120328133768515584[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 09:01:02.680 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120328133768515584[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:01:02.680 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120328133768515584[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 09:01:02.682 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120328133768515584[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 09:01:02.683 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120328133768515584[0;39m ==> Parameters: 0(Long)
2021-11-29 09:01:02.684 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120328133768515584[0;39m <==    Columns: count(0)
2021-11-29 09:01:02.684 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120328133768515584[0;39m <==        Row: 0
2021-11-29 09:01:02.685 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120328133768515584[0;39m <==      Total: 1
2021-11-29 09:01:02.685 INFO  com.suplin.demo.service.EbookTable                :50   [32m120328133768515584[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 09:01:02.685 INFO  com.suplin.demo.service.EbookTable                :51   [32m120328133768515584[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 09:01:02.685 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120328133768515584[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 09:01:02.686 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120328133768515584[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2021-11-29 09:01:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120328143570604032[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:01:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120328143570604032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:01:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120328143570604032[0;39m ==> Parameters: 
2021-11-29 09:01:05.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120328143570604032[0;39m <==    Updates: 3
2021-11-29 09:01:05.019 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120328143570604032[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 09:01:09.493 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.2.0.Final
2021-11-29 09:01:09.506 INFO  com.suplin.demo.DemoApplication                   :55   [32m                  [0;39m Starting DemoApplication using Java 1.8.0_212 on DESKTOP-74D8R3R with PID 70212 (C:\Users\Hadoop\Desktop\springboot\target\classes started by Hadoop in C:\Users\Hadoop\Desktop\springboot)
2021-11-29 09:01:09.507 INFO  com.suplin.demo.DemoApplication                   :659  [32m                  [0;39m No active profile set, falling back to default profiles: default
2021-11-29 09:01:09.552 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2021-11-29 09:01:09.552 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2021-11-29 09:01:10.374 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :262  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2021-11-29 09:01:10.377 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :132  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2021-11-29 09:01:10.406 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :201  [32m                  [0;39m Finished Spring Data repository scanning in 16 ms. Found 0 Redis repository interfaces.
2021-11-29 09:01:10.641 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:376  [32m                  [0;39m Bean 'org.apache.rocketmq.spring.autoconfigure.RocketMQAutoConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQAutoConfiguration$$EnhancerBySpringCGLIB$$990ad63] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-29 09:01:10.651 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:376  [32m                  [0;39m Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-29 09:01:10.782 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:376  [32m                  [0;39m Bean 'defaultMQProducer' of type [org.apache.rocketmq.client.producer.DefaultMQProducer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-29 09:01:10.783 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:376  [32m                  [0;39m Bean 'jacksonConfig' of type [com.suplin.demo.config.JacksonConfig$$EnhancerBySpringCGLIB$$51a2ec82] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-29 09:01:10.784 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:376  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperBuilderConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperBuilderConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-29 09:01:10.786 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:376  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-29 09:01:10.790 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:376  [32m                  [0;39m Bean 'spring.jackson-org.springframework.boot.autoconfigure.jackson.JacksonProperties' of type [org.springframework.boot.autoconfigure.jackson.JacksonProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-29 09:01:10.790 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:376  [32m                  [0;39m Bean 'standardJacksonObjectMapperBuilderCustomizer' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration$StandardJackson2ObjectMapperBuilderCustomizer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-29 09:01:10.793 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:376  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$ParameterNamesModuleConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$ParameterNamesModuleConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-29 09:01:10.795 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:376  [32m                  [0;39m Bean 'parameterNamesModule' of type [com.fasterxml.jackson.module.paramnames.ParameterNamesModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-29 09:01:10.796 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:376  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-29 09:01:10.798 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:376  [32m                  [0;39m Bean 'jsonComponentModule' of type [org.springframework.boot.jackson.JsonComponentModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-29 09:01:10.799 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:376  [32m                  [0;39m Bean 'org.springframework.data.web.config.SpringDataJacksonConfiguration' of type [org.springframework.data.web.config.SpringDataJacksonConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-29 09:01:10.802 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:376  [32m                  [0;39m Bean 'jacksonGeoModule' of type [org.springframework.data.geo.GeoModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-29 09:01:10.805 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:376  [32m                  [0;39m Bean 'jacksonObjectMapperBuilder' of type [org.springframework.http.converter.json.Jackson2ObjectMapperBuilder] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-29 09:01:10.821 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:376  [32m                  [0;39m Bean 'jacksonObjectMapper' of type [com.fasterxml.jackson.databind.ObjectMapper] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-29 09:01:11.159 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:376  [32m                  [0;39m Bean 'rocketMQTemplate' of type [org.apache.rocketmq.spring.core.RocketMQTemplate] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-29 09:01:11.160 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:376  [32m                  [0;39m Bean 'transactionHandlerRegistry' of type [org.apache.rocketmq.spring.config.TransactionHandlerRegistry] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-29 09:01:11.568 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8089 (http)
2021-11-29 09:01:11.574 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8089"]
2021-11-29 09:01:11.575 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2021-11-29 09:01:11.575 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.54]
2021-11-29 09:01:11.634 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2021-11-29 09:01:11.635 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :290  [32m                  [0;39m Root WebApplicationContext: initialization completed in 2082 ms
2021-11-29 09:01:13.073 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2021-11-29 09:01:13.105 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8089"]
2021-11-29 09:01:13.115 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8089 (http) with context path ''
2021-11-29 09:01:13.127 INFO  com.suplin.demo.DemoApplication                   :61   [32m                  [0;39m Started DemoApplication in 4.098 seconds (JVM running for 4.715)
2021-11-29 09:01:13.130 INFO  com.suplin.demo.DemoApplication                   :24   [32m                  [0;39m å¯åŠ¨æˆåŠŸ
2021-11-29 09:01:13.130 INFO  com.suplin.demo.DemoApplication                   :25   [32m                  [0;39m http://localhost:8089
2021-11-29 09:01:13.306 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:01:13.312 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:01:26.092 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-11-29 09:01:26.093 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2021-11-29 09:01:26.094 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 1 ms
2021-11-29 09:01:26.146 INFO  com.suplin.demo.websocket.WebSocketServer         :31   [32m                  [0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼š68HsXIeulFï¼Œsession idï¼š0ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2021-11-29 09:01:26.197 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120328232376602626[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:01:26.197 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120328232376602624[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:01:26.197 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120328232376602625[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:01:26.198 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120328232376602625[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 09:01:26.198 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120328232376602624[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 09:01:26.198 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120328232376602626[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 09:01:26.198 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120328232376602625[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 09:01:26.198 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120328232376602626[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 09:01:26.198 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120328232376602624[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 09:01:26.198 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120328232376602625[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:01:26.198 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120328232376602626[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:01:26.198 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120328232376602624[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:01:26.239 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120328232376602625[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 09:01:26.239 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120328232376602624[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 09:01:26.239 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120328232376602626[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 09:01:26.263 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m120328232376602625[0;39m HikariPool-1 - Starting...
2021-11-29 09:01:26.692 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m120328232376602625[0;39m HikariPool-1 - Start completed.
2021-11-29 09:01:26.699 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120328232376602625[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 09:01:26.706 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120328232376602624[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 09:01:26.716 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120328232376602626[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 09:01:26.717 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120328232376602624[0;39m ==> Parameters: 
2021-11-29 09:01:26.717 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120328232376602625[0;39m ==> Parameters: 
2021-11-29 09:01:26.717 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120328232376602626[0;39m ==> Parameters: 
2021-11-29 09:01:26.731 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120328232376602624[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 09:01:26.731 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120328232376602625[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 09:01:26.732 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120328232376602625[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 09:01:26.732 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120328232376602624[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 09:01:26.734 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120328232376602624[0;39m <==        Row: 2021-11-29, 125, 69, 0, 0
2021-11-29 09:01:26.734 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120328232376602625[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 09:01:26.734 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120328232376602624[0;39m <==      Total: 2
2021-11-29 09:01:26.734 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120328232376602625[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 09:01:26.735 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120328232376602625[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 09:01:26.735 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120328232376602625[0;39m <==      Total: 4
2021-11-29 09:01:26.735 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120328232376602626[0;39m <==    Columns: id, parent, name, sort
2021-11-29 09:01:26.735 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120328232376602626[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 09:01:26.736 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120328232376602626[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 09:01:26.736 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120328232376602626[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 09:01:26.737 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120328232376602626[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 09:01:26.737 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120328232376602626[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 09:01:26.737 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120328232376602626[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 09:01:26.738 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120328232376602626[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 09:01:26.738 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120328232376602626[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 09:01:26.739 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120328232376602626[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 09:01:26.739 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120328232376602626[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 09:01:26.740 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120328232376602626[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 09:01:26.740 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120328232376602626[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 09:01:26.741 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120328232376602626[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 09:01:26.741 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120328232376602626[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 09:01:26.741 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120328232376602626[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 09:01:26.742 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120328232376602626[0;39m <==      Total: 15
2021-11-29 09:01:26.758 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120328232376602626[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 09:01:26.758 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120328232376602626[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š569 ms -------------
2021-11-29 09:01:26.760 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120328232376602625[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 09:01:26.760 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120328232376602624[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0}],"success":true}
2021-11-29 09:01:26.760 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120328232376602624[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š571 ms -------------
2021-11-29 09:01:26.760 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120328232376602625[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š571 ms -------------
2021-11-29 09:01:26.926 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120328235467804672[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:01:26.926 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120328235467804672[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 09:01:26.926 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120328235467804672[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 09:01:26.927 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120328235467804672[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:01:26.930 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120328235467804672[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 09:01:26.966 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120328235467804672[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 09:01:26.967 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120328235467804672[0;39m ==> Parameters: 0(Long)
2021-11-29 09:01:26.968 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120328235467804672[0;39m <==    Columns: count(0)
2021-11-29 09:01:26.968 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120328235467804672[0;39m <==        Row: 0
2021-11-29 09:01:26.969 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120328235467804672[0;39m <==      Total: 1
2021-11-29 09:01:26.970 INFO  com.suplin.demo.service.EbookTable                :50   [32m120328235467804672[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 09:01:26.970 INFO  com.suplin.demo.service.EbookTable                :51   [32m120328235467804672[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 09:01:26.972 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120328235467804672[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 09:01:26.972 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120328235467804672[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š46 ms -------------
2021-11-29 09:01:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120328269382946816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:01:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120328269382946816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:01:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120328269382946816[0;39m ==> Parameters: 
2021-11-29 09:01:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120328269382946816[0;39m <==    Updates: 3
2021-11-29 09:01:35.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120328269382946816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 09:01:43.126 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:01:43.235 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:02:00.002 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120328374198603776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:02:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120328374198603776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:02:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120328374198603776[0;39m ==> Parameters: 
2021-11-29 09:02:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120328374198603776[0;39m <==    Updates: 0
2021-11-29 09:02:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120328374198603776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 09:02:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120328395195289600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:02:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120328395195289600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:02:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120328395195289600[0;39m ==> Parameters: 
2021-11-29 09:02:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120328395195289600[0;39m <==    Updates: 3
2021-11-29 09:02:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120328395195289600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 09:02:13.121 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:02:13.230 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:02:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120328521020215296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:02:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120328521020215296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:02:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120328521020215296[0;39m ==> Parameters: 
2021-11-29 09:02:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120328521020215296[0;39m <==    Updates: 3
2021-11-29 09:02:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120328521020215296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 09:02:43.130 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:02:43.240 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:03:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120328625877815296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:03:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120328625877815296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:03:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120328625877815296[0;39m ==> Parameters: 
2021-11-29 09:03:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120328625877815296[0;39m <==    Updates: 0
2021-11-29 09:03:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120328625877815296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2021-11-29 09:03:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120328646874501120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:03:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120328646874501120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:03:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120328646874501120[0;39m ==> Parameters: 
2021-11-29 09:03:05.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120328646874501120[0;39m <==    Updates: 3
2021-11-29 09:03:05.019 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120328646874501120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶6æ¯«ç§’
2021-11-29 09:03:13.131 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:03:13.228 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:03:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120328772707815424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:03:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120328772707815424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:03:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120328772707815424[0;39m ==> Parameters: 
2021-11-29 09:03:35.020 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120328772707815424[0;39m <==    Updates: 3
2021-11-29 09:03:35.021 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120328772707815424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶7æ¯«ç§’
2021-11-29 09:03:43.118 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:03:43.227 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:04:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120328877523472384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:04:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120328877523472384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:04:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120328877523472384[0;39m ==> Parameters: 
2021-11-29 09:04:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120328877523472384[0;39m <==    Updates: 0
2021-11-29 09:04:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120328877523472384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 09:04:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120328898499186688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:04:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120328898499186688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:04:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120328898499186688[0;39m ==> Parameters: 
2021-11-29 09:04:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120328898499186688[0;39m <==    Updates: 3
2021-11-29 09:04:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120328898499186688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 09:04:13.111 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:04:13.238 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:04:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120329024324112384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:04:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120329024324112384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:04:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120329024324112384[0;39m ==> Parameters: 
2021-11-29 09:04:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120329024324112384[0;39m <==    Updates: 3
2021-11-29 09:04:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120329024324112384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 09:04:43.128 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:04:43.238 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:05:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120329129198489600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:05:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120329129198489600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:05:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120329129198489600[0;39m ==> Parameters: 
2021-11-29 09:05:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120329129198489600[0;39m <==    Updates: 0
2021-11-29 09:05:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120329129198489600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 09:05:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120329150165815296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:05:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120329150165815296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:05:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120329150165815296[0;39m ==> Parameters: 
2021-11-29 09:05:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120329150165815296[0;39m <==    Updates: 3
2021-11-29 09:05:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120329150165815296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 09:05:13.132 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:05:13.241 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:05:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120329276011712512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:05:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120329276011712512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:05:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120329276011712512[0;39m ==> Parameters: 
2021-11-29 09:05:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120329276011712512[0;39m <==    Updates: 3
2021-11-29 09:05:35.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120329276011712512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶7æ¯«ç§’
2021-11-29 09:05:43.131 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:05:43.225 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:06:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120329380869312512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:06:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120329380869312512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:06:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120329380869312512[0;39m ==> Parameters: 
2021-11-29 09:06:00.019 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120329380869312512[0;39m <==    Updates: 0
2021-11-29 09:06:00.020 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120329380869312512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2021-11-29 09:06:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120329401857609728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:06:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120329401857609728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:06:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120329401857609728[0;39m ==> Parameters: 
2021-11-29 09:06:05.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120329401857609728[0;39m <==    Updates: 3
2021-11-29 09:06:05.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120329401857609728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 09:06:13.133 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:06:13.242 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:06:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120329527669952512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:06:35.910 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120329527669952512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:06:35.911 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120329527669952512[0;39m ==> Parameters: 
2021-11-29 09:06:35.915 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120329527669952512[0;39m <==    Updates: 3
2021-11-29 09:06:35.916 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120329527669952512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶905æ¯«ç§’
2021-11-29 09:06:43.121 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:06:43.246 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:07:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120329632527552512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:07:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120329632527552512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:07:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120329632527552512[0;39m ==> Parameters: 
2021-11-29 09:07:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120329632527552512[0;39m <==    Updates: 0
2021-11-29 09:07:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120329632527552512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 09:07:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120329653482295296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:07:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120329653482295296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:07:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120329653482295296[0;39m ==> Parameters: 
2021-11-29 09:07:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120329653482295296[0;39m <==    Updates: 3
2021-11-29 09:07:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120329653482295296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 09:07:13.128 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:07:13.238 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:07:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120329779303026688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:07:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120329779303026688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:07:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120329779303026688[0;39m ==> Parameters: 
2021-11-29 09:07:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120329779303026688[0;39m <==    Updates: 3
2021-11-29 09:07:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120329779303026688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 09:07:43.124 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:07:43.236 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:08:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120329884181598208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:08:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120329884181598208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:08:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120329884181598208[0;39m ==> Parameters: 
2021-11-29 09:08:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120329884181598208[0;39m <==    Updates: 0
2021-11-29 09:08:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120329884181598208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 09:08:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120329905127952384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:08:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120329905127952384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:08:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120329905127952384[0;39m ==> Parameters: 
2021-11-29 09:08:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120329905127952384[0;39m <==    Updates: 3
2021-11-29 09:08:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120329905127952384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 09:08:13.137 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:08:13.231 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:08:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120330030969655296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:08:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120330030969655296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:08:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120330030969655296[0;39m ==> Parameters: 
2021-11-29 09:08:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120330030969655296[0;39m <==    Updates: 3
2021-11-29 09:08:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120330030969655296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 09:08:43.132 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:08:43.239 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:09:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120330135852421120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:09:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120330135852421120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:09:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120330135852421120[0;39m ==> Parameters: 
2021-11-29 09:09:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120330135852421120[0;39m <==    Updates: 0
2021-11-29 09:09:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120330135852421120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 09:09:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120330156832329728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:09:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120330156832329728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:09:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120330156832329728[0;39m ==> Parameters: 
2021-11-29 09:09:05.019 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120330156832329728[0;39m <==    Updates: 3
2021-11-29 09:09:05.019 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120330156832329728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 09:09:13.116 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:09:13.210 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:09:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120330282632089600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:09:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120330282632089600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:09:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120330282632089600[0;39m ==> Parameters: 
2021-11-29 09:09:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120330282632089600[0;39m <==    Updates: 3
2021-11-29 09:09:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120330282632089600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 09:09:43.130 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:09:43.238 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:10:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120330387514855424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:10:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120330387514855424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:10:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120330387514855424[0;39m ==> Parameters: 
2021-11-29 09:10:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120330387514855424[0;39m <==    Updates: 0
2021-11-29 09:10:00.018 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120330387514855424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 09:10:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120330408465403904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:10:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120330408465403904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:10:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120330408465403904[0;39m ==> Parameters: 
2021-11-29 09:10:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120330408465403904[0;39m <==    Updates: 3
2021-11-29 09:10:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120330408465403904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 09:10:13.116 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:10:13.224 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:10:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120330534294523904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:10:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120330534294523904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:10:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120330534294523904[0;39m ==> Parameters: 
2021-11-29 09:10:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120330534294523904[0;39m <==    Updates: 3
2021-11-29 09:10:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120330534294523904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 09:10:43.131 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:10:43.241 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:11:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120330639139540992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:11:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120330639139540992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:11:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120330639139540992[0;39m ==> Parameters: 
2021-11-29 09:11:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120330639139540992[0;39m <==    Updates: 0
2021-11-29 09:11:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120330639139540992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 09:11:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120330660106866688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:11:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120330660106866688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:11:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120330660106866688[0;39m ==> Parameters: 
2021-11-29 09:11:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120330660106866688[0;39m <==    Updates: 3
2021-11-29 09:11:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120330660106866688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 09:11:13.146 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:11:13.240 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:11:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120330785927598080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:11:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120330785927598080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:11:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120330785927598080[0;39m ==> Parameters: 
2021-11-29 09:11:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120330785927598080[0;39m <==    Updates: 3
2021-11-29 09:11:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120330785927598080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 09:11:43.140 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:11:43.248 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:12:00.002 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120330890781003776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:12:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120330890781003776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:12:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120330890781003776[0;39m ==> Parameters: 
2021-11-29 09:12:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120330890781003776[0;39m <==    Updates: 0
2021-11-29 09:12:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120330890781003776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 09:12:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120330911756718080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:12:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120330911756718080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:12:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120330911756718080[0;39m ==> Parameters: 
2021-11-29 09:12:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120330911756718080[0;39m <==    Updates: 3
2021-11-29 09:12:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120330911756718080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 09:12:13.131 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:12:13.239 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:12:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120331037627781120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:12:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120331037627781120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:12:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120331037627781120[0;39m ==> Parameters: 
2021-11-29 09:12:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120331037627781120[0;39m <==    Updates: 3
2021-11-29 09:12:35.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120331037627781120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 09:12:43.144 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:12:43.222 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:13:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120331142447632384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:13:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120331142447632384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:13:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120331142447632384[0;39m ==> Parameters: 
2021-11-29 09:13:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120331142447632384[0;39m <==    Updates: 0
2021-11-29 09:13:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120331142447632384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2021-11-29 09:13:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120331163452706816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:13:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120331163452706816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:13:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120331163452706816[0;39m ==> Parameters: 
2021-11-29 09:13:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120331163452706816[0;39m <==    Updates: 3
2021-11-29 09:13:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120331163452706816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 09:13:13.127 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:13:13.254 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:13:33.825 INFO  com.suplin.demo.websocket.WebSocketServer         :31   [32m                  [0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼šLaNuOaaGe3ï¼Œsession idï¼š1ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š2
2021-11-29 09:13:33.847 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120331284395462656[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:13:33.847 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120331284395462657[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:13:33.847 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120331284395462658[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:13:33.847 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120331284395462656[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 09:13:33.848 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120331284395462656[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 09:13:33.847 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120331284395462657[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 09:13:33.847 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120331284395462658[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 09:13:33.848 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120331284395462656[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:13:33.848 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120331284395462657[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 09:13:33.848 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120331284395462658[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 09:13:33.848 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120331284395462656[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 09:13:33.848 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120331284395462657[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:13:33.848 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120331284395462658[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:13:33.848 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120331284395462657[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 09:13:33.848 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120331284395462658[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 09:13:33.849 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120331284395462656[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 09:13:33.849 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120331284395462658[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 09:13:33.849 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120331284395462657[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 09:13:33.850 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120331284395462657[0;39m ==> Parameters: 
2021-11-29 09:13:33.850 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120331284395462658[0;39m ==> Parameters: 
2021-11-29 09:13:33.850 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120331284395462656[0;39m ==> Parameters: 
2021-11-29 09:13:33.851 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120331284395462658[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 09:13:33.851 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120331284395462657[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 09:13:33.851 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120331284395462658[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 09:13:33.851 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120331284395462657[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 09:13:33.852 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120331284395462658[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 09:13:33.852 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120331284395462657[0;39m <==        Row: 2021-11-29, 125, 69, 0, 0
2021-11-29 09:13:33.853 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120331284395462658[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 09:13:33.853 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120331284395462657[0;39m <==      Total: 2
2021-11-29 09:13:33.853 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120331284395462657[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0}],"success":true}
2021-11-29 09:13:33.853 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120331284395462657[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2021-11-29 09:13:33.853 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120331284395462658[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 09:13:33.854 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120331284395462658[0;39m <==      Total: 4
2021-11-29 09:13:33.854 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120331284395462658[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 09:13:33.854 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120331284395462658[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2021-11-29 09:13:33.863 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120331284395462656[0;39m <==    Columns: id, parent, name, sort
2021-11-29 09:13:33.863 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120331284395462656[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 09:13:33.865 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120331284395462656[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 09:13:33.866 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120331284395462656[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 09:13:33.866 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120331284395462656[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 09:13:33.867 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120331284395462656[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 09:13:33.867 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120331284395462656[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 09:13:33.868 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120331284395462656[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 09:13:33.868 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120331284395462656[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 09:13:33.868 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120331284395462656[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 09:13:33.869 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120331284395462656[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 09:13:33.869 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120331284395462656[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 09:13:33.869 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120331284395462656[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 09:13:33.870 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120331284395462656[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 09:13:33.870 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120331284395462656[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 09:13:33.870 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120331284395462656[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 09:13:33.870 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120331284395462656[0;39m <==      Total: 15
2021-11-29 09:13:33.873 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120331284395462656[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 09:13:33.873 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120331284395462656[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š26 ms -------------
2021-11-29 09:13:34.107 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120331285485981696[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:13:34.107 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120331285485981696[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 09:13:34.107 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120331285485981696[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 09:13:34.107 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120331285485981696[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:13:34.108 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120331285485981696[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 09:13:34.109 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120331285485981696[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 09:13:34.110 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120331285485981696[0;39m ==> Parameters: 0(Long)
2021-11-29 09:13:34.110 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120331285485981696[0;39m <==    Columns: count(0)
2021-11-29 09:13:34.111 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120331285485981696[0;39m <==        Row: 0
2021-11-29 09:13:34.111 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120331285485981696[0;39m <==      Total: 1
2021-11-29 09:13:34.112 INFO  com.suplin.demo.service.EbookTable                :50   [32m120331285485981696[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 09:13:34.112 INFO  com.suplin.demo.service.EbookTable                :51   [32m120331285485981696[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 09:13:34.112 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120331285485981696[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 09:13:34.112 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120331285485981696[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 09:13:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120331289273438208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:13:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120331289273438208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:13:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120331289273438208[0;39m ==> Parameters: 
2021-11-29 09:13:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120331289273438208[0;39m <==    Updates: 3
2021-11-29 09:13:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120331289273438208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 09:13:37.972 INFO  com.suplin.demo.websocket.WebSocketServer         :31   [32m120328232376602625[0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼šwlwAdv52d5ï¼Œsession idï¼š2ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š3
2021-11-29 09:13:37.985 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120331301751492608[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:13:37.985 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120331301751492608[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 09:13:37.985 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120331301751492608[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 09:13:37.986 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120331301751492608[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:13:37.986 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120331301751492608[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 09:13:37.986 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120331301755686912[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:13:37.986 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120331301755686912[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 09:13:37.986 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120331301755686913[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:13:37.986 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120331301755686912[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 09:13:37.986 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120331301755686913[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 09:13:37.987 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120331301755686913[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 09:13:37.987 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120331301755686912[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:13:37.987 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120331301755686913[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:13:37.987 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120331301751492608[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 09:13:37.987 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120331301755686912[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 09:13:37.987 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120331301755686913[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 09:13:37.987 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120331301751492608[0;39m ==> Parameters: 
2021-11-29 09:13:37.987 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120331301755686913[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 09:13:37.987 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120331301755686912[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 09:13:37.988 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120331301755686912[0;39m ==> Parameters: 
2021-11-29 09:13:37.988 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120331301755686913[0;39m ==> Parameters: 
2021-11-29 09:13:37.988 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120331301751492608[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 09:13:37.988 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120331301751492608[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 09:13:37.988 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120331301755686913[0;39m <==    Columns: id, parent, name, sort
2021-11-29 09:13:37.988 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120331301755686912[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 09:13:37.989 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120331301755686913[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 09:13:37.989 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120331301755686912[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 09:13:37.989 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120331301751492608[0;39m <==        Row: 2021-11-29, 125, 69, 0, 0
2021-11-29 09:13:37.989 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120331301755686913[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 09:13:37.989 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120331301751492608[0;39m <==      Total: 2
2021-11-29 09:13:37.989 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120331301755686912[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 09:13:37.989 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120331301755686913[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 09:13:37.990 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120331301751492608[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0}],"success":true}
2021-11-29 09:13:37.990 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120331301755686913[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 09:13:37.990 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120331301751492608[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 09:13:37.990 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120331301755686913[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 09:13:37.990 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120331301755686912[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 09:13:37.990 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120331301755686913[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 09:13:37.990 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120331301755686913[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 09:13:37.991 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120331301755686913[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 09:13:37.991 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120331301755686912[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 09:13:37.991 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120331301755686913[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 09:13:37.991 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120331301755686913[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 09:13:37.991 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120331301755686912[0;39m <==      Total: 4
2021-11-29 09:13:37.992 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120331301755686913[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 09:13:37.992 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120331301755686912[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 09:13:37.992 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120331301755686913[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 09:13:37.992 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120331301755686912[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2021-11-29 09:13:37.992 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120331301755686913[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 09:13:37.993 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120331301755686913[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 09:13:37.993 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120331301755686913[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 09:13:37.994 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120331301755686913[0;39m <==      Total: 15
2021-11-29 09:13:37.995 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120331301755686913[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 09:13:37.996 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120331301755686913[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š10 ms -------------
2021-11-29 09:13:38.163 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120331302498078720[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:13:38.163 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120331302498078720[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 09:13:38.163 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120331302498078720[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 09:13:38.164 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120331302498078720[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:13:38.164 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120331302498078720[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 09:13:38.166 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120331302498078720[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 09:13:38.166 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120331302498078720[0;39m ==> Parameters: 0(Long)
2021-11-29 09:13:38.168 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120331302498078720[0;39m <==    Columns: count(0)
2021-11-29 09:13:38.168 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120331302498078720[0;39m <==        Row: 0
2021-11-29 09:13:38.168 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120331302498078720[0;39m <==      Total: 1
2021-11-29 09:13:38.169 INFO  com.suplin.demo.service.EbookTable                :50   [32m120331302498078720[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 09:13:38.169 INFO  com.suplin.demo.service.EbookTable                :51   [32m120331302498078720[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 09:13:38.169 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120331302498078720[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 09:13:38.169 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120331302498078720[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2021-11-29 09:13:43.135 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:13:43.245 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:14:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120331394105872384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:14:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120331394105872384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:14:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120331394105872384[0;39m ==> Parameters: 
2021-11-29 09:14:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120331394105872384[0;39m <==    Updates: 0
2021-11-29 09:14:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120331394105872384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 09:14:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120331415077392384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:14:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120331415077392384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:14:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120331415077392384[0;39m ==> Parameters: 
2021-11-29 09:14:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120331415077392384[0;39m <==    Updates: 3
2021-11-29 09:14:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120331415077392384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 09:14:13.124 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:14:13.248 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:14:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120331540927483904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:14:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120331540927483904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:14:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120331540927483904[0;39m ==> Parameters: 
2021-11-29 09:14:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120331540927483904[0;39m <==    Updates: 3
2021-11-29 09:14:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120331540927483904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶6æ¯«ç§’
2021-11-29 09:14:43.133 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:14:43.243 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:15:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120331645793472512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:15:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120331645793472512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:15:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120331645793472512[0;39m ==> Parameters: 
2021-11-29 09:15:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120331645793472512[0;39m <==    Updates: 0
2021-11-29 09:15:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120331645793472512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 09:15:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120331666781769728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:15:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120331666781769728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:15:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120331666781769728[0;39m ==> Parameters: 
2021-11-29 09:15:05.019 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120331666781769728[0;39m <==    Updates: 3
2021-11-29 09:15:05.020 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120331666781769728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 09:15:13.138 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:15:13.248 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:15:35.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120331792556363776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:15:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120331792556363776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:15:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120331792556363776[0;39m ==> Parameters: 
2021-11-29 09:15:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120331792556363776[0;39m <==    Updates: 3
2021-11-29 09:15:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120331792556363776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 09:15:43.134 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:15:43.227 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:16:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120331897439129600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:16:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120331897439129600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:16:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120331897439129600[0;39m ==> Parameters: 
2021-11-29 09:16:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120331897439129600[0;39m <==    Updates: 0
2021-11-29 09:16:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120331897439129600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 09:16:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120331918427426816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:16:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120331918427426816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:16:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120331918427426816[0;39m ==> Parameters: 
2021-11-29 09:16:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120331918427426816[0;39m <==    Updates: 3
2021-11-29 09:16:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120331918427426816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 09:16:13.136 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:16:13.230 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:16:35.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120332044214603776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:16:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120332044214603776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:16:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120332044214603776[0;39m ==> Parameters: 
2021-11-29 09:16:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120332044214603776[0;39m <==    Updates: 3
2021-11-29 09:16:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120332044214603776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 09:16:43.145 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:16:43.254 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:17:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120332149084786688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:17:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120332149084786688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:17:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120332149084786688[0;39m ==> Parameters: 
2021-11-29 09:17:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120332149084786688[0;39m <==    Updates: 0
2021-11-29 09:17:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120332149084786688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 09:17:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120332170068889600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:17:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120332170068889600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:17:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120332170068889600[0;39m ==> Parameters: 
2021-11-29 09:17:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120332170068889600[0;39m <==    Updates: 3
2021-11-29 09:17:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120332170068889600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 09:17:13.111 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:17:13.233 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:17:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120332295927369728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:17:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120332295927369728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:17:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120332295927369728[0;39m ==> Parameters: 
2021-11-29 09:17:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120332295927369728[0;39m <==    Updates: 3
2021-11-29 09:17:35.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120332295927369728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 09:17:43.121 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:17:43.231 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:18:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120332400763998208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:18:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120332400763998208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:18:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120332400763998208[0;39m ==> Parameters: 
2021-11-29 09:18:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120332400763998208[0;39m <==    Updates: 0
2021-11-29 09:18:00.018 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120332400763998208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 09:18:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120332421706158080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:18:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120332421706158080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:18:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120332421706158080[0;39m ==> Parameters: 
2021-11-29 09:18:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120332421706158080[0;39m <==    Updates: 3
2021-11-29 09:18:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120332421706158080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 09:18:13.144 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:18:13.254 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:18:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120332547547860992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:18:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120332547547860992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:18:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120332547547860992[0;39m ==> Parameters: 
2021-11-29 09:18:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120332547547860992[0;39m <==    Updates: 3
2021-11-29 09:18:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120332547547860992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 09:18:43.114 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:18:43.239 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:19:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120332652397072384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:19:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120332652397072384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:19:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120332652397072384[0;39m ==> Parameters: 
2021-11-29 09:19:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120332652397072384[0;39m <==    Updates: 0
2021-11-29 09:19:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120332652397072384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 09:19:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120332673381175296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:19:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120332673381175296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:19:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120332673381175296[0;39m ==> Parameters: 
2021-11-29 09:19:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120332673381175296[0;39m <==    Updates: 3
2021-11-29 09:19:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120332673381175296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 09:19:13.151 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:19:13.244 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:19:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120332799201906688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:19:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120332799201906688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:19:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120332799201906688[0;39m ==> Parameters: 
2021-11-29 09:19:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120332799201906688[0;39m <==    Updates: 3
2021-11-29 09:19:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120332799201906688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 09:19:43.151 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:19:43.244 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:20:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120332904063700992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:20:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120332904063700992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:20:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120332904063700992[0;39m ==> Parameters: 
2021-11-29 09:20:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120332904063700992[0;39m <==    Updates: 0
2021-11-29 09:20:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120332904063700992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 09:20:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120332925022638080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:20:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120332925022638080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:20:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120332925022638080[0;39m ==> Parameters: 
2021-11-29 09:20:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120332925022638080[0;39m <==    Updates: 3
2021-11-29 09:20:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120332925022638080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 09:20:13.170 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:20:13.249 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:20:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120333050897895424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:20:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120333050897895424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:20:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120333050897895424[0;39m ==> Parameters: 
2021-11-29 09:20:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120333050897895424[0;39m <==    Updates: 3
2021-11-29 09:20:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120333050897895424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 09:20:43.127 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:20:43.236 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:21:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120333155738718208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:21:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120333155738718208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:21:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120333155738718208[0;39m ==> Parameters: 
2021-11-29 09:21:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120333155738718208[0;39m <==    Updates: 0
2021-11-29 09:21:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120333155738718208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 09:21:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120333176714432512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:21:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120333176714432512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:21:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120333176714432512[0;39m ==> Parameters: 
2021-11-29 09:21:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120333176714432512[0;39m <==    Updates: 3
2021-11-29 09:21:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120333176714432512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 09:21:13.128 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:21:13.253 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:21:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120333302543552512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:21:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120333302543552512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:21:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120333302543552512[0;39m ==> Parameters: 
2021-11-29 09:21:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120333302543552512[0;39m <==    Updates: 3
2021-11-29 09:21:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120333302543552512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 09:21:43.143 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:21:43.267 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:22:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120333407405346816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:22:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120333407405346816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:22:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120333407405346816[0;39m ==> Parameters: 
2021-11-29 09:22:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120333407405346816[0;39m <==    Updates: 0
2021-11-29 09:22:00.019 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120333407405346816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 09:22:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120333428360089600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:22:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120333428360089600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:22:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120333428360089600[0;39m ==> Parameters: 
2021-11-29 09:22:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120333428360089600[0;39m <==    Updates: 3
2021-11-29 09:22:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120333428360089600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 09:22:13.145 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:22:13.254 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:22:35.017 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120333554226958336[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:22:35.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120333554226958336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:22:35.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120333554226958336[0;39m ==> Parameters: 
2021-11-29 09:22:35.019 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120333554226958336[0;39m <==    Updates: 3
2021-11-29 09:22:35.020 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120333554226958336[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 09:22:43.154 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:22:43.248 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:23:00.002 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120333659021643776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:23:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120333659021643776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:23:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120333659021643776[0;39m ==> Parameters: 
2021-11-29 09:23:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120333659021643776[0;39m <==    Updates: 0
2021-11-29 09:23:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120333659021643776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 09:23:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120333680018329600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:23:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120333680018329600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:23:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120333680018329600[0;39m ==> Parameters: 
2021-11-29 09:23:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120333680018329600[0;39m <==    Updates: 3
2021-11-29 09:23:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120333680018329600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 09:23:13.144 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:23:13.254 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:23:35.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120333805822283776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:23:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120333805822283776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:23:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120333805822283776[0;39m ==> Parameters: 
2021-11-29 09:23:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120333805822283776[0;39m <==    Updates: 3
2021-11-29 09:23:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120333805822283776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 09:23:43.129 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:23:43.254 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:24:00.002 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120333910679883776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:24:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120333910679883776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:24:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120333910679883776[0;39m ==> Parameters: 
2021-11-29 09:24:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120333910679883776[0;39m <==    Updates: 0
2021-11-29 09:24:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120333910679883776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 09:24:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120333931693346816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:24:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120333931693346816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:24:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120333931693346816[0;39m ==> Parameters: 
2021-11-29 09:24:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120333931693346816[0;39m <==    Updates: 3
2021-11-29 09:24:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120333931693346816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 09:24:13.135 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:24:13.245 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:24:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120334057505689600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:24:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120334057505689600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:24:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120334057505689600[0;39m ==> Parameters: 
2021-11-29 09:24:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120334057505689600[0;39m <==    Updates: 3
2021-11-29 09:24:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120334057505689600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 09:24:43.144 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:24:43.253 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:25:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120334162367483904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:25:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120334162367483904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:25:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120334162367483904[0;39m ==> Parameters: 
2021-11-29 09:25:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120334162367483904[0;39m <==    Updates: 0
2021-11-29 09:25:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120334162367483904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 09:25:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120334183347392512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:25:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120334183347392512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:25:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120334183347392512[0;39m ==> Parameters: 
2021-11-29 09:25:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120334183347392512[0;39m <==    Updates: 3
2021-11-29 09:25:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120334183347392512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 09:25:13.130 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:25:13.253 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:25:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120334309197484032[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:25:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120334309197484032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:25:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120334309197484032[0;39m ==> Parameters: 
2021-11-29 09:25:35.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120334309197484032[0;39m <==    Updates: 3
2021-11-29 09:25:35.019 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120334309197484032[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 09:25:43.146 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:25:43.254 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:26:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120334414050889728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:26:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120334414050889728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:26:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120334414050889728[0;39m ==> Parameters: 
2021-11-29 09:26:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120334414050889728[0;39m <==    Updates: 0
2021-11-29 09:26:00.018 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120334414050889728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 09:26:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120334435018215424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:26:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120334435018215424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:26:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120334435018215424[0;39m ==> Parameters: 
2021-11-29 09:26:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120334435018215424[0;39m <==    Updates: 3
2021-11-29 09:26:05.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120334435018215424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 09:26:13.154 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:26:13.264 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:26:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120334560847335424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:26:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120334560847335424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:26:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120334560847335424[0;39m ==> Parameters: 
2021-11-29 09:26:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120334560847335424[0;39m <==    Updates: 3
2021-11-29 09:26:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120334560847335424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 09:26:43.155 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:26:43.263 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:27:00.002 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120334665654603776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:27:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120334665654603776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:27:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120334665654603776[0;39m ==> Parameters: 
2021-11-29 09:27:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120334665654603776[0;39m <==    Updates: 0
2021-11-29 09:27:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120334665654603776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2021-11-29 09:27:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120334686638706688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:27:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120334686638706688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:27:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120334686638706688[0;39m ==> Parameters: 
2021-11-29 09:27:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120334686638706688[0;39m <==    Updates: 3
2021-11-29 09:27:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120334686638706688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 09:27:13.141 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:27:13.251 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:27:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120334812488798208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:27:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120334812488798208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:27:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120334812488798208[0;39m ==> Parameters: 
2021-11-29 09:27:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120334812488798208[0;39m <==    Updates: 3
2021-11-29 09:27:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120334812488798208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 09:27:43.143 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:27:43.235 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:28:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120334917375758336[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:28:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120334917375758336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:28:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120334917375758336[0;39m ==> Parameters: 
2021-11-29 09:28:00.019 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120334917375758336[0;39m <==    Updates: 0
2021-11-29 09:28:00.020 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120334917375758336[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 09:28:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120334938343084032[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:28:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120334938343084032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:28:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120334938343084032[0;39m ==> Parameters: 
2021-11-29 09:28:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120334938343084032[0;39m <==    Updates: 3
2021-11-29 09:28:05.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120334938343084032[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 09:28:13.154 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:28:13.265 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:28:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120335064121872384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:28:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120335064121872384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:28:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120335064121872384[0;39m ==> Parameters: 
2021-11-29 09:28:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120335064121872384[0;39m <==    Updates: 3
2021-11-29 09:28:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120335064121872384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 09:28:43.162 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:28:43.254 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:29:00.002 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120335168971083776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:29:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120335168971083776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:29:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120335168971083776[0;39m ==> Parameters: 
2021-11-29 09:29:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120335168971083776[0;39m <==    Updates: 0
2021-11-29 09:29:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120335168971083776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 09:29:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120335189971963904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:29:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120335189971963904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:29:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120335189971963904[0;39m ==> Parameters: 
2021-11-29 09:29:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120335189971963904[0;39m <==    Updates: 3
2021-11-29 09:29:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120335189971963904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 09:29:13.141 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:29:13.266 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:29:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120335315775918080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:29:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120335315775918080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:29:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120335315775918080[0;39m ==> Parameters: 
2021-11-29 09:29:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120335315775918080[0;39m <==    Updates: 3
2021-11-29 09:29:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120335315775918080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 09:29:43.136 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:29:43.261 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:30:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120335420637712384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:30:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120335420637712384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:30:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120335420637712384[0;39m ==> Parameters: 
2021-11-29 09:30:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120335420637712384[0;39m <==    Updates: 0
2021-11-29 09:30:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120335420637712384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 09:30:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120335441642786816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:30:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120335441642786816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:30:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120335441642786816[0;39m ==> Parameters: 
2021-11-29 09:30:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120335441642786816[0;39m <==    Updates: 3
2021-11-29 09:30:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120335441642786816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 09:30:13.151 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:30:13.261 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:30:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120335567480295424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:30:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120335567480295424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:30:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120335567480295424[0;39m ==> Parameters: 
2021-11-29 09:30:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120335567480295424[0;39m <==    Updates: 3
2021-11-29 09:30:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120335567480295424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 09:30:43.166 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:30:43.259 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:31:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120335672342089728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:31:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120335672342089728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:31:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120335672342089728[0;39m ==> Parameters: 
2021-11-29 09:31:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120335672342089728[0;39m <==    Updates: 0
2021-11-29 09:31:00.019 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120335672342089728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 09:31:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120335693296832512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:31:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120335693296832512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:31:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120335693296832512[0;39m ==> Parameters: 
2021-11-29 09:31:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120335693296832512[0;39m <==    Updates: 3
2021-11-29 09:31:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120335693296832512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 09:31:13.138 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:31:13.246 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:31:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120335819104980992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:31:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120335819104980992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:31:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120335819104980992[0;39m ==> Parameters: 
2021-11-29 09:31:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120335819104980992[0;39m <==    Updates: 3
2021-11-29 09:31:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120335819104980992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 09:31:43.141 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:31:43.251 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:32:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120335923958386688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:32:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120335923958386688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:32:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120335923958386688[0;39m ==> Parameters: 
2021-11-29 09:32:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120335923958386688[0;39m <==    Updates: 0
2021-11-29 09:32:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120335923958386688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 09:32:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120335944963461120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:32:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120335944963461120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:32:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120335944963461120[0;39m ==> Parameters: 
2021-11-29 09:32:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120335944963461120[0;39m <==    Updates: 3
2021-11-29 09:32:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120335944963461120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 09:32:13.147 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:32:13.257 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:32:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120336070796775424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:32:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120336070796775424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:32:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120336070796775424[0;39m ==> Parameters: 
2021-11-29 09:32:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120336070796775424[0;39m <==    Updates: 3
2021-11-29 09:32:35.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120336070796775424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 09:32:43.153 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:32:43.262 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:33:00.002 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120336175604043776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:33:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120336175604043776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:33:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120336175604043776[0;39m ==> Parameters: 
2021-11-29 09:33:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120336175604043776[0;39m <==    Updates: 0
2021-11-29 09:33:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120336175604043776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 09:33:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120336196613312512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:33:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120336196613312512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:33:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120336196613312512[0;39m ==> Parameters: 
2021-11-29 09:33:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120336196613312512[0;39m <==    Updates: 3
2021-11-29 09:33:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120336196613312512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 09:33:13.153 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:33:13.261 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:33:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120336322455015424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:33:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120336322455015424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:33:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120336322455015424[0;39m ==> Parameters: 
2021-11-29 09:33:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120336322455015424[0;39m <==    Updates: 3
2021-11-29 09:33:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120336322455015424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 09:33:43.153 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:33:43.262 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:34:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120336427283255296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:34:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120336427283255296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:34:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120336427283255296[0;39m ==> Parameters: 
2021-11-29 09:34:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120336427283255296[0;39m <==    Updates: 0
2021-11-29 09:34:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120336427283255296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 09:34:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120336448271552512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:34:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120336448271552512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:34:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120336448271552512[0;39m ==> Parameters: 
2021-11-29 09:34:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120336448271552512[0;39m <==    Updates: 3
2021-11-29 09:34:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120336448271552512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 09:34:13.155 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:34:13.249 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:34:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120336574067118080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:34:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120336574067118080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:34:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120336574067118080[0;39m ==> Parameters: 
2021-11-29 09:34:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120336574067118080[0;39m <==    Updates: 3
2021-11-29 09:34:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120336574067118080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 09:34:43.167 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:34:43.261 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:35:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120336678970855424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:35:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120336678970855424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:35:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120336678970855424[0;39m ==> Parameters: 
2021-11-29 09:35:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120336678970855424[0;39m <==    Updates: 0
2021-11-29 09:35:00.018 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120336678970855424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 09:35:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120336699917209600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:35:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120336699917209600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:35:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120336699917209600[0;39m ==> Parameters: 
2021-11-29 09:35:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120336699917209600[0;39m <==    Updates: 3
2021-11-29 09:35:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120336699917209600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 09:35:13.152 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:35:13.246 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:35:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120336825729552384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:35:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120336825729552384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:35:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120336825729552384[0;39m ==> Parameters: 
2021-11-29 09:35:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120336825729552384[0;39m <==    Updates: 3
2021-11-29 09:35:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120336825729552384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 09:35:43.165 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:35:43.259 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:36:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120336930612318208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:36:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120336930612318208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:36:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120336930612318208[0;39m ==> Parameters: 
2021-11-29 09:36:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120336930612318208[0;39m <==    Updates: 0
2021-11-29 09:36:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120336930612318208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 09:36:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120336951596421120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:36:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120336951596421120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:36:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120336951596421120[0;39m ==> Parameters: 
2021-11-29 09:36:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120336951596421120[0;39m <==    Updates: 3
2021-11-29 09:36:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120336951596421120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 09:36:13.160 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:36:13.269 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:36:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120337077433929728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:36:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120337077433929728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:36:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120337077433929728[0;39m ==> Parameters: 
2021-11-29 09:36:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120337077433929728[0;39m <==    Updates: 3
2021-11-29 09:36:35.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120337077433929728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 09:36:43.159 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:36:43.254 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:37:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120337182253780992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:37:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120337182253780992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:37:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120337182253780992[0;39m ==> Parameters: 
2021-11-29 09:37:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120337182253780992[0;39m <==    Updates: 0
2021-11-29 09:37:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120337182253780992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 09:37:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120337203229495296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:37:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120337203229495296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:37:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120337203229495296[0;39m ==> Parameters: 
2021-11-29 09:37:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120337203229495296[0;39m <==    Updates: 3
2021-11-29 09:37:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120337203229495296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 09:37:13.165 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:37:13.258 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:37:35.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120337329037643776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:37:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120337329037643776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:37:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120337329037643776[0;39m ==> Parameters: 
2021-11-29 09:37:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120337329037643776[0;39m <==    Updates: 3
2021-11-29 09:37:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120337329037643776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 09:37:43.171 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:37:43.265 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:38:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120337433903632384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:38:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120337433903632384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:38:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120337433903632384[0;39m ==> Parameters: 
2021-11-29 09:38:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120337433903632384[0;39m <==    Updates: 0
2021-11-29 09:38:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120337433903632384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 09:38:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120337454900318208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:38:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120337454900318208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:38:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120337454900318208[0;39m ==> Parameters: 
2021-11-29 09:38:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120337454900318208[0;39m <==    Updates: 3
2021-11-29 09:38:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120337454900318208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶6æ¯«ç§’
2021-11-29 09:38:13.158 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:38:13.267 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:38:16.397 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120337502660857856[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:38:16.398 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120337502660857856[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 09:38:16.398 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120337502660857856[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 09:38:16.398 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120337502660857856[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:38:16.398 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120337502660857856[0;39m è¯·æ±‚å‚æ•°: [{"category1Id":100,"page":1,"size":100}]
2021-11-29 09:38:16.400 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120337502660857856[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category1_id = ?)
2021-11-29 09:38:16.401 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120337502660857856[0;39m ==> Parameters: 100(Long)
2021-11-29 09:38:16.401 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120337502660857856[0;39m <==    Columns: count(0)
2021-11-29 09:38:16.401 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120337502660857856[0;39m <==        Row: 2
2021-11-29 09:38:16.402 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120337502660857856[0;39m <==      Total: 1
2021-11-29 09:38:16.403 DEBUG com.suplin.demo.mapper.EbookMapper.selectByExample:137  [32m120337502660857856[0;39m ==>  Preparing: select id, book_name, vote_num, view_num, doc_num, des_cription, category1_id, category2_id, cover from ebook WHERE ( category1_id = ? ) LIMIT ?
2021-11-29 09:38:16.404 DEBUG com.suplin.demo.mapper.EbookMapper.selectByExample:137  [32m120337502660857856[0;39m ==> Parameters: 100(Long), 100(Integer)
2021-11-29 09:38:16.404 TRACE com.suplin.demo.mapper.EbookMapper.selectByExample:143  [32m120337502660857856[0;39m <==    Columns: id, book_name, vote_num, view_num, doc_num, des_cription, category1_id, category2_id, cover
2021-11-29 09:38:16.405 TRACE com.suplin.demo.mapper.EbookMapper.selectByExample:143  [32m120337502660857856[0;39m <==        Row: 116461475903705088, javaWebä»Žå…¥é—¨åˆ°æ”¾å¼ƒ, 49, 69, 6, æ”¾å¼ƒå§å­©å­, 100, 102, /image/cover1.png
2021-11-29 09:38:16.405 TRACE com.suplin.demo.mapper.EbookMapper.selectByExample:143  [32m120337502660857856[0;39m <==        Row: 116465287150309376, javaåŸºç¡€å…¥é—¨åˆ°æ”¾å¼ƒ, 5, 11, 7, æ”¾å¼ƒå§å­©å­, 100, 102, /image/cover2.png
2021-11-29 09:38:16.405 DEBUG com.suplin.demo.mapper.EbookMapper.selectByExample:137  [32m120337502660857856[0;39m <==      Total: 2
2021-11-29 09:38:16.406 INFO  com.suplin.demo.service.EbookTable                :50   [32m120337502660857856[0;39m æ€»è¡Œæ•°ï¼š2
2021-11-29 09:38:16.406 INFO  com.suplin.demo.service.EbookTable                :51   [32m120337502660857856[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 09:38:16.411 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120337502660857856[0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"bookName":"javaWebä»Žå…¥é—¨åˆ°æ”¾å¼ƒ","category1Id":100,"category2Id":102,"cover":"/image/cover1.png","desCription":"æ”¾å¼ƒå§å­©å­","docNum":6,"id":116461475903705088,"viewNum":69,"voteNum":49},{"bookName":"javaåŸºç¡€å…¥é—¨åˆ°æ”¾å¼ƒ","category1Id":100,"category2Id":102,"cover":"/image/cover2.png","desCription":"æ”¾å¼ƒå§å­©å­","docNum":7,"id":116465287150309376,"viewNum":11,"voteNum":5}],"total":2},"success":true}
2021-11-29 09:38:16.411 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120337502660857856[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š14 ms -------------
2021-11-29 09:38:18.960 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120337513410859008[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:38:18.960 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120337513410859008[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 09:38:18.960 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120337513410859008[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 09:38:18.960 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120337513410859008[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:38:18.961 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120337513410859008[0;39m è¯·æ±‚å‚æ•°: [{"category1Id":200,"page":1,"size":100}]
2021-11-29 09:38:18.962 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120337513410859008[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category1_id = ?)
2021-11-29 09:38:18.963 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120337513410859008[0;39m ==> Parameters: 200(Long)
2021-11-29 09:38:18.963 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120337513410859008[0;39m <==    Columns: count(0)
2021-11-29 09:38:18.963 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120337513410859008[0;39m <==        Row: 1
2021-11-29 09:38:18.964 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120337513410859008[0;39m <==      Total: 1
2021-11-29 09:38:18.964 DEBUG com.suplin.demo.mapper.EbookMapper.selectByExample:137  [32m120337513410859008[0;39m ==>  Preparing: select id, book_name, vote_num, view_num, doc_num, des_cription, category1_id, category2_id, cover from ebook WHERE ( category1_id = ? ) LIMIT ?
2021-11-29 09:38:18.964 DEBUG com.suplin.demo.mapper.EbookMapper.selectByExample:137  [32m120337513410859008[0;39m ==> Parameters: 200(Long), 100(Integer)
2021-11-29 09:38:18.966 TRACE com.suplin.demo.mapper.EbookMapper.selectByExample:143  [32m120337513410859008[0;39m <==    Columns: id, book_name, vote_num, view_num, doc_num, des_cription, category1_id, category2_id, cover
2021-11-29 09:38:18.966 TRACE com.suplin.demo.mapper.EbookMapper.selectByExample:143  [32m120337513410859008[0;39m <==        Row: 116468873762574336, pythonå®žæˆ˜, 15, 45, 11, ä¸çŸ¥é“, 200, 201, /image/cover1.png
2021-11-29 09:38:18.967 DEBUG com.suplin.demo.mapper.EbookMapper.selectByExample:137  [32m120337513410859008[0;39m <==      Total: 1
2021-11-29 09:38:18.968 INFO  com.suplin.demo.service.EbookTable                :50   [32m120337513410859008[0;39m æ€»è¡Œæ•°ï¼š1
2021-11-29 09:38:18.968 INFO  com.suplin.demo.service.EbookTable                :51   [32m120337513410859008[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 09:38:18.968 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120337513410859008[0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"bookName":"pythonå®žæˆ˜","category1Id":200,"category2Id":201,"cover":"/image/cover1.png","desCription":"ä¸çŸ¥é“","docNum":11,"id":116468873762574336,"viewNum":45,"voteNum":15}],"total":1},"success":true}
2021-11-29 09:38:18.968 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120337513410859008[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2021-11-29 09:38:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120337580716855296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:38:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120337580716855296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:38:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120337580716855296[0;39m ==> Parameters: 
2021-11-29 09:38:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120337580716855296[0;39m <==    Updates: 3
2021-11-29 09:38:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120337580716855296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 09:38:43.161 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:38:43.270 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:39:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120337685587038208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:39:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120337685587038208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:39:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120337685587038208[0;39m ==> Parameters: 
2021-11-29 09:39:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120337685587038208[0;39m <==    Updates: 0
2021-11-29 09:39:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120337685587038208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 09:39:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120337706545975296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:39:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120337706545975296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:39:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120337706545975296[0;39m ==> Parameters: 
2021-11-29 09:39:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120337706545975296[0;39m <==    Updates: 3
2021-11-29 09:39:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120337706545975296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 09:39:13.169 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:39:13.261 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:39:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120337832366706688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:39:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120337832366706688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:39:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120337832366706688[0;39m ==> Parameters: 
2021-11-29 09:39:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120337832366706688[0;39m <==    Updates: 3
2021-11-29 09:39:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120337832366706688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 09:39:43.154 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:39:43.263 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:40:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120337937245278208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:40:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120337937245278208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:40:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120337937245278208[0;39m ==> Parameters: 
2021-11-29 09:40:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120337937245278208[0;39m <==    Updates: 0
2021-11-29 09:40:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120337937245278208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 09:40:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120337958237769728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:40:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120337958237769728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:40:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120337958237769728[0;39m ==> Parameters: 
2021-11-29 09:40:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120337958237769728[0;39m <==    Updates: 3
2021-11-29 09:40:05.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120337958237769728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 09:40:13.152 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:40:13.261 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:40:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120338084029140992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:40:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120338084029140992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:40:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120338084029140992[0;39m ==> Parameters: 
2021-11-29 09:40:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120338084029140992[0;39m <==    Updates: 3
2021-11-29 09:40:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120338084029140992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 09:40:43.154 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:40:43.278 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:41:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120338188932878336[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:41:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120338188932878336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:41:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120338188932878336[0;39m ==> Parameters: 
2021-11-29 09:41:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120338188932878336[0;39m <==    Updates: 0
2021-11-29 09:41:00.019 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120338188932878336[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 09:41:05.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120338209837289472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:41:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120338209837289472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:41:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120338209837289472[0;39m ==> Parameters: 
2021-11-29 09:41:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120338209837289472[0;39m <==    Updates: 3
2021-11-29 09:41:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120338209837289472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 09:41:13.154 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:41:13.264 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:41:35.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120338335666409472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:41:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120338335666409472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:41:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120338335666409472[0;39m ==> Parameters: 
2021-11-29 09:41:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120338335666409472[0;39m <==    Updates: 3
2021-11-29 09:41:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120338335666409472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 09:41:43.151 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:41:43.276 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:42:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120338440574341120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:42:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120338440574341120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:42:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120338440574341120[0;39m ==> Parameters: 
2021-11-29 09:42:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120338440574341120[0;39m <==    Updates: 0
2021-11-29 09:42:00.019 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120338440574341120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 09:42:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120338461512306688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:42:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120338461512306688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:42:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120338461512306688[0;39m ==> Parameters: 
2021-11-29 09:42:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120338461512306688[0;39m <==    Updates: 3
2021-11-29 09:42:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120338461512306688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 09:42:13.150 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:42:13.244 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:42:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120338587374981120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:42:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120338587374981120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:42:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120338587374981120[0;39m ==> Parameters: 
2021-11-29 09:42:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120338587374981120[0;39m <==    Updates: 3
2021-11-29 09:42:35.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120338587374981120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 09:42:43.169 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:42:43.263 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:43:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120338692249358336[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:43:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120338692249358336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:43:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120338692249358336[0;39m ==> Parameters: 
2021-11-29 09:43:00.020 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120338692249358336[0;39m <==    Updates: 0
2021-11-29 09:43:00.021 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120338692249358336[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 09:43:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120338713195712512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:43:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120338713195712512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:43:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120338713195712512[0;39m ==> Parameters: 
2021-11-29 09:43:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120338713195712512[0;39m <==    Updates: 3
2021-11-29 09:43:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120338713195712512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 09:43:13.176 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:43:13.254 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:43:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120338839037415424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:43:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120338839037415424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:43:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120338839037415424[0;39m ==> Parameters: 
2021-11-29 09:43:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120338839037415424[0;39m <==    Updates: 3
2021-11-29 09:43:35.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120338839037415424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 09:43:43.160 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:43:43.270 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:44:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120338943865655296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:44:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120338943865655296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:44:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120338943865655296[0;39m ==> Parameters: 
2021-11-29 09:44:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120338943865655296[0;39m <==    Updates: 0
2021-11-29 09:44:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120338943865655296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 09:44:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120338964820398080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:44:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120338964820398080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:44:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120338964820398080[0;39m ==> Parameters: 
2021-11-29 09:44:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120338964820398080[0;39m <==    Updates: 3
2021-11-29 09:44:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120338964820398080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 09:44:13.156 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:44:13.265 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:44:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120339090687266816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:44:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120339090687266816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:44:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120339090687266816[0;39m ==> Parameters: 
2021-11-29 09:44:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120339090687266816[0;39m <==    Updates: 3
2021-11-29 09:44:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120339090687266816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 09:44:43.164 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:44:43.242 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:45:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120339195511312384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:45:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120339195511312384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:45:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120339195511312384[0;39m ==> Parameters: 
2021-11-29 09:45:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120339195511312384[0;39m <==    Updates: 0
2021-11-29 09:45:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120339195511312384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 09:45:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120339216516386816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:45:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120339216516386816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:45:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120339216516386816[0;39m ==> Parameters: 
2021-11-29 09:45:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120339216516386816[0;39m <==    Updates: 3
2021-11-29 09:45:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120339216516386816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 09:45:13.156 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:45:13.249 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:45:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120339342353895424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:45:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120339342353895424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:45:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120339342353895424[0;39m ==> Parameters: 
2021-11-29 09:45:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120339342353895424[0;39m <==    Updates: 3
2021-11-29 09:45:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120339342353895424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 09:45:43.158 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:45:43.282 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:46:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120339447182135296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:46:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120339447182135296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:46:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120339447182135296[0;39m ==> Parameters: 
2021-11-29 09:46:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120339447182135296[0;39m <==    Updates: 0
2021-11-29 09:46:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120339447182135296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 09:46:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120339468174626816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:46:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120339468174626816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:46:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120339468174626816[0;39m ==> Parameters: 
2021-11-29 09:46:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120339468174626816[0;39m <==    Updates: 3
2021-11-29 09:46:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120339468174626816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 09:46:13.175 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:46:13.285 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:46:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120339594003746816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:46:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120339594003746816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:46:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120339594003746816[0;39m ==> Parameters: 
2021-11-29 09:46:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120339594003746816[0;39m <==    Updates: 3
2021-11-29 09:46:35.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120339594003746816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 09:46:43.159 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:46:43.269 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:47:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120339698840375296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:47:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120339698840375296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:47:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120339698840375296[0;39m ==> Parameters: 
2021-11-29 09:47:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120339698840375296[0;39m <==    Updates: 0
2021-11-29 09:47:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120339698840375296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 09:47:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120339719816089600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:47:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120339719816089600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:47:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120339719816089600[0;39m ==> Parameters: 
2021-11-29 09:47:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120339719816089600[0;39m <==    Updates: 3
2021-11-29 09:47:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120339719816089600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 09:47:13.160 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:47:13.269 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:47:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120339845657792512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:47:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120339845657792512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:47:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120339845657792512[0;39m ==> Parameters: 
2021-11-29 09:47:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120339845657792512[0;39m <==    Updates: 3
2021-11-29 09:47:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120339845657792512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 09:47:43.155 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:47:43.250 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:48:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120339950519586816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:48:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120339950519586816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:48:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120339950519586816[0;39m ==> Parameters: 
2021-11-29 09:48:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120339950519586816[0;39m <==    Updates: 0
2021-11-29 09:48:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120339950519586816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 09:48:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120339971495301120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:48:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120339971495301120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:48:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120339971495301120[0;39m ==> Parameters: 
2021-11-29 09:48:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120339971495301120[0;39m <==    Updates: 3
2021-11-29 09:48:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120339971495301120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 09:48:13.180 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:48:13.257 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:48:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120340097290866688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:48:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120340097290866688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:48:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120340097290866688[0;39m ==> Parameters: 
2021-11-29 09:48:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120340097290866688[0;39m <==    Updates: 3
2021-11-29 09:48:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120340097290866688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 09:48:43.165 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:48:43.259 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:49:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120340202156855296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:49:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120340202156855296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:49:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120340202156855296[0;39m ==> Parameters: 
2021-11-29 09:49:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120340202156855296[0;39m <==    Updates: 0
2021-11-29 09:49:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120340202156855296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 09:49:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120340223111598080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:49:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120340223111598080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:49:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120340223111598080[0;39m ==> Parameters: 
2021-11-29 09:49:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120340223111598080[0;39m <==    Updates: 3
2021-11-29 09:49:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120340223111598080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 09:49:13.146 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:49:13.272 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:49:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120340348986855424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:49:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120340348986855424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:49:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120340348986855424[0;39m ==> Parameters: 
2021-11-29 09:49:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120340348986855424[0;39m <==    Updates: 3
2021-11-29 09:49:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120340348986855424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 09:49:43.174 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:49:43.269 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:50:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120340453806706688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:50:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120340453806706688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:50:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120340453806706688[0;39m ==> Parameters: 
2021-11-29 09:50:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120340453806706688[0;39m <==    Updates: 0
2021-11-29 09:50:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120340453806706688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 09:50:05.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120340474761449472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:50:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120340474761449472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:50:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120340474761449472[0;39m ==> Parameters: 
2021-11-29 09:50:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120340474761449472[0;39m <==    Updates: 3
2021-11-29 09:50:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120340474761449472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 09:50:13.180 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:50:13.288 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:50:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120340600640901120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:50:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120340600640901120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:50:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120340600640901120[0;39m ==> Parameters: 
2021-11-29 09:50:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120340600640901120[0;39m <==    Updates: 3
2021-11-29 09:50:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120340600640901120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 09:50:43.150 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:50:43.275 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:51:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120340705469140992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:51:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120340705469140992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:51:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120340705469140992[0;39m ==> Parameters: 
2021-11-29 09:51:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120340705469140992[0;39m <==    Updates: 0
2021-11-29 09:51:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120340705469140992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 09:51:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120340726465826816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:51:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120340726465826816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:51:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120340726465826816[0;39m ==> Parameters: 
2021-11-29 09:51:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120340726465826816[0;39m <==    Updates: 3
2021-11-29 09:51:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120340726465826816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 09:51:13.171 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:51:13.282 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:51:35.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120340852248809472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:51:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120340852248809472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:51:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120340852248809472[0;39m ==> Parameters: 
2021-11-29 09:51:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120340852248809472[0;39m <==    Updates: 3
2021-11-29 09:51:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120340852248809472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 09:51:43.173 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:51:43.282 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:52:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120340957165129728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:52:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120340957165129728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:52:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120340957165129728[0;39m ==> Parameters: 
2021-11-29 09:52:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120340957165129728[0;39m <==    Updates: 0
2021-11-29 09:52:00.018 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120340957165129728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 09:52:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120340978132455424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:52:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120340978132455424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:52:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120340978132455424[0;39m ==> Parameters: 
2021-11-29 09:52:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120340978132455424[0;39m <==    Updates: 3
2021-11-29 09:52:05.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120340978132455424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 09:52:06.405 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120340983966732288[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:52:06.406 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120340983966732288[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 09:52:06.406 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120340983966732288[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 09:52:06.406 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120340983966732288[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:52:06.407 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120340983966732288[0;39m è¯·æ±‚å‚æ•°: [{"category1Id":100,"page":1,"size":100}]
2021-11-29 09:52:06.409 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120340983966732288[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category1_id = ?)
2021-11-29 09:52:06.410 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120340983966732288[0;39m ==> Parameters: 100(Long)
2021-11-29 09:52:06.411 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120340983966732288[0;39m <==    Columns: count(0)
2021-11-29 09:52:06.412 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120340983966732288[0;39m <==        Row: 2
2021-11-29 09:52:06.412 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120340983966732288[0;39m <==      Total: 1
2021-11-29 09:52:06.412 DEBUG com.suplin.demo.mapper.EbookMapper.selectByExample:137  [32m120340983966732288[0;39m ==>  Preparing: select id, book_name, vote_num, view_num, doc_num, des_cription, category1_id, category2_id, cover from ebook WHERE ( category1_id = ? ) LIMIT ?
2021-11-29 09:52:06.413 DEBUG com.suplin.demo.mapper.EbookMapper.selectByExample:137  [32m120340983966732288[0;39m ==> Parameters: 100(Long), 100(Integer)
2021-11-29 09:52:06.413 TRACE com.suplin.demo.mapper.EbookMapper.selectByExample:143  [32m120340983966732288[0;39m <==    Columns: id, book_name, vote_num, view_num, doc_num, des_cription, category1_id, category2_id, cover
2021-11-29 09:52:06.414 TRACE com.suplin.demo.mapper.EbookMapper.selectByExample:143  [32m120340983966732288[0;39m <==        Row: 116461475903705088, javaWebä»Žå…¥é—¨åˆ°æ”¾å¼ƒ, 49, 69, 6, æ”¾å¼ƒå§å­©å­, 100, 102, /image/cover1.png
2021-11-29 09:52:06.414 TRACE com.suplin.demo.mapper.EbookMapper.selectByExample:143  [32m120340983966732288[0;39m <==        Row: 116465287150309376, javaåŸºç¡€å…¥é—¨åˆ°æ”¾å¼ƒ, 5, 11, 7, æ”¾å¼ƒå§å­©å­, 100, 102, /image/cover2.png
2021-11-29 09:52:06.414 DEBUG com.suplin.demo.mapper.EbookMapper.selectByExample:137  [32m120340983966732288[0;39m <==      Total: 2
2021-11-29 09:52:06.415 INFO  com.suplin.demo.service.EbookTable                :50   [32m120340983966732288[0;39m æ€»è¡Œæ•°ï¼š2
2021-11-29 09:52:06.415 INFO  com.suplin.demo.service.EbookTable                :51   [32m120340983966732288[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 09:52:06.415 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120340983966732288[0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"bookName":"javaWebä»Žå…¥é—¨åˆ°æ”¾å¼ƒ","category1Id":100,"category2Id":102,"cover":"/image/cover1.png","desCription":"æ”¾å¼ƒå§å­©å­","docNum":6,"id":116461475903705088,"viewNum":69,"voteNum":49},{"bookName":"javaåŸºç¡€å…¥é—¨åˆ°æ”¾å¼ƒ","category1Id":100,"category2Id":102,"cover":"/image/cover2.png","desCription":"æ”¾å¼ƒå§å­©å­","docNum":7,"id":116465287150309376,"viewNum":11,"voteNum":5}],"total":2},"success":true}
2021-11-29 09:52:06.415 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120340983966732288[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š10 ms -------------
2021-11-29 09:52:07.680 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120340989314469888[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:52:07.681 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120340989314469888[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/doc/allDoc/116461475903705088 GET
2021-11-29 09:52:07.681 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120340989314469888[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.DocController.all
2021-11-29 09:52:07.681 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120340989314469888[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:52:07.681 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120340989314469888[0;39m è¯·æ±‚å‚æ•°: [116461475903705088]
2021-11-29 09:52:07.686 DEBUG com.suplin.demo.mapper.DocMapper.selectByExample  :137  [32m120340989314469888[0;39m ==>  Preparing: select father_id, id, `name`, sort, view_count, vote_count, ebook_id, parent from doc WHERE ( ebook_id = ? ) order by sort asc
2021-11-29 09:52:07.686 DEBUG com.suplin.demo.mapper.DocMapper.selectByExample  :137  [32m120340989314469888[0;39m ==> Parameters: 116461475903705088(Long)
2021-11-29 09:52:07.687 TRACE com.suplin.demo.mapper.DocMapper.selectByExample  :143  [32m120340989314469888[0;39m <==    Columns: father_id, id, name, sort, view_count, vote_count, ebook_id, parent
2021-11-29 09:52:07.688 TRACE com.suplin.demo.mapper.DocMapper.selectByExample  :143  [32m120340989314469888[0;39m <==        Row: 44, 118165328508358656, æ–‡æ¡£1, 1, 29, 39, 116461475903705088, 0
2021-11-29 09:52:07.688 TRACE com.suplin.demo.mapper.DocMapper.selectByExample  :143  [32m120340989314469888[0;39m <==        Row: 45, 118165375736221696, æ–‡æ¡£2, 2, 12, 2, 116461475903705088, 0
2021-11-29 09:52:07.688 TRACE com.suplin.demo.mapper.DocMapper.selectByExample  :143  [32m120340989314469888[0;39m <==        Row: 46, 118167320123281408, æ–‡æ¡£3, 3, 11, 2, 116461475903705088, 0
2021-11-29 09:52:07.688 TRACE com.suplin.demo.mapper.DocMapper.selectByExample  :143  [32m120340989314469888[0;39m <==        Row: 70, 118265787587891200, 4, 4, 8, 2, 116461475903705088, 0
2021-11-29 09:52:07.689 TRACE com.suplin.demo.mapper.DocMapper.selectByExample  :143  [32m120340989314469888[0;39m <==        Row: 71, 118265798274977792, 5, 5, 7, 2, 116461475903705088, 0
2021-11-29 09:52:07.689 TRACE com.suplin.demo.mapper.DocMapper.selectByExample  :143  [32m120340989314469888[0;39m <==        Row: 72, 118265808446164992, 6, 6, 2, 2, 116461475903705088, 0
2021-11-29 09:52:07.689 DEBUG com.suplin.demo.mapper.DocMapper.selectByExample  :137  [32m120340989314469888[0;39m <==      Total: 6
2021-11-29 09:52:07.694 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120340989314469888[0;39m è¿”å›žç»“æžœ: {"content":[{"ebookId":116461475903705088,"fatherId":44,"id":118165328508358656,"name":"æ–‡æ¡£1","parent":0,"sort":1,"viewCount":29,"voteCount":39},{"ebookId":116461475903705088,"fatherId":45,"id":118165375736221696,"name":"æ–‡æ¡£2","parent":0,"sort":2,"viewCount":12,"voteCount":2},{"ebookId":116461475903705088,"fatherId":46,"id":118167320123281408,"name":"æ–‡æ¡£3","parent":0,"sort":3,"viewCount":11,"voteCount":2},{"ebookId":116461475903705088,"fatherId":70,"id":118265787587891200,"name":"4","parent":0,"sort":4,"viewCount":8,"voteCount":2},{"ebookId":116461475903705088,"fatherId":71,"id":118265798274977792,"name":"5","parent":0,"sort":5,"viewCount":7,"voteCount":2},{"ebookId":116461475903705088,"fatherId":72,"id":118265808446164992,"name":"6","parent":0,"sort":6,"viewCount":2,"voteCount":2}],"success":true}
2021-11-29 09:52:07.695 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120340989314469888[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š15 ms -------------
2021-11-29 09:52:07.715 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120340989461270528[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:52:07.716 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120340989461270528[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/doc/findContent/118165328508358656 GET
2021-11-29 09:52:07.716 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120340989461270528[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.DocController.findContent
2021-11-29 09:52:07.716 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120340989461270528[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:52:07.716 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120340989461270528[0;39m è¯·æ±‚å‚æ•°: [118165328508358656]
2021-11-29 09:52:07.717 DEBUG c.s.demo.mapper.DocMapperCust.increaseViewCount   :137  [32m120340989461270528[0;39m ==>  Preparing: update doc set view_count = view_count+1 where id = ?;
2021-11-29 09:52:07.718 DEBUG c.s.demo.mapper.DocMapperCust.increaseViewCount   :137  [32m120340989461270528[0;39m ==> Parameters: 118165328508358656(Long)
2021-11-29 09:52:07.804 DEBUG c.s.demo.mapper.DocMapperCust.increaseViewCount   :137  [32m120340989461270528[0;39m <==    Updates: 1
2021-11-29 09:52:07.805 DEBUG c.s.demo.mapper.ContentMapper.selectByPrimaryKey  :137  [32m120340989461270528[0;39m ==>  Preparing: select id , content from content where id = ?
2021-11-29 09:52:07.805 DEBUG c.s.demo.mapper.ContentMapper.selectByPrimaryKey  :137  [32m120340989461270528[0;39m ==> Parameters: 118165328508358656(Long)
2021-11-29 09:52:07.807 TRACE c.s.demo.mapper.ContentMapper.selectByPrimaryKey  :143  [32m120340989461270528[0;39m <==    Columns: id, content
2021-11-29 09:52:07.808 TRACE c.s.demo.mapper.ContentMapper.selectByPrimaryKey  :143  [32m120340989461270528[0;39m <==        Row: 118165328508358656, <<BLOB>>
2021-11-29 09:52:07.808 DEBUG c.s.demo.mapper.ContentMapper.selectByPrimaryKey  :137  [32m120340989461270528[0;39m <==      Total: 1
2021-11-29 09:52:07.808 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120340989461270528[0;39m è¿”å›žç»“æžœ: {"content":"","success":true}
2021-11-29 09:52:07.808 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120340989461270528[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š93 ms -------------
2021-11-29 09:52:08.787 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120340993957564416[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:52:08.788 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120340993957564416[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/doc/vote/118165328508358656 GET
2021-11-29 09:52:08.788 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120340993957564416[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.DocController.vote
2021-11-29 09:52:08.788 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120340993957564416[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:52:08.788 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120340993957564416[0;39m è¯·æ±‚å‚æ•°: [118165328508358656]
2021-11-29 09:52:09.000 INFO  com.suplin.demo.util.RedisUtil                    :31   [32m120340993957564416[0;39m keyä¸å­˜åœ¨ï¼Œæ”¾å…¥ï¼šDOC_VOTE_118165328508358656_127.0.0.1ï¼Œè¿‡æœŸ 5000 ç§’
2021-11-29 09:52:09.005 DEBUG c.s.demo.mapper.DocMapperCust.increaseVoteCount   :137  [32m120340993957564416[0;39m ==>  Preparing: update doc set vote_count = vote_count+1 where id = ?;
2021-11-29 09:52:09.005 DEBUG c.s.demo.mapper.DocMapperCust.increaseVoteCount   :137  [32m120340993957564416[0;39m ==> Parameters: 118165328508358656(Long)
2021-11-29 09:52:09.072 DEBUG c.s.demo.mapper.DocMapperCust.increaseVoteCount   :137  [32m120340993957564416[0;39m <==    Updates: 1
2021-11-29 09:52:09.073 DEBUG com.suplin.demo.mapper.DocMapper.selectByExample  :137  [32m120340993957564416[0;39m ==>  Preparing: select father_id, id, `name`, sort, view_count, vote_count, ebook_id, parent from doc WHERE ( id = ? )
2021-11-29 09:52:09.073 DEBUG com.suplin.demo.mapper.DocMapper.selectByExample  :137  [32m120340993957564416[0;39m ==> Parameters: 118165328508358656(Long)
2021-11-29 09:52:09.074 TRACE com.suplin.demo.mapper.DocMapper.selectByExample  :143  [32m120340993957564416[0;39m <==    Columns: father_id, id, name, sort, view_count, vote_count, ebook_id, parent
2021-11-29 09:52:09.074 TRACE com.suplin.demo.mapper.DocMapper.selectByExample  :143  [32m120340993957564416[0;39m <==        Row: 44, 118165328508358656, æ–‡æ¡£1, 1, 30, 40, 116461475903705088, 0
2021-11-29 09:52:09.075 DEBUG com.suplin.demo.mapper.DocMapper.selectByExample  :137  [32m120340993957564416[0;39m <==      Total: 1
2021-11-29 09:52:09.077 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120340993957564416[0;39m è¿”å›žç»“æžœ: {"success":true}
2021-11-29 09:52:09.077 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120340993957564416[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š290 ms -------------
2021-11-29 09:52:09.083 INFO  com.suplin.demo.websocket.WebSocketServer         :70   [32m120340993957564416[0;39m æŽ¨é€æ¶ˆæ¯ï¼šwlwAdv52d5ï¼Œå†…å®¹ï¼š[æ–‡æ¡£1]è¢«ç‚¹èµžï¼
2021-11-29 09:52:09.083 INFO  com.suplin.demo.websocket.WebSocketServer         :70   [32m120340993957564416[0;39m æŽ¨é€æ¶ˆæ¯ï¼šLaNuOaaGe3ï¼Œå†…å®¹ï¼š[æ–‡æ¡£1]è¢«ç‚¹èµžï¼
2021-11-29 09:52:09.084 INFO  com.suplin.demo.websocket.WebSocketServer         :70   [32m120340993957564416[0;39m æŽ¨é€æ¶ˆæ¯ï¼š68HsXIeulFï¼Œå†…å®¹ï¼š[æ–‡æ¡£1]è¢«ç‚¹èµžï¼
2021-11-29 09:52:13.128 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:52:13.234 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:52:15.374 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120341021585444864[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:52:15.374 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120341021585444864[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/doc/findContent/118165375736221696 GET
2021-11-29 09:52:15.375 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120341021585444864[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.DocController.findContent
2021-11-29 09:52:15.375 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120341021585444864[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:52:15.375 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120341021585444864[0;39m è¯·æ±‚å‚æ•°: [118165375736221696]
2021-11-29 09:52:15.375 DEBUG c.s.demo.mapper.DocMapperCust.increaseViewCount   :137  [32m120341021585444864[0;39m ==>  Preparing: update doc set view_count = view_count+1 where id = ?;
2021-11-29 09:52:15.376 DEBUG c.s.demo.mapper.DocMapperCust.increaseViewCount   :137  [32m120341021585444864[0;39m ==> Parameters: 118165375736221696(Long)
2021-11-29 09:52:15.441 DEBUG c.s.demo.mapper.DocMapperCust.increaseViewCount   :137  [32m120341021585444864[0;39m <==    Updates: 1
2021-11-29 09:52:15.441 DEBUG c.s.demo.mapper.ContentMapper.selectByPrimaryKey  :137  [32m120341021585444864[0;39m ==>  Preparing: select id , content from content where id = ?
2021-11-29 09:52:15.442 DEBUG c.s.demo.mapper.ContentMapper.selectByPrimaryKey  :137  [32m120341021585444864[0;39m ==> Parameters: 118165375736221696(Long)
2021-11-29 09:52:15.442 TRACE c.s.demo.mapper.ContentMapper.selectByPrimaryKey  :143  [32m120341021585444864[0;39m <==    Columns: id, content
2021-11-29 09:52:15.442 TRACE c.s.demo.mapper.ContentMapper.selectByPrimaryKey  :143  [32m120341021585444864[0;39m <==        Row: 118165375736221696, <<BLOB>>
2021-11-29 09:52:15.443 DEBUG c.s.demo.mapper.ContentMapper.selectByPrimaryKey  :137  [32m120341021585444864[0;39m <==      Total: 1
2021-11-29 09:52:15.443 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120341021585444864[0;39m è¿”å›žç»“æžœ: {"content":"","success":true}
2021-11-29 09:52:15.443 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120341021585444864[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š69 ms -------------
2021-11-29 09:52:16.165 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120341024903139328[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:52:16.165 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120341024903139328[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/doc/findContent/118167320123281408 GET
2021-11-29 09:52:16.166 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120341024903139328[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.DocController.findContent
2021-11-29 09:52:16.166 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120341024903139328[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:52:16.166 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120341024903139328[0;39m è¯·æ±‚å‚æ•°: [118167320123281408]
2021-11-29 09:52:16.166 DEBUG c.s.demo.mapper.DocMapperCust.increaseViewCount   :137  [32m120341024903139328[0;39m ==>  Preparing: update doc set view_count = view_count+1 where id = ?;
2021-11-29 09:52:16.167 DEBUG c.s.demo.mapper.DocMapperCust.increaseViewCount   :137  [32m120341024903139328[0;39m ==> Parameters: 118167320123281408(Long)
2021-11-29 09:52:16.232 DEBUG c.s.demo.mapper.DocMapperCust.increaseViewCount   :137  [32m120341024903139328[0;39m <==    Updates: 1
2021-11-29 09:52:16.232 DEBUG c.s.demo.mapper.ContentMapper.selectByPrimaryKey  :137  [32m120341024903139328[0;39m ==>  Preparing: select id , content from content where id = ?
2021-11-29 09:52:16.232 DEBUG c.s.demo.mapper.ContentMapper.selectByPrimaryKey  :137  [32m120341024903139328[0;39m ==> Parameters: 118167320123281408(Long)
2021-11-29 09:52:16.233 TRACE c.s.demo.mapper.ContentMapper.selectByPrimaryKey  :143  [32m120341024903139328[0;39m <==    Columns: id, content
2021-11-29 09:52:16.233 TRACE c.s.demo.mapper.ContentMapper.selectByPrimaryKey  :143  [32m120341024903139328[0;39m <==        Row: 118167320123281408, <<BLOB>>
2021-11-29 09:52:16.233 DEBUG c.s.demo.mapper.ContentMapper.selectByPrimaryKey  :137  [32m120341024903139328[0;39m <==      Total: 1
2021-11-29 09:52:16.234 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120341024903139328[0;39m è¿”å›žç»“æžœ: {"content":"","success":true}
2021-11-29 09:52:16.234 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120341024903139328[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š69 ms -------------
2021-11-29 09:52:16.947 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120341028183085056[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:52:16.947 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120341028183085056[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/doc/vote/118167320123281408 GET
2021-11-29 09:52:16.947 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120341028183085056[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.DocController.vote
2021-11-29 09:52:16.948 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120341028183085056[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:52:16.948 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120341028183085056[0;39m è¯·æ±‚å‚æ•°: [118167320123281408]
2021-11-29 09:52:16.949 INFO  com.suplin.demo.util.RedisUtil                    :31   [32m120341028183085056[0;39m keyä¸å­˜åœ¨ï¼Œæ”¾å…¥ï¼šDOC_VOTE_118167320123281408_127.0.0.1ï¼Œè¿‡æœŸ 5000 ç§’
2021-11-29 09:52:16.950 DEBUG c.s.demo.mapper.DocMapperCust.increaseVoteCount   :137  [32m120341028183085056[0;39m ==>  Preparing: update doc set vote_count = vote_count+1 where id = ?;
2021-11-29 09:52:16.950 DEBUG c.s.demo.mapper.DocMapperCust.increaseVoteCount   :137  [32m120341028183085056[0;39m ==> Parameters: 118167320123281408(Long)
2021-11-29 09:52:17.057 DEBUG c.s.demo.mapper.DocMapperCust.increaseVoteCount   :137  [32m120341028183085056[0;39m <==    Updates: 1
2021-11-29 09:52:17.058 DEBUG com.suplin.demo.mapper.DocMapper.selectByExample  :137  [32m120341028183085056[0;39m ==>  Preparing: select father_id, id, `name`, sort, view_count, vote_count, ebook_id, parent from doc WHERE ( id = ? )
2021-11-29 09:52:17.058 DEBUG com.suplin.demo.mapper.DocMapper.selectByExample  :137  [32m120341028183085056[0;39m ==> Parameters: 118167320123281408(Long)
2021-11-29 09:52:17.059 TRACE com.suplin.demo.mapper.DocMapper.selectByExample  :143  [32m120341028183085056[0;39m <==    Columns: father_id, id, name, sort, view_count, vote_count, ebook_id, parent
2021-11-29 09:52:17.059 TRACE com.suplin.demo.mapper.DocMapper.selectByExample  :143  [32m120341028183085056[0;39m <==        Row: 46, 118167320123281408, æ–‡æ¡£3, 3, 12, 3, 116461475903705088, 0
2021-11-29 09:52:17.059 DEBUG com.suplin.demo.mapper.DocMapper.selectByExample  :137  [32m120341028183085056[0;39m <==      Total: 1
2021-11-29 09:52:17.060 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120341028183085056[0;39m è¿”å›žç»“æžœ: {"success":true}
2021-11-29 09:52:17.061 INFO  com.suplin.demo.websocket.WebSocketServer         :70   [32m120341028183085056[0;39m æŽ¨é€æ¶ˆæ¯ï¼šwlwAdv52d5ï¼Œå†…å®¹ï¼š[æ–‡æ¡£3]è¢«ç‚¹èµžï¼
2021-11-29 09:52:17.061 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120341028183085056[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š114 ms -------------
2021-11-29 09:52:17.061 INFO  com.suplin.demo.websocket.WebSocketServer         :70   [32m120341028183085056[0;39m æŽ¨é€æ¶ˆæ¯ï¼šLaNuOaaGe3ï¼Œå†…å®¹ï¼š[æ–‡æ¡£3]è¢«ç‚¹èµžï¼
2021-11-29 09:52:17.062 INFO  com.suplin.demo.websocket.WebSocketServer         :70   [32m120341028183085056[0;39m æŽ¨é€æ¶ˆæ¯ï¼š68HsXIeulFï¼Œå†…å®¹ï¼š[æ–‡æ¡£3]è¢«ç‚¹èµžï¼
2021-11-29 09:52:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120341103928020992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:52:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120341103928020992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:52:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120341103928020992[0;39m ==> Parameters: 
2021-11-29 09:52:35.696 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120341103928020992[0;39m <==    Updates: 3
2021-11-29 09:52:35.699 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120341103928020992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶693æ¯«ç§’
2021-11-29 09:52:41.194 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.2.0.Final
2021-11-29 09:52:41.253 INFO  com.suplin.demo.DemoApplication                   :55   [32m                  [0;39m Starting DemoApplication using Java 1.8.0_212 on DESKTOP-74D8R3R with PID 64064 (C:\Users\Hadoop\Desktop\springboot\target\classes started by Hadoop in C:\Users\Hadoop\Desktop\springboot)
2021-11-29 09:52:41.254 INFO  com.suplin.demo.DemoApplication                   :659  [32m                  [0;39m No active profile set, falling back to default profiles: default
2021-11-29 09:52:41.324 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2021-11-29 09:52:41.324 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2021-11-29 09:52:42.264 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :262  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2021-11-29 09:52:42.267 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :132  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2021-11-29 09:52:42.301 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :201  [32m                  [0;39m Finished Spring Data repository scanning in 21 ms. Found 0 Redis repository interfaces.
2021-11-29 09:52:42.590 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:376  [32m                  [0;39m Bean 'org.apache.rocketmq.spring.autoconfigure.RocketMQAutoConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQAutoConfiguration$$EnhancerBySpringCGLIB$$5eca98b4] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-29 09:52:42.599 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:376  [32m                  [0;39m Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-29 09:52:42.733 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:376  [32m                  [0;39m Bean 'defaultMQProducer' of type [org.apache.rocketmq.client.producer.DefaultMQProducer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-29 09:52:42.734 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:376  [32m                  [0;39m Bean 'jacksonConfig' of type [com.suplin.demo.config.JacksonConfig$$EnhancerBySpringCGLIB$$a6dcd7d3] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-29 09:52:42.736 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:376  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperBuilderConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperBuilderConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-29 09:52:42.737 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:376  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-29 09:52:42.740 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:376  [32m                  [0;39m Bean 'spring.jackson-org.springframework.boot.autoconfigure.jackson.JacksonProperties' of type [org.springframework.boot.autoconfigure.jackson.JacksonProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-29 09:52:42.741 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:376  [32m                  [0;39m Bean 'standardJacksonObjectMapperBuilderCustomizer' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration$StandardJackson2ObjectMapperBuilderCustomizer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-29 09:52:42.743 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:376  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$ParameterNamesModuleConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$ParameterNamesModuleConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-29 09:52:42.747 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:376  [32m                  [0;39m Bean 'parameterNamesModule' of type [com.fasterxml.jackson.module.paramnames.ParameterNamesModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-29 09:52:42.747 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:376  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-29 09:52:42.750 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:376  [32m                  [0;39m Bean 'jsonComponentModule' of type [org.springframework.boot.jackson.JsonComponentModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-29 09:52:42.751 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:376  [32m                  [0;39m Bean 'org.springframework.data.web.config.SpringDataJacksonConfiguration' of type [org.springframework.data.web.config.SpringDataJacksonConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-29 09:52:42.754 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:376  [32m                  [0;39m Bean 'jacksonGeoModule' of type [org.springframework.data.geo.GeoModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-29 09:52:42.758 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:376  [32m                  [0;39m Bean 'jacksonObjectMapperBuilder' of type [org.springframework.http.converter.json.Jackson2ObjectMapperBuilder] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-29 09:52:42.776 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:376  [32m                  [0;39m Bean 'jacksonObjectMapper' of type [com.fasterxml.jackson.databind.ObjectMapper] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-29 09:52:43.103 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:376  [32m                  [0;39m Bean 'rocketMQTemplate' of type [org.apache.rocketmq.spring.core.RocketMQTemplate] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-29 09:52:43.104 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:376  [32m                  [0;39m Bean 'transactionHandlerRegistry' of type [org.apache.rocketmq.spring.config.TransactionHandlerRegistry] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-29 09:52:43.532 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8089 (http)
2021-11-29 09:52:43.540 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8089"]
2021-11-29 09:52:43.541 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2021-11-29 09:52:43.541 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.54]
2021-11-29 09:52:43.595 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2021-11-29 09:52:43.596 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :290  [32m                  [0;39m Root WebApplicationContext: initialization completed in 2271 ms
2021-11-29 09:52:45.240 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:52:45.270 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:52:45.651 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2021-11-29 09:52:45.683 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8089"]
2021-11-29 09:52:45.693 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8089 (http) with context path ''
2021-11-29 09:52:45.708 INFO  com.suplin.demo.DemoApplication                   :61   [32m                  [0;39m Started DemoApplication in 5.091 seconds (JVM running for 6.412)
2021-11-29 09:52:45.712 INFO  com.suplin.demo.DemoApplication                   :24   [32m                  [0;39m å¯åŠ¨æˆåŠŸ
2021-11-29 09:52:45.713 INFO  com.suplin.demo.DemoApplication                   :25   [32m                  [0;39m http://localhost:8089
2021-11-29 09:52:53.695 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-11-29 09:52:53.696 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2021-11-29 09:52:53.697 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 1 ms
2021-11-29 09:52:53.739 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120341182466363392[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:52:53.740 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120341182466363392[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/doc/findContent/118265787587891200 GET
2021-11-29 09:52:53.740 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120341182466363392[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.DocController.findContent
2021-11-29 09:52:53.740 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120341182466363392[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:52:53.768 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120341182466363392[0;39m è¯·æ±‚å‚æ•°: [118265787587891200]
2021-11-29 09:52:53.786 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m120341182466363392[0;39m HikariPool-1 - Starting...
2021-11-29 09:52:54.067 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m120341182466363392[0;39m HikariPool-1 - Start completed.
2021-11-29 09:52:54.072 DEBUG c.s.demo.mapper.DocMapperCust.increaseViewCount   :137  [32m120341182466363392[0;39m ==>  Preparing: update doc set view_count = view_count+1 where id = ?;
2021-11-29 09:52:54.087 DEBUG c.s.demo.mapper.DocMapperCust.increaseViewCount   :137  [32m120341182466363392[0;39m ==> Parameters: 118265787587891200(Long)
2021-11-29 09:52:54.565 DEBUG c.s.demo.mapper.DocMapperCust.increaseViewCount   :137  [32m120341182466363392[0;39m <==    Updates: 1
2021-11-29 09:52:54.685 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120341186467729408[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:52:54.686 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120341186467729408[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/doc/vote/118265787587891200 GET
2021-11-29 09:52:54.686 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120341186467729408[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.DocController.vote
2021-11-29 09:52:54.686 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120341186467729408[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:52:54.686 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120341186467729408[0;39m è¯·æ±‚å‚æ•°: [118265787587891200]
2021-11-29 09:52:54.691 DEBUG c.s.demo.mapper.ContentMapper.selectByPrimaryKey  :137  [32m120341182466363392[0;39m ==>  Preparing: select id , content from content where id = ?
2021-11-29 09:52:54.691 DEBUG c.s.demo.mapper.ContentMapper.selectByPrimaryKey  :137  [32m120341182466363392[0;39m ==> Parameters: 118265787587891200(Long)
2021-11-29 09:52:54.730 TRACE c.s.demo.mapper.ContentMapper.selectByPrimaryKey  :143  [32m120341182466363392[0;39m <==    Columns: id, content
2021-11-29 09:52:54.730 TRACE c.s.demo.mapper.ContentMapper.selectByPrimaryKey  :143  [32m120341182466363392[0;39m <==        Row: 118265787587891200, <<BLOB>>
2021-11-29 09:52:54.731 DEBUG c.s.demo.mapper.ContentMapper.selectByPrimaryKey  :137  [32m120341182466363392[0;39m <==      Total: 1
2021-11-29 09:52:54.747 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120341182466363392[0;39m è¿”å›žç»“æžœ: {"content":"","success":true}
2021-11-29 09:52:54.748 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120341182466363392[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š1017 ms -------------
2021-11-29 09:52:54.838 INFO  com.suplin.demo.util.RedisUtil                    :31   [32m120341186467729408[0;39m keyä¸å­˜åœ¨ï¼Œæ”¾å…¥ï¼šDOC_VOTE_118265787587891200_127.0.0.1ï¼Œè¿‡æœŸ 5000 ç§’
2021-11-29 09:52:54.843 DEBUG c.s.demo.mapper.DocMapperCust.increaseVoteCount   :137  [32m120341186467729408[0;39m ==>  Preparing: update doc set vote_count = vote_count+1 where id = ?;
2021-11-29 09:52:54.844 DEBUG c.s.demo.mapper.DocMapperCust.increaseVoteCount   :137  [32m120341186467729408[0;39m ==> Parameters: 118265787587891200(Long)
2021-11-29 09:52:55.474 DEBUG c.s.demo.mapper.DocMapperCust.increaseVoteCount   :137  [32m120341186467729408[0;39m <==    Updates: 1
2021-11-29 09:52:55.496 DEBUG com.suplin.demo.mapper.DocMapper.selectByExample  :137  [32m120341186467729408[0;39m ==>  Preparing: select father_id, id, `name`, sort, view_count, vote_count, ebook_id, parent from doc WHERE ( id = ? )
2021-11-29 09:52:55.496 DEBUG com.suplin.demo.mapper.DocMapper.selectByExample  :137  [32m120341186467729408[0;39m ==> Parameters: 118265787587891200(Long)
2021-11-29 09:52:55.497 TRACE com.suplin.demo.mapper.DocMapper.selectByExample  :143  [32m120341186467729408[0;39m <==    Columns: father_id, id, name, sort, view_count, vote_count, ebook_id, parent
2021-11-29 09:52:55.497 TRACE com.suplin.demo.mapper.DocMapper.selectByExample  :143  [32m120341186467729408[0;39m <==        Row: 70, 118265787587891200, 4, 4, 9, 3, 116461475903705088, 0
2021-11-29 09:52:55.498 DEBUG com.suplin.demo.mapper.DocMapper.selectByExample  :137  [32m120341186467729408[0;39m <==      Total: 1
2021-11-29 09:52:55.500 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120341186467729408[0;39m è¿”å›žç»“æžœ: {"success":true}
2021-11-29 09:52:55.500 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120341186467729408[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š815 ms -------------
2021-11-29 09:52:56.869 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120341195628089344[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:52:56.870 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120341195628089344[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/doc/findContent/118265798274977792 GET
2021-11-29 09:52:56.870 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120341195628089344[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.DocController.findContent
2021-11-29 09:52:56.870 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120341195628089344[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:52:56.871 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120341195628089344[0;39m è¯·æ±‚å‚æ•°: [118265798274977792]
2021-11-29 09:52:56.872 DEBUG c.s.demo.mapper.DocMapperCust.increaseViewCount   :137  [32m120341195628089344[0;39m ==>  Preparing: update doc set view_count = view_count+1 where id = ?;
2021-11-29 09:52:56.872 DEBUG c.s.demo.mapper.DocMapperCust.increaseViewCount   :137  [32m120341195628089344[0;39m ==> Parameters: 118265798274977792(Long)
2021-11-29 09:52:56.920 DEBUG c.s.demo.mapper.DocMapperCust.increaseViewCount   :137  [32m120341195628089344[0;39m <==    Updates: 1
2021-11-29 09:52:56.922 DEBUG c.s.demo.mapper.ContentMapper.selectByPrimaryKey  :137  [32m120341195628089344[0;39m ==>  Preparing: select id , content from content where id = ?
2021-11-29 09:52:56.923 DEBUG c.s.demo.mapper.ContentMapper.selectByPrimaryKey  :137  [32m120341195628089344[0;39m ==> Parameters: 118265798274977792(Long)
2021-11-29 09:52:56.925 TRACE c.s.demo.mapper.ContentMapper.selectByPrimaryKey  :143  [32m120341195628089344[0;39m <==    Columns: id, content
2021-11-29 09:52:56.926 TRACE c.s.demo.mapper.ContentMapper.selectByPrimaryKey  :143  [32m120341195628089344[0;39m <==        Row: 118265798274977792, <<BLOB>>
2021-11-29 09:52:56.927 DEBUG c.s.demo.mapper.ContentMapper.selectByPrimaryKey  :137  [32m120341195628089344[0;39m <==      Total: 1
2021-11-29 09:52:56.928 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120341195628089344[0;39m è¿”å›žç»“æžœ: {"content":"","success":true}
2021-11-29 09:52:56.929 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120341195628089344[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š60 ms -------------
2021-11-29 09:52:57.827 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120341199646232576[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:52:57.828 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120341199646232576[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/doc/vote/118265798274977792 GET
2021-11-29 09:52:57.828 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120341199646232576[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.DocController.vote
2021-11-29 09:52:57.828 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120341199646232576[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:52:57.828 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120341199646232576[0;39m è¯·æ±‚å‚æ•°: [118265798274977792]
2021-11-29 09:52:57.829 INFO  com.suplin.demo.util.RedisUtil                    :31   [32m120341199646232576[0;39m keyä¸å­˜åœ¨ï¼Œæ”¾å…¥ï¼šDOC_VOTE_118265798274977792_127.0.0.1ï¼Œè¿‡æœŸ 5000 ç§’
2021-11-29 09:52:57.831 DEBUG c.s.demo.mapper.DocMapperCust.increaseVoteCount   :137  [32m120341199646232576[0;39m ==>  Preparing: update doc set vote_count = vote_count+1 where id = ?;
2021-11-29 09:52:57.831 DEBUG c.s.demo.mapper.DocMapperCust.increaseVoteCount   :137  [32m120341199646232576[0;39m ==> Parameters: 118265798274977792(Long)
2021-11-29 09:52:57.905 DEBUG c.s.demo.mapper.DocMapperCust.increaseVoteCount   :137  [32m120341199646232576[0;39m <==    Updates: 1
2021-11-29 09:52:57.907 DEBUG com.suplin.demo.mapper.DocMapper.selectByExample  :137  [32m120341199646232576[0;39m ==>  Preparing: select father_id, id, `name`, sort, view_count, vote_count, ebook_id, parent from doc WHERE ( id = ? )
2021-11-29 09:52:57.907 DEBUG com.suplin.demo.mapper.DocMapper.selectByExample  :137  [32m120341199646232576[0;39m ==> Parameters: 118265798274977792(Long)
2021-11-29 09:52:57.908 TRACE com.suplin.demo.mapper.DocMapper.selectByExample  :143  [32m120341199646232576[0;39m <==    Columns: father_id, id, name, sort, view_count, vote_count, ebook_id, parent
2021-11-29 09:52:57.908 TRACE com.suplin.demo.mapper.DocMapper.selectByExample  :143  [32m120341199646232576[0;39m <==        Row: 71, 118265798274977792, 5, 5, 8, 3, 116461475903705088, 0
2021-11-29 09:52:57.909 DEBUG com.suplin.demo.mapper.DocMapper.selectByExample  :137  [32m120341199646232576[0;39m <==      Total: 1
2021-11-29 09:52:57.909 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120341199646232576[0;39m è¿”å›žç»“æžœ: {"success":true}
2021-11-29 09:52:57.910 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120341199646232576[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š83 ms -------------
2021-11-29 09:53:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120341208806592512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:53:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120341208806592512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:53:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120341208806592512[0;39m ==> Parameters: 
2021-11-29 09:53:00.601 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120341208806592512[0;39m <==    Updates: 0
2021-11-29 09:53:00.601 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120341208806592512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š590æ¯«ç§’
2021-11-29 09:53:01.245 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120341213982363648[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:53:01.245 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120341213982363649[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:53:01.246 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120341213986557952[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:53:01.246 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120341213986557952[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 09:53:01.246 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120341213982363648[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 09:53:01.246 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120341213982363649[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 09:53:01.246 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120341213986557952[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 09:53:01.246 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120341213982363648[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 09:53:01.246 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120341213982363649[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 09:53:01.246 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120341213986557952[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:53:01.246 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120341213982363648[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:53:01.246 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120341213982363649[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:53:01.247 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120341213986557952[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 09:53:01.247 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120341213982363648[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 09:53:01.247 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120341213982363649[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 09:53:01.251 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120341213982363648[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 09:53:01.251 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120341213982363649[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 09:53:01.251 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120341213982363648[0;39m ==> Parameters: 
2021-11-29 09:53:01.251 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120341213982363649[0;39m ==> Parameters: 
2021-11-29 09:53:01.252 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120341213982363649[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 09:53:01.254 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120341213986557952[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 09:53:01.255 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120341213982363649[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 09:53:01.255 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120341213986557952[0;39m ==> Parameters: 
2021-11-29 09:53:01.257 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120341213982363649[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 09:53:01.258 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120341213982363649[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 09:53:01.258 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120341213982363649[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 09:53:01.259 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120341213982363649[0;39m <==      Total: 4
2021-11-29 09:53:01.265 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120341213982363649[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 09:53:01.266 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120341213982363649[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š21 ms -------------
2021-11-29 09:53:01.280 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120341213982363648[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 09:53:01.280 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120341213986557952[0;39m <==    Columns: id, parent, name, sort
2021-11-29 09:53:01.280 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120341213982363648[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 09:53:01.280 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120341213986557952[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 09:53:01.281 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120341213986557952[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 09:53:01.281 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120341213982363648[0;39m <==        Row: 2021-11-29, 128, 71, 3, 2
2021-11-29 09:53:01.281 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120341213986557952[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 09:53:01.281 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120341213982363648[0;39m <==      Total: 2
2021-11-29 09:53:01.282 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120341213986557952[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 09:53:01.282 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120341213982363648[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":128,"viewIncrease":3,"voteCount":71,"voteIncrease":2}],"success":true}
2021-11-29 09:53:01.282 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120341213982363648[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š37 ms -------------
2021-11-29 09:53:01.282 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120341213986557952[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 09:53:01.282 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120341213986557952[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 09:53:01.282 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120341213986557952[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 09:53:01.283 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120341213986557952[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 09:53:01.283 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120341213986557952[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 09:53:01.284 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120341213986557952[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 09:53:01.284 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120341213986557952[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 09:53:01.284 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120341213986557952[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 09:53:01.285 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120341213986557952[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 09:53:01.285 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120341213986557952[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 09:53:01.286 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120341213986557952[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 09:53:01.286 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120341213986557952[0;39m <==      Total: 15
2021-11-29 09:53:01.293 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120341213986557952[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 09:53:01.293 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120341213986557952[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š47 ms -------------
2021-11-29 09:53:01.441 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120341214804447232[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:53:01.441 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120341214804447232[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 09:53:01.441 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120341214804447232[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 09:53:01.441 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120341214804447232[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:53:01.443 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120341214804447232[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 09:53:01.468 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120341214804447232[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 09:53:01.468 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120341214804447232[0;39m ==> Parameters: 0(Long)
2021-11-29 09:53:01.469 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120341214804447232[0;39m <==    Columns: count(0)
2021-11-29 09:53:01.469 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120341214804447232[0;39m <==        Row: 0
2021-11-29 09:53:01.470 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120341214804447232[0;39m <==      Total: 1
2021-11-29 09:53:01.472 INFO  com.suplin.demo.service.EbookTable                :50   [32m120341214804447232[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 09:53:01.473 INFO  com.suplin.demo.service.EbookTable                :51   [32m120341214804447232[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 09:53:01.474 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120341214804447232[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 09:53:01.475 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120341214804447232[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š34 ms -------------
2021-11-29 09:53:04.133 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120341226095513600[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:53:04.133 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120341226095513600[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 09:53:04.134 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120341226095513600[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 09:53:04.134 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120341226095513600[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:53:04.134 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120341226095513600[0;39m è¯·æ±‚å‚æ•°: [{"category1Id":200,"page":1,"size":100}]
2021-11-29 09:53:04.137 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120341226095513600[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category1_id = ?)
2021-11-29 09:53:04.138 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120341226095513600[0;39m ==> Parameters: 200(Long)
2021-11-29 09:53:04.139 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120341226095513600[0;39m <==    Columns: count(0)
2021-11-29 09:53:04.139 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120341226095513600[0;39m <==        Row: 1
2021-11-29 09:53:04.140 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120341226095513600[0;39m <==      Total: 1
2021-11-29 09:53:04.142 DEBUG com.suplin.demo.mapper.EbookMapper.selectByExample:137  [32m120341226095513600[0;39m ==>  Preparing: select id, book_name, vote_num, view_num, doc_num, des_cription, category1_id, category2_id, cover from ebook WHERE ( category1_id = ? ) LIMIT ?
2021-11-29 09:53:04.142 DEBUG com.suplin.demo.mapper.EbookMapper.selectByExample:137  [32m120341226095513600[0;39m ==> Parameters: 200(Long), 100(Integer)
2021-11-29 09:53:04.144 TRACE com.suplin.demo.mapper.EbookMapper.selectByExample:143  [32m120341226095513600[0;39m <==    Columns: id, book_name, vote_num, view_num, doc_num, des_cription, category1_id, category2_id, cover
2021-11-29 09:53:04.144 TRACE com.suplin.demo.mapper.EbookMapper.selectByExample:143  [32m120341226095513600[0;39m <==        Row: 116468873762574336, pythonå®žæˆ˜, 15, 45, 11, ä¸çŸ¥é“, 200, 201, /image/cover1.png
2021-11-29 09:53:04.145 DEBUG com.suplin.demo.mapper.EbookMapper.selectByExample:137  [32m120341226095513600[0;39m <==      Total: 1
2021-11-29 09:53:04.145 INFO  com.suplin.demo.service.EbookTable                :50   [32m120341226095513600[0;39m æ€»è¡Œæ•°ï¼š1
2021-11-29 09:53:04.146 INFO  com.suplin.demo.service.EbookTable                :51   [32m120341226095513600[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 09:53:04.153 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120341226095513600[0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"bookName":"pythonå®žæˆ˜","category1Id":200,"category2Id":201,"cover":"/image/cover1.png","desCription":"ä¸çŸ¥é“","docNum":11,"id":116468873762574336,"viewNum":45,"voteNum":15}],"total":1},"success":true}
2021-11-29 09:53:04.153 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120341226095513600[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š20 ms -------------
2021-11-29 09:53:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120341229748752384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:53:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120341229748752384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:53:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120341229748752384[0;39m ==> Parameters: 
2021-11-29 09:53:05.095 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120341229748752384[0;39m <==    Updates: 3
2021-11-29 09:53:05.096 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120341229748752384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶92æ¯«ç§’
2021-11-29 09:53:05.469 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120341231699103744[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:53:05.470 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120341231699103744[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/doc/allDoc/116468873762574336 GET
2021-11-29 09:53:05.470 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120341231699103744[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.DocController.all
2021-11-29 09:53:05.470 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120341231699103744[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:53:05.470 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120341231699103744[0;39m è¯·æ±‚å‚æ•°: [116468873762574336]
2021-11-29 09:53:05.472 DEBUG com.suplin.demo.mapper.DocMapper.selectByExample  :137  [32m120341231699103744[0;39m ==>  Preparing: select father_id, id, `name`, sort, view_count, vote_count, ebook_id, parent from doc WHERE ( ebook_id = ? ) order by sort asc
2021-11-29 09:53:05.473 DEBUG com.suplin.demo.mapper.DocMapper.selectByExample  :137  [32m120341231699103744[0;39m ==> Parameters: 116468873762574336(Long)
2021-11-29 09:53:05.474 TRACE com.suplin.demo.mapper.DocMapper.selectByExample  :143  [32m120341231699103744[0;39m <==    Columns: father_id, id, name, sort, view_count, vote_count, ebook_id, parent
2021-11-29 09:53:05.474 TRACE com.suplin.demo.mapper.DocMapper.selectByExample  :143  [32m120341231699103744[0;39m <==        Row: 52, 118242816936775680, æ–‡æ¡£1, 1, 12, 1, 116468873762574336, 0
2021-11-29 09:53:05.475 TRACE com.suplin.demo.mapper.DocMapper.selectByExample  :143  [32m120341231699103744[0;39m <==        Row: 53, 118242826403319808, æ–‡æ¡£2, 2, 2, 2, 116468873762574336, 0
2021-11-29 09:53:05.475 TRACE com.suplin.demo.mapper.DocMapper.selectByExample  :143  [32m120341231699103744[0;39m <==        Row: 54, 118242839862841344, æ–‡æ¡£3, 3, 2, 2, 116468873762574336, 0
2021-11-29 09:53:05.475 TRACE com.suplin.demo.mapper.DocMapper.selectByExample  :143  [32m120341231699103744[0;39m <==        Row: 55, 118242850629619712, æ–‡æ¡£4, 4, 1, 1, 116468873762574336, 0
2021-11-29 09:53:05.476 TRACE com.suplin.demo.mapper.DocMapper.selectByExample  :143  [32m120341231699103744[0;39m <==        Row: 56, 118242864349188097, æ–‡æ¡£5, 5, 7, 1, 116468873762574336, 0
2021-11-29 09:53:05.476 TRACE com.suplin.demo.mapper.DocMapper.selectByExample  :143  [32m120341231699103744[0;39m <==        Row: 61, 118261238370275328, æ–‡æ¡£6, 6, 10, 1, 116468873762574336, 0
2021-11-29 09:53:05.477 TRACE com.suplin.demo.mapper.DocMapper.selectByExample  :143  [32m120341231699103744[0;39m <==        Row: 62, 118262691528839168, æ–‡æ¡£7, 7, 2, 1, 116468873762574336, 0
2021-11-29 09:53:05.477 TRACE com.suplin.demo.mapper.DocMapper.selectByExample  :143  [32m120341231699103744[0;39m <==        Row: 63, 118262706938712064, æ–‡æ¡£8, 8, 1, 1, 116468873762574336, 0
2021-11-29 09:53:05.477 TRACE com.suplin.demo.mapper.DocMapper.selectByExample  :143  [32m120341231699103744[0;39m <==        Row: 64, 118262719651647488, æ–‡æ¡£9, 9, 1, 1, 116468873762574336, 0
2021-11-29 09:53:05.477 TRACE com.suplin.demo.mapper.DocMapper.selectByExample  :143  [32m120341231699103744[0;39m <==        Row: 65, 118263065924997120, 10, 10, 4, 2, 116468873762574336, 0
2021-11-29 09:53:05.478 TRACE com.suplin.demo.mapper.DocMapper.selectByExample  :143  [32m120341231699103744[0;39m <==        Row: 66, 118263082911928320, 11, 11, 3, 2, 116468873762574336, 0
2021-11-29 09:53:05.478 DEBUG com.suplin.demo.mapper.DocMapper.selectByExample  :137  [32m120341231699103744[0;39m <==      Total: 11
2021-11-29 09:53:05.484 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120341231699103744[0;39m è¿”å›žç»“æžœ: {"content":[{"ebookId":116468873762574336,"fatherId":52,"id":118242816936775680,"name":"æ–‡æ¡£1","parent":0,"sort":1,"viewCount":12,"voteCount":1},{"ebookId":116468873762574336,"fatherId":53,"id":118242826403319808,"name":"æ–‡æ¡£2","parent":0,"sort":2,"viewCount":2,"voteCount":2},{"ebookId":116468873762574336,"fatherId":54,"id":118242839862841344,"name":"æ–‡æ¡£3","parent":0,"sort":3,"viewCount":2,"voteCount":2},{"ebookId":116468873762574336,"fatherId":55,"id":118242850629619712,"name":"æ–‡æ¡£4","parent":0,"sort":4,"viewCount":1,"voteCount":1},{"ebookId":116468873762574336,"fatherId":56,"id":118242864349188097,"name":"æ–‡æ¡£5","parent":0,"sort":5,"viewCount":7,"voteCount":1},{"ebookId":116468873762574336,"fatherId":61,"id":118261238370275328,"name":"æ–‡æ¡£6","parent":0,"sort":6,"viewCount":10,"voteCount":1},{"ebookId":116468873762574336,"fatherId":62,"id":118262691528839168,"name":"æ–‡æ¡£7","parent":0,"sort":7,"viewCount":2,"voteCount":1},{"ebookId":116468873762574336,"fatherId":63,"id":118262706938712064,"name":"æ–‡æ¡£8","parent":0,"sort":8,"viewCount":1,"voteCount":1},{"ebookId":116468873762574336,"fatherId":64,"id":118262719651647488,"name":"æ–‡æ¡£9","parent":0,"sort":9,"viewCount":1,"voteCount":1},{"ebookId":116468873762574336,"fatherId":65,"id":118263065924997120,"name":"10","parent":0,"sort":10,"viewCount":4,"voteCount":2},{"ebookId":116468873762574336,"fatherId":66,"id":118263082911928320,"name":"11","parent":0,"sort":11,"viewCount":3,"voteCount":2}],"success":true}
2021-11-29 09:53:05.485 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120341231699103744[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š16 ms -------------
2021-11-29 09:53:05.531 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120341231959150592[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:53:05.531 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120341231959150592[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/doc/findContent/118242816936775680 GET
2021-11-29 09:53:05.531 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120341231959150592[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.DocController.findContent
2021-11-29 09:53:05.531 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120341231959150592[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:53:05.531 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120341231959150592[0;39m è¯·æ±‚å‚æ•°: [118242816936775680]
2021-11-29 09:53:05.532 DEBUG c.s.demo.mapper.DocMapperCust.increaseViewCount   :137  [32m120341231959150592[0;39m ==>  Preparing: update doc set view_count = view_count+1 where id = ?;
2021-11-29 09:53:05.532 DEBUG c.s.demo.mapper.DocMapperCust.increaseViewCount   :137  [32m120341231959150592[0;39m ==> Parameters: 118242816936775680(Long)
2021-11-29 09:53:05.630 DEBUG c.s.demo.mapper.DocMapperCust.increaseViewCount   :137  [32m120341231959150592[0;39m <==    Updates: 1
2021-11-29 09:53:05.631 DEBUG c.s.demo.mapper.ContentMapper.selectByPrimaryKey  :137  [32m120341231959150592[0;39m ==>  Preparing: select id , content from content where id = ?
2021-11-29 09:53:05.631 DEBUG c.s.demo.mapper.ContentMapper.selectByPrimaryKey  :137  [32m120341231959150592[0;39m ==> Parameters: 118242816936775680(Long)
2021-11-29 09:53:05.632 TRACE c.s.demo.mapper.ContentMapper.selectByPrimaryKey  :143  [32m120341231959150592[0;39m <==    Columns: id, content
2021-11-29 09:53:05.632 TRACE c.s.demo.mapper.ContentMapper.selectByPrimaryKey  :143  [32m120341231959150592[0;39m <==        Row: 118242816936775680, <<BLOB>>
2021-11-29 09:53:05.633 DEBUG c.s.demo.mapper.ContentMapper.selectByPrimaryKey  :137  [32m120341231959150592[0;39m <==      Total: 1
2021-11-29 09:53:05.633 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120341231959150592[0;39m è¿”å›žç»“æžœ: {"content":"","success":true}
2021-11-29 09:53:05.633 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120341231959150592[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š102 ms -------------
2021-11-29 09:53:06.145 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120341234534453248[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:53:06.145 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120341234534453248[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/doc/findContent/118242839862841344 GET
2021-11-29 09:53:06.145 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120341234534453248[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.DocController.findContent
2021-11-29 09:53:06.146 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120341234534453248[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:53:06.146 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120341234534453248[0;39m è¯·æ±‚å‚æ•°: [118242839862841344]
2021-11-29 09:53:06.146 DEBUG c.s.demo.mapper.DocMapperCust.increaseViewCount   :137  [32m120341234534453248[0;39m ==>  Preparing: update doc set view_count = view_count+1 where id = ?;
2021-11-29 09:53:06.147 DEBUG c.s.demo.mapper.DocMapperCust.increaseViewCount   :137  [32m120341234534453248[0;39m ==> Parameters: 118242839862841344(Long)
2021-11-29 09:53:06.193 DEBUG c.s.demo.mapper.DocMapperCust.increaseViewCount   :137  [32m120341234534453248[0;39m <==    Updates: 1
2021-11-29 09:53:06.194 DEBUG c.s.demo.mapper.ContentMapper.selectByPrimaryKey  :137  [32m120341234534453248[0;39m ==>  Preparing: select id , content from content where id = ?
2021-11-29 09:53:06.195 DEBUG c.s.demo.mapper.ContentMapper.selectByPrimaryKey  :137  [32m120341234534453248[0;39m ==> Parameters: 118242839862841344(Long)
2021-11-29 09:53:06.196 TRACE c.s.demo.mapper.ContentMapper.selectByPrimaryKey  :143  [32m120341234534453248[0;39m <==    Columns: id, content
2021-11-29 09:53:06.196 TRACE c.s.demo.mapper.ContentMapper.selectByPrimaryKey  :143  [32m120341234534453248[0;39m <==        Row: 118242839862841344, <<BLOB>>
2021-11-29 09:53:06.196 DEBUG c.s.demo.mapper.ContentMapper.selectByPrimaryKey  :137  [32m120341234534453248[0;39m <==      Total: 1
2021-11-29 09:53:06.197 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120341234534453248[0;39m è¿”å›žç»“æžœ: {"content":"","success":true}
2021-11-29 09:53:06.197 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120341234534453248[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š52 ms -------------
2021-11-29 09:53:07.242 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120341239135604736[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:53:07.243 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120341239135604736[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/doc/vote/118242839862841344 GET
2021-11-29 09:53:07.243 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120341239135604736[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.DocController.vote
2021-11-29 09:53:07.243 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120341239135604736[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:53:07.243 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120341239135604736[0;39m è¯·æ±‚å‚æ•°: [118242839862841344]
2021-11-29 09:53:07.244 INFO  com.suplin.demo.util.RedisUtil                    :31   [32m120341239135604736[0;39m keyä¸å­˜åœ¨ï¼Œæ”¾å…¥ï¼šDOC_VOTE_118242839862841344_127.0.0.1ï¼Œè¿‡æœŸ 5000 ç§’
2021-11-29 09:53:07.246 DEBUG c.s.demo.mapper.DocMapperCust.increaseVoteCount   :137  [32m120341239135604736[0;39m ==>  Preparing: update doc set vote_count = vote_count+1 where id = ?;
2021-11-29 09:53:07.246 DEBUG c.s.demo.mapper.DocMapperCust.increaseVoteCount   :137  [32m120341239135604736[0;39m ==> Parameters: 118242839862841344(Long)
2021-11-29 09:53:07.306 DEBUG c.s.demo.mapper.DocMapperCust.increaseVoteCount   :137  [32m120341239135604736[0;39m <==    Updates: 1
2021-11-29 09:53:07.307 DEBUG com.suplin.demo.mapper.DocMapper.selectByExample  :137  [32m120341239135604736[0;39m ==>  Preparing: select father_id, id, `name`, sort, view_count, vote_count, ebook_id, parent from doc WHERE ( id = ? )
2021-11-29 09:53:07.308 DEBUG com.suplin.demo.mapper.DocMapper.selectByExample  :137  [32m120341239135604736[0;39m ==> Parameters: 118242839862841344(Long)
2021-11-29 09:53:07.309 TRACE com.suplin.demo.mapper.DocMapper.selectByExample  :143  [32m120341239135604736[0;39m <==    Columns: father_id, id, name, sort, view_count, vote_count, ebook_id, parent
2021-11-29 09:53:07.309 TRACE com.suplin.demo.mapper.DocMapper.selectByExample  :143  [32m120341239135604736[0;39m <==        Row: 54, 118242839862841344, æ–‡æ¡£3, 3, 3, 3, 116468873762574336, 0
2021-11-29 09:53:07.309 DEBUG com.suplin.demo.mapper.DocMapper.selectByExample  :137  [32m120341239135604736[0;39m <==      Total: 1
2021-11-29 09:53:07.310 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120341239135604736[0;39m è¿”å›žç»“æžœ: {"success":true}
2021-11-29 09:53:07.310 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120341239135604736[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š68 ms -------------
2021-11-29 09:53:15.061 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:53:15.187 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:53:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120341355624009728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:53:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120341355624009728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:53:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120341355624009728[0;39m ==> Parameters: 
2021-11-29 09:53:35.090 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120341355624009728[0;39m <==    Updates: 3
2021-11-29 09:53:35.091 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120341355624009728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶76æ¯«ç§’
2021-11-29 09:53:45.062 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:53:45.173 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:54:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120341460435472384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:54:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120341460435472384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:54:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120341460435472384[0;39m ==> Parameters: 
2021-11-29 09:54:00.148 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120341460435472384[0;39m <==    Updates: 0
2021-11-29 09:54:00.148 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120341460435472384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š144æ¯«ç§’
2021-11-29 09:54:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120341481419575296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:54:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120341481419575296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:54:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120341481419575296[0;39m ==> Parameters: 
2021-11-29 09:54:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120341481419575296[0;39m <==    Updates: 3
2021-11-29 09:54:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120341481419575296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 09:54:15.058 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:54:15.181 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:54:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120341607240306688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:54:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120341607240306688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:54:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120341607240306688[0;39m ==> Parameters: 
2021-11-29 09:54:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120341607240306688[0;39m <==    Updates: 3
2021-11-29 09:54:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120341607240306688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 09:54:45.049 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:54:45.157 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:55:00.002 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120341712085323776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:55:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120341712085323776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:55:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120341712085323776[0;39m ==> Parameters: 
2021-11-29 09:55:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120341712085323776[0;39m <==    Updates: 0
2021-11-29 09:55:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120341712085323776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 09:55:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120341733107175424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:55:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120341733107175424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:55:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120341733107175424[0;39m ==> Parameters: 
2021-11-29 09:55:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120341733107175424[0;39m <==    Updates: 3
2021-11-29 09:55:05.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120341733107175424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 09:55:15.038 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:55:15.149 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:55:35.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120341858885963776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:55:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120341858885963776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:55:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120341858885963776[0;39m ==> Parameters: 
2021-11-29 09:55:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120341858885963776[0;39m <==    Updates: 3
2021-11-29 09:55:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120341858885963776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 09:55:37.779 INFO  com.suplin.demo.websocket.WebSocketServer         :31   [32m120341213986557952[0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼šOBWSzc9GsTï¼Œsession idï¼š0ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2021-11-29 09:55:37.801 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120341870625820672[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:55:37.801 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120341870625820672[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/doc/allDoc/116468873762574336 GET
2021-11-29 09:55:37.802 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120341870625820672[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.DocController.all
2021-11-29 09:55:37.802 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120341870625820672[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:55:37.802 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120341870625820672[0;39m è¯·æ±‚å‚æ•°: [116468873762574336]
2021-11-29 09:55:37.803 DEBUG com.suplin.demo.mapper.DocMapper.selectByExample  :137  [32m120341870625820672[0;39m ==>  Preparing: select father_id, id, `name`, sort, view_count, vote_count, ebook_id, parent from doc WHERE ( ebook_id = ? ) order by sort asc
2021-11-29 09:55:37.804 DEBUG com.suplin.demo.mapper.DocMapper.selectByExample  :137  [32m120341870625820672[0;39m ==> Parameters: 116468873762574336(Long)
2021-11-29 09:55:37.805 TRACE com.suplin.demo.mapper.DocMapper.selectByExample  :143  [32m120341870625820672[0;39m <==    Columns: father_id, id, name, sort, view_count, vote_count, ebook_id, parent
2021-11-29 09:55:37.806 TRACE com.suplin.demo.mapper.DocMapper.selectByExample  :143  [32m120341870625820672[0;39m <==        Row: 52, 118242816936775680, æ–‡æ¡£1, 1, 13, 1, 116468873762574336, 0
2021-11-29 09:55:37.806 TRACE com.suplin.demo.mapper.DocMapper.selectByExample  :143  [32m120341870625820672[0;39m <==        Row: 53, 118242826403319808, æ–‡æ¡£2, 2, 2, 2, 116468873762574336, 0
2021-11-29 09:55:37.808 TRACE com.suplin.demo.mapper.DocMapper.selectByExample  :143  [32m120341870625820672[0;39m <==        Row: 54, 118242839862841344, æ–‡æ¡£3, 3, 3, 3, 116468873762574336, 0
2021-11-29 09:55:37.809 TRACE com.suplin.demo.mapper.DocMapper.selectByExample  :143  [32m120341870625820672[0;39m <==        Row: 55, 118242850629619712, æ–‡æ¡£4, 4, 1, 1, 116468873762574336, 0
2021-11-29 09:55:37.809 TRACE com.suplin.demo.mapper.DocMapper.selectByExample  :143  [32m120341870625820672[0;39m <==        Row: 56, 118242864349188097, æ–‡æ¡£5, 5, 7, 1, 116468873762574336, 0
2021-11-29 09:55:37.809 TRACE com.suplin.demo.mapper.DocMapper.selectByExample  :143  [32m120341870625820672[0;39m <==        Row: 61, 118261238370275328, æ–‡æ¡£6, 6, 10, 1, 116468873762574336, 0
2021-11-29 09:55:37.809 TRACE com.suplin.demo.mapper.DocMapper.selectByExample  :143  [32m120341870625820672[0;39m <==        Row: 62, 118262691528839168, æ–‡æ¡£7, 7, 2, 1, 116468873762574336, 0
2021-11-29 09:55:37.810 TRACE com.suplin.demo.mapper.DocMapper.selectByExample  :143  [32m120341870625820672[0;39m <==        Row: 63, 118262706938712064, æ–‡æ¡£8, 8, 1, 1, 116468873762574336, 0
2021-11-29 09:55:37.810 TRACE com.suplin.demo.mapper.DocMapper.selectByExample  :143  [32m120341870625820672[0;39m <==        Row: 64, 118262719651647488, æ–‡æ¡£9, 9, 1, 1, 116468873762574336, 0
2021-11-29 09:55:37.811 TRACE com.suplin.demo.mapper.DocMapper.selectByExample  :143  [32m120341870625820672[0;39m <==        Row: 65, 118263065924997120, 10, 10, 4, 2, 116468873762574336, 0
2021-11-29 09:55:37.811 TRACE com.suplin.demo.mapper.DocMapper.selectByExample  :143  [32m120341870625820672[0;39m <==        Row: 66, 118263082911928320, 11, 11, 3, 2, 116468873762574336, 0
2021-11-29 09:55:37.812 DEBUG com.suplin.demo.mapper.DocMapper.selectByExample  :137  [32m120341870625820672[0;39m <==      Total: 11
2021-11-29 09:55:37.816 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120341870625820672[0;39m è¿”å›žç»“æžœ: {"content":[{"ebookId":116468873762574336,"fatherId":52,"id":118242816936775680,"name":"æ–‡æ¡£1","parent":0,"sort":1,"viewCount":13,"voteCount":1},{"ebookId":116468873762574336,"fatherId":53,"id":118242826403319808,"name":"æ–‡æ¡£2","parent":0,"sort":2,"viewCount":2,"voteCount":2},{"ebookId":116468873762574336,"fatherId":54,"id":118242839862841344,"name":"æ–‡æ¡£3","parent":0,"sort":3,"viewCount":3,"voteCount":3},{"ebookId":116468873762574336,"fatherId":55,"id":118242850629619712,"name":"æ–‡æ¡£4","parent":0,"sort":4,"viewCount":1,"voteCount":1},{"ebookId":116468873762574336,"fatherId":56,"id":118242864349188097,"name":"æ–‡æ¡£5","parent":0,"sort":5,"viewCount":7,"voteCount":1},{"ebookId":116468873762574336,"fatherId":61,"id":118261238370275328,"name":"æ–‡æ¡£6","parent":0,"sort":6,"viewCount":10,"voteCount":1},{"ebookId":116468873762574336,"fatherId":62,"id":118262691528839168,"name":"æ–‡æ¡£7","parent":0,"sort":7,"viewCount":2,"voteCount":1},{"ebookId":116468873762574336,"fatherId":63,"id":118262706938712064,"name":"æ–‡æ¡£8","parent":0,"sort":8,"viewCount":1,"voteCount":1},{"ebookId":116468873762574336,"fatherId":64,"id":118262719651647488,"name":"æ–‡æ¡£9","parent":0,"sort":9,"viewCount":1,"voteCount":1},{"ebookId":116468873762574336,"fatherId":65,"id":118263065924997120,"name":"10","parent":0,"sort":10,"viewCount":4,"voteCount":2},{"ebookId":116468873762574336,"fatherId":66,"id":118263082911928320,"name":"11","parent":0,"sort":11,"viewCount":3,"voteCount":2}],"success":true}
2021-11-29 09:55:37.817 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120341870625820672[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š16 ms -------------
2021-11-29 09:55:37.863 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120341870885867520[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:55:37.863 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120341870885867520[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/doc/findContent/118242816936775680 GET
2021-11-29 09:55:37.864 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120341870885867520[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.DocController.findContent
2021-11-29 09:55:37.864 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120341870885867520[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:55:37.864 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120341870885867520[0;39m è¯·æ±‚å‚æ•°: [118242816936775680]
2021-11-29 09:55:37.865 DEBUG c.s.demo.mapper.DocMapperCust.increaseViewCount   :137  [32m120341870885867520[0;39m ==>  Preparing: update doc set view_count = view_count+1 where id = ?;
2021-11-29 09:55:37.865 DEBUG c.s.demo.mapper.DocMapperCust.increaseViewCount   :137  [32m120341870885867520[0;39m ==> Parameters: 118242816936775680(Long)
2021-11-29 09:55:37.919 DEBUG c.s.demo.mapper.DocMapperCust.increaseViewCount   :137  [32m120341870885867520[0;39m <==    Updates: 1
2021-11-29 09:55:37.919 DEBUG c.s.demo.mapper.ContentMapper.selectByPrimaryKey  :137  [32m120341870885867520[0;39m ==>  Preparing: select id , content from content where id = ?
2021-11-29 09:55:37.920 DEBUG c.s.demo.mapper.ContentMapper.selectByPrimaryKey  :137  [32m120341870885867520[0;39m ==> Parameters: 118242816936775680(Long)
2021-11-29 09:55:37.921 TRACE c.s.demo.mapper.ContentMapper.selectByPrimaryKey  :143  [32m120341870885867520[0;39m <==    Columns: id, content
2021-11-29 09:55:37.921 TRACE c.s.demo.mapper.ContentMapper.selectByPrimaryKey  :143  [32m120341870885867520[0;39m <==        Row: 118242816936775680, <<BLOB>>
2021-11-29 09:55:37.922 DEBUG c.s.demo.mapper.ContentMapper.selectByPrimaryKey  :137  [32m120341870885867520[0;39m <==      Total: 1
2021-11-29 09:55:37.923 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120341870885867520[0;39m è¿”å›žç»“æžœ: {"content":"","success":true}
2021-11-29 09:55:37.923 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120341870885867520[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š60 ms -------------
2021-11-29 09:55:45.062 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:55:45.170 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:56:00.003 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120341963747758080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:56:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120341963747758080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:56:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120341963747758080[0;39m ==> Parameters: 
2021-11-29 09:56:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120341963747758080[0;39m <==    Updates: 0
2021-11-29 09:56:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120341963747758080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 09:56:05.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120341984715083776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:56:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120341984715083776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:56:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120341984715083776[0;39m ==> Parameters: 
2021-11-29 09:56:05.052 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120341984715083776[0;39m <==    Updates: 3
2021-11-29 09:56:05.052 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120341984715083776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶50æ¯«ç§’
2021-11-29 09:56:15.071 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:56:15.151 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:56:28.391 INFO  com.suplin.demo.websocket.WebSocketServer         :40   [32m120341231699103744[0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼šOBWSzc9GsTï¼Œsession idï¼š0ï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2021-11-29 09:56:29.450 INFO  com.suplin.demo.websocket.WebSocketServer         :31   [32m120341231959150592[0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼šVwZHXtiucjï¼Œsession idï¼š1ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2021-11-29 09:56:29.516 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120342087534252032[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:56:29.516 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120342087534252032[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/doc/allDoc/116468873762574336 GET
2021-11-29 09:56:29.517 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120342087534252032[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.DocController.all
2021-11-29 09:56:29.517 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120342087534252032[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:56:29.517 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120342087534252032[0;39m è¯·æ±‚å‚æ•°: [116468873762574336]
2021-11-29 09:56:29.521 DEBUG com.suplin.demo.mapper.DocMapper.selectByExample  :137  [32m120342087534252032[0;39m ==>  Preparing: select father_id, id, `name`, sort, view_count, vote_count, ebook_id, parent from doc WHERE ( ebook_id = ? ) order by sort asc
2021-11-29 09:56:29.522 DEBUG com.suplin.demo.mapper.DocMapper.selectByExample  :137  [32m120342087534252032[0;39m ==> Parameters: 116468873762574336(Long)
2021-11-29 09:56:29.523 TRACE com.suplin.demo.mapper.DocMapper.selectByExample  :143  [32m120342087534252032[0;39m <==    Columns: father_id, id, name, sort, view_count, vote_count, ebook_id, parent
2021-11-29 09:56:29.524 TRACE com.suplin.demo.mapper.DocMapper.selectByExample  :143  [32m120342087534252032[0;39m <==        Row: 52, 118242816936775680, æ–‡æ¡£1, 1, 14, 1, 116468873762574336, 0
2021-11-29 09:56:29.525 TRACE com.suplin.demo.mapper.DocMapper.selectByExample  :143  [32m120342087534252032[0;39m <==        Row: 53, 118242826403319808, æ–‡æ¡£2, 2, 2, 2, 116468873762574336, 0
2021-11-29 09:56:29.525 TRACE com.suplin.demo.mapper.DocMapper.selectByExample  :143  [32m120342087534252032[0;39m <==        Row: 54, 118242839862841344, æ–‡æ¡£3, 3, 3, 3, 116468873762574336, 0
2021-11-29 09:56:29.525 TRACE com.suplin.demo.mapper.DocMapper.selectByExample  :143  [32m120342087534252032[0;39m <==        Row: 55, 118242850629619712, æ–‡æ¡£4, 4, 1, 1, 116468873762574336, 0
2021-11-29 09:56:29.526 TRACE com.suplin.demo.mapper.DocMapper.selectByExample  :143  [32m120342087534252032[0;39m <==        Row: 56, 118242864349188097, æ–‡æ¡£5, 5, 7, 1, 116468873762574336, 0
2021-11-29 09:56:29.526 TRACE com.suplin.demo.mapper.DocMapper.selectByExample  :143  [32m120342087534252032[0;39m <==        Row: 61, 118261238370275328, æ–‡æ¡£6, 6, 10, 1, 116468873762574336, 0
2021-11-29 09:56:29.527 TRACE com.suplin.demo.mapper.DocMapper.selectByExample  :143  [32m120342087534252032[0;39m <==        Row: 62, 118262691528839168, æ–‡æ¡£7, 7, 2, 1, 116468873762574336, 0
2021-11-29 09:56:29.527 TRACE com.suplin.demo.mapper.DocMapper.selectByExample  :143  [32m120342087534252032[0;39m <==        Row: 63, 118262706938712064, æ–‡æ¡£8, 8, 1, 1, 116468873762574336, 0
2021-11-29 09:56:29.528 TRACE com.suplin.demo.mapper.DocMapper.selectByExample  :143  [32m120342087534252032[0;39m <==        Row: 64, 118262719651647488, æ–‡æ¡£9, 9, 1, 1, 116468873762574336, 0
2021-11-29 09:56:29.528 TRACE com.suplin.demo.mapper.DocMapper.selectByExample  :143  [32m120342087534252032[0;39m <==        Row: 65, 118263065924997120, 10, 10, 4, 2, 116468873762574336, 0
2021-11-29 09:56:29.529 TRACE com.suplin.demo.mapper.DocMapper.selectByExample  :143  [32m120342087534252032[0;39m <==        Row: 66, 118263082911928320, 11, 11, 3, 2, 116468873762574336, 0
2021-11-29 09:56:29.530 DEBUG com.suplin.demo.mapper.DocMapper.selectByExample  :137  [32m120342087534252032[0;39m <==      Total: 11
2021-11-29 09:56:29.531 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120342087534252032[0;39m è¿”å›žç»“æžœ: {"content":[{"ebookId":116468873762574336,"fatherId":52,"id":118242816936775680,"name":"æ–‡æ¡£1","parent":0,"sort":1,"viewCount":14,"voteCount":1},{"ebookId":116468873762574336,"fatherId":53,"id":118242826403319808,"name":"æ–‡æ¡£2","parent":0,"sort":2,"viewCount":2,"voteCount":2},{"ebookId":116468873762574336,"fatherId":54,"id":118242839862841344,"name":"æ–‡æ¡£3","parent":0,"sort":3,"viewCount":3,"voteCount":3},{"ebookId":116468873762574336,"fatherId":55,"id":118242850629619712,"name":"æ–‡æ¡£4","parent":0,"sort":4,"viewCount":1,"voteCount":1},{"ebookId":116468873762574336,"fatherId":56,"id":118242864349188097,"name":"æ–‡æ¡£5","parent":0,"sort":5,"viewCount":7,"voteCount":1},{"ebookId":116468873762574336,"fatherId":61,"id":118261238370275328,"name":"æ–‡æ¡£6","parent":0,"sort":6,"viewCount":10,"voteCount":1},{"ebookId":116468873762574336,"fatherId":62,"id":118262691528839168,"name":"æ–‡æ¡£7","parent":0,"sort":7,"viewCount":2,"voteCount":1},{"ebookId":116468873762574336,"fatherId":63,"id":118262706938712064,"name":"æ–‡æ¡£8","parent":0,"sort":8,"viewCount":1,"voteCount":1},{"ebookId":116468873762574336,"fatherId":64,"id":118262719651647488,"name":"æ–‡æ¡£9","parent":0,"sort":9,"viewCount":1,"voteCount":1},{"ebookId":116468873762574336,"fatherId":65,"id":118263065924997120,"name":"10","parent":0,"sort":10,"viewCount":4,"voteCount":2},{"ebookId":116468873762574336,"fatherId":66,"id":118263082911928320,"name":"11","parent":0,"sort":11,"viewCount":3,"voteCount":2}],"success":true}
2021-11-29 09:56:29.531 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120342087534252032[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š15 ms -------------
2021-11-29 09:56:29.588 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120342087836241920[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:56:29.588 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120342087836241920[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/doc/findContent/118242816936775680 GET
2021-11-29 09:56:29.588 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120342087836241920[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.DocController.findContent
2021-11-29 09:56:29.588 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120342087836241920[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:56:29.589 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120342087836241920[0;39m è¯·æ±‚å‚æ•°: [118242816936775680]
2021-11-29 09:56:29.589 DEBUG c.s.demo.mapper.DocMapperCust.increaseViewCount   :137  [32m120342087836241920[0;39m ==>  Preparing: update doc set view_count = view_count+1 where id = ?;
2021-11-29 09:56:29.590 DEBUG c.s.demo.mapper.DocMapperCust.increaseViewCount   :137  [32m120342087836241920[0;39m ==> Parameters: 118242816936775680(Long)
2021-11-29 09:56:29.635 DEBUG c.s.demo.mapper.DocMapperCust.increaseViewCount   :137  [32m120342087836241920[0;39m <==    Updates: 1
2021-11-29 09:56:29.636 DEBUG c.s.demo.mapper.ContentMapper.selectByPrimaryKey  :137  [32m120342087836241920[0;39m ==>  Preparing: select id , content from content where id = ?
2021-11-29 09:56:29.636 DEBUG c.s.demo.mapper.ContentMapper.selectByPrimaryKey  :137  [32m120342087836241920[0;39m ==> Parameters: 118242816936775680(Long)
2021-11-29 09:56:29.638 TRACE c.s.demo.mapper.ContentMapper.selectByPrimaryKey  :143  [32m120342087836241920[0;39m <==    Columns: id, content
2021-11-29 09:56:29.639 TRACE c.s.demo.mapper.ContentMapper.selectByPrimaryKey  :143  [32m120342087836241920[0;39m <==        Row: 118242816936775680, <<BLOB>>
2021-11-29 09:56:29.639 DEBUG c.s.demo.mapper.ContentMapper.selectByPrimaryKey  :137  [32m120342087836241920[0;39m <==      Total: 1
2021-11-29 09:56:29.640 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120342087836241920[0;39m è¿”å›žç»“æžœ: {"content":"","success":true}
2021-11-29 09:56:29.640 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120342087836241920[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š52 ms -------------
2021-11-29 09:56:32.640 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120342100637257728[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:56:32.640 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120342100637257728[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 09:56:32.640 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120342100637257728[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 09:56:32.640 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120342100637257728[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:56:32.641 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120342100637257728[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 09:56:32.641 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120342100641452032[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:56:32.641 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120342100641452033[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:56:32.641 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120342100641452032[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 09:56:32.641 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120342100641452033[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 09:56:32.641 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120342100641452032[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 09:56:32.641 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120342100641452033[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 09:56:32.641 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120342100641452032[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:56:32.641 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120342100637257728[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 09:56:32.641 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120342100641452032[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 09:56:32.641 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120342100641452033[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:56:32.642 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120342100637257728[0;39m ==> Parameters: 
2021-11-29 09:56:32.642 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120342100641452033[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 09:56:32.642 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120342100641452032[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 09:56:32.642 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120342100641452032[0;39m ==> Parameters: 
2021-11-29 09:56:32.642 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120342100641452033[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 09:56:32.642 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120342100637257728[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 09:56:32.643 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120342100637257728[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 09:56:32.643 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120342100641452033[0;39m ==> Parameters: 
2021-11-29 09:56:32.643 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342100641452032[0;39m <==    Columns: id, parent, name, sort
2021-11-29 09:56:32.643 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120342100637257728[0;39m <==        Row: 2021-11-29, 132, 74, 7, 5
2021-11-29 09:56:32.643 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342100641452032[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 09:56:32.644 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120342100637257728[0;39m <==      Total: 2
2021-11-29 09:56:32.644 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120342100641452033[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 09:56:32.644 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120342100637257728[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":132,"viewIncrease":7,"voteCount":74,"voteIncrease":5}],"success":true}
2021-11-29 09:56:32.644 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120342100637257728[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 09:56:32.644 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120342100641452033[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 09:56:32.644 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342100641452032[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 09:56:32.645 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342100641452032[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 09:56:32.645 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120342100641452033[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 09:56:32.645 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342100641452032[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 09:56:32.645 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120342100641452033[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 09:56:32.645 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342100641452032[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 09:56:32.646 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120342100641452033[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 09:56:32.646 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342100641452032[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 09:56:32.646 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342100641452032[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 09:56:32.646 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120342100641452033[0;39m <==      Total: 4
2021-11-29 09:56:32.646 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342100641452032[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 09:56:32.647 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120342100641452033[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 09:56:32.647 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342100641452032[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 09:56:32.647 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120342100641452033[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2021-11-29 09:56:32.647 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342100641452032[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 09:56:32.647 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342100641452032[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 09:56:32.647 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342100641452032[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 09:56:32.648 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342100641452032[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 09:56:32.648 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342100641452032[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 09:56:32.648 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342100641452032[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 09:56:32.649 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120342100641452032[0;39m <==      Total: 15
2021-11-29 09:56:32.651 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120342100641452032[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 09:56:32.652 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120342100641452032[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š11 ms -------------
2021-11-29 09:56:32.764 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120342101157351424[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:56:32.764 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120342101157351424[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 09:56:32.764 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120342101157351424[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 09:56:32.764 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120342101157351424[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:56:32.764 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120342101157351424[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 09:56:32.766 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120342101157351424[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 09:56:32.766 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120342101157351424[0;39m ==> Parameters: 0(Long)
2021-11-29 09:56:32.767 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120342101157351424[0;39m <==    Columns: count(0)
2021-11-29 09:56:32.767 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120342101157351424[0;39m <==        Row: 0
2021-11-29 09:56:32.767 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120342101157351424[0;39m <==      Total: 1
2021-11-29 09:56:32.767 INFO  com.suplin.demo.service.EbookTable                :50   [32m120342101157351424[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 09:56:32.767 INFO  com.suplin.demo.service.EbookTable                :51   [32m120342101157351424[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 09:56:32.768 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120342101157351424[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 09:56:32.768 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120342101157351424[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 09:56:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120342110594535424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:56:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120342110594535424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:56:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120342110594535424[0;39m ==> Parameters: 
2021-11-29 09:56:35.100 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120342110594535424[0;39m <==    Updates: 3
2021-11-29 09:56:35.101 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120342110594535424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶87æ¯«ç§’
2021-11-29 09:56:40.357 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120342133004701696[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:56:40.358 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120342133008896000[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:56:40.358 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120342133008896001[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:56:40.358 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120342133008896001[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 09:56:40.358 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120342133004701696[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 09:56:40.358 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120342133008896000[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 09:56:40.358 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120342133008896001[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 09:56:40.358 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120342133004701696[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 09:56:40.358 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120342133008896000[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 09:56:40.358 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120342133008896001[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:56:40.358 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120342133004701696[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:56:40.358 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120342133008896000[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:56:40.359 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120342133008896001[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 09:56:40.359 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120342133004701696[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 09:56:40.359 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120342133008896000[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 09:56:40.359 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120342133008896000[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 09:56:40.359 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120342133004701696[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 09:56:40.359 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120342133008896001[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 09:56:40.360 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120342133004701696[0;39m ==> Parameters: 
2021-11-29 09:56:40.360 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120342133008896000[0;39m ==> Parameters: 
2021-11-29 09:56:40.360 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120342133008896001[0;39m ==> Parameters: 
2021-11-29 09:56:40.361 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342133008896001[0;39m <==    Columns: id, parent, name, sort
2021-11-29 09:56:40.361 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120342133004701696[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 09:56:40.361 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120342133008896000[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 09:56:40.361 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342133008896001[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 09:56:40.361 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120342133004701696[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 09:56:40.361 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120342133008896000[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 09:56:40.361 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342133008896001[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 09:56:40.362 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120342133004701696[0;39m <==        Row: 2021-11-29, 132, 74, 7, 5
2021-11-29 09:56:40.362 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120342133008896000[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 09:56:40.362 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342133008896001[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 09:56:40.362 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120342133004701696[0;39m <==      Total: 2
2021-11-29 09:56:40.362 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342133008896001[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 09:56:40.363 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120342133004701696[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":132,"viewIncrease":7,"voteCount":74,"voteIncrease":5}],"success":true}
2021-11-29 09:56:40.363 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120342133004701696[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2021-11-29 09:56:40.363 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342133008896001[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 09:56:40.363 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342133008896001[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 09:56:40.363 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120342133008896000[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 09:56:40.363 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342133008896001[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 09:56:40.364 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342133008896001[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 09:56:40.364 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120342133008896000[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 09:56:40.364 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342133008896001[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 09:56:40.364 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120342133008896000[0;39m <==      Total: 4
2021-11-29 09:56:40.364 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342133008896001[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 09:56:40.365 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120342133008896000[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 09:56:40.365 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120342133008896000[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2021-11-29 09:56:40.365 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342133008896001[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 09:56:40.365 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342133008896001[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 09:56:40.365 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342133008896001[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 09:56:40.366 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342133008896001[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 09:56:40.366 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342133008896001[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 09:56:40.366 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120342133008896001[0;39m <==      Total: 15
2021-11-29 09:56:40.367 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120342133008896001[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 09:56:40.368 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120342133008896001[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š10 ms -------------
2021-11-29 09:56:40.440 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120342133352828928[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:56:40.441 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120342133352828928[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 09:56:40.441 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120342133352828928[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 09:56:40.441 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120342133352828928[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:56:40.441 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120342133352828928[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 09:56:40.443 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120342133352828928[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 09:56:40.443 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120342133352828928[0;39m ==> Parameters: 0(Long)
2021-11-29 09:56:40.444 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120342133352828928[0;39m <==    Columns: count(0)
2021-11-29 09:56:40.444 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120342133352828928[0;39m <==        Row: 0
2021-11-29 09:56:40.445 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120342133352828928[0;39m <==      Total: 1
2021-11-29 09:56:40.445 INFO  com.suplin.demo.service.EbookTable                :50   [32m120342133352828928[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 09:56:40.445 INFO  com.suplin.demo.service.EbookTable                :51   [32m120342133352828928[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 09:56:40.445 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120342133352828928[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 09:56:40.445 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120342133352828928[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 09:56:45.066 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:56:45.161 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:57:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120342215447941120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:57:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120342215447941120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:57:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120342215447941120[0;39m ==> Parameters: 
2021-11-29 09:57:00.119 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120342215447941120[0;39m <==    Updates: 0
2021-11-29 09:57:00.119 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120342215447941120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š106æ¯«ç§’
2021-11-29 09:57:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120342236423655424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:57:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120342236423655424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:57:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120342236423655424[0;39m ==> Parameters: 
2021-11-29 09:57:05.019 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120342236423655424[0;39m <==    Updates: 3
2021-11-29 09:57:05.020 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120342236423655424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶6æ¯«ç§’
2021-11-29 09:57:15.051 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:57:15.160 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:57:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120342362206638080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:57:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120342362206638080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:57:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120342362206638080[0;39m ==> Parameters: 
2021-11-29 09:57:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120342362206638080[0;39m <==    Updates: 3
2021-11-29 09:57:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120342362206638080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 09:57:45.050 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:57:45.159 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:58:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120342467076820992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:58:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120342467076820992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:58:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120342467076820992[0;39m ==> Parameters: 
2021-11-29 09:58:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120342467076820992[0;39m <==    Updates: 0
2021-11-29 09:58:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120342467076820992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 09:58:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120342488052535296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:58:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120342488052535296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:58:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120342488052535296[0;39m ==> Parameters: 
2021-11-29 09:58:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120342488052535296[0;39m <==    Updates: 3
2021-11-29 09:58:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120342488052535296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 09:58:05.039 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120342488186753024[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:58:05.039 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120342488186753024[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 09:58:05.040 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120342488186753024[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 09:58:05.040 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120342488190947328[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:58:05.040 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120342488186753024[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:58:05.040 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120342488190947329[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:58:05.040 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120342488190947329[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 09:58:05.040 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120342488190947328[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 09:58:05.040 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120342488186753024[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 09:58:05.040 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120342488190947329[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 09:58:05.040 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120342488190947328[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 09:58:05.040 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120342488190947329[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:58:05.041 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120342488190947329[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 09:58:05.041 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120342488190947328[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:58:05.041 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120342488190947328[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 09:58:05.041 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120342488186753024[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 09:58:05.041 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120342488190947329[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 09:58:05.041 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120342488186753024[0;39m ==> Parameters: 
2021-11-29 09:58:05.042 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120342488190947329[0;39m ==> Parameters: 
2021-11-29 09:58:05.042 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120342488190947328[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 09:58:05.042 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120342488190947328[0;39m ==> Parameters: 
2021-11-29 09:58:05.042 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120342488186753024[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 09:58:05.043 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120342488186753024[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 09:58:05.043 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120342488190947328[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 09:58:05.043 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120342488186753024[0;39m <==        Row: 2021-11-29, 134, 74, 9, 5
2021-11-29 09:58:05.043 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120342488190947328[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 09:58:05.043 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120342488186753024[0;39m <==      Total: 2
2021-11-29 09:58:05.044 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120342488186753024[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":134,"viewIncrease":9,"voteCount":74,"voteIncrease":5}],"success":true}
2021-11-29 09:58:05.044 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120342488190947328[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 09:58:05.044 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120342488186753024[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 09:58:05.044 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120342488190947328[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 09:58:05.045 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120342488190947328[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 09:58:05.045 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120342488190947328[0;39m <==      Total: 4
2021-11-29 09:58:05.046 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120342488190947328[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 09:58:05.046 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120342488190947328[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2021-11-29 09:58:05.053 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342488190947329[0;39m <==    Columns: id, parent, name, sort
2021-11-29 09:58:05.054 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342488190947329[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 09:58:05.054 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342488190947329[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 09:58:05.054 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342488190947329[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 09:58:05.054 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342488190947329[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 09:58:05.055 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342488190947329[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 09:58:05.055 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342488190947329[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 09:58:05.055 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342488190947329[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 09:58:05.056 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342488190947329[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 09:58:05.056 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342488190947329[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 09:58:05.056 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342488190947329[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 09:58:05.056 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342488190947329[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 09:58:05.056 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342488190947329[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 09:58:05.057 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342488190947329[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 09:58:05.057 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342488190947329[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 09:58:05.057 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342488190947329[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 09:58:05.058 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120342488190947329[0;39m <==      Total: 15
2021-11-29 09:58:05.058 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120342488190947329[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 09:58:05.059 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120342488190947329[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š19 ms -------------
2021-11-29 09:58:05.110 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120342488484548608[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:58:05.110 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120342488484548608[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 09:58:05.110 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120342488484548608[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 09:58:05.110 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120342488484548608[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:58:05.110 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120342488484548608[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 09:58:05.112 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120342488484548608[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 09:58:05.113 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120342488484548608[0;39m ==> Parameters: 0(Long)
2021-11-29 09:58:05.114 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120342488484548608[0;39m <==    Columns: count(0)
2021-11-29 09:58:05.115 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120342488484548608[0;39m <==        Row: 0
2021-11-29 09:58:05.115 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120342488484548608[0;39m <==      Total: 1
2021-11-29 09:58:05.115 INFO  com.suplin.demo.service.EbookTable                :50   [32m120342488484548608[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 09:58:05.115 INFO  com.suplin.demo.service.EbookTable                :51   [32m120342488484548608[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 09:58:05.115 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120342488484548608[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 09:58:05.116 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120342488484548608[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2021-11-29 09:58:15.069 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:58:15.165 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:58:32.682 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120342604129898498[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:58:32.682 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120342604129898497[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:58:32.682 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120342604129898496[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:58:32.682 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120342604129898498[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 09:58:32.682 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120342604129898497[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 09:58:32.682 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120342604129898496[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 09:58:32.683 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120342604129898497[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 09:58:32.683 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120342604129898498[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 09:58:32.683 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120342604129898497[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:58:32.683 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120342604129898498[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:58:32.683 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120342604129898496[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 09:58:32.683 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120342604129898497[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 09:58:32.683 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120342604129898496[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:58:32.683 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120342604129898498[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 09:58:32.683 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120342604129898496[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 09:58:32.684 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120342604129898496[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 09:58:32.684 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120342604129898498[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 09:58:32.684 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120342604129898497[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 09:58:32.684 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120342604129898496[0;39m ==> Parameters: 
2021-11-29 09:58:32.684 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120342604129898498[0;39m ==> Parameters: 
2021-11-29 09:58:32.684 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120342604129898497[0;39m ==> Parameters: 
2021-11-29 09:58:32.685 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120342604129898497[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 09:58:32.685 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342604129898496[0;39m <==    Columns: id, parent, name, sort
2021-11-29 09:58:32.685 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120342604129898498[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 09:58:32.685 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342604129898496[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 09:58:32.686 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120342604129898497[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 09:58:32.686 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120342604129898498[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 09:58:32.686 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342604129898496[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 09:58:32.686 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120342604129898498[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 09:58:32.686 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120342604129898497[0;39m <==        Row: 2021-11-29, 134, 74, 9, 5
2021-11-29 09:58:32.686 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342604129898496[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 09:58:32.686 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120342604129898498[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 09:58:32.686 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120342604129898497[0;39m <==      Total: 2
2021-11-29 09:58:32.686 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342604129898496[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 09:58:32.686 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120342604129898498[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 09:58:32.687 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120342604129898498[0;39m <==      Total: 4
2021-11-29 09:58:32.687 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342604129898496[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 09:58:32.687 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120342604129898497[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":134,"viewIncrease":9,"voteCount":74,"voteIncrease":5}],"success":true}
2021-11-29 09:58:32.687 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120342604129898498[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 09:58:32.687 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342604129898496[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 09:58:32.687 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120342604129898497[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 09:58:32.687 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120342604129898498[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 09:58:32.687 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342604129898496[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 09:58:32.687 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342604129898496[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 09:58:32.688 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342604129898496[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 09:58:32.688 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342604129898496[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 09:58:32.688 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342604129898496[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 09:58:32.689 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342604129898496[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 09:58:32.689 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342604129898496[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 09:58:32.689 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342604129898496[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 09:58:32.690 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342604129898496[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 09:58:32.690 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120342604129898496[0;39m <==      Total: 15
2021-11-29 09:58:32.691 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120342604129898496[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 09:58:32.691 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120342604129898496[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š9 ms -------------
2021-11-29 09:58:32.824 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120342604725489664[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:58:32.824 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120342604725489664[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 09:58:32.825 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120342604725489664[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 09:58:32.825 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120342604725489664[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:58:32.825 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120342604725489664[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 09:58:32.826 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120342604725489664[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 09:58:32.826 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120342604725489664[0;39m ==> Parameters: 0(Long)
2021-11-29 09:58:32.827 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120342604725489664[0;39m <==    Columns: count(0)
2021-11-29 09:58:32.828 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120342604725489664[0;39m <==        Row: 0
2021-11-29 09:58:32.828 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120342604725489664[0;39m <==      Total: 1
2021-11-29 09:58:32.829 INFO  com.suplin.demo.service.EbookTable                :50   [32m120342604725489664[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 09:58:32.829 INFO  com.suplin.demo.service.EbookTable                :51   [32m120342604725489664[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 09:58:32.829 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120342604725489664[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 09:58:32.829 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120342604725489664[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 09:58:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120342613869072384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:58:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120342613869072384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:58:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120342613869072384[0;39m ==> Parameters: 
2021-11-29 09:58:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120342613869072384[0;39m <==    Updates: 3
2021-11-29 09:58:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120342613869072384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶6æ¯«ç§’
2021-11-29 09:58:38.485 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120342628469444610[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:58:38.485 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120342628469444608[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:58:38.485 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120342628469444609[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:58:38.486 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120342628469444610[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 09:58:38.486 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120342628469444609[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 09:58:38.486 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120342628469444608[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 09:58:38.486 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120342628469444610[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 09:58:38.486 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120342628469444609[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 09:58:38.486 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120342628469444608[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 09:58:38.486 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120342628469444610[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:58:38.486 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120342628469444609[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:58:38.486 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120342628469444608[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:58:38.486 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120342628469444610[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 09:58:38.486 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120342628469444608[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 09:58:38.486 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120342628469444609[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 09:58:38.487 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120342628469444608[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 09:58:38.487 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120342628469444610[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 09:58:38.487 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120342628469444609[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 09:58:38.487 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120342628469444610[0;39m ==> Parameters: 
2021-11-29 09:58:38.487 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120342628469444608[0;39m ==> Parameters: 
2021-11-29 09:58:38.487 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120342628469444609[0;39m ==> Parameters: 
2021-11-29 09:58:38.488 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120342628469444610[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 09:58:38.488 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120342628469444609[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 09:58:38.488 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342628469444608[0;39m <==    Columns: id, parent, name, sort
2021-11-29 09:58:38.489 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120342628469444610[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 09:58:38.489 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342628469444608[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 09:58:38.489 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120342628469444609[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 09:58:38.489 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342628469444608[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 09:58:38.489 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120342628469444610[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 09:58:38.489 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120342628469444609[0;39m <==        Row: 2021-11-29, 134, 74, 9, 5
2021-11-29 09:58:38.489 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342628469444608[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 09:58:38.489 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120342628469444610[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 09:58:38.489 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120342628469444609[0;39m <==      Total: 2
2021-11-29 09:58:38.489 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342628469444608[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 09:58:38.490 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342628469444608[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 09:58:38.490 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120342628469444610[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 09:58:38.490 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120342628469444609[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":134,"viewIncrease":9,"voteCount":74,"voteIncrease":5}],"success":true}
2021-11-29 09:58:38.490 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120342628469444609[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 09:58:38.490 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342628469444608[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 09:58:38.490 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120342628469444610[0;39m <==      Total: 4
2021-11-29 09:58:38.490 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342628469444608[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 09:58:38.491 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120342628469444610[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 09:58:38.491 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342628469444608[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 09:58:38.491 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120342628469444610[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2021-11-29 09:58:38.491 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342628469444608[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 09:58:38.491 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342628469444608[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 09:58:38.492 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342628469444608[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 09:58:38.492 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342628469444608[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 09:58:38.492 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342628469444608[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 09:58:38.493 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342628469444608[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 09:58:38.493 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342628469444608[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 09:58:38.494 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120342628469444608[0;39m <==      Total: 15
2021-11-29 09:58:38.494 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120342628469444608[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 09:58:38.495 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120342628469444608[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š10 ms -------------
2021-11-29 09:58:38.579 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120342628863709184[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:58:38.579 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120342628863709184[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 09:58:38.579 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120342628863709184[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 09:58:38.579 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120342628863709184[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:58:38.580 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120342628863709184[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 09:58:38.583 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120342628863709184[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 09:58:38.584 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120342628863709184[0;39m ==> Parameters: 0(Long)
2021-11-29 09:58:38.584 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120342628863709184[0;39m <==    Columns: count(0)
2021-11-29 09:58:38.585 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120342628863709184[0;39m <==        Row: 0
2021-11-29 09:58:38.585 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120342628863709184[0;39m <==      Total: 1
2021-11-29 09:58:38.585 INFO  com.suplin.demo.service.EbookTable                :50   [32m120342628863709184[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 09:58:38.586 INFO  com.suplin.demo.service.EbookTable                :51   [32m120342628863709184[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 09:58:38.586 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120342628863709184[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 09:58:38.586 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120342628863709184[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2021-11-29 09:58:45.132 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:58:45.180 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:58:45.373 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120342657359810562[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:58:45.373 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120342657359810561[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:58:45.373 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120342657359810560[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:58:45.374 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120342657359810561[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 09:58:45.374 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120342657359810562[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 09:58:45.374 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120342657359810560[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 09:58:45.374 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120342657359810561[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 09:58:45.374 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120342657359810560[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 09:58:45.374 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120342657359810562[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 09:58:45.374 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120342657359810561[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:58:45.374 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120342657359810562[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:58:45.374 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120342657359810560[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:58:45.374 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120342657359810562[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 09:58:45.374 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120342657359810561[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 09:58:45.374 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120342657359810560[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 09:58:45.375 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120342657359810561[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 09:58:45.375 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120342657359810560[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 09:58:45.375 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120342657359810562[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 09:58:45.375 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120342657359810561[0;39m ==> Parameters: 
2021-11-29 09:58:45.375 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120342657359810560[0;39m ==> Parameters: 
2021-11-29 09:58:45.375 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120342657359810562[0;39m ==> Parameters: 
2021-11-29 09:58:45.376 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120342657359810562[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 09:58:45.376 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120342657359810560[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 09:58:45.376 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342657359810561[0;39m <==    Columns: id, parent, name, sort
2021-11-29 09:58:45.376 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120342657359810562[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 09:58:45.376 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342657359810561[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 09:58:45.376 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120342657359810560[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 09:58:45.376 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342657359810561[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 09:58:45.376 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120342657359810562[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 09:58:45.376 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120342657359810560[0;39m <==        Row: 2021-11-29, 134, 74, 9, 5
2021-11-29 09:58:45.376 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342657359810561[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 09:58:45.377 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120342657359810562[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 09:58:45.377 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342657359810561[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 09:58:45.377 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120342657359810560[0;39m <==      Total: 2
2021-11-29 09:58:45.377 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120342657359810562[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 09:58:45.377 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342657359810561[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 09:58:45.377 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120342657359810560[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":134,"viewIncrease":9,"voteCount":74,"voteIncrease":5}],"success":true}
2021-11-29 09:58:45.377 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120342657359810562[0;39m <==      Total: 4
2021-11-29 09:58:45.377 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120342657359810560[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 09:58:45.377 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342657359810561[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 09:58:45.377 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120342657359810562[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 09:58:45.377 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342657359810561[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 09:58:45.378 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120342657359810562[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 09:58:45.378 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342657359810561[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 09:58:45.378 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342657359810561[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 09:58:45.378 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342657359810561[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 09:58:45.379 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342657359810561[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 09:58:45.379 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342657359810561[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 09:58:45.379 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342657359810561[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 09:58:45.379 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342657359810561[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 09:58:45.380 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342657359810561[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 09:58:45.380 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120342657359810561[0;39m <==      Total: 15
2021-11-29 09:58:45.381 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120342657359810561[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 09:58:45.381 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120342657359810561[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2021-11-29 09:58:45.479 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120342657804406784[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:58:45.480 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120342657804406784[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 09:58:45.480 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120342657804406784[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 09:58:45.480 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120342657804406784[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:58:45.480 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120342657804406784[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 09:58:45.482 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120342657804406784[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 09:58:45.482 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120342657804406784[0;39m ==> Parameters: 0(Long)
2021-11-29 09:58:45.483 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120342657804406784[0;39m <==    Columns: count(0)
2021-11-29 09:58:45.483 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120342657804406784[0;39m <==        Row: 0
2021-11-29 09:58:45.483 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120342657804406784[0;39m <==      Total: 1
2021-11-29 09:58:45.483 INFO  com.suplin.demo.service.EbookTable                :50   [32m120342657804406784[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 09:58:45.483 INFO  com.suplin.demo.service.EbookTable                :51   [32m120342657804406784[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 09:58:45.484 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120342657804406784[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 09:58:45.484 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120342657804406784[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 09:59:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120342718726672384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 09:59:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120342718726672384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 09:59:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120342718726672384[0;39m ==> Parameters: 
2021-11-29 09:59:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120342718726672384[0;39m <==    Updates: 0
2021-11-29 09:59:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120342718726672384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 09:59:05.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120342739685609472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:59:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120342739685609472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:59:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120342739685609472[0;39m ==> Parameters: 
2021-11-29 09:59:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120342739685609472[0;39m <==    Updates: 3
2021-11-29 09:59:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120342739685609472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 09:59:15.059 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:59:15.184 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:59:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120342865573449728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 09:59:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120342865573449728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 09:59:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120342865573449728[0;39m ==> Parameters: 
2021-11-29 09:59:35.020 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120342865573449728[0;39m <==    Updates: 3
2021-11-29 09:59:35.020 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120342865573449728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 09:59:45.058 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:59:45.181 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 09:59:50.293 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120342929654026240[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:59:50.293 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120342929654026242[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:59:50.293 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120342929654026241[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:59:50.293 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120342929654026242[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 09:59:50.293 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120342929654026241[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 09:59:50.293 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120342929654026240[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 09:59:50.293 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120342929654026242[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 09:59:50.293 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120342929654026242[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:59:50.293 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120342929654026241[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 09:59:50.293 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120342929654026240[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 09:59:50.294 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120342929654026241[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:59:50.294 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120342929654026240[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:59:50.294 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120342929654026242[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 09:59:50.294 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120342929654026241[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 09:59:50.294 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120342929654026240[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 09:59:50.294 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120342929654026242[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 09:59:50.294 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120342929654026240[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 09:59:50.294 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120342929654026241[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 09:59:50.295 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120342929654026241[0;39m ==> Parameters: 
2021-11-29 09:59:50.295 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120342929654026240[0;39m ==> Parameters: 
2021-11-29 09:59:50.295 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120342929654026242[0;39m ==> Parameters: 
2021-11-29 09:59:50.295 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120342929654026240[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 09:59:50.295 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120342929654026242[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 09:59:50.295 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342929654026241[0;39m <==    Columns: id, parent, name, sort
2021-11-29 09:59:50.296 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342929654026241[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 09:59:50.296 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120342929654026242[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 09:59:50.296 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120342929654026240[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 09:59:50.296 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342929654026241[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 09:59:50.296 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342929654026241[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 09:59:50.296 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120342929654026240[0;39m <==        Row: 2021-11-29, 134, 74, 9, 5
2021-11-29 09:59:50.296 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120342929654026242[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 09:59:50.296 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342929654026241[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 09:59:50.296 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120342929654026242[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 09:59:50.297 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342929654026241[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 09:59:50.297 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120342929654026240[0;39m <==      Total: 2
2021-11-29 09:59:50.297 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120342929654026242[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 09:59:50.297 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342929654026241[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 09:59:50.297 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120342929654026240[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":134,"viewIncrease":9,"voteCount":74,"voteIncrease":5}],"success":true}
2021-11-29 09:59:50.297 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120342929654026242[0;39m <==      Total: 4
2021-11-29 09:59:50.297 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342929654026241[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 09:59:50.297 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120342929654026240[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 09:59:50.297 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342929654026241[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 09:59:50.297 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120342929654026242[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 09:59:50.297 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342929654026241[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 09:59:50.297 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120342929654026242[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 09:59:50.298 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342929654026241[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 09:59:50.298 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342929654026241[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 09:59:50.298 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342929654026241[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 09:59:50.299 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342929654026241[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 09:59:50.299 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342929654026241[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 09:59:50.299 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120342929654026241[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 09:59:50.299 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120342929654026241[0;39m <==      Total: 15
2021-11-29 09:59:50.301 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120342929654026241[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 09:59:50.301 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120342929654026241[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2021-11-29 09:59:50.446 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120342930295754752[0;39m ------------- å¼€å§‹ -------------
2021-11-29 09:59:50.447 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120342930295754752[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 09:59:50.447 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120342930295754752[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 09:59:50.447 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120342930295754752[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 09:59:50.447 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120342930295754752[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 09:59:50.448 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120342930295754752[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 09:59:50.448 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120342930295754752[0;39m ==> Parameters: 0(Long)
2021-11-29 09:59:50.449 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120342930295754752[0;39m <==    Columns: count(0)
2021-11-29 09:59:50.449 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120342930295754752[0;39m <==        Row: 0
2021-11-29 09:59:50.449 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120342930295754752[0;39m <==      Total: 1
2021-11-29 09:59:50.450 INFO  com.suplin.demo.service.EbookTable                :50   [32m120342930295754752[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 09:59:50.450 INFO  com.suplin.demo.service.EbookTable                :51   [32m120342930295754752[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 09:59:50.450 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120342930295754752[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 09:59:50.450 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120342930295754752[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:00:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120342970401689600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:00:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120342970401689600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:00:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120342970401689600[0;39m ==> Parameters: 
2021-11-29 10:00:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120342970401689600[0;39m <==    Updates: 0
2021-11-29 10:00:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120342970401689600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 10:00:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120342991406764032[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:00:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120342991406764032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:00:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120342991406764032[0;39m ==> Parameters: 
2021-11-29 10:00:05.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120342991406764032[0;39m <==    Updates: 3
2021-11-29 10:00:05.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120342991406764032[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:00:15.060 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:00:15.139 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:00:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120343117231689728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:00:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120343117231689728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:00:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120343117231689728[0;39m ==> Parameters: 
2021-11-29 10:00:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120343117231689728[0;39m <==    Updates: 3
2021-11-29 10:00:35.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120343117231689728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 10:00:45.055 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:00:45.165 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:01:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120343222051540992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:01:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120343222051540992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:01:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120343222051540992[0;39m ==> Parameters: 
2021-11-29 10:01:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120343222051540992[0;39m <==    Updates: 0
2021-11-29 10:01:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120343222051540992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 10:01:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120343243018866688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:01:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120343243018866688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:01:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120343243018866688[0;39m ==> Parameters: 
2021-11-29 10:01:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120343243018866688[0;39m <==    Updates: 3
2021-11-29 10:01:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120343243018866688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 10:01:15.082 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:01:15.176 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:01:35.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120343368831209472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:01:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120343368831209472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:01:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120343368831209472[0;39m ==> Parameters: 
2021-11-29 10:01:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120343368831209472[0;39m <==    Updates: 3
2021-11-29 10:01:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120343368831209472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:01:45.075 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:01:45.184 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:02:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120343473701392384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:02:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120343473701392384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:02:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120343473701392384[0;39m ==> Parameters: 
2021-11-29 10:02:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120343473701392384[0;39m <==    Updates: 0
2021-11-29 10:02:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120343473701392384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 10:02:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120343494723244032[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:02:05.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120343494723244032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:02:05.019 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120343494723244032[0;39m ==> Parameters: 
2021-11-29 10:02:05.021 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120343494723244032[0;39m <==    Updates: 3
2021-11-29 10:02:05.022 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120343494723244032[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶6æ¯«ç§’
2021-11-29 10:02:15.071 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:02:15.166 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:02:34.075 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120343616605523970[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:02:34.076 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120343616605523969[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:02:34.076 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120343616605523968[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:02:34.076 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120343616605523970[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 10:02:34.076 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120343616605523968[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 10:02:34.076 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120343616605523969[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 10:02:34.076 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120343616605523970[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 10:02:34.076 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120343616605523969[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 10:02:34.076 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120343616605523968[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 10:02:34.076 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120343616605523969[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:02:34.076 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120343616605523968[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:02:34.076 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120343616605523970[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:02:34.077 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120343616605523969[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:02:34.077 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120343616605523970[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:02:34.077 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120343616605523968[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:02:34.077 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120343616605523969[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:02:34.077 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120343616605523970[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 10:02:34.077 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120343616605523968[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:02:34.078 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120343616605523969[0;39m ==> Parameters: 
2021-11-29 10:02:34.078 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120343616605523970[0;39m ==> Parameters: 
2021-11-29 10:02:34.078 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120343616605523968[0;39m ==> Parameters: 
2021-11-29 10:02:34.079 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120343616605523968[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 10:02:34.079 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343616605523969[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 10:02:34.079 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343616605523970[0;39m <==    Columns: id, parent, name, sort
2021-11-29 10:02:34.079 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343616605523970[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 10:02:34.079 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343616605523969[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 10:02:34.079 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120343616605523968[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 10:02:34.080 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343616605523970[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 10:02:34.080 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343616605523969[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 10:02:34.080 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343616605523970[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 10:02:34.080 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120343616605523968[0;39m <==        Row: 2021-11-29, 134, 74, 9, 5
2021-11-29 10:02:34.080 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120343616605523968[0;39m <==      Total: 2
2021-11-29 10:02:34.080 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343616605523970[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 10:02:34.080 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343616605523969[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 10:02:34.080 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343616605523970[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 10:02:34.081 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120343616605523968[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":134,"viewIncrease":9,"voteCount":74,"voteIncrease":5}],"success":true}
2021-11-29 10:02:34.081 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343616605523969[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 10:02:34.081 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343616605523970[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 10:02:34.081 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120343616605523968[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2021-11-29 10:02:34.081 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343616605523970[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 10:02:34.081 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120343616605523969[0;39m <==      Total: 4
2021-11-29 10:02:34.081 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343616605523970[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 10:02:34.081 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343616605523970[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 10:02:34.081 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120343616605523969[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 10:02:34.081 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120343616605523969[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2021-11-29 10:02:34.081 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343616605523970[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 10:02:34.082 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343616605523970[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 10:02:34.082 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343616605523970[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 10:02:34.082 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343616605523970[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 10:02:34.083 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343616605523970[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 10:02:34.083 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343616605523970[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 10:02:34.083 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120343616605523970[0;39m <==      Total: 15
2021-11-29 10:02:34.085 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120343616605523970[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 10:02:34.085 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120343616605523970[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š10 ms -------------
2021-11-29 10:02:34.152 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120343616928485377[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:02:34.152 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120343616928485376[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:02:34.152 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120343616928485378[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:02:34.152 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120343616928485377[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 10:02:34.153 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120343616928485378[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 10:02:34.152 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120343616928485376[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 10:02:34.153 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120343616928485377[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 10:02:34.153 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120343616928485378[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 10:02:34.153 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120343616928485377[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:02:34.153 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120343616928485378[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:02:34.153 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120343616928485376[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 10:02:34.153 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120343616928485377[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:02:34.153 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120343616928485378[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:02:34.153 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120343616928485376[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:02:34.153 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120343616928485376[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:02:34.153 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120343616928485377[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:02:34.153 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120343616928485378[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 10:02:34.153 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120343616928485378[0;39m ==> Parameters: 
2021-11-29 10:02:34.153 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120343616928485377[0;39m ==> Parameters: 
2021-11-29 10:02:34.153 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120343616928485376[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:02:34.154 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120343616928485376[0;39m ==> Parameters: 
2021-11-29 10:02:34.154 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120343616928485377[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 10:02:34.154 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343616928485378[0;39m <==    Columns: id, parent, name, sort
2021-11-29 10:02:34.154 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343616928485378[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 10:02:34.154 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120343616928485377[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 10:02:34.155 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343616928485376[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 10:02:34.155 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343616928485378[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 10:02:34.155 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343616928485376[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 10:02:34.155 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343616928485378[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 10:02:34.155 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120343616928485377[0;39m <==        Row: 2021-11-29, 134, 74, 9, 5
2021-11-29 10:02:34.155 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343616928485376[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 10:02:34.155 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120343616928485377[0;39m <==      Total: 2
2021-11-29 10:02:34.155 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343616928485378[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 10:02:34.155 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343616928485376[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 10:02:34.155 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343616928485378[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 10:02:34.155 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120343616928485377[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":134,"viewIncrease":9,"voteCount":74,"voteIncrease":5}],"success":true}
2021-11-29 10:02:34.155 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343616928485376[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 10:02:34.156 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343616928485378[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 10:02:34.156 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120343616928485377[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:02:34.156 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120343616928485376[0;39m <==      Total: 4
2021-11-29 10:02:34.156 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343616928485378[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 10:02:34.156 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120343616928485376[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 10:02:34.156 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343616928485378[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 10:02:34.156 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120343616928485376[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:02:34.156 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343616928485378[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 10:02:34.157 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343616928485378[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 10:02:34.157 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343616928485378[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 10:02:34.157 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343616928485378[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 10:02:34.157 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343616928485378[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 10:02:34.158 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343616928485378[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 10:02:34.158 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343616928485378[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 10:02:34.158 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120343616928485378[0;39m <==      Total: 15
2021-11-29 10:02:34.159 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120343616928485378[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 10:02:34.160 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120343616928485378[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2021-11-29 10:02:34.193 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120343617100451840[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:02:34.193 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120343617100451840[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:02:34.193 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120343617100451840[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:02:34.193 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120343617100451840[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:02:34.194 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120343617100451840[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 10:02:34.195 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343617100451840[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:02:34.196 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343617100451840[0;39m ==> Parameters: 0(Long)
2021-11-29 10:02:34.196 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120343617100451840[0;39m <==    Columns: count(0)
2021-11-29 10:02:34.197 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120343617100451840[0;39m <==        Row: 0
2021-11-29 10:02:34.197 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343617100451840[0;39m <==      Total: 1
2021-11-29 10:02:34.197 INFO  com.suplin.demo.service.EbookTable                :50   [32m120343617100451840[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:02:34.197 INFO  com.suplin.demo.service.EbookTable                :51   [32m120343617100451840[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:02:34.197 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120343617100451840[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:02:34.197 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120343617100451840[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:02:34.252 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120343617347915776[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:02:34.252 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120343617347915776[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:02:34.252 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120343617347915776[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:02:34.252 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120343617347915776[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:02:34.253 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120343617347915776[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 10:02:34.254 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343617347915776[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:02:34.254 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343617347915776[0;39m ==> Parameters: 0(Long)
2021-11-29 10:02:34.255 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120343617347915776[0;39m <==    Columns: count(0)
2021-11-29 10:02:34.255 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120343617347915776[0;39m <==        Row: 0
2021-11-29 10:02:34.255 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343617347915776[0;39m <==      Total: 1
2021-11-29 10:02:34.255 INFO  com.suplin.demo.service.EbookTable                :50   [32m120343617347915776[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:02:34.255 INFO  com.suplin.demo.service.EbookTable                :51   [32m120343617347915776[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:02:34.256 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120343617347915776[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:02:34.256 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120343617347915776[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:02:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120343620531392512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:02:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120343620531392512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:02:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120343620531392512[0;39m ==> Parameters: 
2021-11-29 10:02:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120343620531392512[0;39m <==    Updates: 3
2021-11-29 10:02:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120343620531392512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:02:38.931 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120343636973064192[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:02:38.931 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120343636973064192[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:02:38.931 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120343636973064192[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:02:38.932 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120343636973064192[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:02:38.932 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120343636973064192[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":100,"page":1,"size":100}]
2021-11-29 10:02:38.933 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343636973064192[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:02:38.935 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343636973064192[0;39m ==> Parameters: 100(Long)
2021-11-29 10:02:38.935 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120343636973064192[0;39m <==    Columns: count(0)
2021-11-29 10:02:38.935 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120343636973064192[0;39m <==        Row: 0
2021-11-29 10:02:38.935 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343636973064192[0;39m <==      Total: 1
2021-11-29 10:02:38.935 INFO  com.suplin.demo.service.EbookTable                :50   [32m120343636973064192[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:02:38.935 INFO  com.suplin.demo.service.EbookTable                :51   [32m120343636973064192[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:02:38.937 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120343636973064192[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:02:38.937 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120343636973064192[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2021-11-29 10:02:42.412 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120343651573436418[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:02:42.412 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120343651573436416[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:02:42.412 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120343651573436417[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:02:42.412 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120343651573436418[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 10:02:42.413 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120343651573436416[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 10:02:42.413 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120343651573436417[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 10:02:42.413 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120343651573436416[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 10:02:42.413 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120343651573436418[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 10:02:42.413 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120343651573436417[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 10:02:42.413 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120343651573436416[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:02:42.413 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120343651573436418[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:02:42.413 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120343651573436417[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:02:42.413 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120343651573436416[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:02:42.413 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120343651573436418[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:02:42.413 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120343651573436417[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:02:42.414 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120343651573436416[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:02:42.414 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120343651573436418[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:02:42.414 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120343651573436417[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 10:02:42.414 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120343651573436418[0;39m ==> Parameters: 
2021-11-29 10:02:42.414 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120343651573436416[0;39m ==> Parameters: 
2021-11-29 10:02:42.414 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120343651573436417[0;39m ==> Parameters: 
2021-11-29 10:02:42.415 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343651573436418[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 10:02:42.415 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120343651573436416[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 10:02:42.415 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343651573436417[0;39m <==    Columns: id, parent, name, sort
2021-11-29 10:02:42.415 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343651573436418[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 10:02:42.415 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343651573436417[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 10:02:42.415 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120343651573436416[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 10:02:42.416 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343651573436417[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 10:02:42.416 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343651573436418[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 10:02:42.416 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120343651573436416[0;39m <==        Row: 2021-11-29, 134, 74, 9, 5
2021-11-29 10:02:42.416 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120343651573436416[0;39m <==      Total: 2
2021-11-29 10:02:42.416 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343651573436417[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 10:02:42.417 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343651573436418[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 10:02:42.417 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343651573436417[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 10:02:42.417 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120343651573436416[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":134,"viewIncrease":9,"voteCount":74,"voteIncrease":5}],"success":true}
2021-11-29 10:02:42.417 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343651573436418[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 10:02:42.417 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120343651573436416[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 10:02:42.417 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343651573436417[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 10:02:42.417 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120343651573436418[0;39m <==      Total: 4
2021-11-29 10:02:42.417 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343651573436417[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 10:02:42.417 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343651573436417[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 10:02:42.417 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120343651573436418[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 10:02:42.417 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120343651573436418[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 10:02:42.418 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343651573436417[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 10:02:42.418 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343651573436417[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 10:02:42.418 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343651573436417[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 10:02:42.419 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343651573436417[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 10:02:42.419 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343651573436417[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 10:02:42.419 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343651573436417[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 10:02:42.419 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343651573436417[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 10:02:42.420 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343651573436417[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 10:02:42.420 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120343651573436417[0;39m <==      Total: 15
2021-11-29 10:02:42.421 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120343651573436417[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 10:02:42.421 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120343651573436417[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š9 ms -------------
2021-11-29 10:02:42.503 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120343651955118080[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:02:42.503 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120343651955118080[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:02:42.503 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120343651955118080[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:02:42.503 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120343651955118080[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:02:42.504 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120343651955118080[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 10:02:42.505 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343651955118080[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:02:42.505 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343651955118080[0;39m ==> Parameters: 0(Long)
2021-11-29 10:02:42.506 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120343651955118080[0;39m <==    Columns: count(0)
2021-11-29 10:02:42.506 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120343651955118080[0;39m <==        Row: 0
2021-11-29 10:02:42.506 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343651955118080[0;39m <==      Total: 1
2021-11-29 10:02:42.507 INFO  com.suplin.demo.service.EbookTable                :50   [32m120343651955118080[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:02:42.507 INFO  com.suplin.demo.service.EbookTable                :51   [32m120343651955118080[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:02:42.507 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120343651955118080[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:02:42.507 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120343651955118080[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:02:45.082 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:02:45.177 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:02:46.904 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120343670414249984[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:02:46.905 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120343670418444288[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:02:46.905 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120343670418444289[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:02:46.905 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120343670418444289[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 10:02:46.905 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120343670414249984[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 10:02:46.905 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120343670418444288[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 10:02:46.905 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120343670418444289[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 10:02:46.905 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120343670414249984[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 10:02:46.905 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120343670418444289[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:02:46.905 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120343670418444288[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 10:02:46.905 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120343670414249984[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:02:46.905 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120343670418444288[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:02:46.905 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120343670418444289[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:02:46.906 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120343670414249984[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:02:46.906 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120343670418444288[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:02:46.906 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120343670418444288[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 10:02:46.906 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120343670418444289[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:02:46.906 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120343670414249984[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:02:46.907 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120343670414249984[0;39m ==> Parameters: 
2021-11-29 10:02:46.907 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120343670418444289[0;39m ==> Parameters: 
2021-11-29 10:02:46.907 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120343670418444288[0;39m ==> Parameters: 
2021-11-29 10:02:46.907 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120343670414249984[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 10:02:46.907 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343670418444289[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 10:02:46.907 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343670418444288[0;39m <==    Columns: id, parent, name, sort
2021-11-29 10:02:46.908 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343670418444288[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 10:02:46.908 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120343670414249984[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 10:02:46.908 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343670418444289[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 10:02:46.908 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343670418444288[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 10:02:46.908 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343670418444289[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 10:02:46.908 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120343670414249984[0;39m <==        Row: 2021-11-29, 134, 74, 9, 5
2021-11-29 10:02:46.908 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343670418444288[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 10:02:46.909 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120343670414249984[0;39m <==      Total: 2
2021-11-29 10:02:46.909 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343670418444289[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 10:02:46.909 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343670418444288[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 10:02:46.909 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343670418444289[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 10:02:46.909 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120343670414249984[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":134,"viewIncrease":9,"voteCount":74,"voteIncrease":5}],"success":true}
2021-11-29 10:02:46.909 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120343670414249984[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 10:02:46.909 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343670418444288[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 10:02:46.909 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120343670418444289[0;39m <==      Total: 4
2021-11-29 10:02:46.910 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343670418444288[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 10:02:46.910 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120343670418444289[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 10:02:46.910 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343670418444288[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 10:02:46.910 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120343670418444289[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 10:02:46.910 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343670418444288[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 10:02:46.910 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343670418444288[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 10:02:46.911 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343670418444288[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 10:02:46.911 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343670418444288[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 10:02:46.911 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343670418444288[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 10:02:46.912 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343670418444288[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 10:02:46.912 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343670418444288[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 10:02:46.913 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343670418444288[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 10:02:46.913 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120343670418444288[0;39m <==      Total: 15
2021-11-29 10:02:46.914 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120343670418444288[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 10:02:46.914 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120343670418444288[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š9 ms -------------
2021-11-29 10:02:46.971 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120343670695268352[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:02:46.972 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120343670695268352[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:02:46.972 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120343670695268352[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:02:46.972 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120343670695268352[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:02:46.973 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120343670695268352[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 10:02:46.974 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343670695268352[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:02:46.974 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343670695268352[0;39m ==> Parameters: 0(Long)
2021-11-29 10:02:46.975 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120343670695268352[0;39m <==    Columns: count(0)
2021-11-29 10:02:46.975 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120343670695268352[0;39m <==        Row: 0
2021-11-29 10:02:46.975 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343670695268352[0;39m <==      Total: 1
2021-11-29 10:02:46.976 INFO  com.suplin.demo.service.EbookTable                :50   [32m120343670695268352[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:02:46.976 INFO  com.suplin.demo.service.EbookTable                :51   [32m120343670695268352[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:02:46.976 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120343670695268352[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:02:46.976 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120343670695268352[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 10:03:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120343725376409600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:03:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120343725376409600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:03:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120343725376409600[0;39m ==> Parameters: 
2021-11-29 10:03:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120343725376409600[0;39m <==    Updates: 0
2021-11-29 10:03:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120343725376409600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 10:03:02.007 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120343733760823296[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:03:02.007 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120343733760823298[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:03:02.007 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120343733760823297[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:03:02.008 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120343733760823296[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 10:03:02.008 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120343733760823297[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 10:03:02.008 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120343733760823298[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 10:03:02.008 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120343733760823296[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 10:03:02.008 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120343733760823296[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:03:02.008 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120343733760823297[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 10:03:02.008 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120343733760823298[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 10:03:02.008 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120343733760823297[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:03:02.008 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120343733760823296[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:03:02.008 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120343733760823298[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:03:02.008 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120343733760823297[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:03:02.008 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120343733760823298[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:03:02.009 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120343733760823296[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 10:03:02.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120343733760823297[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:03:02.009 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120343733760823298[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:03:02.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120343733760823297[0;39m ==> Parameters: 
2021-11-29 10:03:02.010 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120343733760823296[0;39m ==> Parameters: 
2021-11-29 10:03:02.010 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120343733760823298[0;39m ==> Parameters: 
2021-11-29 10:03:02.011 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120343733760823297[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 10:03:02.011 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343733760823298[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 10:03:02.011 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343733760823296[0;39m <==    Columns: id, parent, name, sort
2021-11-29 10:03:02.011 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343733760823298[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 10:03:02.011 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343733760823296[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 10:03:02.011 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120343733760823297[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 10:03:02.012 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343733760823296[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 10:03:02.012 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343733760823298[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 10:03:02.012 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120343733760823297[0;39m <==        Row: 2021-11-29, 134, 74, 9, 5
2021-11-29 10:03:02.012 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343733760823296[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 10:03:02.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120343733760823297[0;39m <==      Total: 2
2021-11-29 10:03:02.012 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343733760823298[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 10:03:02.012 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343733760823296[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 10:03:02.012 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343733760823298[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 10:03:02.013 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120343733760823297[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":134,"viewIncrease":9,"voteCount":74,"voteIncrease":5}],"success":true}
2021-11-29 10:03:02.013 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343733760823296[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 10:03:02.013 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120343733760823298[0;39m <==      Total: 4
2021-11-29 10:03:02.013 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120343733760823297[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2021-11-29 10:03:02.013 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343733760823296[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 10:03:02.013 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120343733760823298[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 10:03:02.013 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120343733760823298[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2021-11-29 10:03:02.013 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343733760823296[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 10:03:02.013 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343733760823296[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 10:03:02.014 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343733760823296[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 10:03:02.014 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343733760823296[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 10:03:02.014 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343733760823296[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 10:03:02.015 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343733760823296[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 10:03:02.015 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343733760823296[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 10:03:02.016 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343733760823296[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 10:03:02.016 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343733760823296[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 10:03:02.016 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120343733760823296[0;39m <==      Total: 15
2021-11-29 10:03:02.018 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120343733760823296[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 10:03:02.018 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120343733760823296[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š11 ms -------------
2021-11-29 10:03:02.107 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120343734180253696[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:03:02.107 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120343734180253696[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:03:02.107 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120343734180253696[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:03:02.107 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120343734180253696[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:03:02.107 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120343734180253696[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 10:03:02.109 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343734180253696[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:03:02.109 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343734180253696[0;39m ==> Parameters: 0(Long)
2021-11-29 10:03:02.110 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120343734180253696[0;39m <==    Columns: count(0)
2021-11-29 10:03:02.110 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120343734180253696[0;39m <==        Row: 0
2021-11-29 10:03:02.110 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343734180253696[0;39m <==      Total: 1
2021-11-29 10:03:02.111 INFO  com.suplin.demo.service.EbookTable                :50   [32m120343734180253696[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:03:02.111 INFO  com.suplin.demo.service.EbookTable                :51   [32m120343734180253696[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:03:02.111 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120343734180253696[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:03:02.111 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120343734180253696[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:03:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120343746360512512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:03:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120343746360512512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:03:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120343746360512512[0;39m ==> Parameters: 
2021-11-29 10:03:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120343746360512512[0;39m <==    Updates: 3
2021-11-29 10:03:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120343746360512512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:03:05.090 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120343746691862529[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:03:05.090 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120343746691862528[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:03:05.090 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120343746691862530[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:03:05.090 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120343746691862528[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 10:03:05.090 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120343746691862529[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 10:03:05.090 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120343746691862530[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 10:03:05.090 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120343746691862528[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 10:03:05.090 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120343746691862530[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 10:03:05.090 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120343746691862529[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 10:03:05.091 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120343746691862528[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:03:05.091 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120343746691862530[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:03:05.091 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120343746691862529[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:03:05.091 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120343746691862528[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:03:05.091 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120343746691862530[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:03:05.091 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120343746691862529[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:03:05.091 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120343746691862528[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:03:05.091 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120343746691862529[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:03:05.092 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120343746691862530[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 10:03:05.092 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120343746691862528[0;39m ==> Parameters: 
2021-11-29 10:03:05.092 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120343746691862529[0;39m ==> Parameters: 
2021-11-29 10:03:05.092 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120343746691862530[0;39m ==> Parameters: 
2021-11-29 10:03:05.093 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343746691862530[0;39m <==    Columns: id, parent, name, sort
2021-11-29 10:03:05.093 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343746691862529[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 10:03:05.093 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120343746691862528[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 10:03:05.093 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343746691862530[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 10:03:05.093 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120343746691862528[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 10:03:05.093 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343746691862529[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 10:03:05.093 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343746691862530[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 10:03:05.093 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120343746691862528[0;39m <==        Row: 2021-11-29, 134, 74, 9, 5
2021-11-29 10:03:05.093 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343746691862529[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 10:03:05.094 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343746691862530[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 10:03:05.094 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120343746691862528[0;39m <==      Total: 2
2021-11-29 10:03:05.094 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343746691862530[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 10:03:05.094 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343746691862529[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 10:03:05.094 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343746691862530[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 10:03:05.094 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120343746691862528[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":134,"viewIncrease":9,"voteCount":74,"voteIncrease":5}],"success":true}
2021-11-29 10:03:05.094 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343746691862529[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 10:03:05.094 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343746691862530[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 10:03:05.094 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120343746691862528[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:03:05.095 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120343746691862529[0;39m <==      Total: 4
2021-11-29 10:03:05.095 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343746691862530[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 10:03:05.095 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343746691862530[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 10:03:05.095 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120343746691862529[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 10:03:05.095 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120343746691862529[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 10:03:05.095 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343746691862530[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 10:03:05.095 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343746691862530[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 10:03:05.096 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343746691862530[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 10:03:05.096 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343746691862530[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 10:03:05.096 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343746691862530[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 10:03:05.097 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343746691862530[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 10:03:05.097 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343746691862530[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 10:03:05.098 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120343746691862530[0;39m <==      Total: 15
2021-11-29 10:03:05.099 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120343746691862530[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 10:03:05.099 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120343746691862530[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š9 ms -------------
2021-11-29 10:03:05.145 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120343746922549248[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:03:05.146 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120343746922549248[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:03:05.146 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120343746922549248[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:03:05.146 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120343746922549248[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:03:05.146 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120343746922549248[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 10:03:05.148 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343746922549248[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:03:05.148 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343746922549248[0;39m ==> Parameters: 0(Long)
2021-11-29 10:03:05.149 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120343746922549248[0;39m <==    Columns: count(0)
2021-11-29 10:03:05.150 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120343746922549248[0;39m <==        Row: 0
2021-11-29 10:03:05.150 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343746922549248[0;39m <==      Total: 1
2021-11-29 10:03:05.151 INFO  com.suplin.demo.service.EbookTable                :50   [32m120343746922549248[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:03:05.151 INFO  com.suplin.demo.service.EbookTable                :51   [32m120343746922549248[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:03:05.151 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120343746922549248[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:03:05.151 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120343746922549248[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2021-11-29 10:03:06.629 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120343753146896386[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:03:06.629 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120343753146896384[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:03:06.629 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120343753146896385[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:03:06.630 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120343753146896386[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 10:03:06.630 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120343753146896385[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 10:03:06.630 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120343753146896384[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 10:03:06.630 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120343753146896386[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 10:03:06.630 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120343753146896385[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 10:03:06.630 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120343753146896386[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:03:06.630 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120343753146896385[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:03:06.630 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120343753146896384[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 10:03:06.630 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120343753146896386[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:03:06.630 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120343753146896385[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:03:06.630 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120343753146896384[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:03:06.631 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120343753146896384[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:03:06.631 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120343753146896386[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 10:03:06.631 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120343753146896385[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:03:06.631 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120343753146896385[0;39m ==> Parameters: 
2021-11-29 10:03:06.631 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120343753146896386[0;39m ==> Parameters: 
2021-11-29 10:03:06.631 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120343753146896384[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:03:06.631 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120343753146896384[0;39m ==> Parameters: 
2021-11-29 10:03:06.632 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343753146896386[0;39m <==    Columns: id, parent, name, sort
2021-11-29 10:03:06.632 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120343753146896385[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 10:03:06.632 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343753146896386[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 10:03:06.632 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120343753146896385[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 10:03:06.632 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343753146896386[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 10:03:06.632 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343753146896384[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 10:03:06.632 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120343753146896385[0;39m <==        Row: 2021-11-29, 134, 74, 9, 5
2021-11-29 10:03:06.632 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343753146896386[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 10:03:06.632 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343753146896384[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 10:03:06.633 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343753146896386[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 10:03:06.633 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120343753146896385[0;39m <==      Total: 2
2021-11-29 10:03:06.633 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343753146896386[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 10:03:06.633 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343753146896384[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 10:03:06.633 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120343753146896385[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":134,"viewIncrease":9,"voteCount":74,"voteIncrease":5}],"success":true}
2021-11-29 10:03:06.633 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343753146896386[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 10:03:06.633 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120343753146896385[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:03:06.633 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343753146896384[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 10:03:06.633 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343753146896386[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 10:03:06.633 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343753146896386[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 10:03:06.633 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343753146896384[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 10:03:06.634 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343753146896386[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 10:03:06.634 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120343753146896384[0;39m <==      Total: 4
2021-11-29 10:03:06.634 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343753146896386[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 10:03:06.634 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343753146896386[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 10:03:06.634 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120343753146896384[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 10:03:06.634 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120343753146896384[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 10:03:06.634 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343753146896386[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 10:03:06.634 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343753146896386[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 10:03:06.635 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343753146896386[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 10:03:06.635 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343753146896386[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 10:03:06.635 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120343753146896386[0;39m <==      Total: 15
2021-11-29 10:03:06.637 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120343753146896386[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 10:03:06.637 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120343753146896386[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2021-11-29 10:03:06.691 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120343753406943232[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:03:06.691 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120343753406943232[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:03:06.691 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120343753406943232[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:03:06.691 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120343753406943232[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:03:06.691 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120343753406943232[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 10:03:06.693 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343753406943232[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:03:06.693 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343753406943232[0;39m ==> Parameters: 0(Long)
2021-11-29 10:03:06.694 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120343753406943232[0;39m <==    Columns: count(0)
2021-11-29 10:03:06.694 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120343753406943232[0;39m <==        Row: 0
2021-11-29 10:03:06.694 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343753406943232[0;39m <==      Total: 1
2021-11-29 10:03:06.695 INFO  com.suplin.demo.service.EbookTable                :50   [32m120343753406943232[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:03:06.695 INFO  com.suplin.demo.service.EbookTable                :51   [32m120343753406943232[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:03:06.695 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120343753406943232[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:03:06.695 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120343753406943232[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:03:09.107 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120343763540381696[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:03:09.108 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120343763540381696[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:03:09.108 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120343763540381696[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:03:09.108 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120343763540381696[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:03:09.108 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120343763540381696[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":100,"page":1,"size":100}]
2021-11-29 10:03:09.109 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343763540381696[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:03:09.110 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343763540381696[0;39m ==> Parameters: 100(Long)
2021-11-29 10:03:09.111 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120343763540381696[0;39m <==    Columns: count(0)
2021-11-29 10:03:09.111 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120343763540381696[0;39m <==        Row: 0
2021-11-29 10:03:09.111 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343763540381696[0;39m <==      Total: 1
2021-11-29 10:03:09.112 INFO  com.suplin.demo.service.EbookTable                :50   [32m120343763540381696[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:03:09.112 INFO  com.suplin.demo.service.EbookTable                :51   [32m120343763540381696[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:03:09.112 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120343763540381696[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:03:09.112 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120343763540381696[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 10:03:11.323 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120343772834959360[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:03:11.323 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120343772834959361[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:03:11.323 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120343772830765056[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:03:11.323 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120343772834959360[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 10:03:11.323 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120343772834959361[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 10:03:11.323 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120343772830765056[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 10:03:11.323 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120343772834959360[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 10:03:11.323 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120343772834959361[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 10:03:11.323 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120343772830765056[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 10:03:11.323 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120343772834959361[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:03:11.323 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120343772834959360[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:03:11.323 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120343772830765056[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:03:11.323 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120343772834959361[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:03:11.323 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120343772834959360[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:03:11.323 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120343772830765056[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:03:11.324 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120343772834959360[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:03:11.324 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120343772830765056[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:03:11.324 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120343772834959361[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 10:03:11.324 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120343772834959360[0;39m ==> Parameters: 
2021-11-29 10:03:11.324 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120343772830765056[0;39m ==> Parameters: 
2021-11-29 10:03:11.324 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120343772834959361[0;39m ==> Parameters: 
2021-11-29 10:03:11.325 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343772834959360[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 10:03:11.325 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120343772830765056[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 10:03:11.325 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343772834959361[0;39m <==    Columns: id, parent, name, sort
2021-11-29 10:03:11.326 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343772834959361[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 10:03:11.326 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120343772830765056[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 10:03:11.326 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343772834959360[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 10:03:11.326 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343772834959361[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 10:03:11.326 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343772834959360[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 10:03:11.326 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120343772830765056[0;39m <==        Row: 2021-11-29, 134, 74, 9, 5
2021-11-29 10:03:11.326 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343772834959361[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 10:03:11.326 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120343772830765056[0;39m <==      Total: 2
2021-11-29 10:03:11.326 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343772834959360[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 10:03:11.327 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343772834959361[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 10:03:11.327 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343772834959361[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 10:03:11.327 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120343772830765056[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":134,"viewIncrease":9,"voteCount":74,"voteIncrease":5}],"success":true}
2021-11-29 10:03:11.327 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343772834959360[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 10:03:11.327 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343772834959361[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 10:03:11.327 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120343772830765056[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 10:03:11.327 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343772834959361[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 10:03:11.327 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120343772834959360[0;39m <==      Total: 4
2021-11-29 10:03:11.327 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343772834959361[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 10:03:11.328 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120343772834959360[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 10:03:11.328 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343772834959361[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 10:03:11.328 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120343772834959360[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 10:03:11.328 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343772834959361[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 10:03:11.328 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343772834959361[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 10:03:11.329 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343772834959361[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 10:03:11.329 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343772834959361[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 10:03:11.330 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343772834959361[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 10:03:11.330 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343772834959361[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 10:03:11.330 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120343772834959361[0;39m <==      Total: 15
2021-11-29 10:03:11.331 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120343772834959361[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 10:03:11.332 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120343772834959361[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š9 ms -------------
2021-11-29 10:03:11.381 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120343773078228992[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:03:11.381 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120343773078228992[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:03:11.381 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120343773078228992[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:03:11.381 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120343773078228992[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:03:11.381 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120343773078228992[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 10:03:11.383 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343773078228992[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:03:11.383 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343773078228992[0;39m ==> Parameters: 0(Long)
2021-11-29 10:03:11.384 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120343773078228992[0;39m <==    Columns: count(0)
2021-11-29 10:03:11.384 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120343773078228992[0;39m <==        Row: 0
2021-11-29 10:03:11.384 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343773078228992[0;39m <==      Total: 1
2021-11-29 10:03:11.384 INFO  com.suplin.demo.service.EbookTable                :50   [32m120343773078228992[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:03:11.384 INFO  com.suplin.demo.service.EbookTable                :51   [32m120343773078228992[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:03:11.384 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120343773078228992[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:03:11.385 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120343773078228992[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:03:15.065 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:03:15.173 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:03:27.547 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120343840883347456[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:03:27.547 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120343840883347457[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:03:27.547 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120343840883347456[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 10:03:27.547 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120343840883347457[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 10:03:27.547 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120343840883347458[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:03:27.548 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120343840883347456[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 10:03:27.548 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120343840883347457[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 10:03:27.548 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120343840883347458[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 10:03:27.548 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120343840883347456[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:03:27.548 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120343840883347457[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:03:27.548 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120343840883347458[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 10:03:27.548 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120343840883347456[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:03:27.548 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120343840883347457[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:03:27.548 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120343840883347458[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:03:27.548 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120343840883347458[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:03:27.549 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120343840883347456[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:03:27.549 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120343840883347457[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:03:27.549 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120343840883347457[0;39m ==> Parameters: 
2021-11-29 10:03:27.549 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120343840883347456[0;39m ==> Parameters: 
2021-11-29 10:03:27.549 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120343840883347458[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 10:03:27.549 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120343840883347458[0;39m ==> Parameters: 
2021-11-29 10:03:27.550 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120343840883347456[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 10:03:27.550 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343840883347457[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 10:03:27.550 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343840883347458[0;39m <==    Columns: id, parent, name, sort
2021-11-29 10:03:27.550 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343840883347458[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 10:03:27.550 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343840883347457[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 10:03:27.550 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120343840883347456[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 10:03:27.551 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343840883347458[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 10:03:27.551 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343840883347457[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 10:03:27.551 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343840883347458[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 10:03:27.551 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120343840883347456[0;39m <==        Row: 2021-11-29, 134, 74, 9, 5
2021-11-29 10:03:27.551 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343840883347457[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 10:03:27.551 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343840883347458[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 10:03:27.551 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120343840883347456[0;39m <==      Total: 2
2021-11-29 10:03:27.551 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343840883347458[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 10:03:27.551 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343840883347457[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 10:03:27.552 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343840883347458[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 10:03:27.552 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120343840883347456[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":134,"viewIncrease":9,"voteCount":74,"voteIncrease":5}],"success":true}
2021-11-29 10:03:27.552 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120343840883347457[0;39m <==      Total: 4
2021-11-29 10:03:27.552 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120343840883347456[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 10:03:27.552 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343840883347458[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 10:03:27.552 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343840883347458[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 10:03:27.552 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120343840883347457[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 10:03:27.552 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343840883347458[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 10:03:27.552 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120343840883347457[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 10:03:27.552 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343840883347458[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 10:03:27.553 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343840883347458[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 10:03:27.553 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343840883347458[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 10:03:27.553 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343840883347458[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 10:03:27.554 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343840883347458[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 10:03:27.554 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343840883347458[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 10:03:27.554 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120343840883347458[0;39m <==      Total: 15
2021-11-29 10:03:27.556 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120343840883347458[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 10:03:27.556 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120343840883347458[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š9 ms -------------
2021-11-29 10:03:27.734 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120343841667682304[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:03:27.735 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120343841667682304[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:03:27.735 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120343841667682304[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:03:27.735 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120343841667682304[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:03:27.736 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120343841667682304[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 10:03:27.737 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343841667682304[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:03:27.738 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343841667682304[0;39m ==> Parameters: 0(Long)
2021-11-29 10:03:27.739 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120343841667682304[0;39m <==    Columns: count(0)
2021-11-29 10:03:27.739 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120343841667682304[0;39m <==        Row: 0
2021-11-29 10:03:27.740 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343841667682304[0;39m <==      Total: 1
2021-11-29 10:03:27.740 INFO  com.suplin.demo.service.EbookTable                :50   [32m120343841667682304[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:03:27.740 INFO  com.suplin.demo.service.EbookTable                :51   [32m120343841667682304[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:03:27.740 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120343841667682304[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:03:27.741 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120343841667682304[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2021-11-29 10:03:28.411 INFO  com.suplin.demo.websocket.WebSocketServer         :40   [32m120343753406943232[0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼šVwZHXtiucjï¼Œsession idï¼š1ï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2021-11-29 10:03:29.325 INFO  com.suplin.demo.websocket.WebSocketServer         :31   [32m120343763540381696[0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼šx5ueTNe6FCï¼Œsession idï¼š2ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2021-11-29 10:03:29.409 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120343848693141505[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:03:29.409 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120343848693141504[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:03:29.409 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120343848693141506[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:03:29.409 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120343848693141505[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 10:03:29.409 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120343848693141506[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 10:03:29.410 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120343848693141505[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 10:03:29.409 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120343848693141504[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 10:03:29.410 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120343848693141506[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 10:03:29.410 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120343848693141505[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:03:29.410 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120343848693141504[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 10:03:29.410 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120343848693141506[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:03:29.410 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120343848693141505[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:03:29.410 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120343848693141504[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:03:29.410 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120343848693141506[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:03:29.410 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120343848693141504[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:03:29.410 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120343848693141505[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:03:29.410 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120343848693141506[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 10:03:29.410 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120343848693141504[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:03:29.411 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120343848693141505[0;39m ==> Parameters: 
2021-11-29 10:03:29.411 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120343848693141506[0;39m ==> Parameters: 
2021-11-29 10:03:29.412 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120343848693141504[0;39m ==> Parameters: 
2021-11-29 10:03:29.412 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343848693141506[0;39m <==    Columns: id, parent, name, sort
2021-11-29 10:03:29.412 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343848693141505[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 10:03:29.412 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120343848693141504[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 10:03:29.413 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343848693141506[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 10:03:29.413 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343848693141505[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 10:03:29.413 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120343848693141504[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 10:03:29.413 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343848693141506[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 10:03:29.413 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343848693141506[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 10:03:29.413 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120343848693141504[0;39m <==        Row: 2021-11-29, 134, 74, 9, 5
2021-11-29 10:03:29.413 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343848693141505[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 10:03:29.413 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343848693141506[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 10:03:29.413 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120343848693141504[0;39m <==      Total: 2
2021-11-29 10:03:29.413 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343848693141506[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 10:03:29.413 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343848693141505[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 10:03:29.414 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343848693141506[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 10:03:29.414 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120343848693141504[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":134,"viewIncrease":9,"voteCount":74,"voteIncrease":5}],"success":true}
2021-11-29 10:03:29.414 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343848693141505[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 10:03:29.414 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343848693141506[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 10:03:29.414 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120343848693141504[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 10:03:29.414 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343848693141506[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 10:03:29.414 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120343848693141505[0;39m <==      Total: 4
2021-11-29 10:03:29.414 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343848693141506[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 10:03:29.415 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120343848693141505[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 10:03:29.415 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343848693141506[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 10:03:29.415 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120343848693141505[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2021-11-29 10:03:29.415 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343848693141506[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 10:03:29.415 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343848693141506[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 10:03:29.415 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343848693141506[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 10:03:29.416 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343848693141506[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 10:03:29.416 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343848693141506[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 10:03:29.417 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120343848693141506[0;39m <==      Total: 15
2021-11-29 10:03:29.418 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120343848693141506[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 10:03:29.418 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120343848693141506[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š9 ms -------------
2021-11-29 10:03:29.590 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120343849452310528[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:03:29.590 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120343849452310528[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:03:29.590 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120343849452310528[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:03:29.591 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120343849452310528[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:03:29.591 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120343849452310528[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 10:03:29.592 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343849452310528[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:03:29.593 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343849452310528[0;39m ==> Parameters: 0(Long)
2021-11-29 10:03:29.593 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120343849452310528[0;39m <==    Columns: count(0)
2021-11-29 10:03:29.594 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120343849452310528[0;39m <==        Row: 0
2021-11-29 10:03:29.594 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343849452310528[0;39m <==      Total: 1
2021-11-29 10:03:29.594 INFO  com.suplin.demo.service.EbookTable                :50   [32m120343849452310528[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:03:29.594 INFO  com.suplin.demo.service.EbookTable                :51   [32m120343849452310528[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:03:29.595 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120343849452310528[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:03:29.595 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120343849452310528[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 10:03:30.810 INFO  com.suplin.demo.websocket.WebSocketServer         :40   [32m120343840883347456[0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼šx5ueTNe6FCï¼Œsession idï¼š2ï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2021-11-29 10:03:31.631 INFO  com.suplin.demo.websocket.WebSocketServer         :31   [32m120343840883347457[0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼šybIHmnYQXnï¼Œsession idï¼š3ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2021-11-29 10:03:31.721 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120343858390372352[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:03:31.721 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120343858390372353[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:03:31.721 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120343858390372354[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:03:31.721 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120343858390372353[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 10:03:31.721 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120343858390372352[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 10:03:31.721 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120343858390372354[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 10:03:31.721 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120343858390372353[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 10:03:31.721 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120343858390372352[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 10:03:31.721 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120343858390372354[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 10:03:31.721 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120343858390372353[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:03:31.721 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120343858390372352[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:03:31.721 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120343858390372352[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:03:31.721 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120343858390372353[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:03:31.721 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120343858390372354[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:03:31.722 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120343858390372354[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:03:31.722 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120343858390372352[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:03:31.722 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120343858390372353[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:03:31.722 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120343858390372352[0;39m ==> Parameters: 
2021-11-29 10:03:31.722 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120343858390372353[0;39m ==> Parameters: 
2021-11-29 10:03:31.723 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120343858390372354[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 10:03:31.723 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343858390372352[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 10:03:31.723 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120343858390372353[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 10:03:31.723 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120343858390372354[0;39m ==> Parameters: 
2021-11-29 10:03:31.723 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120343858390372353[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 10:03:31.723 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343858390372352[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 10:03:31.724 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120343858390372353[0;39m <==        Row: 2021-11-29, 134, 74, 9, 5
2021-11-29 10:03:31.724 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343858390372352[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 10:03:31.724 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120343858390372353[0;39m <==      Total: 2
2021-11-29 10:03:31.724 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343858390372352[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 10:03:31.724 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343858390372354[0;39m <==    Columns: id, parent, name, sort
2021-11-29 10:03:31.724 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120343858390372353[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":134,"viewIncrease":9,"voteCount":74,"voteIncrease":5}],"success":true}
2021-11-29 10:03:31.724 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343858390372352[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 10:03:31.724 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343858390372354[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 10:03:31.724 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120343858390372353[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š3 ms -------------
2021-11-29 10:03:31.724 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120343858390372352[0;39m <==      Total: 4
2021-11-29 10:03:31.725 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343858390372354[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 10:03:31.725 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120343858390372352[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 10:03:31.725 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343858390372354[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 10:03:31.725 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343858390372354[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 10:03:31.725 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120343858390372352[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:03:31.725 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343858390372354[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 10:03:31.725 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343858390372354[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 10:03:31.726 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343858390372354[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 10:03:31.726 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343858390372354[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 10:03:31.726 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343858390372354[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 10:03:31.726 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343858390372354[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 10:03:31.727 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343858390372354[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 10:03:31.727 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343858390372354[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 10:03:31.727 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343858390372354[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 10:03:31.727 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343858390372354[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 10:03:31.728 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343858390372354[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 10:03:31.728 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120343858390372354[0;39m <==      Total: 15
2021-11-29 10:03:31.729 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120343858390372354[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 10:03:31.730 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120343858390372354[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š9 ms -------------
2021-11-29 10:03:32.254 INFO  com.suplin.demo.websocket.WebSocketServer         :40   [32m120343763540381696[0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼šybIHmnYQXnï¼Œsession idï¼š3ï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2021-11-29 10:03:32.626 INFO  com.suplin.demo.websocket.WebSocketServer         :31   [32m120343848693141504[0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼šGxadpwtntMï¼Œsession idï¼š4ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2021-11-29 10:03:32.686 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120343862437875712[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:03:32.686 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120343862437875713[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:03:32.686 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120343862437875714[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:03:32.686 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120343862437875712[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 10:03:32.686 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120343862437875714[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 10:03:32.686 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120343862437875713[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 10:03:32.687 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120343862437875712[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 10:03:32.687 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120343862437875713[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 10:03:32.687 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120343862437875714[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 10:03:32.687 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120343862437875712[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:03:32.687 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120343862437875713[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:03:32.687 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120343862437875714[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:03:32.687 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120343862437875712[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:03:32.687 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120343862437875713[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:03:32.687 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120343862437875714[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:03:32.688 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120343862437875713[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:03:32.688 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120343862437875712[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:03:32.688 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120343862437875713[0;39m ==> Parameters: 
2021-11-29 10:03:32.688 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120343862437875712[0;39m ==> Parameters: 
2021-11-29 10:03:32.688 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120343862437875714[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 10:03:32.688 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120343862437875714[0;39m ==> Parameters: 
2021-11-29 10:03:32.689 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343862437875713[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 10:03:32.689 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120343862437875712[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 10:03:32.689 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343862437875714[0;39m <==    Columns: id, parent, name, sort
2021-11-29 10:03:32.689 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343862437875713[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 10:03:32.689 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343862437875714[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 10:03:32.689 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120343862437875712[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 10:03:32.689 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343862437875714[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 10:03:32.689 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343862437875713[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 10:03:32.689 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343862437875714[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 10:03:32.689 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120343862437875712[0;39m <==        Row: 2021-11-29, 134, 74, 9, 5
2021-11-29 10:03:32.689 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343862437875713[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 10:03:32.689 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343862437875714[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 10:03:32.689 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120343862437875713[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 10:03:32.689 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120343862437875712[0;39m <==      Total: 2
2021-11-29 10:03:32.690 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343862437875714[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 10:03:32.690 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120343862437875713[0;39m <==      Total: 4
2021-11-29 10:03:32.690 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343862437875714[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 10:03:32.690 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120343862437875713[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 10:03:32.690 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120343862437875712[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":134,"viewIncrease":9,"voteCount":74,"voteIncrease":5}],"success":true}
2021-11-29 10:03:32.690 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343862437875714[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 10:03:32.690 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120343862437875713[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:03:32.690 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120343862437875712[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:03:32.690 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343862437875714[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 10:03:32.691 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343862437875714[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 10:03:32.691 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343862437875714[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 10:03:32.691 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343862437875714[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 10:03:32.692 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343862437875714[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 10:03:32.692 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343862437875714[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 10:03:32.692 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343862437875714[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 10:03:32.693 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120343862437875714[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 10:03:32.693 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120343862437875714[0;39m <==      Total: 15
2021-11-29 10:03:32.694 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120343862437875714[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 10:03:32.694 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120343862437875714[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2021-11-29 10:03:32.836 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120343863067021312[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:03:32.837 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120343863067021312[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:03:32.837 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120343863067021312[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:03:32.837 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120343863067021312[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:03:32.837 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120343863067021312[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 10:03:32.838 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343863067021312[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:03:32.838 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343863067021312[0;39m ==> Parameters: 0(Long)
2021-11-29 10:03:32.839 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120343863067021312[0;39m <==    Columns: count(0)
2021-11-29 10:03:32.839 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120343863067021312[0;39m <==        Row: 0
2021-11-29 10:03:32.840 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343863067021312[0;39m <==      Total: 1
2021-11-29 10:03:32.840 INFO  com.suplin.demo.service.EbookTable                :50   [32m120343863067021312[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:03:32.840 INFO  com.suplin.demo.service.EbookTable                :51   [32m120343863067021312[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:03:32.841 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120343863067021312[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:03:32.841 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120343863067021312[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 10:03:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120343872164466688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:03:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120343872164466688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:03:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120343872164466688[0;39m ==> Parameters: 
2021-11-29 10:03:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120343872164466688[0;39m <==    Updates: 3
2021-11-29 10:03:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120343872164466688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:03:37.631 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120343883178708992[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:03:37.631 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120343883178708992[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:03:37.631 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120343883178708992[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:03:37.632 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120343883178708992[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:03:37.632 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120343883178708992[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":100,"page":1,"size":100}]
2021-11-29 10:03:37.633 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343883178708992[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:03:37.634 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343883178708992[0;39m ==> Parameters: 100(Long)
2021-11-29 10:03:37.634 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120343883178708992[0;39m <==    Columns: count(0)
2021-11-29 10:03:37.634 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120343883178708992[0;39m <==        Row: 0
2021-11-29 10:03:37.634 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343883178708992[0;39m <==      Total: 1
2021-11-29 10:03:37.635 INFO  com.suplin.demo.service.EbookTable                :50   [32m120343883178708992[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:03:37.635 INFO  com.suplin.demo.service.EbookTable                :51   [32m120343883178708992[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:03:37.635 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120343883178708992[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:03:37.635 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120343883178708992[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:03:39.504 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120343891034640384[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:03:39.504 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120343891034640384[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:03:39.504 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120343891034640384[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:03:39.504 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120343891034640384[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:03:39.505 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120343891034640384[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":101,"page":1,"size":100}]
2021-11-29 10:03:39.506 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343891034640384[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:03:39.507 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343891034640384[0;39m ==> Parameters: 101(Long)
2021-11-29 10:03:39.507 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120343891034640384[0;39m <==    Columns: count(0)
2021-11-29 10:03:39.507 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120343891034640384[0;39m <==        Row: 0
2021-11-29 10:03:39.508 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343891034640384[0;39m <==      Total: 1
2021-11-29 10:03:39.508 INFO  com.suplin.demo.service.EbookTable                :50   [32m120343891034640384[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:03:39.508 INFO  com.suplin.demo.service.EbookTable                :51   [32m120343891034640384[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:03:39.508 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120343891034640384[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:03:39.508 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120343891034640384[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:03:40.467 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120343895073755136[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:03:40.467 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120343895073755136[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:03:40.467 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120343895073755136[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:03:40.467 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120343895073755136[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:03:40.467 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120343895073755136[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":101,"page":1,"size":100}]
2021-11-29 10:03:40.469 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343895073755136[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:03:40.469 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343895073755136[0;39m ==> Parameters: 101(Long)
2021-11-29 10:03:40.469 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120343895073755136[0;39m <==    Columns: count(0)
2021-11-29 10:03:40.470 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120343895073755136[0;39m <==        Row: 0
2021-11-29 10:03:40.470 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343895073755136[0;39m <==      Total: 1
2021-11-29 10:03:40.470 INFO  com.suplin.demo.service.EbookTable                :50   [32m120343895073755136[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:03:40.470 INFO  com.suplin.demo.service.EbookTable                :51   [32m120343895073755136[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:03:40.470 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120343895073755136[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:03:40.471 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120343895073755136[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:03:40.968 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120343897175101440[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:03:40.968 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120343897175101440[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:03:40.969 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120343897175101440[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:03:40.969 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120343897175101440[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:03:40.969 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120343897175101440[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":102,"page":1,"size":100}]
2021-11-29 10:03:40.970 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343897175101440[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:03:40.971 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343897175101440[0;39m ==> Parameters: 102(Long)
2021-11-29 10:03:40.971 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120343897175101440[0;39m <==    Columns: count(0)
2021-11-29 10:03:40.971 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120343897175101440[0;39m <==        Row: 2
2021-11-29 10:03:40.971 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343897175101440[0;39m <==      Total: 1
2021-11-29 10:03:40.972 DEBUG com.suplin.demo.mapper.EbookMapper.selectByExample:137  [32m120343897175101440[0;39m ==>  Preparing: select id, book_name, vote_num, view_num, doc_num, des_cription, category1_id, category2_id, cover from ebook WHERE ( category2_id = ? ) LIMIT ?
2021-11-29 10:03:40.972 DEBUG com.suplin.demo.mapper.EbookMapper.selectByExample:137  [32m120343897175101440[0;39m ==> Parameters: 102(Long), 100(Integer)
2021-11-29 10:03:40.973 TRACE com.suplin.demo.mapper.EbookMapper.selectByExample:143  [32m120343897175101440[0;39m <==    Columns: id, book_name, vote_num, view_num, doc_num, des_cription, category1_id, category2_id, cover
2021-11-29 10:03:40.973 TRACE com.suplin.demo.mapper.EbookMapper.selectByExample:143  [32m120343897175101440[0;39m <==        Row: 116461475903705088, javaWebä»Žå…¥é—¨åˆ°æ”¾å¼ƒ, 53, 74, 6, æ”¾å¼ƒå§å­©å­, 100, 102, /image/cover1.png
2021-11-29 10:03:40.973 TRACE com.suplin.demo.mapper.EbookMapper.selectByExample:143  [32m120343897175101440[0;39m <==        Row: 116465287150309376, javaåŸºç¡€å…¥é—¨åˆ°æ”¾å¼ƒ, 5, 11, 7, æ”¾å¼ƒå§å­©å­, 100, 102, /image/cover2.png
2021-11-29 10:03:40.973 DEBUG com.suplin.demo.mapper.EbookMapper.selectByExample:137  [32m120343897175101440[0;39m <==      Total: 2
2021-11-29 10:03:40.974 INFO  com.suplin.demo.service.EbookTable                :50   [32m120343897175101440[0;39m æ€»è¡Œæ•°ï¼š2
2021-11-29 10:03:40.974 INFO  com.suplin.demo.service.EbookTable                :51   [32m120343897175101440[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:03:40.974 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120343897175101440[0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"bookName":"javaWebä»Žå…¥é—¨åˆ°æ”¾å¼ƒ","category1Id":100,"category2Id":102,"cover":"/image/cover1.png","desCription":"æ”¾å¼ƒå§å­©å­","docNum":6,"id":116461475903705088,"viewNum":74,"voteNum":53},{"bookName":"javaåŸºç¡€å…¥é—¨åˆ°æ”¾å¼ƒ","category1Id":100,"category2Id":102,"cover":"/image/cover2.png","desCription":"æ”¾å¼ƒå§å­©å­","docNum":7,"id":116465287150309376,"viewNum":11,"voteNum":5}],"total":2},"success":true}
2021-11-29 10:03:40.974 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120343897175101440[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2021-11-29 10:03:41.913 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120343901138718720[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:03:41.913 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120343901138718720[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:03:41.913 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120343901138718720[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:03:41.913 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120343901138718720[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:03:41.913 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120343901138718720[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":100,"page":1,"size":100}]
2021-11-29 10:03:41.914 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343901138718720[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:03:41.915 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343901138718720[0;39m ==> Parameters: 100(Long)
2021-11-29 10:03:41.915 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120343901138718720[0;39m <==    Columns: count(0)
2021-11-29 10:03:41.916 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120343901138718720[0;39m <==        Row: 0
2021-11-29 10:03:41.916 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343901138718720[0;39m <==      Total: 1
2021-11-29 10:03:41.916 INFO  com.suplin.demo.service.EbookTable                :50   [32m120343901138718720[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:03:41.916 INFO  com.suplin.demo.service.EbookTable                :51   [32m120343901138718720[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:03:41.916 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120343901138718720[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:03:41.916 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120343901138718720[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š3 ms -------------
2021-11-29 10:03:43.169 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120343906406764544[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:03:43.170 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120343906406764544[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:03:43.170 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120343906406764544[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:03:43.170 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120343906406764544[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:03:43.170 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120343906406764544[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":101,"page":1,"size":100}]
2021-11-29 10:03:43.172 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343906406764544[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:03:43.172 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343906406764544[0;39m ==> Parameters: 101(Long)
2021-11-29 10:03:43.173 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120343906406764544[0;39m <==    Columns: count(0)
2021-11-29 10:03:43.173 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120343906406764544[0;39m <==        Row: 0
2021-11-29 10:03:43.173 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343906406764544[0;39m <==      Total: 1
2021-11-29 10:03:43.173 INFO  com.suplin.demo.service.EbookTable                :50   [32m120343906406764544[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:03:43.173 INFO  com.suplin.demo.service.EbookTable                :51   [32m120343906406764544[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:03:43.173 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120343906406764544[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:03:43.174 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120343906406764544[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 10:03:43.729 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120343908755574784[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:03:43.729 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120343908755574784[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:03:43.729 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120343908755574784[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:03:43.729 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120343908755574784[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:03:43.730 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120343908755574784[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":102,"page":1,"size":100}]
2021-11-29 10:03:43.731 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343908755574784[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:03:43.731 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343908755574784[0;39m ==> Parameters: 102(Long)
2021-11-29 10:03:43.732 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120343908755574784[0;39m <==    Columns: count(0)
2021-11-29 10:03:43.732 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120343908755574784[0;39m <==        Row: 2
2021-11-29 10:03:43.732 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343908755574784[0;39m <==      Total: 1
2021-11-29 10:03:43.732 DEBUG com.suplin.demo.mapper.EbookMapper.selectByExample:137  [32m120343908755574784[0;39m ==>  Preparing: select id, book_name, vote_num, view_num, doc_num, des_cription, category1_id, category2_id, cover from ebook WHERE ( category2_id = ? ) LIMIT ?
2021-11-29 10:03:43.732 DEBUG com.suplin.demo.mapper.EbookMapper.selectByExample:137  [32m120343908755574784[0;39m ==> Parameters: 102(Long), 100(Integer)
2021-11-29 10:03:43.733 TRACE com.suplin.demo.mapper.EbookMapper.selectByExample:143  [32m120343908755574784[0;39m <==    Columns: id, book_name, vote_num, view_num, doc_num, des_cription, category1_id, category2_id, cover
2021-11-29 10:03:43.733 TRACE com.suplin.demo.mapper.EbookMapper.selectByExample:143  [32m120343908755574784[0;39m <==        Row: 116461475903705088, javaWebä»Žå…¥é—¨åˆ°æ”¾å¼ƒ, 53, 74, 6, æ”¾å¼ƒå§å­©å­, 100, 102, /image/cover1.png
2021-11-29 10:03:43.733 TRACE com.suplin.demo.mapper.EbookMapper.selectByExample:143  [32m120343908755574784[0;39m <==        Row: 116465287150309376, javaåŸºç¡€å…¥é—¨åˆ°æ”¾å¼ƒ, 5, 11, 7, æ”¾å¼ƒå§å­©å­, 100, 102, /image/cover2.png
2021-11-29 10:03:43.734 DEBUG com.suplin.demo.mapper.EbookMapper.selectByExample:137  [32m120343908755574784[0;39m <==      Total: 2
2021-11-29 10:03:43.734 INFO  com.suplin.demo.service.EbookTable                :50   [32m120343908755574784[0;39m æ€»è¡Œæ•°ï¼š2
2021-11-29 10:03:43.734 INFO  com.suplin.demo.service.EbookTable                :51   [32m120343908755574784[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:03:43.734 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120343908755574784[0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"bookName":"javaWebä»Žå…¥é—¨åˆ°æ”¾å¼ƒ","category1Id":100,"category2Id":102,"cover":"/image/cover1.png","desCription":"æ”¾å¼ƒå§å­©å­","docNum":6,"id":116461475903705088,"viewNum":74,"voteNum":53},{"bookName":"javaåŸºç¡€å…¥é—¨åˆ°æ”¾å¼ƒ","category1Id":100,"category2Id":102,"cover":"/image/cover2.png","desCription":"æ”¾å¼ƒå§å­©å­","docNum":7,"id":116465287150309376,"viewNum":11,"voteNum":5}],"total":2},"success":true}
2021-11-29 10:03:43.734 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120343908755574784[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 10:03:45.084 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:03:45.178 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:03:47.993 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120343926640087040[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:03:47.993 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120343926640087040[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:03:47.994 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120343926640087040[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:03:47.994 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120343926640087040[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:03:47.994 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120343926640087040[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":100,"page":1,"size":100}]
2021-11-29 10:03:47.996 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343926640087040[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:03:47.996 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343926640087040[0;39m ==> Parameters: 100(Long)
2021-11-29 10:03:47.997 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120343926640087040[0;39m <==    Columns: count(0)
2021-11-29 10:03:47.997 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120343926640087040[0;39m <==        Row: 0
2021-11-29 10:03:47.998 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120343926640087040[0;39m <==      Total: 1
2021-11-29 10:03:47.998 INFO  com.suplin.demo.service.EbookTable                :50   [32m120343926640087040[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:03:47.998 INFO  com.suplin.demo.service.EbookTable                :51   [32m120343926640087040[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:03:47.998 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120343926640087040[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:03:47.999 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120343926640087040[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2021-11-29 10:04:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120343977047232512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:04:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120343977047232512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:04:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120343977047232512[0;39m ==> Parameters: 
2021-11-29 10:04:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120343977047232512[0;39m <==    Updates: 0
2021-11-29 10:04:00.019 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120343977047232512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2021-11-29 10:04:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120343998001975296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:04:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120343998001975296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:04:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120343998001975296[0;39m ==> Parameters: 
2021-11-29 10:04:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120343998001975296[0;39m <==    Updates: 3
2021-11-29 10:04:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120343998001975296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:04:15.072 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:04:15.152 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:04:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120344123860455424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:04:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120344123860455424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:04:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120344123860455424[0;39m ==> Parameters: 
2021-11-29 10:04:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120344123860455424[0;39m <==    Updates: 3
2021-11-29 10:04:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120344123860455424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:04:45.055 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:04:45.179 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:04:50.413 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120344188448542720[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:04:50.413 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120344188448542721[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:04:50.413 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120344188448542722[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:04:50.414 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120344188448542720[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 10:04:50.414 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120344188448542722[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 10:04:50.414 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120344188448542721[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 10:04:50.414 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120344188448542720[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 10:04:50.414 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120344188448542722[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 10:04:50.414 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120344188448542721[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 10:04:50.414 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120344188448542720[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:04:50.414 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120344188448542722[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:04:50.414 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120344188448542721[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:04:50.414 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120344188448542722[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:04:50.414 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120344188448542720[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:04:50.414 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120344188448542721[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:04:50.416 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120344188448542720[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:04:50.416 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120344188448542721[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:04:50.416 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120344188448542722[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 10:04:50.416 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120344188448542721[0;39m ==> Parameters: 
2021-11-29 10:04:50.416 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120344188448542720[0;39m ==> Parameters: 
2021-11-29 10:04:50.416 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120344188448542722[0;39m ==> Parameters: 
2021-11-29 10:04:50.417 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120344188448542721[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 10:04:50.417 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120344188448542720[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 10:04:50.417 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344188448542722[0;39m <==    Columns: id, parent, name, sort
2021-11-29 10:04:50.417 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344188448542722[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 10:04:50.417 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120344188448542720[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 10:04:50.417 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120344188448542721[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 10:04:50.417 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344188448542722[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 10:04:50.417 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120344188448542721[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 10:04:50.417 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120344188448542720[0;39m <==        Row: 2021-11-29, 134, 74, 9, 5
2021-11-29 10:04:50.418 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344188448542722[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 10:04:50.418 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120344188448542721[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 10:04:50.418 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120344188448542720[0;39m <==      Total: 2
2021-11-29 10:04:50.418 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344188448542722[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 10:04:50.418 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120344188448542721[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 10:04:50.418 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344188448542722[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 10:04:50.418 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120344188448542721[0;39m <==      Total: 4
2021-11-29 10:04:50.418 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120344188448542720[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":134,"viewIncrease":9,"voteCount":74,"voteIncrease":5}],"success":true}
2021-11-29 10:04:50.418 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344188448542722[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 10:04:50.418 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120344188448542720[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 10:04:50.419 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120344188448542721[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 10:04:50.419 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120344188448542721[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2021-11-29 10:04:50.419 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344188448542722[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 10:04:50.419 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344188448542722[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 10:04:50.419 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344188448542722[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 10:04:50.419 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344188448542722[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 10:04:50.420 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344188448542722[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 10:04:50.420 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344188448542722[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 10:04:50.420 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344188448542722[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 10:04:50.421 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344188448542722[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 10:04:50.421 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344188448542722[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 10:04:50.421 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120344188448542722[0;39m <==      Total: 15
2021-11-29 10:04:50.422 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120344188448542722[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 10:04:50.422 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120344188448542722[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š9 ms -------------
2021-11-29 10:04:50.591 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120344189195128832[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:04:50.591 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120344189195128832[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:04:50.591 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120344189195128832[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:04:50.592 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120344189195128832[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:04:50.592 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120344189195128832[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 10:04:50.593 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120344189195128832[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:04:50.593 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120344189195128832[0;39m ==> Parameters: 0(Long)
2021-11-29 10:04:50.594 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120344189195128832[0;39m <==    Columns: count(0)
2021-11-29 10:04:50.594 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120344189195128832[0;39m <==        Row: 0
2021-11-29 10:04:50.595 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120344189195128832[0;39m <==      Total: 1
2021-11-29 10:04:50.595 INFO  com.suplin.demo.service.EbookTable                :50   [32m120344189195128832[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:04:50.595 INFO  com.suplin.demo.service.EbookTable                :51   [32m120344189195128832[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:04:50.595 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120344189195128832[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:04:50.595 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120344189195128832[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:04:50.848 INFO  com.suplin.demo.websocket.WebSocketServer         :40   [32m120343906406764544[0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼šGxadpwtntMï¼Œsession idï¼š4ï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2021-11-29 10:04:51.628 INFO  com.suplin.demo.websocket.WebSocketServer         :31   [32m120343908755574784[0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼šamufJh7VYFï¼Œsession idï¼š5ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2021-11-29 10:04:51.708 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120344193880166400[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:04:51.708 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120344193880166401[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:04:51.708 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120344193880166402[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:04:51.708 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120344193880166400[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 10:04:51.708 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120344193880166401[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 10:04:51.708 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120344193880166402[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 10:04:51.708 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120344193880166400[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 10:04:51.708 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120344193880166401[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 10:04:51.708 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120344193880166402[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 10:04:51.708 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120344193880166400[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:04:51.708 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120344193880166401[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:04:51.708 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120344193880166402[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:04:51.708 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120344193880166400[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:04:51.709 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120344193880166401[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:04:51.709 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120344193880166402[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:04:51.709 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120344193880166400[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:04:51.709 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120344193880166401[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:04:51.709 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120344193880166402[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 10:04:51.709 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120344193880166401[0;39m ==> Parameters: 
2021-11-29 10:04:51.709 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120344193880166400[0;39m ==> Parameters: 
2021-11-29 10:04:51.710 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120344193880166402[0;39m ==> Parameters: 
2021-11-29 10:04:51.710 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120344193880166400[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 10:04:51.710 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344193880166402[0;39m <==    Columns: id, parent, name, sort
2021-11-29 10:04:51.710 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120344193880166401[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 10:04:51.710 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344193880166402[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 10:04:51.710 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120344193880166400[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 10:04:51.710 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120344193880166401[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 10:04:51.711 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344193880166402[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 10:04:51.711 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120344193880166400[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 10:04:51.711 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344193880166402[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 10:04:51.711 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120344193880166400[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 10:04:51.711 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120344193880166401[0;39m <==        Row: 2021-11-29, 134, 74, 9, 5
2021-11-29 10:04:51.711 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344193880166402[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 10:04:51.711 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120344193880166400[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 10:04:51.711 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344193880166402[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 10:04:51.711 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120344193880166401[0;39m <==      Total: 2
2021-11-29 10:04:51.711 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344193880166402[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 10:04:51.711 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120344193880166400[0;39m <==      Total: 4
2021-11-29 10:04:51.712 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120344193880166400[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 10:04:51.711 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344193880166402[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 10:04:51.712 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120344193880166401[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":134,"viewIncrease":9,"voteCount":74,"voteIncrease":5}],"success":true}
2021-11-29 10:04:51.712 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120344193880166400[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:04:51.712 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344193880166402[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 10:04:51.712 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120344193880166401[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:04:51.712 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344193880166402[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 10:04:51.712 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344193880166402[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 10:04:51.712 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344193880166402[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 10:04:51.713 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344193880166402[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 10:04:51.713 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344193880166402[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 10:04:51.713 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344193880166402[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 10:04:51.713 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344193880166402[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 10:04:51.714 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120344193880166402[0;39m <==      Total: 15
2021-11-29 10:04:51.715 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120344193880166402[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 10:04:51.715 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120344193880166402[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2021-11-29 10:04:51.867 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120344194547060736[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:04:51.868 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120344194547060736[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:04:51.868 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120344194547060736[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:04:51.868 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120344194547060736[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:04:51.868 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120344194547060736[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 10:04:51.869 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120344194547060736[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:04:51.869 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120344194547060736[0;39m ==> Parameters: 0(Long)
2021-11-29 10:04:51.870 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120344194547060736[0;39m <==    Columns: count(0)
2021-11-29 10:04:51.870 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120344194547060736[0;39m <==        Row: 0
2021-11-29 10:04:51.870 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120344194547060736[0;39m <==      Total: 1
2021-11-29 10:04:51.871 INFO  com.suplin.demo.service.EbookTable                :50   [32m120344194547060736[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:04:51.871 INFO  com.suplin.demo.service.EbookTable                :51   [32m120344194547060736[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:04:51.871 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120344194547060736[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:04:51.871 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120344194547060736[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:04:53.936 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120344203225075712[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:04:53.937 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120344203225075712[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:04:53.937 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120344203225075712[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:04:53.937 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120344203225075712[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:04:53.937 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120344203225075712[0;39m è¯·æ±‚å‚æ•°: [{"category1Id":100,"page":1,"size":100}]
2021-11-29 10:04:53.938 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120344203225075712[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category1_id = ?)
2021-11-29 10:04:53.939 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120344203225075712[0;39m ==> Parameters: 100(Long)
2021-11-29 10:04:53.939 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120344203225075712[0;39m <==    Columns: count(0)
2021-11-29 10:04:53.939 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120344203225075712[0;39m <==        Row: 2
2021-11-29 10:04:53.940 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120344203225075712[0;39m <==      Total: 1
2021-11-29 10:04:53.940 DEBUG com.suplin.demo.mapper.EbookMapper.selectByExample:137  [32m120344203225075712[0;39m ==>  Preparing: select id, book_name, vote_num, view_num, doc_num, des_cription, category1_id, category2_id, cover from ebook WHERE ( category1_id = ? ) LIMIT ?
2021-11-29 10:04:53.940 DEBUG com.suplin.demo.mapper.EbookMapper.selectByExample:137  [32m120344203225075712[0;39m ==> Parameters: 100(Long), 100(Integer)
2021-11-29 10:04:53.941 TRACE com.suplin.demo.mapper.EbookMapper.selectByExample:143  [32m120344203225075712[0;39m <==    Columns: id, book_name, vote_num, view_num, doc_num, des_cription, category1_id, category2_id, cover
2021-11-29 10:04:53.941 TRACE com.suplin.demo.mapper.EbookMapper.selectByExample:143  [32m120344203225075712[0;39m <==        Row: 116461475903705088, javaWebä»Žå…¥é—¨åˆ°æ”¾å¼ƒ, 53, 74, 6, æ”¾å¼ƒå§å­©å­, 100, 102, /image/cover1.png
2021-11-29 10:04:53.941 TRACE com.suplin.demo.mapper.EbookMapper.selectByExample:143  [32m120344203225075712[0;39m <==        Row: 116465287150309376, javaåŸºç¡€å…¥é—¨åˆ°æ”¾å¼ƒ, 5, 11, 7, æ”¾å¼ƒå§å­©å­, 100, 102, /image/cover2.png
2021-11-29 10:04:53.941 DEBUG com.suplin.demo.mapper.EbookMapper.selectByExample:137  [32m120344203225075712[0;39m <==      Total: 2
2021-11-29 10:04:53.941 INFO  com.suplin.demo.service.EbookTable                :50   [32m120344203225075712[0;39m æ€»è¡Œæ•°ï¼š2
2021-11-29 10:04:53.941 INFO  com.suplin.demo.service.EbookTable                :51   [32m120344203225075712[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:04:53.942 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120344203225075712[0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"bookName":"javaWebä»Žå…¥é—¨åˆ°æ”¾å¼ƒ","category1Id":100,"category2Id":102,"cover":"/image/cover1.png","desCription":"æ”¾å¼ƒå§å­©å­","docNum":6,"id":116461475903705088,"viewNum":74,"voteNum":53},{"bookName":"javaåŸºç¡€å…¥é—¨åˆ°æ”¾å¼ƒ","category1Id":100,"category2Id":102,"cover":"/image/cover2.png","desCription":"æ”¾å¼ƒå§å­©å­","docNum":7,"id":116465287150309376,"viewNum":11,"voteNum":5}],"total":2},"success":true}
2021-11-29 10:04:53.942 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120344203225075712[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2021-11-29 10:04:55.003 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120344207700398080[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:04:55.003 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120344207700398080[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:04:55.003 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120344207700398080[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:04:55.003 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120344207700398080[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:04:55.003 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120344207700398080[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":101,"page":1,"size":100}]
2021-11-29 10:04:55.004 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120344207700398080[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:04:55.005 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120344207700398080[0;39m ==> Parameters: 101(Long)
2021-11-29 10:04:55.007 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120344207700398080[0;39m <==    Columns: count(0)
2021-11-29 10:04:55.007 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120344207700398080[0;39m <==        Row: 0
2021-11-29 10:04:55.007 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120344207700398080[0;39m <==      Total: 1
2021-11-29 10:04:55.007 INFO  com.suplin.demo.service.EbookTable                :50   [32m120344207700398080[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:04:55.007 INFO  com.suplin.demo.service.EbookTable                :51   [32m120344207700398080[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:04:55.007 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120344207700398080[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:04:55.007 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120344207700398080[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:04:55.626 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120344210313449472[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:04:55.626 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120344210313449472[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:04:55.626 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120344210313449472[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:04:55.627 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120344210313449472[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:04:55.627 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120344210313449472[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":102,"page":1,"size":100}]
2021-11-29 10:04:55.628 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120344210313449472[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:04:55.634 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120344210313449472[0;39m ==> Parameters: 102(Long)
2021-11-29 10:04:55.635 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120344210313449472[0;39m <==    Columns: count(0)
2021-11-29 10:04:55.636 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120344210313449472[0;39m <==        Row: 2
2021-11-29 10:04:55.636 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120344210313449472[0;39m <==      Total: 1
2021-11-29 10:04:55.637 DEBUG com.suplin.demo.mapper.EbookMapper.selectByExample:137  [32m120344210313449472[0;39m ==>  Preparing: select id, book_name, vote_num, view_num, doc_num, des_cription, category1_id, category2_id, cover from ebook WHERE ( category2_id = ? ) LIMIT ?
2021-11-29 10:04:55.637 DEBUG com.suplin.demo.mapper.EbookMapper.selectByExample:137  [32m120344210313449472[0;39m ==> Parameters: 102(Long), 100(Integer)
2021-11-29 10:04:55.638 TRACE com.suplin.demo.mapper.EbookMapper.selectByExample:143  [32m120344210313449472[0;39m <==    Columns: id, book_name, vote_num, view_num, doc_num, des_cription, category1_id, category2_id, cover
2021-11-29 10:04:55.638 TRACE com.suplin.demo.mapper.EbookMapper.selectByExample:143  [32m120344210313449472[0;39m <==        Row: 116461475903705088, javaWebä»Žå…¥é—¨åˆ°æ”¾å¼ƒ, 53, 74, 6, æ”¾å¼ƒå§å­©å­, 100, 102, /image/cover1.png
2021-11-29 10:04:55.638 TRACE com.suplin.demo.mapper.EbookMapper.selectByExample:143  [32m120344210313449472[0;39m <==        Row: 116465287150309376, javaåŸºç¡€å…¥é—¨åˆ°æ”¾å¼ƒ, 5, 11, 7, æ”¾å¼ƒå§å­©å­, 100, 102, /image/cover2.png
2021-11-29 10:04:55.638 DEBUG com.suplin.demo.mapper.EbookMapper.selectByExample:137  [32m120344210313449472[0;39m <==      Total: 2
2021-11-29 10:04:55.639 INFO  com.suplin.demo.service.EbookTable                :50   [32m120344210313449472[0;39m æ€»è¡Œæ•°ï¼š2
2021-11-29 10:04:55.639 INFO  com.suplin.demo.service.EbookTable                :51   [32m120344210313449472[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:04:55.639 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120344210313449472[0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"bookName":"javaWebä»Žå…¥é—¨åˆ°æ”¾å¼ƒ","category1Id":100,"category2Id":102,"cover":"/image/cover1.png","desCription":"æ”¾å¼ƒå§å­©å­","docNum":6,"id":116461475903705088,"viewNum":74,"voteNum":53},{"bookName":"javaåŸºç¡€å…¥é—¨åˆ°æ”¾å¼ƒ","category1Id":100,"category2Id":102,"cover":"/image/cover2.png","desCription":"æ”¾å¼ƒå§å­©å­","docNum":7,"id":116465287150309376,"viewNum":11,"voteNum":5}],"total":2},"success":true}
2021-11-29 10:04:55.639 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120344210313449472[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š13 ms -------------
2021-11-29 10:04:56.225 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120344212825837568[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:04:56.225 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120344212825837568[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:04:56.225 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120344212825837568[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:04:56.225 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120344212825837568[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:04:56.225 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120344212825837568[0;39m è¯·æ±‚å‚æ•°: [{"category1Id":100,"page":1,"size":100}]
2021-11-29 10:04:56.227 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120344212825837568[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category1_id = ?)
2021-11-29 10:04:56.227 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120344212825837568[0;39m ==> Parameters: 100(Long)
2021-11-29 10:04:56.228 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120344212825837568[0;39m <==    Columns: count(0)
2021-11-29 10:04:56.229 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120344212825837568[0;39m <==        Row: 2
2021-11-29 10:04:56.229 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120344212825837568[0;39m <==      Total: 1
2021-11-29 10:04:56.229 DEBUG com.suplin.demo.mapper.EbookMapper.selectByExample:137  [32m120344212825837568[0;39m ==>  Preparing: select id, book_name, vote_num, view_num, doc_num, des_cription, category1_id, category2_id, cover from ebook WHERE ( category1_id = ? ) LIMIT ?
2021-11-29 10:04:56.229 DEBUG com.suplin.demo.mapper.EbookMapper.selectByExample:137  [32m120344212825837568[0;39m ==> Parameters: 100(Long), 100(Integer)
2021-11-29 10:04:56.230 TRACE com.suplin.demo.mapper.EbookMapper.selectByExample:143  [32m120344212825837568[0;39m <==    Columns: id, book_name, vote_num, view_num, doc_num, des_cription, category1_id, category2_id, cover
2021-11-29 10:04:56.230 TRACE com.suplin.demo.mapper.EbookMapper.selectByExample:143  [32m120344212825837568[0;39m <==        Row: 116461475903705088, javaWebä»Žå…¥é—¨åˆ°æ”¾å¼ƒ, 53, 74, 6, æ”¾å¼ƒå§å­©å­, 100, 102, /image/cover1.png
2021-11-29 10:04:56.231 TRACE com.suplin.demo.mapper.EbookMapper.selectByExample:143  [32m120344212825837568[0;39m <==        Row: 116465287150309376, javaåŸºç¡€å…¥é—¨åˆ°æ”¾å¼ƒ, 5, 11, 7, æ”¾å¼ƒå§å­©å­, 100, 102, /image/cover2.png
2021-11-29 10:04:56.231 DEBUG com.suplin.demo.mapper.EbookMapper.selectByExample:137  [32m120344212825837568[0;39m <==      Total: 2
2021-11-29 10:04:56.231 INFO  com.suplin.demo.service.EbookTable                :50   [32m120344212825837568[0;39m æ€»è¡Œæ•°ï¼š2
2021-11-29 10:04:56.231 INFO  com.suplin.demo.service.EbookTable                :51   [32m120344212825837568[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:04:56.231 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120344212825837568[0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"bookName":"javaWebä»Žå…¥é—¨åˆ°æ”¾å¼ƒ","category1Id":100,"category2Id":102,"cover":"/image/cover1.png","desCription":"æ”¾å¼ƒå§å­©å­","docNum":6,"id":116461475903705088,"viewNum":74,"voteNum":53},{"bookName":"javaåŸºç¡€å…¥é—¨åˆ°æ”¾å¼ƒ","category1Id":100,"category2Id":102,"cover":"/image/cover2.png","desCription":"æ”¾å¼ƒå§å­©å­","docNum":7,"id":116465287150309376,"viewNum":11,"voteNum":5}],"total":2},"success":true}
2021-11-29 10:04:56.232 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120344212825837568[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2021-11-29 10:04:57.321 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120344217422794752[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:04:57.322 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120344217422794752[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:04:57.322 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120344217422794752[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:04:57.322 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120344217422794752[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:04:57.322 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120344217422794752[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":102,"page":1,"size":100}]
2021-11-29 10:04:57.323 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120344217422794752[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:04:57.323 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120344217422794752[0;39m ==> Parameters: 102(Long)
2021-11-29 10:04:57.324 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120344217422794752[0;39m <==    Columns: count(0)
2021-11-29 10:04:57.324 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120344217422794752[0;39m <==        Row: 2
2021-11-29 10:04:57.325 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120344217422794752[0;39m <==      Total: 1
2021-11-29 10:04:57.325 DEBUG com.suplin.demo.mapper.EbookMapper.selectByExample:137  [32m120344217422794752[0;39m ==>  Preparing: select id, book_name, vote_num, view_num, doc_num, des_cription, category1_id, category2_id, cover from ebook WHERE ( category2_id = ? ) LIMIT ?
2021-11-29 10:04:57.325 DEBUG com.suplin.demo.mapper.EbookMapper.selectByExample:137  [32m120344217422794752[0;39m ==> Parameters: 102(Long), 100(Integer)
2021-11-29 10:04:57.326 TRACE com.suplin.demo.mapper.EbookMapper.selectByExample:143  [32m120344217422794752[0;39m <==    Columns: id, book_name, vote_num, view_num, doc_num, des_cription, category1_id, category2_id, cover
2021-11-29 10:04:57.326 TRACE com.suplin.demo.mapper.EbookMapper.selectByExample:143  [32m120344217422794752[0;39m <==        Row: 116461475903705088, javaWebä»Žå…¥é—¨åˆ°æ”¾å¼ƒ, 53, 74, 6, æ”¾å¼ƒå§å­©å­, 100, 102, /image/cover1.png
2021-11-29 10:04:57.327 TRACE com.suplin.demo.mapper.EbookMapper.selectByExample:143  [32m120344217422794752[0;39m <==        Row: 116465287150309376, javaåŸºç¡€å…¥é—¨åˆ°æ”¾å¼ƒ, 5, 11, 7, æ”¾å¼ƒå§å­©å­, 100, 102, /image/cover2.png
2021-11-29 10:04:57.327 DEBUG com.suplin.demo.mapper.EbookMapper.selectByExample:137  [32m120344217422794752[0;39m <==      Total: 2
2021-11-29 10:04:57.327 INFO  com.suplin.demo.service.EbookTable                :50   [32m120344217422794752[0;39m æ€»è¡Œæ•°ï¼š2
2021-11-29 10:04:57.328 INFO  com.suplin.demo.service.EbookTable                :51   [32m120344217422794752[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:04:57.328 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120344217422794752[0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"bookName":"javaWebä»Žå…¥é—¨åˆ°æ”¾å¼ƒ","category1Id":100,"category2Id":102,"cover":"/image/cover1.png","desCription":"æ”¾å¼ƒå§å­©å­","docNum":6,"id":116461475903705088,"viewNum":74,"voteNum":53},{"bookName":"javaåŸºç¡€å…¥é—¨åˆ°æ”¾å¼ƒ","category1Id":100,"category2Id":102,"cover":"/image/cover2.png","desCription":"æ”¾å¼ƒå§å­©å­","docNum":7,"id":116465287150309376,"viewNum":11,"voteNum":5}],"total":2},"success":true}
2021-11-29 10:04:57.328 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120344217422794752[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2021-11-29 10:04:58.010 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120344220312670208[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:04:58.010 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120344220312670208[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:04:58.011 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120344220312670208[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:04:58.011 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120344220312670208[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:04:58.011 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120344220312670208[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":101,"page":1,"size":100}]
2021-11-29 10:04:58.012 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120344220312670208[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:04:58.013 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120344220312670208[0;39m ==> Parameters: 101(Long)
2021-11-29 10:04:58.014 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120344220312670208[0;39m <==    Columns: count(0)
2021-11-29 10:04:58.014 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120344220312670208[0;39m <==        Row: 0
2021-11-29 10:04:58.014 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120344220312670208[0;39m <==      Total: 1
2021-11-29 10:04:58.014 INFO  com.suplin.demo.service.EbookTable                :50   [32m120344220312670208[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:04:58.014 INFO  com.suplin.demo.service.EbookTable                :51   [32m120344220312670208[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:04:58.014 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120344220312670208[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:04:58.014 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120344220312670208[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:04:58.721 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120344223294820352[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:04:58.721 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120344223294820352[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:04:58.721 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120344223294820352[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:04:58.721 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120344223294820352[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:04:58.721 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120344223294820352[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":102,"page":1,"size":100}]
2021-11-29 10:04:58.722 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120344223294820352[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:04:58.723 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120344223294820352[0;39m ==> Parameters: 102(Long)
2021-11-29 10:04:58.723 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120344223294820352[0;39m <==    Columns: count(0)
2021-11-29 10:04:58.723 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120344223294820352[0;39m <==        Row: 2
2021-11-29 10:04:58.724 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120344223294820352[0;39m <==      Total: 1
2021-11-29 10:04:58.724 DEBUG com.suplin.demo.mapper.EbookMapper.selectByExample:137  [32m120344223294820352[0;39m ==>  Preparing: select id, book_name, vote_num, view_num, doc_num, des_cription, category1_id, category2_id, cover from ebook WHERE ( category2_id = ? ) LIMIT ?
2021-11-29 10:04:58.725 DEBUG com.suplin.demo.mapper.EbookMapper.selectByExample:137  [32m120344223294820352[0;39m ==> Parameters: 102(Long), 100(Integer)
2021-11-29 10:04:58.725 TRACE com.suplin.demo.mapper.EbookMapper.selectByExample:143  [32m120344223294820352[0;39m <==    Columns: id, book_name, vote_num, view_num, doc_num, des_cription, category1_id, category2_id, cover
2021-11-29 10:04:58.725 TRACE com.suplin.demo.mapper.EbookMapper.selectByExample:143  [32m120344223294820352[0;39m <==        Row: 116461475903705088, javaWebä»Žå…¥é—¨åˆ°æ”¾å¼ƒ, 53, 74, 6, æ”¾å¼ƒå§å­©å­, 100, 102, /image/cover1.png
2021-11-29 10:04:58.726 TRACE com.suplin.demo.mapper.EbookMapper.selectByExample:143  [32m120344223294820352[0;39m <==        Row: 116465287150309376, javaåŸºç¡€å…¥é—¨åˆ°æ”¾å¼ƒ, 5, 11, 7, æ”¾å¼ƒå§å­©å­, 100, 102, /image/cover2.png
2021-11-29 10:04:58.726 DEBUG com.suplin.demo.mapper.EbookMapper.selectByExample:137  [32m120344223294820352[0;39m <==      Total: 2
2021-11-29 10:04:58.726 INFO  com.suplin.demo.service.EbookTable                :50   [32m120344223294820352[0;39m æ€»è¡Œæ•°ï¼š2
2021-11-29 10:04:58.726 INFO  com.suplin.demo.service.EbookTable                :51   [32m120344223294820352[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:04:58.727 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120344223294820352[0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"bookName":"javaWebä»Žå…¥é—¨åˆ°æ”¾å¼ƒ","category1Id":100,"category2Id":102,"cover":"/image/cover1.png","desCription":"æ”¾å¼ƒå§å­©å­","docNum":6,"id":116461475903705088,"viewNum":74,"voteNum":53},{"bookName":"javaåŸºç¡€å…¥é—¨åˆ°æ”¾å¼ƒ","category1Id":100,"category2Id":102,"cover":"/image/cover2.png","desCription":"æ”¾å¼ƒå§å­©å­","docNum":7,"id":116465287150309376,"viewNum":11,"voteNum":5}],"total":2},"success":true}
2021-11-29 10:04:58.727 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120344223294820352[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2021-11-29 10:04:59.594 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120344226956447744[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:04:59.594 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120344226956447744[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:04:59.595 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120344226956447744[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:04:59.595 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120344226956447744[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:04:59.595 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120344226956447744[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":101,"page":1,"size":100}]
2021-11-29 10:04:59.596 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120344226956447744[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:04:59.596 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120344226956447744[0;39m ==> Parameters: 101(Long)
2021-11-29 10:04:59.597 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120344226956447744[0;39m <==    Columns: count(0)
2021-11-29 10:04:59.597 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120344226956447744[0;39m <==        Row: 0
2021-11-29 10:04:59.597 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120344226956447744[0;39m <==      Total: 1
2021-11-29 10:04:59.598 INFO  com.suplin.demo.service.EbookTable                :50   [32m120344226956447744[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:04:59.598 INFO  com.suplin.demo.service.EbookTable                :51   [32m120344226956447744[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:04:59.598 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120344226956447744[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:04:59.598 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120344226956447744[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:05:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120344228718055424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:05:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120344228718055424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:05:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120344228718055424[0;39m ==> Parameters: 
2021-11-29 10:05:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120344228718055424[0;39m <==    Updates: 0
2021-11-29 10:05:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120344228718055424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 10:05:00.546 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120344230949425152[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:05:00.546 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120344230949425152[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:05:00.547 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120344230949425152[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:05:00.547 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120344230949425152[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:05:00.547 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120344230949425152[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":102,"page":1,"size":100}]
2021-11-29 10:05:00.548 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120344230949425152[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:05:00.548 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120344230949425152[0;39m ==> Parameters: 102(Long)
2021-11-29 10:05:00.549 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120344230949425152[0;39m <==    Columns: count(0)
2021-11-29 10:05:00.549 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120344230949425152[0;39m <==        Row: 2
2021-11-29 10:05:00.549 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120344230949425152[0;39m <==      Total: 1
2021-11-29 10:05:00.549 DEBUG com.suplin.demo.mapper.EbookMapper.selectByExample:137  [32m120344230949425152[0;39m ==>  Preparing: select id, book_name, vote_num, view_num, doc_num, des_cription, category1_id, category2_id, cover from ebook WHERE ( category2_id = ? ) LIMIT ?
2021-11-29 10:05:00.549 DEBUG com.suplin.demo.mapper.EbookMapper.selectByExample:137  [32m120344230949425152[0;39m ==> Parameters: 102(Long), 100(Integer)
2021-11-29 10:05:00.550 TRACE com.suplin.demo.mapper.EbookMapper.selectByExample:143  [32m120344230949425152[0;39m <==    Columns: id, book_name, vote_num, view_num, doc_num, des_cription, category1_id, category2_id, cover
2021-11-29 10:05:00.550 TRACE com.suplin.demo.mapper.EbookMapper.selectByExample:143  [32m120344230949425152[0;39m <==        Row: 116461475903705088, javaWebä»Žå…¥é—¨åˆ°æ”¾å¼ƒ, 53, 74, 6, æ”¾å¼ƒå§å­©å­, 100, 102, /image/cover1.png
2021-11-29 10:05:00.551 TRACE com.suplin.demo.mapper.EbookMapper.selectByExample:143  [32m120344230949425152[0;39m <==        Row: 116465287150309376, javaåŸºç¡€å…¥é—¨åˆ°æ”¾å¼ƒ, 5, 11, 7, æ”¾å¼ƒå§å­©å­, 100, 102, /image/cover2.png
2021-11-29 10:05:00.551 DEBUG com.suplin.demo.mapper.EbookMapper.selectByExample:137  [32m120344230949425152[0;39m <==      Total: 2
2021-11-29 10:05:00.552 INFO  com.suplin.demo.service.EbookTable                :50   [32m120344230949425152[0;39m æ€»è¡Œæ•°ï¼š2
2021-11-29 10:05:00.552 INFO  com.suplin.demo.service.EbookTable                :51   [32m120344230949425152[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:05:00.554 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120344230949425152[0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"bookName":"javaWebä»Žå…¥é—¨åˆ°æ”¾å¼ƒ","category1Id":100,"category2Id":102,"cover":"/image/cover1.png","desCription":"æ”¾å¼ƒå§å­©å­","docNum":6,"id":116461475903705088,"viewNum":74,"voteNum":53},{"bookName":"javaåŸºç¡€å…¥é—¨åˆ°æ”¾å¼ƒ","category1Id":100,"category2Id":102,"cover":"/image/cover2.png","desCription":"æ”¾å¼ƒå§å­©å­","docNum":7,"id":116465287150309376,"viewNum":11,"voteNum":5}],"total":2},"success":true}
2021-11-29 10:05:00.554 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120344230949425152[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2021-11-29 10:05:02.070 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120344237341544448[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:05:02.071 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120344237341544448[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:05:02.071 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120344237341544448[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:05:02.071 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120344237341544448[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:05:02.071 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120344237341544448[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":201,"page":1,"size":100}]
2021-11-29 10:05:02.073 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120344237341544448[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:05:02.073 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120344237341544448[0;39m ==> Parameters: 201(Long)
2021-11-29 10:05:02.074 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120344237341544448[0;39m <==    Columns: count(0)
2021-11-29 10:05:02.074 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120344237341544448[0;39m <==        Row: 1
2021-11-29 10:05:02.074 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120344237341544448[0;39m <==      Total: 1
2021-11-29 10:05:02.075 DEBUG com.suplin.demo.mapper.EbookMapper.selectByExample:137  [32m120344237341544448[0;39m ==>  Preparing: select id, book_name, vote_num, view_num, doc_num, des_cription, category1_id, category2_id, cover from ebook WHERE ( category2_id = ? ) LIMIT ?
2021-11-29 10:05:02.075 DEBUG com.suplin.demo.mapper.EbookMapper.selectByExample:137  [32m120344237341544448[0;39m ==> Parameters: 201(Long), 100(Integer)
2021-11-29 10:05:02.076 TRACE com.suplin.demo.mapper.EbookMapper.selectByExample:143  [32m120344237341544448[0;39m <==    Columns: id, book_name, vote_num, view_num, doc_num, des_cription, category1_id, category2_id, cover
2021-11-29 10:05:02.076 TRACE com.suplin.demo.mapper.EbookMapper.selectByExample:143  [32m120344237341544448[0;39m <==        Row: 116468873762574336, pythonå®žæˆ˜, 16, 49, 11, ä¸çŸ¥é“, 200, 201, /image/cover1.png
2021-11-29 10:05:02.076 DEBUG com.suplin.demo.mapper.EbookMapper.selectByExample:137  [32m120344237341544448[0;39m <==      Total: 1
2021-11-29 10:05:02.077 INFO  com.suplin.demo.service.EbookTable                :50   [32m120344237341544448[0;39m æ€»è¡Œæ•°ï¼š1
2021-11-29 10:05:02.077 INFO  com.suplin.demo.service.EbookTable                :51   [32m120344237341544448[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:05:02.077 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120344237341544448[0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"bookName":"pythonå®žæˆ˜","category1Id":200,"category2Id":201,"cover":"/image/cover1.png","desCription":"ä¸çŸ¥é“","docNum":11,"id":116468873762574336,"viewNum":49,"voteNum":16}],"total":1},"success":true}
2021-11-29 10:05:02.077 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120344237341544448[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2021-11-29 10:05:02.674 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120344239874904064[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:05:02.674 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120344239874904064[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:05:02.674 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120344239874904064[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:05:02.674 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120344239874904064[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:05:02.675 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120344239874904064[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":202,"page":1,"size":100}]
2021-11-29 10:05:02.676 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120344239874904064[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:05:02.676 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120344239874904064[0;39m ==> Parameters: 202(Long)
2021-11-29 10:05:02.676 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120344239874904064[0;39m <==    Columns: count(0)
2021-11-29 10:05:02.677 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120344239874904064[0;39m <==        Row: 0
2021-11-29 10:05:02.677 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120344239874904064[0;39m <==      Total: 1
2021-11-29 10:05:02.678 INFO  com.suplin.demo.service.EbookTable                :50   [32m120344239874904064[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:05:02.678 INFO  com.suplin.demo.service.EbookTable                :51   [32m120344239874904064[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:05:02.678 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120344239874904064[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:05:02.678 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120344239874904064[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:05:03.433 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120344243058380800[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:05:03.434 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120344243058380800[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:05:03.434 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120344243058380800[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:05:03.434 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120344243058380800[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:05:03.434 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120344243058380800[0;39m è¯·æ±‚å‚æ•°: [{"category1Id":200,"page":1,"size":100}]
2021-11-29 10:05:03.435 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120344243058380800[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category1_id = ?)
2021-11-29 10:05:03.435 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120344243058380800[0;39m ==> Parameters: 200(Long)
2021-11-29 10:05:03.436 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120344243058380800[0;39m <==    Columns: count(0)
2021-11-29 10:05:03.436 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120344243058380800[0;39m <==        Row: 1
2021-11-29 10:05:03.436 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120344243058380800[0;39m <==      Total: 1
2021-11-29 10:05:03.436 DEBUG com.suplin.demo.mapper.EbookMapper.selectByExample:137  [32m120344243058380800[0;39m ==>  Preparing: select id, book_name, vote_num, view_num, doc_num, des_cription, category1_id, category2_id, cover from ebook WHERE ( category1_id = ? ) LIMIT ?
2021-11-29 10:05:03.437 DEBUG com.suplin.demo.mapper.EbookMapper.selectByExample:137  [32m120344243058380800[0;39m ==> Parameters: 200(Long), 100(Integer)
2021-11-29 10:05:03.437 TRACE com.suplin.demo.mapper.EbookMapper.selectByExample:143  [32m120344243058380800[0;39m <==    Columns: id, book_name, vote_num, view_num, doc_num, des_cription, category1_id, category2_id, cover
2021-11-29 10:05:03.437 TRACE com.suplin.demo.mapper.EbookMapper.selectByExample:143  [32m120344243058380800[0;39m <==        Row: 116468873762574336, pythonå®žæˆ˜, 16, 49, 11, ä¸çŸ¥é“, 200, 201, /image/cover1.png
2021-11-29 10:05:03.438 DEBUG com.suplin.demo.mapper.EbookMapper.selectByExample:137  [32m120344243058380800[0;39m <==      Total: 1
2021-11-29 10:05:03.438 INFO  com.suplin.demo.service.EbookTable                :50   [32m120344243058380800[0;39m æ€»è¡Œæ•°ï¼š1
2021-11-29 10:05:03.438 INFO  com.suplin.demo.service.EbookTable                :51   [32m120344243058380800[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:05:03.438 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120344243058380800[0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"bookName":"pythonå®žæˆ˜","category1Id":200,"category2Id":201,"cover":"/image/cover1.png","desCription":"ä¸çŸ¥é“","docNum":11,"id":116468873762574336,"viewNum":49,"voteNum":16}],"total":1},"success":true}
2021-11-29 10:05:03.438 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120344243058380800[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 10:05:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120344249664409600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:05:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120344249664409600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:05:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120344249664409600[0;39m ==> Parameters: 
2021-11-29 10:05:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120344249664409600[0;39m <==    Updates: 3
2021-11-29 10:05:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120344249664409600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 10:05:15.069 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:05:15.178 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:05:32.218 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120344363791421441[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:05:32.218 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120344363791421442[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:05:32.218 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120344363791421440[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:05:32.219 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120344363791421442[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 10:05:32.219 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120344363791421441[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 10:05:32.219 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120344363791421440[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 10:05:32.219 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120344363791421442[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 10:05:32.219 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120344363791421441[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 10:05:32.219 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120344363791421442[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:05:32.219 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120344363791421441[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:05:32.219 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120344363791421440[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 10:05:32.220 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120344363791421442[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:05:32.220 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120344363791421441[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:05:32.220 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120344363791421440[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:05:32.220 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120344363791421440[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:05:32.220 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120344363791421442[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 10:05:32.220 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120344363791421440[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:05:32.220 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120344363791421441[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:05:32.221 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120344363791421440[0;39m ==> Parameters: 
2021-11-29 10:05:32.221 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120344363791421442[0;39m ==> Parameters: 
2021-11-29 10:05:32.221 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120344363791421441[0;39m ==> Parameters: 
2021-11-29 10:05:32.221 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120344363791421440[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 10:05:32.221 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344363791421442[0;39m <==    Columns: id, parent, name, sort
2021-11-29 10:05:32.221 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120344363791421441[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 10:05:32.222 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344363791421442[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 10:05:32.222 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120344363791421440[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 10:05:32.222 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120344363791421441[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 10:05:32.222 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344363791421442[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 10:05:32.222 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120344363791421440[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 10:05:32.222 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120344363791421441[0;39m <==        Row: 2021-11-29, 134, 74, 9, 5
2021-11-29 10:05:32.222 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344363791421442[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 10:05:32.222 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120344363791421440[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 10:05:32.223 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344363791421442[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 10:05:32.223 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120344363791421441[0;39m <==      Total: 2
2021-11-29 10:05:32.223 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120344363791421440[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 10:05:32.223 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344363791421442[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 10:05:32.223 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120344363791421440[0;39m <==      Total: 4
2021-11-29 10:05:32.223 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344363791421442[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 10:05:32.223 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120344363791421441[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":134,"viewIncrease":9,"voteCount":74,"voteIncrease":5}],"success":true}
2021-11-29 10:05:32.223 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120344363791421441[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 10:05:32.223 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344363791421442[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 10:05:32.223 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120344363791421440[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 10:05:32.224 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344363791421442[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 10:05:32.224 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120344363791421440[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2021-11-29 10:05:32.224 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344363791421442[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 10:05:32.224 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344363791421442[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 10:05:32.224 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344363791421442[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 10:05:32.224 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344363791421442[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 10:05:32.225 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344363791421442[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 10:05:32.225 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344363791421442[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 10:05:32.225 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344363791421442[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 10:05:32.226 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120344363791421442[0;39m <==      Total: 15
2021-11-29 10:05:32.227 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120344363791421442[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 10:05:32.227 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120344363791421442[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š9 ms -------------
2021-11-29 10:05:32.374 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120344364445732864[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:05:32.375 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120344364445732864[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:05:32.375 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120344364445732864[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:05:32.375 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120344364445732864[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:05:32.375 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120344364445732864[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 10:05:32.376 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120344364445732864[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:05:32.376 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120344364445732864[0;39m ==> Parameters: 0(Long)
2021-11-29 10:05:32.377 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120344364445732864[0;39m <==    Columns: count(0)
2021-11-29 10:05:32.378 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120344364445732864[0;39m <==        Row: 0
2021-11-29 10:05:32.378 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120344364445732864[0;39m <==      Total: 1
2021-11-29 10:05:32.378 INFO  com.suplin.demo.service.EbookTable                :50   [32m120344364445732864[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:05:32.378 INFO  com.suplin.demo.service.EbookTable                :51   [32m120344364445732864[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:05:32.379 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120344364445732864[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:05:32.379 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120344364445732864[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 10:05:33.580 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120344369504063489[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:05:33.580 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120344369504063488[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:05:33.580 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120344369504063490[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:05:33.580 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120344369504063489[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 10:05:33.580 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120344369504063488[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 10:05:33.580 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120344369504063490[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 10:05:33.581 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120344369504063489[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 10:05:33.581 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120344369504063488[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 10:05:33.581 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120344369504063489[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:05:33.581 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120344369504063490[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 10:05:33.581 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120344369504063488[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:05:33.581 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120344369504063489[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:05:33.581 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120344369504063490[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:05:33.581 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120344369504063488[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:05:33.581 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120344369504063490[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:05:33.581 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120344369504063489[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 10:05:33.582 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120344369504063488[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:05:33.582 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120344369504063490[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:05:33.582 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120344369504063489[0;39m ==> Parameters: 
2021-11-29 10:05:33.582 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120344369504063488[0;39m ==> Parameters: 
2021-11-29 10:05:33.582 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120344369504063490[0;39m ==> Parameters: 
2021-11-29 10:05:33.583 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120344369504063490[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 10:05:33.583 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120344369504063488[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 10:05:33.583 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344369504063489[0;39m <==    Columns: id, parent, name, sort
2021-11-29 10:05:33.583 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120344369504063490[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 10:05:33.583 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120344369504063488[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 10:05:33.583 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344369504063489[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 10:05:33.583 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344369504063489[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 10:05:33.583 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120344369504063490[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 10:05:33.583 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344369504063489[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 10:05:33.583 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120344369504063488[0;39m <==        Row: 2021-11-29, 134, 74, 9, 5
2021-11-29 10:05:33.583 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344369504063489[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 10:05:33.584 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120344369504063490[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 10:05:33.584 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344369504063489[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 10:05:33.584 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120344369504063488[0;39m <==      Total: 2
2021-11-29 10:05:33.584 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120344369504063490[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 10:05:33.584 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344369504063489[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 10:05:33.584 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120344369504063490[0;39m <==      Total: 4
2021-11-29 10:05:33.584 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344369504063489[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 10:05:33.584 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120344369504063488[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":134,"viewIncrease":9,"voteCount":74,"voteIncrease":5}],"success":true}
2021-11-29 10:05:33.584 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344369504063489[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 10:05:33.584 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120344369504063490[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 10:05:33.584 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120344369504063488[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:05:33.584 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344369504063489[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 10:05:33.584 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120344369504063490[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:05:33.585 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344369504063489[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 10:05:33.585 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344369504063489[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 10:05:33.585 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344369504063489[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 10:05:33.585 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344369504063489[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 10:05:33.585 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344369504063489[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 10:05:33.585 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344369504063489[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 10:05:33.586 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120344369504063489[0;39m <==      Total: 15
2021-11-29 10:05:33.586 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120344369504063489[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 10:05:33.587 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120344369504063489[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2021-11-29 10:05:33.657 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120344369827024896[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:05:33.657 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120344369827024896[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:05:33.657 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120344369827024896[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:05:33.658 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120344369827024896[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:05:33.658 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120344369827024896[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 10:05:33.658 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120344369827024896[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:05:33.659 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120344369827024896[0;39m ==> Parameters: 0(Long)
2021-11-29 10:05:33.660 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120344369827024896[0;39m <==    Columns: count(0)
2021-11-29 10:05:33.660 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120344369827024896[0;39m <==        Row: 0
2021-11-29 10:05:33.660 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120344369827024896[0;39m <==      Total: 1
2021-11-29 10:05:33.660 INFO  com.suplin.demo.service.EbookTable                :50   [32m120344369827024896[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:05:33.660 INFO  com.suplin.demo.service.EbookTable                :51   [32m120344369827024896[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:05:33.661 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120344369827024896[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:05:33.661 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120344369827024896[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:05:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120344375489335296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:05:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120344375489335296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:05:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120344375489335296[0;39m ==> Parameters: 
2021-11-29 10:05:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120344375489335296[0;39m <==    Updates: 3
2021-11-29 10:05:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120344375489335296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 10:05:45.086 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:05:45.173 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:06:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120344480346935296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:06:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120344480346935296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:06:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120344480346935296[0;39m ==> Parameters: 
2021-11-29 10:06:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120344480346935296[0;39m <==    Updates: 0
2021-11-29 10:06:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120344480346935296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 10:06:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120344501305872384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:06:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120344501305872384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:06:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120344501305872384[0;39m ==> Parameters: 
2021-11-29 10:06:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120344501305872384[0;39m <==    Updates: 3
2021-11-29 10:06:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120344501305872384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:06:15.069 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:06:15.179 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:06:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120344627176935424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:06:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120344627176935424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:06:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120344627176935424[0;39m ==> Parameters: 
2021-11-29 10:06:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120344627176935424[0;39m <==    Updates: 3
2021-11-29 10:06:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120344627176935424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:06:45.075 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:06:45.168 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:07:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120344732017758208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:07:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120344732017758208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:07:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120344732017758208[0;39m ==> Parameters: 
2021-11-29 10:07:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120344732017758208[0;39m <==    Updates: 0
2021-11-29 10:07:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120344732017758208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 10:07:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120344752976695296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:07:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120344752976695296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:07:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120344752976695296[0;39m ==> Parameters: 
2021-11-29 10:07:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120344752976695296[0;39m <==    Updates: 3
2021-11-29 10:07:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120344752976695296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 10:07:15.039 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:07:15.165 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:07:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120344878797426688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:07:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120344878797426688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:07:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120344878797426688[0;39m ==> Parameters: 
2021-11-29 10:07:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120344878797426688[0;39m <==    Updates: 3
2021-11-29 10:07:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120344878797426688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 10:07:37.979 INFO  com.suplin.demo.websocket.WebSocketServer         :40   [32m120344363791421441[0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼šamufJh7VYFï¼Œsession idï¼š5ï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2021-11-29 10:07:39.182 INFO  com.suplin.demo.websocket.WebSocketServer         :31   [32m120344363791421442[0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼šZrBBc7GVW1ï¼Œsession idï¼š6ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2021-11-29 10:07:39.269 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120344896681938946[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:07:39.269 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120344896681938944[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:07:39.269 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120344896681938945[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:07:39.269 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120344896681938944[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 10:07:39.269 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120344896681938946[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 10:07:39.269 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120344896681938945[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 10:07:39.270 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120344896681938944[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 10:07:39.270 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120344896681938946[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 10:07:39.270 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120344896681938945[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 10:07:39.270 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120344896681938944[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:07:39.270 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120344896681938946[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:07:39.270 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120344896681938945[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:07:39.270 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120344896681938946[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:07:39.270 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120344896681938944[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:07:39.270 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120344896681938945[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:07:39.270 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120344896681938946[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 10:07:39.270 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120344896681938944[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:07:39.271 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120344896681938945[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:07:39.271 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120344896681938946[0;39m ==> Parameters: 
2021-11-29 10:07:39.271 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120344896681938944[0;39m ==> Parameters: 
2021-11-29 10:07:39.271 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120344896681938945[0;39m ==> Parameters: 
2021-11-29 10:07:39.272 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120344896681938945[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 10:07:39.272 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120344896681938944[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 10:07:39.272 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344896681938946[0;39m <==    Columns: id, parent, name, sort
2021-11-29 10:07:39.272 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344896681938946[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 10:07:39.272 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120344896681938945[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 10:07:39.272 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120344896681938944[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 10:07:39.272 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120344896681938944[0;39m <==        Row: 2021-11-29, 134, 74, 9, 5
2021-11-29 10:07:39.272 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344896681938946[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 10:07:39.272 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120344896681938945[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 10:07:39.272 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120344896681938944[0;39m <==      Total: 2
2021-11-29 10:07:39.272 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344896681938946[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 10:07:39.273 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344896681938946[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 10:07:39.273 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120344896681938945[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 10:07:39.273 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120344896681938944[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":134,"viewIncrease":9,"voteCount":74,"voteIncrease":5}],"success":true}
2021-11-29 10:07:39.273 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344896681938946[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 10:07:39.273 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120344896681938945[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 10:07:39.273 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120344896681938944[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:07:39.273 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120344896681938945[0;39m <==      Total: 4
2021-11-29 10:07:39.273 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344896681938946[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 10:07:39.273 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344896681938946[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 10:07:39.274 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120344896681938945[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 10:07:39.274 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344896681938946[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 10:07:39.274 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120344896681938945[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 10:07:39.274 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344896681938946[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 10:07:39.274 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344896681938946[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 10:07:39.274 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344896681938946[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 10:07:39.274 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344896681938946[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 10:07:39.275 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344896681938946[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 10:07:39.275 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344896681938946[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 10:07:39.275 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120344896681938946[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 10:07:39.275 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120344896681938946[0;39m <==      Total: 15
2021-11-29 10:07:39.276 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120344896681938946[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 10:07:39.276 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120344896681938946[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2021-11-29 10:07:39.403 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120344897243975680[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:07:39.404 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120344897243975680[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:07:39.404 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120344897243975680[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:07:39.404 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120344897243975680[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:07:39.404 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120344897243975680[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 10:07:39.405 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120344897243975680[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:07:39.406 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120344897243975680[0;39m ==> Parameters: 0(Long)
2021-11-29 10:07:39.407 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120344897243975680[0;39m <==    Columns: count(0)
2021-11-29 10:07:39.407 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120344897243975680[0;39m <==        Row: 0
2021-11-29 10:07:39.407 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120344897243975680[0;39m <==      Total: 1
2021-11-29 10:07:39.408 INFO  com.suplin.demo.service.EbookTable                :50   [32m120344897243975680[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:07:39.408 INFO  com.suplin.demo.service.EbookTable                :51   [32m120344897243975680[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:07:39.408 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120344897243975680[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:07:39.408 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120344897243975680[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 10:07:45.072 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:07:45.161 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:08:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120344983701164032[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:08:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120344983701164032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:08:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120344983701164032[0;39m ==> Parameters: 
2021-11-29 10:08:00.019 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120344983701164032[0;39m <==    Updates: 0
2021-11-29 10:08:00.020 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120344983701164032[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 10:08:05.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120345004613963776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:08:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120345004613963776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:08:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120345004613963776[0;39m ==> Parameters: 
2021-11-29 10:08:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120345004613963776[0;39m <==    Updates: 3
2021-11-29 10:08:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120345004613963776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:08:15.088 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:08:15.182 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:08:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120345130493415424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:08:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120345130493415424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:08:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120345130493415424[0;39m ==> Parameters: 
2021-11-29 10:08:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120345130493415424[0;39m <==    Updates: 3
2021-11-29 10:08:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120345130493415424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:08:45.099 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:08:45.179 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:08:49.524 INFO  com.suplin.demo.websocket.WebSocketServer         :40   [32m120344239874904064[0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼šZrBBc7GVW1ï¼Œsession idï¼š6ï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2021-11-29 10:08:50.650 INFO  com.suplin.demo.websocket.WebSocketServer         :31   [32m120344363791421441[0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼šWlhV7PXfOtï¼Œsession idï¼š7ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2021-11-29 10:08:50.760 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120345196536926208[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:08:50.760 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120345196536926209[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:08:50.760 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120345196536926210[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:08:50.761 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120345196536926208[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 10:08:50.761 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120345196536926209[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 10:08:50.761 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120345196536926208[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 10:08:50.761 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120345196536926210[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 10:08:50.761 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120345196536926209[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 10:08:50.761 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120345196536926208[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:08:50.761 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120345196536926209[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:08:50.761 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120345196536926210[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 10:08:50.761 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120345196536926210[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:08:50.761 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120345196536926209[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:08:50.761 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120345196536926208[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:08:50.762 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120345196536926210[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:08:50.762 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120345196536926209[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:08:50.762 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120345196536926210[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 10:08:50.762 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120345196536926208[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:08:50.762 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120345196536926210[0;39m ==> Parameters: 
2021-11-29 10:08:50.762 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120345196536926209[0;39m ==> Parameters: 
2021-11-29 10:08:50.762 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120345196536926208[0;39m ==> Parameters: 
2021-11-29 10:08:50.763 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345196536926209[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 10:08:50.763 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345196536926210[0;39m <==    Columns: id, parent, name, sort
2021-11-29 10:08:50.763 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120345196536926208[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 10:08:50.764 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345196536926210[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 10:08:50.764 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345196536926209[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 10:08:50.764 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120345196536926208[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 10:08:50.764 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345196536926210[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 10:08:50.764 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120345196536926208[0;39m <==        Row: 2021-11-29, 134, 74, 9, 5
2021-11-29 10:08:50.764 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345196536926209[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 10:08:50.764 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345196536926210[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 10:08:50.764 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120345196536926208[0;39m <==      Total: 2
2021-11-29 10:08:50.764 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345196536926209[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 10:08:50.764 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345196536926210[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 10:08:50.765 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345196536926209[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 10:08:50.765 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345196536926210[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 10:08:50.765 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120345196536926208[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":134,"viewIncrease":9,"voteCount":74,"voteIncrease":5}],"success":true}
2021-11-29 10:08:50.765 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345196536926210[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 10:08:50.765 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120345196536926209[0;39m <==      Total: 4
2021-11-29 10:08:50.765 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120345196536926208[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 10:08:50.765 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345196536926210[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 10:08:50.765 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345196536926210[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 10:08:50.765 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120345196536926209[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 10:08:50.765 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345196536926210[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 10:08:50.765 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120345196536926209[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 10:08:50.765 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345196536926210[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 10:08:50.766 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345196536926210[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 10:08:50.766 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345196536926210[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 10:08:50.766 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345196536926210[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 10:08:50.767 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345196536926210[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 10:08:50.767 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345196536926210[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 10:08:50.767 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120345196536926210[0;39m <==      Total: 15
2021-11-29 10:08:50.768 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120345196536926210[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 10:08:50.768 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120345196536926210[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2021-11-29 10:08:50.899 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120345197119934464[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:08:50.899 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120345197119934464[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:08:50.899 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120345197119934464[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:08:50.899 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120345197119934464[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:08:50.900 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120345197119934464[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 10:08:50.900 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120345197119934464[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:08:50.901 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120345197119934464[0;39m ==> Parameters: 0(Long)
2021-11-29 10:08:50.901 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120345197119934464[0;39m <==    Columns: count(0)
2021-11-29 10:08:50.902 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120345197119934464[0;39m <==        Row: 0
2021-11-29 10:08:50.902 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120345197119934464[0;39m <==      Total: 1
2021-11-29 10:08:50.902 INFO  com.suplin.demo.service.EbookTable                :50   [32m120345197119934464[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:08:50.903 INFO  com.suplin.demo.service.EbookTable                :51   [32m120345197119934464[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:08:50.903 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120345197119934464[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:08:50.903 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120345197119934464[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:08:52.551 INFO  com.suplin.demo.websocket.WebSocketServer         :40   [32m120344897243975680[0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼šWlhV7PXfOtï¼Œsession idï¼š7ï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2021-11-29 10:08:53.383 INFO  com.suplin.demo.websocket.WebSocketServer         :31   [32m120344369827024896[0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼šf4gvjr5vu9ï¼Œsession idï¼š8ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2021-11-29 10:08:53.483 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120345207958016002[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:08:53.483 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120345207958016000[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:08:53.483 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120345207958016001[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:08:53.483 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120345207958016000[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 10:08:53.483 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120345207958016002[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 10:08:53.483 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120345207958016001[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 10:08:53.483 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120345207958016000[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 10:08:53.483 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120345207958016001[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 10:08:53.483 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120345207958016002[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 10:08:53.484 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120345207958016000[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:08:53.484 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120345207958016002[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:08:53.484 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120345207958016001[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:08:53.484 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120345207958016000[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:08:53.484 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120345207958016002[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:08:53.484 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120345207958016001[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:08:53.484 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120345207958016000[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:08:53.484 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120345207958016002[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 10:08:53.484 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120345207958016001[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:08:53.485 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120345207958016001[0;39m ==> Parameters: 
2021-11-29 10:08:53.485 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120345207958016000[0;39m ==> Parameters: 
2021-11-29 10:08:53.485 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120345207958016002[0;39m ==> Parameters: 
2021-11-29 10:08:53.485 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345207958016001[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 10:08:53.485 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345207958016002[0;39m <==    Columns: id, parent, name, sort
2021-11-29 10:08:53.485 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120345207958016000[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 10:08:53.486 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345207958016002[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 10:08:53.486 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345207958016001[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 10:08:53.486 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345207958016002[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 10:08:53.486 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120345207958016000[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 10:08:53.486 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345207958016001[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 10:08:53.486 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345207958016002[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 10:08:53.486 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345207958016002[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 10:08:53.486 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120345207958016000[0;39m <==        Row: 2021-11-29, 134, 74, 9, 5
2021-11-29 10:08:53.486 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345207958016001[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 10:08:53.487 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345207958016002[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 10:08:53.487 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345207958016001[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 10:08:53.487 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120345207958016000[0;39m <==      Total: 2
2021-11-29 10:08:53.487 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345207958016002[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 10:08:53.487 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120345207958016001[0;39m <==      Total: 4
2021-11-29 10:08:53.487 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345207958016002[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 10:08:53.488 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120345207958016000[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":134,"viewIncrease":9,"voteCount":74,"voteIncrease":5}],"success":true}
2021-11-29 10:08:53.488 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345207958016002[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 10:08:53.488 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120345207958016001[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 10:08:53.488 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120345207958016001[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 10:08:53.488 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120345207958016000[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 10:08:53.488 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345207958016002[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 10:08:53.488 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345207958016002[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 10:08:53.488 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345207958016002[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 10:08:53.489 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345207958016002[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 10:08:53.489 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345207958016002[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 10:08:53.489 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345207958016002[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 10:08:53.489 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345207958016002[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 10:08:53.490 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120345207958016002[0;39m <==      Total: 15
2021-11-29 10:08:53.490 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120345207958016002[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 10:08:53.490 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120345207958016002[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2021-11-29 10:08:53.710 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120345208910123008[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:08:53.711 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120345208910123008[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:08:53.711 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120345208910123008[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:08:53.711 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120345208910123008[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:08:53.711 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120345208910123008[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 10:08:53.712 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120345208910123008[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:08:53.713 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120345208910123008[0;39m ==> Parameters: 0(Long)
2021-11-29 10:08:53.713 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120345208910123008[0;39m <==    Columns: count(0)
2021-11-29 10:08:53.714 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120345208910123008[0;39m <==        Row: 0
2021-11-29 10:08:53.714 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120345208910123008[0;39m <==      Total: 1
2021-11-29 10:08:53.714 INFO  com.suplin.demo.service.EbookTable                :50   [32m120345208910123008[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:08:53.714 INFO  com.suplin.demo.service.EbookTable                :51   [32m120345208910123008[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:08:53.714 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120345208910123008[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:08:53.715 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120345208910123008[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 10:09:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120345235317460992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:09:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120345235317460992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:09:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120345235317460992[0;39m ==> Parameters: 
2021-11-29 10:09:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120345235317460992[0;39m <==    Updates: 0
2021-11-29 10:09:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120345235317460992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 10:09:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120345256288980992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:09:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120345256288980992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:09:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120345256288980992[0;39m ==> Parameters: 
2021-11-29 10:09:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120345256288980992[0;39m <==    Updates: 3
2021-11-29 10:09:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120345256288980992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:09:15.065 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:09:15.161 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:09:20.249 INFO  com.suplin.demo.websocket.WebSocketServer         :40   [32m120345196536926208[0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼šf4gvjr5vu9ï¼Œsession idï¼š8ï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2021-11-29 10:09:22.385 INFO  com.suplin.demo.websocket.WebSocketServer         :31   [32m120345196536926209[0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼šZvGGbsyputï¼Œsession idï¼š9ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2021-11-29 10:09:22.470 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120345329538306050[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:09:22.470 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120345329538306048[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:09:22.470 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120345329538306049[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:09:22.471 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120345329538306050[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 10:09:22.471 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120345329538306048[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 10:09:22.471 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120345329538306049[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 10:09:22.471 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120345329538306050[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 10:09:22.471 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120345329538306048[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 10:09:22.471 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120345329538306050[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:09:22.471 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120345329538306049[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 10:09:22.471 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120345329538306048[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:09:22.471 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120345329538306049[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:09:22.471 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120345329538306050[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:09:22.471 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120345329538306048[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:09:22.471 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120345329538306049[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:09:22.472 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120345329538306050[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:09:22.472 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120345329538306048[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 10:09:22.472 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120345329538306049[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:09:22.472 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120345329538306048[0;39m ==> Parameters: 
2021-11-29 10:09:22.472 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120345329538306050[0;39m ==> Parameters: 
2021-11-29 10:09:22.472 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120345329538306049[0;39m ==> Parameters: 
2021-11-29 10:09:22.473 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345329538306048[0;39m <==    Columns: id, parent, name, sort
2021-11-29 10:09:22.473 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345329538306050[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 10:09:22.473 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120345329538306049[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 10:09:22.473 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345329538306048[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 10:09:22.473 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345329538306050[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 10:09:22.473 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120345329538306049[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 10:09:22.474 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345329538306048[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 10:09:22.474 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345329538306050[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 10:09:22.474 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120345329538306049[0;39m <==        Row: 2021-11-29, 134, 74, 9, 5
2021-11-29 10:09:22.474 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345329538306048[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 10:09:22.474 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345329538306050[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 10:09:22.474 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120345329538306049[0;39m <==      Total: 2
2021-11-29 10:09:22.474 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345329538306048[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 10:09:22.474 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345329538306050[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 10:09:22.475 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345329538306048[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 10:09:22.475 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120345329538306049[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":134,"viewIncrease":9,"voteCount":74,"voteIncrease":5}],"success":true}
2021-11-29 10:09:22.475 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120345329538306050[0;39m <==      Total: 4
2021-11-29 10:09:22.475 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345329538306048[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 10:09:22.475 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120345329538306049[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 10:09:22.475 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120345329538306050[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 10:09:22.475 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345329538306048[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 10:09:22.475 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120345329538306050[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 10:09:22.475 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345329538306048[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 10:09:22.476 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345329538306048[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 10:09:22.476 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345329538306048[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 10:09:22.476 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345329538306048[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 10:09:22.476 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345329538306048[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 10:09:22.477 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345329538306048[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 10:09:22.477 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345329538306048[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 10:09:22.477 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345329538306048[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 10:09:22.478 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120345329538306048[0;39m <==      Total: 15
2021-11-29 10:09:22.478 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120345329538306048[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 10:09:22.479 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120345329538306048[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š9 ms -------------
2021-11-29 10:09:22.710 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120345330544939008[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:09:22.710 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120345330544939008[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:09:22.710 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120345330544939008[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:09:22.711 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120345330544939008[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:09:22.711 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120345330544939008[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 10:09:22.712 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120345330544939008[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:09:22.712 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120345330544939008[0;39m ==> Parameters: 0(Long)
2021-11-29 10:09:22.713 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120345330544939008[0;39m <==    Columns: count(0)
2021-11-29 10:09:22.713 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120345330544939008[0;39m <==        Row: 0
2021-11-29 10:09:22.713 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120345330544939008[0;39m <==      Total: 1
2021-11-29 10:09:22.713 INFO  com.suplin.demo.service.EbookTable                :50   [32m120345330544939008[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:09:22.714 INFO  com.suplin.demo.service.EbookTable                :51   [32m120345330544939008[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:09:22.714 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120345330544939008[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:09:22.714 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120345330544939008[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:09:24.530 INFO  com.suplin.demo.websocket.WebSocketServer         :40   [32m120345207958016001[0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼šZvGGbsyputï¼Œsession idï¼š9ï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2021-11-29 10:09:24.977 INFO  com.suplin.demo.websocket.WebSocketServer         :31   [32m120345207958016000[0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼š6aD30T0FBoï¼Œsession idï¼šaï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2021-11-29 10:09:25.042 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120345340326055937[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:09:25.042 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120345340326055936[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:09:25.042 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120345340326055936[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 10:09:25.042 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120345340326055938[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:09:25.042 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120345340326055937[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 10:09:25.043 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120345340326055936[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 10:09:25.043 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120345340326055938[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 10:09:25.043 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120345340326055937[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 10:09:25.043 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120345340326055938[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 10:09:25.043 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120345340326055936[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:09:25.043 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120345340326055937[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:09:25.043 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120345340326055938[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:09:25.043 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120345340326055936[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:09:25.043 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120345340326055937[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:09:25.043 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120345340326055938[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:09:25.043 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120345340326055937[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 10:09:25.043 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120345340326055938[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:09:25.043 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120345340326055936[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:09:25.044 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120345340326055936[0;39m ==> Parameters: 
2021-11-29 10:09:25.044 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120345340326055937[0;39m ==> Parameters: 
2021-11-29 10:09:25.044 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120345340326055938[0;39m ==> Parameters: 
2021-11-29 10:09:25.045 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345340326055938[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 10:09:25.045 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120345340326055936[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 10:09:25.045 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345340326055937[0;39m <==    Columns: id, parent, name, sort
2021-11-29 10:09:25.045 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345340326055938[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 10:09:25.045 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345340326055937[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 10:09:25.045 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120345340326055936[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 10:09:25.045 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345340326055937[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 10:09:25.045 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345340326055938[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 10:09:25.045 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120345340326055936[0;39m <==        Row: 2021-11-29, 134, 74, 9, 5
2021-11-29 10:09:25.045 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345340326055937[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 10:09:25.045 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345340326055938[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 10:09:25.046 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120345340326055936[0;39m <==      Total: 2
2021-11-29 10:09:25.046 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345340326055937[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 10:09:25.046 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345340326055938[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 10:09:25.046 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345340326055937[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 10:09:25.046 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120345340326055936[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":134,"viewIncrease":9,"voteCount":74,"voteIncrease":5}],"success":true}
2021-11-29 10:09:25.046 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345340326055937[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 10:09:25.046 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120345340326055938[0;39m <==      Total: 4
2021-11-29 10:09:25.046 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120345340326055936[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:09:25.046 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345340326055937[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 10:09:25.046 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345340326055937[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 10:09:25.047 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120345340326055938[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 10:09:25.047 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345340326055937[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 10:09:25.047 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120345340326055938[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 10:09:25.047 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345340326055937[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 10:09:25.047 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345340326055937[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 10:09:25.047 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345340326055937[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 10:09:25.047 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345340326055937[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 10:09:25.048 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345340326055937[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 10:09:25.048 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345340326055937[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 10:09:25.048 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120345340326055937[0;39m <==      Total: 15
2021-11-29 10:09:25.049 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120345340326055937[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 10:09:25.049 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120345340326055937[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2021-11-29 10:09:25.204 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120345341005533184[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:09:25.204 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120345341005533184[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:09:25.204 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120345341005533184[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:09:25.204 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120345341005533184[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:09:25.205 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120345341005533184[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 10:09:25.205 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120345341005533184[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:09:25.205 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120345341005533184[0;39m ==> Parameters: 0(Long)
2021-11-29 10:09:25.206 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120345341005533184[0;39m <==    Columns: count(0)
2021-11-29 10:09:25.206 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120345341005533184[0;39m <==        Row: 0
2021-11-29 10:09:25.206 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120345341005533184[0;39m <==      Total: 1
2021-11-29 10:09:25.207 INFO  com.suplin.demo.service.EbookTable                :50   [32m120345341005533184[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:09:25.207 INFO  com.suplin.demo.service.EbookTable                :51   [32m120345341005533184[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:09:25.207 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120345341005533184[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:09:25.207 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120345341005533184[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š3 ms -------------
2021-11-29 10:09:27.359 INFO  com.suplin.demo.websocket.WebSocketServer         :40   [32m120345329538306049[0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼š6aD30T0FBoï¼Œsession idï¼šaï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2021-11-29 10:09:27.735 INFO  com.suplin.demo.websocket.WebSocketServer         :31   [32m120345329538306050[0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼š1KokigzgcZï¼Œsession idï¼šbï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2021-11-29 10:09:27.798 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120345351885557760[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:09:27.798 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120345351885557760[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 10:09:27.798 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120345351885557762[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:09:27.798 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120345351885557761[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:09:27.798 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120345351885557760[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 10:09:27.799 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120345351885557761[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 10:09:27.799 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120345351885557762[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 10:09:27.799 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120345351885557760[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:09:27.799 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120345351885557761[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 10:09:27.799 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120345351885557761[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:09:27.799 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120345351885557762[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 10:09:27.799 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120345351885557760[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:09:27.799 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120345351885557762[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:09:27.799 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120345351885557761[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:09:27.799 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120345351885557762[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:09:27.799 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120345351885557760[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:09:27.800 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120345351885557761[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 10:09:27.801 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120345351885557762[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:09:27.801 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120345351885557760[0;39m ==> Parameters: 
2021-11-29 10:09:27.801 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120345351885557761[0;39m ==> Parameters: 
2021-11-29 10:09:27.801 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120345351885557762[0;39m ==> Parameters: 
2021-11-29 10:09:27.801 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345351885557761[0;39m <==    Columns: id, parent, name, sort
2021-11-29 10:09:27.801 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345351885557762[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 10:09:27.801 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120345351885557760[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 10:09:27.802 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345351885557761[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 10:09:27.802 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345351885557762[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 10:09:27.802 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120345351885557760[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 10:09:27.802 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345351885557761[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 10:09:27.802 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345351885557762[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 10:09:27.802 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345351885557761[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 10:09:27.802 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120345351885557760[0;39m <==        Row: 2021-11-29, 134, 74, 9, 5
2021-11-29 10:09:27.802 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345351885557762[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 10:09:27.802 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345351885557761[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 10:09:27.802 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120345351885557760[0;39m <==      Total: 2
2021-11-29 10:09:27.803 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345351885557762[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 10:09:27.803 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345351885557761[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 10:09:27.803 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120345351885557762[0;39m <==      Total: 4
2021-11-29 10:09:27.803 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120345351885557760[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":134,"viewIncrease":9,"voteCount":74,"voteIncrease":5}],"success":true}
2021-11-29 10:09:27.803 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345351885557761[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 10:09:27.803 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120345351885557760[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 10:09:27.803 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120345351885557762[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 10:09:27.803 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345351885557761[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 10:09:27.803 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120345351885557762[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 10:09:27.803 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345351885557761[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 10:09:27.804 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345351885557761[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 10:09:27.804 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345351885557761[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 10:09:27.804 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345351885557761[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 10:09:27.804 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345351885557761[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 10:09:27.805 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345351885557761[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 10:09:27.805 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345351885557761[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 10:09:27.805 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345351885557761[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 10:09:27.806 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120345351885557761[0;39m <==      Total: 15
2021-11-29 10:09:27.806 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120345351885557761[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 10:09:27.807 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120345351885557761[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š9 ms -------------
2021-11-29 10:09:27.963 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120345352577617920[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:09:27.963 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120345352577617920[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:09:27.963 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120345352577617920[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:09:27.963 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120345352577617920[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:09:27.964 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120345352577617920[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 10:09:27.965 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120345352577617920[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:09:27.965 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120345352577617920[0;39m ==> Parameters: 0(Long)
2021-11-29 10:09:27.966 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120345352577617920[0;39m <==    Columns: count(0)
2021-11-29 10:09:27.966 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120345352577617920[0;39m <==        Row: 0
2021-11-29 10:09:27.966 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120345352577617920[0;39m <==      Total: 1
2021-11-29 10:09:27.967 INFO  com.suplin.demo.service.EbookTable                :50   [32m120345352577617920[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:09:27.967 INFO  com.suplin.demo.service.EbookTable                :51   [32m120345352577617920[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:09:27.967 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120345352577617920[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:09:27.967 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120345352577617920[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:09:29.613 INFO  com.suplin.demo.websocket.WebSocketServer         :40   [32m120345340326055936[0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼š1KokigzgcZï¼Œsession idï¼šbï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2021-11-29 10:09:30.037 INFO  com.suplin.demo.websocket.WebSocketServer         :31   [32m120345340326055938[0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼šwnXYfJnG1pï¼Œsession idï¼šcï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2021-11-29 10:09:30.098 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120345361532456960[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:09:30.098 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120345361532456961[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:09:30.098 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120345361532456960[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 10:09:30.098 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120345361532456962[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:09:30.098 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120345361532456961[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 10:09:30.098 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120345361532456960[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 10:09:30.099 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120345361532456962[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 10:09:30.099 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120345361532456961[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 10:09:30.099 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120345361532456960[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:09:30.099 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120345361532456961[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:09:30.099 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120345361532456962[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 10:09:30.099 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120345361532456960[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:09:30.099 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120345361532456962[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:09:30.099 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120345361532456961[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:09:30.099 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120345361532456962[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:09:30.100 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120345361532456962[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 10:09:30.099 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120345361532456961[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:09:30.099 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120345361532456960[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:09:30.100 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120345361532456962[0;39m ==> Parameters: 
2021-11-29 10:09:30.100 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120345361532456961[0;39m ==> Parameters: 
2021-11-29 10:09:30.100 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120345361532456960[0;39m ==> Parameters: 
2021-11-29 10:09:30.100 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345361532456962[0;39m <==    Columns: id, parent, name, sort
2021-11-29 10:09:30.100 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345361532456961[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 10:09:30.100 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120345361532456960[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 10:09:30.101 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345361532456962[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 10:09:30.101 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345361532456961[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 10:09:30.101 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120345361532456960[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 10:09:30.101 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345361532456962[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 10:09:30.101 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345361532456962[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 10:09:30.101 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120345361532456960[0;39m <==        Row: 2021-11-29, 134, 74, 9, 5
2021-11-29 10:09:30.101 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345361532456961[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 10:09:30.101 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345361532456962[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 10:09:30.102 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120345361532456960[0;39m <==      Total: 2
2021-11-29 10:09:30.102 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345361532456961[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 10:09:30.102 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345361532456962[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 10:09:30.102 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120345361532456960[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":134,"viewIncrease":9,"voteCount":74,"voteIncrease":5}],"success":true}
2021-11-29 10:09:30.102 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345361532456962[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 10:09:30.102 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345361532456961[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 10:09:30.102 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120345361532456960[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:09:30.102 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345361532456962[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 10:09:30.102 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120345361532456961[0;39m <==      Total: 4
2021-11-29 10:09:30.102 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345361532456962[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 10:09:30.103 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120345361532456961[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 10:09:30.103 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345361532456962[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 10:09:30.103 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120345361532456961[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 10:09:30.103 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345361532456962[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 10:09:30.103 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345361532456962[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 10:09:30.103 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345361532456962[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 10:09:30.104 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345361532456962[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 10:09:30.104 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345361532456962[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 10:09:30.104 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345361532456962[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 10:09:30.104 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120345361532456962[0;39m <==      Total: 15
2021-11-29 10:09:30.105 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120345361532456962[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 10:09:30.105 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120345361532456962[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2021-11-29 10:09:30.261 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120345362216128512[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:09:30.261 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120345362216128512[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:09:30.261 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120345362216128512[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:09:30.262 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120345362216128512[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:09:30.262 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120345362216128512[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 10:09:30.263 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120345362216128512[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:09:30.263 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120345362216128512[0;39m ==> Parameters: 0(Long)
2021-11-29 10:09:30.264 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120345362216128512[0;39m <==    Columns: count(0)
2021-11-29 10:09:30.264 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120345362216128512[0;39m <==        Row: 0
2021-11-29 10:09:30.264 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120345362216128512[0;39m <==      Total: 1
2021-11-29 10:09:30.264 INFO  com.suplin.demo.service.EbookTable                :50   [32m120345362216128512[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:09:30.265 INFO  com.suplin.demo.service.EbookTable                :51   [32m120345362216128512[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:09:30.265 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120345362216128512[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:09:30.265 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120345362216128512[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:09:31.190 INFO  com.suplin.demo.websocket.WebSocketServer         :40   [32m120345351885557760[0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼šwnXYfJnG1pï¼Œsession idï¼šcï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2021-11-29 10:09:31.560 INFO  com.suplin.demo.websocket.WebSocketServer         :31   [32m120345351885557762[0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼š6GBGLOTOVBï¼Œsession idï¼šdï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2021-11-29 10:09:31.633 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120345367970713602[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:09:31.633 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120345367970713601[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:09:31.633 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120345367970713600[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:09:31.633 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120345367970713601[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 10:09:31.633 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120345367970713602[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 10:09:31.633 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120345367970713600[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 10:09:31.633 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120345367970713601[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 10:09:31.633 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120345367970713600[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 10:09:31.633 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120345367970713602[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 10:09:31.633 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120345367970713601[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:09:31.633 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120345367970713600[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:09:31.633 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120345367970713602[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:09:31.634 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120345367970713600[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:09:31.634 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120345367970713601[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:09:31.634 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120345367970713602[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:09:31.634 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120345367970713601[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 10:09:31.634 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120345367970713600[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:09:31.634 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120345367970713602[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:09:31.634 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120345367970713601[0;39m ==> Parameters: 
2021-11-29 10:09:31.634 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120345367970713600[0;39m ==> Parameters: 
2021-11-29 10:09:31.634 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120345367970713602[0;39m ==> Parameters: 
2021-11-29 10:09:31.635 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345367970713601[0;39m <==    Columns: id, parent, name, sort
2021-11-29 10:09:31.635 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120345367970713600[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 10:09:31.635 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345367970713602[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 10:09:31.635 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345367970713601[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 10:09:31.635 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120345367970713600[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 10:09:31.635 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345367970713602[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 10:09:31.635 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345367970713601[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 10:09:31.635 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120345367970713600[0;39m <==        Row: 2021-11-29, 134, 74, 9, 5
2021-11-29 10:09:31.635 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345367970713602[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 10:09:31.636 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120345367970713600[0;39m <==      Total: 2
2021-11-29 10:09:31.636 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345367970713601[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 10:09:31.636 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345367970713602[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 10:09:31.636 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345367970713601[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 10:09:31.636 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345367970713602[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 10:09:31.636 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120345367970713600[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":134,"viewIncrease":9,"voteCount":74,"voteIncrease":5}],"success":true}
2021-11-29 10:09:31.636 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345367970713601[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 10:09:31.636 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120345367970713602[0;39m <==      Total: 4
2021-11-29 10:09:31.636 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120345367970713600[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š3 ms -------------
2021-11-29 10:09:31.636 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345367970713601[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 10:09:31.637 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120345367970713602[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 10:09:31.637 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345367970713601[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 10:09:31.637 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120345367970713602[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:09:31.637 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345367970713601[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 10:09:31.637 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345367970713601[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 10:09:31.637 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345367970713601[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 10:09:31.638 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345367970713601[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 10:09:31.638 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345367970713601[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 10:09:31.638 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345367970713601[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 10:09:31.639 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345367970713601[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 10:09:31.639 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345367970713601[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 10:09:31.639 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120345367970713601[0;39m <==      Total: 15
2021-11-29 10:09:31.640 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120345367970713601[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 10:09:31.640 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120345367970713601[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2021-11-29 10:09:31.800 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120345368671162368[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:09:31.800 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120345368671162368[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:09:31.800 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120345368671162368[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:09:31.801 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120345368671162368[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:09:31.801 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120345368671162368[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 10:09:31.801 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120345368671162368[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:09:31.801 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120345368671162368[0;39m ==> Parameters: 0(Long)
2021-11-29 10:09:31.802 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120345368671162368[0;39m <==    Columns: count(0)
2021-11-29 10:09:31.802 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120345368671162368[0;39m <==        Row: 0
2021-11-29 10:09:31.803 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120345368671162368[0;39m <==      Total: 1
2021-11-29 10:09:31.803 INFO  com.suplin.demo.service.EbookTable                :50   [32m120345368671162368[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:09:31.803 INFO  com.suplin.demo.service.EbookTable                :51   [32m120345368671162368[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:09:31.804 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120345368671162368[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:09:31.804 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120345368671162368[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:09:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120345382134878208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:09:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120345382134878208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:09:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120345382134878208[0;39m ==> Parameters: 
2021-11-29 10:09:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120345382134878208[0;39m <==    Updates: 3
2021-11-29 10:09:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120345382134878208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:09:45.064 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:09:45.174 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:09:59.018 INFO  com.suplin.demo.websocket.WebSocketServer         :40   [32m120345361532456960[0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼š6GBGLOTOVBï¼Œsession idï¼šdï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2021-11-29 10:09:59.800 INFO  com.suplin.demo.websocket.WebSocketServer         :31   [32m120345361532456961[0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼š0j2Hpm5GLkï¼Œsession idï¼šeï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2021-11-29 10:09:59.883 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120345486459801602[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:09:59.883 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120345486459801601[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:09:59.883 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120345486459801600[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:09:59.883 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120345486459801601[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 10:09:59.883 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120345486459801600[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 10:09:59.883 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120345486459801602[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 10:09:59.883 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120345486459801601[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 10:09:59.883 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120345486459801600[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 10:09:59.883 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120345486459801602[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 10:09:59.884 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120345486459801601[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:09:59.884 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120345486459801600[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:09:59.884 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120345486459801601[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:09:59.884 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120345486459801602[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:09:59.884 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120345486459801600[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:09:59.884 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120345486459801602[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:09:59.884 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120345486459801601[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:09:59.884 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120345486459801600[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:09:59.885 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120345486459801602[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 10:09:59.885 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120345486459801601[0;39m ==> Parameters: 
2021-11-29 10:09:59.885 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120345486459801600[0;39m ==> Parameters: 
2021-11-29 10:09:59.885 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120345486459801602[0;39m ==> Parameters: 
2021-11-29 10:09:59.886 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345486459801602[0;39m <==    Columns: id, parent, name, sort
2021-11-29 10:09:59.886 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120345486459801600[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 10:09:59.886 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345486459801601[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 10:09:59.886 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345486459801602[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 10:09:59.886 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120345486459801600[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 10:09:59.886 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345486459801601[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 10:09:59.886 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345486459801602[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 10:09:59.886 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120345486459801600[0;39m <==        Row: 2021-11-29, 134, 74, 9, 5
2021-11-29 10:09:59.886 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345486459801601[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 10:09:59.886 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345486459801602[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 10:09:59.887 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120345486459801600[0;39m <==      Total: 2
2021-11-29 10:09:59.887 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345486459801601[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 10:09:59.887 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345486459801602[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 10:09:59.887 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345486459801601[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 10:09:59.887 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345486459801602[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 10:09:59.887 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120345486459801600[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":134,"viewIncrease":9,"voteCount":74,"voteIncrease":5}],"success":true}
2021-11-29 10:09:59.887 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120345486459801600[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:09:59.887 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120345486459801601[0;39m <==      Total: 4
2021-11-29 10:09:59.887 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345486459801602[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 10:09:59.888 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345486459801602[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 10:09:59.888 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120345486459801601[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 10:09:59.888 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120345486459801601[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 10:09:59.888 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345486459801602[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 10:09:59.888 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345486459801602[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 10:09:59.888 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345486459801602[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 10:09:59.888 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345486459801602[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 10:09:59.889 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345486459801602[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 10:09:59.889 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345486459801602[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 10:09:59.889 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345486459801602[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 10:09:59.889 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345486459801602[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 10:09:59.889 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120345486459801602[0;39m <==      Total: 15
2021-11-29 10:09:59.890 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120345486459801602[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 10:09:59.891 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120345486459801602[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2021-11-29 10:10:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120345486975700992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:10:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120345486975700992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:10:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120345486975700992[0;39m ==> Parameters: 
2021-11-29 10:10:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120345486975700992[0;39m <==    Updates: 0
2021-11-29 10:10:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120345486975700992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 10:10:00.096 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120345487353188352[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:10:00.096 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120345487353188352[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:10:00.096 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120345487353188352[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:10:00.096 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120345487353188352[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:10:00.096 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120345487353188352[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 10:10:00.097 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120345487353188352[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:10:00.097 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120345487353188352[0;39m ==> Parameters: 0(Long)
2021-11-29 10:10:00.098 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120345487353188352[0;39m <==    Columns: count(0)
2021-11-29 10:10:00.098 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120345487353188352[0;39m <==        Row: 0
2021-11-29 10:10:00.098 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120345487353188352[0;39m <==      Total: 1
2021-11-29 10:10:00.098 INFO  com.suplin.demo.service.EbookTable                :50   [32m120345487353188352[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:10:00.099 INFO  com.suplin.demo.service.EbookTable                :51   [32m120345487353188352[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:10:00.099 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120345487353188352[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:10:00.099 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120345487353188352[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š3 ms -------------
2021-11-29 10:10:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120345507968192512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:10:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120345507968192512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:10:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120345507968192512[0;39m ==> Parameters: 
2021-11-29 10:10:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120345507968192512[0;39m <==    Updates: 3
2021-11-29 10:10:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120345507968192512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 10:10:15.084 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:10:15.194 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:10:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120345633805701120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:10:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120345633805701120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:10:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120345633805701120[0;39m ==> Parameters: 
2021-11-29 10:10:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120345633805701120[0;39m <==    Updates: 3
2021-11-29 10:10:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120345633805701120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:10:45.056 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:10:45.181 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:11:00.003 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120345738621358080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:11:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120345738621358080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:11:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120345738621358080[0;39m ==> Parameters: 
2021-11-29 10:11:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120345738621358080[0;39m <==    Updates: 0
2021-11-29 10:11:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120345738621358080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 10:11:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120345759622238208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:11:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120345759622238208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:11:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120345759622238208[0;39m ==> Parameters: 
2021-11-29 10:11:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120345759622238208[0;39m <==    Updates: 3
2021-11-29 10:11:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120345759622238208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:11:06.732 INFO  com.suplin.demo.websocket.WebSocketServer         :40   [32m120345368671162368[0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼š0j2Hpm5GLkï¼Œsession idï¼šeï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2021-11-29 10:11:07.484 INFO  com.suplin.demo.websocket.WebSocketServer         :31   [32m120345361532456960[0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼šp8z8uDK13Iï¼Œsession idï¼šfï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2021-11-29 10:11:07.568 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120345770351267840[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:11:07.568 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120345770347073536[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:11:07.568 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120345770351267841[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:11:07.568 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120345770347073536[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 10:11:07.568 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120345770351267840[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 10:11:07.568 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120345770347073536[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 10:11:07.568 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120345770351267841[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 10:11:07.568 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120345770351267840[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 10:11:07.568 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120345770347073536[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:11:07.568 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120345770351267841[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 10:11:07.568 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120345770351267840[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:11:07.569 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120345770347073536[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:11:07.569 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120345770351267840[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:11:07.569 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120345770351267841[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:11:07.569 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120345770351267841[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:11:07.569 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120345770351267840[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:11:07.569 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120345770347073536[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:11:07.569 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120345770351267841[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 10:11:07.570 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120345770351267840[0;39m ==> Parameters: 
2021-11-29 10:11:07.570 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120345770347073536[0;39m ==> Parameters: 
2021-11-29 10:11:07.570 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120345770351267841[0;39m ==> Parameters: 
2021-11-29 10:11:07.570 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345770351267840[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 10:11:07.570 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345770351267841[0;39m <==    Columns: id, parent, name, sort
2021-11-29 10:11:07.570 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120345770347073536[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 10:11:07.570 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345770351267840[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 10:11:07.570 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345770351267841[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 10:11:07.571 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120345770347073536[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 10:11:07.571 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345770351267840[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 10:11:07.571 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345770351267841[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 10:11:07.571 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345770351267840[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 10:11:07.571 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345770351267841[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 10:11:07.571 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120345770347073536[0;39m <==        Row: 2021-11-29, 134, 74, 9, 5
2021-11-29 10:11:07.571 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345770351267840[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 10:11:07.571 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345770351267841[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 10:11:07.571 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120345770347073536[0;39m <==      Total: 2
2021-11-29 10:11:07.571 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120345770351267840[0;39m <==      Total: 4
2021-11-29 10:11:07.571 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345770351267841[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 10:11:07.572 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345770351267841[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 10:11:07.572 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120345770351267840[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 10:11:07.572 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120345770347073536[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":134,"viewIncrease":9,"voteCount":74,"voteIncrease":5}],"success":true}
2021-11-29 10:11:07.572 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120345770351267840[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:11:07.572 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345770351267841[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 10:11:07.572 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120345770347073536[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 10:11:07.572 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345770351267841[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 10:11:07.572 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345770351267841[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 10:11:07.572 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345770351267841[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 10:11:07.573 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345770351267841[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 10:11:07.573 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345770351267841[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 10:11:07.573 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345770351267841[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 10:11:07.574 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345770351267841[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 10:11:07.574 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345770351267841[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 10:11:07.574 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120345770351267841[0;39m <==      Total: 15
2021-11-29 10:11:07.575 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120345770351267841[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 10:11:07.575 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120345770351267841[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2021-11-29 10:11:07.769 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120345771194322944[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:11:07.769 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120345771194322944[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:11:07.769 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120345771194322944[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:11:07.769 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120345771194322944[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:11:07.769 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120345771194322944[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 10:11:07.770 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120345771194322944[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:11:07.770 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120345771194322944[0;39m ==> Parameters: 0(Long)
2021-11-29 10:11:07.771 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120345771194322944[0;39m <==    Columns: count(0)
2021-11-29 10:11:07.771 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120345771194322944[0;39m <==        Row: 0
2021-11-29 10:11:07.772 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120345771194322944[0;39m <==      Total: 1
2021-11-29 10:11:07.772 INFO  com.suplin.demo.service.EbookTable                :50   [32m120345771194322944[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:11:07.772 INFO  com.suplin.demo.service.EbookTable                :51   [32m120345771194322944[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:11:07.772 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120345771194322944[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:11:07.772 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120345771194322944[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š3 ms -------------
2021-11-29 10:11:15.073 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:11:15.183 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:11:17.670 INFO  com.suplin.demo.websocket.WebSocketServer         :40   [32m120345487353188352[0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼šp8z8uDK13Iï¼Œsession idï¼šfï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2021-11-29 10:11:18.468 INFO  com.suplin.demo.websocket.WebSocketServer         :31   [32m120345367970713602[0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼š5IrXNM0TOjï¼Œsession idï¼š10ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2021-11-29 10:11:18.547 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120345816400531456[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:11:18.547 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120345816400531457[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:11:18.547 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120345816400531458[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:11:18.547 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120345816400531456[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 10:11:18.547 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120345816400531458[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 10:11:18.547 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120345816400531457[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 10:11:18.547 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120345816400531456[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 10:11:18.547 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120345816400531458[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 10:11:18.547 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120345816400531457[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 10:11:18.548 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120345816400531458[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:11:18.547 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120345816400531456[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:11:18.548 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120345816400531457[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:11:18.548 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120345816400531458[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:11:18.548 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120345816400531456[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:11:18.548 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120345816400531457[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:11:18.548 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120345816400531457[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:11:18.548 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120345816400531458[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 10:11:18.548 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120345816400531456[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:11:18.549 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120345816400531457[0;39m ==> Parameters: 
2021-11-29 10:11:18.549 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120345816400531458[0;39m ==> Parameters: 
2021-11-29 10:11:18.549 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120345816400531456[0;39m ==> Parameters: 
2021-11-29 10:11:18.549 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120345816400531456[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 10:11:18.549 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345816400531457[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 10:11:18.549 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345816400531458[0;39m <==    Columns: id, parent, name, sort
2021-11-29 10:11:18.550 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120345816400531456[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 10:11:18.550 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345816400531457[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 10:11:18.550 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345816400531458[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 10:11:18.550 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345816400531458[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 10:11:18.550 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345816400531457[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 10:11:18.550 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120345816400531456[0;39m <==        Row: 2021-11-29, 134, 74, 9, 5
2021-11-29 10:11:18.550 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345816400531458[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 10:11:18.550 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345816400531457[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 10:11:18.550 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345816400531458[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 10:11:18.550 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120345816400531456[0;39m <==      Total: 2
2021-11-29 10:11:18.550 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345816400531458[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 10:11:18.551 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345816400531457[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 10:11:18.551 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345816400531458[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 10:11:18.551 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120345816400531457[0;39m <==      Total: 4
2021-11-29 10:11:18.551 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120345816400531456[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":134,"viewIncrease":9,"voteCount":74,"voteIncrease":5}],"success":true}
2021-11-29 10:11:18.551 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345816400531458[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 10:11:18.551 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120345816400531456[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:11:18.551 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120345816400531457[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 10:11:18.551 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345816400531458[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 10:11:18.551 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120345816400531457[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:11:18.551 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345816400531458[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 10:11:18.552 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345816400531458[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 10:11:18.552 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345816400531458[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 10:11:18.552 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345816400531458[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 10:11:18.552 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345816400531458[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 10:11:18.552 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345816400531458[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 10:11:18.553 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345816400531458[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 10:11:18.553 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120345816400531458[0;39m <==      Total: 15
2021-11-29 10:11:18.554 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120345816400531458[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 10:11:18.554 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120345816400531458[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2021-11-29 10:11:18.731 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120345817172283392[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:11:18.731 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120345817172283392[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:11:18.731 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120345817172283392[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:11:18.731 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120345817172283392[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:11:18.732 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120345817172283392[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 10:11:18.732 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120345817172283392[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:11:18.733 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120345817172283392[0;39m ==> Parameters: 0(Long)
2021-11-29 10:11:18.733 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120345817172283392[0;39m <==    Columns: count(0)
2021-11-29 10:11:18.733 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120345817172283392[0;39m <==        Row: 0
2021-11-29 10:11:18.733 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120345817172283392[0;39m <==      Total: 1
2021-11-29 10:11:18.734 INFO  com.suplin.demo.service.EbookTable                :50   [32m120345817172283392[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:11:18.734 INFO  com.suplin.demo.service.EbookTable                :51   [32m120345817172283392[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:11:18.734 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120345817172283392[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:11:18.734 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120345817172283392[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š3 ms -------------
2021-11-29 10:11:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120345885447163904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:11:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120345885447163904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:11:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120345885447163904[0;39m ==> Parameters: 
2021-11-29 10:11:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120345885447163904[0;39m <==    Updates: 3
2021-11-29 10:11:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120345885447163904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:11:38.261 INFO  com.suplin.demo.websocket.WebSocketServer         :40   [32m120345770347073536[0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼š5IrXNM0TOjï¼Œsession idï¼š10ï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2021-11-29 10:11:39.002 INFO  com.suplin.demo.websocket.WebSocketServer         :31   [32m120345770351267840[0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼šrx7NHxbZtEï¼Œsession idï¼š11ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2021-11-29 10:11:39.086 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120345902547341313[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:11:39.086 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120345902547341312[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:11:39.087 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120345902547341313[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 10:11:39.087 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120345902547341312[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 10:11:39.087 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120345902547341313[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 10:11:39.087 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120345902547341312[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 10:11:39.087 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120345902551535616[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:11:39.087 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120345902547341313[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:11:39.087 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120345902551535616[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 10:11:39.087 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120345902547341312[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:11:39.087 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120345902547341313[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:11:39.087 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120345902551535616[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 10:11:39.087 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120345902547341312[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:11:39.087 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120345902551535616[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:11:39.088 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120345902551535616[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:11:39.088 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120345902547341313[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:11:39.088 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120345902547341312[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:11:39.088 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120345902547341313[0;39m ==> Parameters: 
2021-11-29 10:11:39.088 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120345902547341312[0;39m ==> Parameters: 
2021-11-29 10:11:39.088 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120345902551535616[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 10:11:39.088 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120345902551535616[0;39m ==> Parameters: 
2021-11-29 10:11:39.089 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120345902547341312[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 10:11:39.089 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345902547341313[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 10:11:39.089 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345902551535616[0;39m <==    Columns: id, parent, name, sort
2021-11-29 10:11:39.089 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345902551535616[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 10:11:39.089 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345902547341313[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 10:11:39.089 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120345902547341312[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 10:11:39.089 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345902551535616[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 10:11:39.089 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345902547341313[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 10:11:39.089 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120345902547341312[0;39m <==        Row: 2021-11-29, 134, 74, 9, 5
2021-11-29 10:11:39.090 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345902551535616[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 10:11:39.090 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345902547341313[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 10:11:39.090 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120345902547341312[0;39m <==      Total: 2
2021-11-29 10:11:39.090 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345902551535616[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 10:11:39.090 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345902547341313[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 10:11:39.090 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345902551535616[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 10:11:39.090 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120345902547341312[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":134,"viewIncrease":9,"voteCount":74,"voteIncrease":5}],"success":true}
2021-11-29 10:11:39.090 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120345902547341313[0;39m <==      Total: 4
2021-11-29 10:11:39.090 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120345902547341312[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:11:39.090 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345902551535616[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 10:11:39.090 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120345902547341313[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 10:11:39.090 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345902551535616[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 10:11:39.090 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120345902547341313[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:11:39.090 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345902551535616[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 10:11:39.090 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345902551535616[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 10:11:39.091 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345902551535616[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 10:11:39.091 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345902551535616[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 10:11:39.091 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345902551535616[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 10:11:39.091 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345902551535616[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 10:11:39.092 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345902551535616[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 10:11:39.092 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345902551535616[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 10:11:39.092 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120345902551535616[0;39m <==      Total: 15
2021-11-29 10:11:39.093 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120345902551535616[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 10:11:39.093 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120345902551535616[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2021-11-29 10:11:39.275 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120345903340064768[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:11:39.275 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120345903340064768[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:11:39.275 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120345903340064768[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:11:39.275 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120345903340064768[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:11:39.275 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120345903340064768[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 10:11:39.276 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120345903340064768[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:11:39.276 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120345903340064768[0;39m ==> Parameters: 0(Long)
2021-11-29 10:11:39.277 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120345903340064768[0;39m <==    Columns: count(0)
2021-11-29 10:11:39.277 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120345903340064768[0;39m <==        Row: 0
2021-11-29 10:11:39.278 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120345903340064768[0;39m <==      Total: 1
2021-11-29 10:11:39.278 INFO  com.suplin.demo.service.EbookTable                :50   [32m120345903340064768[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:11:39.278 INFO  com.suplin.demo.service.EbookTable                :51   [32m120345903340064768[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:11:39.278 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120345903340064768[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:11:39.278 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120345903340064768[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š3 ms -------------
2021-11-29 10:11:41.360 INFO  com.suplin.demo.websocket.WebSocketServer         :40   [32m120345816400531456[0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼šrx7NHxbZtEï¼Œsession idï¼š11ï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2021-11-29 10:11:42.172 INFO  com.suplin.demo.websocket.WebSocketServer         :31   [32m120345816400531457[0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼ša0kxHEU1scï¼Œsession idï¼š12ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2021-11-29 10:11:42.268 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120345915893616640[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:11:42.268 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120345915893616641[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:11:42.268 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120345915893616642[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:11:42.268 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120345915893616640[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 10:11:42.268 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120345915893616642[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 10:11:42.268 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120345915893616641[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 10:11:42.268 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120345915893616640[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 10:11:42.268 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120345915893616640[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:11:42.268 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120345915893616642[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 10:11:42.268 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120345915893616641[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 10:11:42.269 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120345915893616640[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:11:42.269 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120345915893616641[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:11:42.269 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120345915893616642[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:11:42.269 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120345915893616641[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:11:42.269 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120345915893616642[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:11:42.269 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120345915893616640[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:11:42.269 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120345915893616641[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:11:42.269 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120345915893616642[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 10:11:42.269 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120345915893616640[0;39m ==> Parameters: 
2021-11-29 10:11:42.269 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120345915893616641[0;39m ==> Parameters: 
2021-11-29 10:11:42.270 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120345915893616642[0;39m ==> Parameters: 
2021-11-29 10:11:42.270 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345915893616640[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 10:11:42.270 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345915893616642[0;39m <==    Columns: id, parent, name, sort
2021-11-29 10:11:42.270 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120345915893616641[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 10:11:42.270 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345915893616640[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 10:11:42.270 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345915893616642[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 10:11:42.270 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120345915893616641[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 10:11:42.271 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345915893616640[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 10:11:42.271 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345915893616642[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 10:11:42.271 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345915893616640[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 10:11:42.271 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345915893616642[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 10:11:42.271 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120345915893616641[0;39m <==        Row: 2021-11-29, 134, 74, 9, 5
2021-11-29 10:11:42.271 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345915893616640[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 10:11:42.271 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345915893616642[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 10:11:42.271 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120345915893616640[0;39m <==      Total: 4
2021-11-29 10:11:42.271 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120345915893616641[0;39m <==      Total: 2
2021-11-29 10:11:42.271 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345915893616642[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 10:11:42.272 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120345915893616641[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":134,"viewIncrease":9,"voteCount":74,"voteIncrease":5}],"success":true}
2021-11-29 10:11:42.272 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120345915893616640[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 10:11:42.272 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345915893616642[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 10:11:42.272 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120345915893616641[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:11:42.272 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120345915893616640[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:11:42.272 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345915893616642[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 10:11:42.272 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345915893616642[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 10:11:42.272 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345915893616642[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 10:11:42.273 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345915893616642[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 10:11:42.273 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345915893616642[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 10:11:42.273 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345915893616642[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 10:11:42.273 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345915893616642[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 10:11:42.273 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345915893616642[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 10:11:42.274 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345915893616642[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 10:11:42.274 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120345915893616642[0;39m <==      Total: 15
2021-11-29 10:11:42.275 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120345915893616642[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 10:11:42.275 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120345915893616642[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2021-11-29 10:11:42.472 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120345916749254656[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:11:42.472 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120345916749254656[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:11:42.473 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120345916749254656[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:11:42.473 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120345916749254656[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:11:42.473 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120345916749254656[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 10:11:42.474 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120345916749254656[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:11:42.474 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120345916749254656[0;39m ==> Parameters: 0(Long)
2021-11-29 10:11:42.474 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120345916749254656[0;39m <==    Columns: count(0)
2021-11-29 10:11:42.475 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120345916749254656[0;39m <==        Row: 0
2021-11-29 10:11:42.475 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120345916749254656[0;39m <==      Total: 1
2021-11-29 10:11:42.475 INFO  com.suplin.demo.service.EbookTable                :50   [32m120345916749254656[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:11:42.475 INFO  com.suplin.demo.service.EbookTable                :51   [32m120345916749254656[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:11:42.476 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120345916749254656[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:11:42.476 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120345916749254656[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:11:45.045 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:11:45.171 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:11:47.042 INFO  com.suplin.demo.websocket.WebSocketServer         :40   [32m120345902547341312[0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼ša0kxHEU1scï¼Œsession idï¼š12ï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2021-11-29 10:11:47.880 INFO  com.suplin.demo.websocket.WebSocketServer         :31   [32m120345902547341313[0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼šPgAg1haXOrï¼Œsession idï¼š13ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2021-11-29 10:11:47.967 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120345939796955136[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:11:47.967 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120345939796955137[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:11:47.967 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120345939796955138[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:11:47.968 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120345939796955136[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 10:11:47.968 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120345939796955138[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 10:11:47.968 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120345939796955137[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 10:11:47.968 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120345939796955136[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 10:11:47.968 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120345939796955137[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 10:11:47.968 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120345939796955138[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 10:11:47.968 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120345939796955136[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:11:47.968 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120345939796955137[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:11:47.968 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120345939796955138[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:11:47.968 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120345939796955136[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:11:47.968 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120345939796955138[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:11:47.968 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120345939796955137[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:11:47.969 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120345939796955138[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 10:11:47.969 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120345939796955137[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:11:47.969 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120345939796955136[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:11:47.969 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120345939796955138[0;39m ==> Parameters: 
2021-11-29 10:11:47.969 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120345939796955137[0;39m ==> Parameters: 
2021-11-29 10:11:47.969 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120345939796955136[0;39m ==> Parameters: 
2021-11-29 10:11:47.970 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120345939796955137[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 10:11:47.970 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345939796955136[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 10:11:47.970 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345939796955138[0;39m <==    Columns: id, parent, name, sort
2021-11-29 10:11:47.970 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345939796955136[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 10:11:47.970 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345939796955138[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 10:11:47.970 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120345939796955137[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 10:11:47.970 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345939796955138[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 10:11:47.971 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345939796955136[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 10:11:47.971 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345939796955138[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 10:11:47.971 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120345939796955137[0;39m <==        Row: 2021-11-29, 134, 74, 9, 5
2021-11-29 10:11:47.971 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345939796955138[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 10:11:47.971 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345939796955136[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 10:11:47.971 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345939796955138[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 10:11:47.971 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120345939796955137[0;39m <==      Total: 2
2021-11-29 10:11:47.971 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345939796955138[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 10:11:47.971 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345939796955136[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 10:11:47.971 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345939796955138[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 10:11:47.972 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120345939796955137[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":134,"viewIncrease":9,"voteCount":74,"voteIncrease":5}],"success":true}
2021-11-29 10:11:47.972 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345939796955138[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 10:11:47.972 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120345939796955137[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 10:11:47.972 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120345939796955136[0;39m <==      Total: 4
2021-11-29 10:11:47.972 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345939796955138[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 10:11:47.972 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345939796955138[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 10:11:47.972 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345939796955138[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 10:11:47.972 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120345939796955136[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 10:11:47.972 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345939796955138[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 10:11:47.972 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120345939796955136[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 10:11:47.972 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345939796955138[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 10:11:47.973 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345939796955138[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 10:11:47.973 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345939796955138[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 10:11:47.973 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120345939796955138[0;39m <==      Total: 15
2021-11-29 10:11:47.974 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120345939796955138[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 10:11:47.974 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120345939796955138[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2021-11-29 10:11:48.179 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120345940686147584[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:11:48.180 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120345940686147584[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:11:48.180 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120345940686147584[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:11:48.180 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120345940686147584[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:11:48.180 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120345940686147584[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 10:11:48.181 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120345940686147584[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:11:48.181 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120345940686147584[0;39m ==> Parameters: 0(Long)
2021-11-29 10:11:48.182 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120345940686147584[0;39m <==    Columns: count(0)
2021-11-29 10:11:48.182 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120345940686147584[0;39m <==        Row: 0
2021-11-29 10:11:48.182 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120345940686147584[0;39m <==      Total: 1
2021-11-29 10:11:48.182 INFO  com.suplin.demo.service.EbookTable                :50   [32m120345940686147584[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:11:48.182 INFO  com.suplin.demo.service.EbookTable                :51   [32m120345940686147584[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:11:48.182 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120345940686147584[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:11:48.183 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120345940686147584[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:11:56.024 INFO  com.suplin.demo.websocket.WebSocketServer         :40   [32m120345915893616640[0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼šPgAg1haXOrï¼Œsession idï¼š13ï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2021-11-29 10:11:56.766 INFO  com.suplin.demo.websocket.WebSocketServer         :31   [32m120345915893616641[0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼š9E33iCHOBUï¼Œsession idï¼š14ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2021-11-29 10:11:56.847 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120345977042374657[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:11:56.847 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120345977042374656[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:11:56.847 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120345977042374658[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:11:56.847 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120345977042374657[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 10:11:56.847 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120345977042374656[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 10:11:56.847 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120345977042374658[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 10:11:56.847 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120345977042374656[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 10:11:56.847 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120345977042374657[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 10:11:56.847 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120345977042374658[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 10:11:56.847 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120345977042374656[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:11:56.847 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120345977042374658[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:11:56.847 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120345977042374657[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:11:56.848 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120345977042374658[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:11:56.848 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120345977042374657[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:11:56.848 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120345977042374656[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:11:56.848 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120345977042374656[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:11:56.849 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120345977042374657[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:11:56.849 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120345977042374658[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 10:11:56.849 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120345977042374656[0;39m ==> Parameters: 
2021-11-29 10:11:56.849 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120345977042374657[0;39m ==> Parameters: 
2021-11-29 10:11:56.849 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120345977042374658[0;39m ==> Parameters: 
2021-11-29 10:11:56.849 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120345977042374656[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 10:11:56.849 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345977042374657[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 10:11:56.849 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345977042374658[0;39m <==    Columns: id, parent, name, sort
2021-11-29 10:11:56.850 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120345977042374656[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 10:11:56.850 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345977042374657[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 10:11:56.850 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345977042374658[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 10:11:56.850 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120345977042374656[0;39m <==        Row: 2021-11-29, 134, 74, 9, 5
2021-11-29 10:11:56.850 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345977042374657[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 10:11:56.850 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120345977042374656[0;39m <==      Total: 2
2021-11-29 10:11:56.850 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345977042374658[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 10:11:56.850 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345977042374657[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 10:11:56.851 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120345977042374656[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":134,"viewIncrease":9,"voteCount":74,"voteIncrease":5}],"success":true}
2021-11-29 10:11:56.850 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345977042374658[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 10:11:56.851 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120345977042374657[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 10:11:56.851 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120345977042374656[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:11:56.851 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120345977042374657[0;39m <==      Total: 4
2021-11-29 10:11:56.851 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345977042374658[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 10:11:56.851 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120345977042374657[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 10:11:56.851 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345977042374658[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 10:11:56.851 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120345977042374657[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:11:56.851 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345977042374658[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 10:11:56.852 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345977042374658[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 10:11:56.852 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345977042374658[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 10:11:56.852 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345977042374658[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 10:11:56.852 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345977042374658[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 10:11:56.853 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345977042374658[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 10:11:56.853 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345977042374658[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 10:11:56.853 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345977042374658[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 10:11:56.854 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345977042374658[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 10:11:56.854 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120345977042374658[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 10:11:56.854 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120345977042374658[0;39m <==      Total: 15
2021-11-29 10:11:56.855 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120345977042374658[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 10:11:56.855 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120345977042374658[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2021-11-29 10:11:57.136 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120345978254528512[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:11:57.136 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120345978254528512[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:11:57.136 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120345978254528512[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:11:57.136 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120345978254528512[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:11:57.136 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120345978254528512[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 10:11:57.137 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120345978254528512[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:11:57.137 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120345978254528512[0;39m ==> Parameters: 0(Long)
2021-11-29 10:11:57.138 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120345978254528512[0;39m <==    Columns: count(0)
2021-11-29 10:11:57.138 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120345978254528512[0;39m <==        Row: 0
2021-11-29 10:11:57.138 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120345978254528512[0;39m <==      Total: 1
2021-11-29 10:11:57.139 INFO  com.suplin.demo.service.EbookTable                :50   [32m120345978254528512[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:11:57.139 INFO  com.suplin.demo.service.EbookTable                :51   [32m120345978254528512[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:11:57.139 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120345978254528512[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:11:57.139 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120345978254528512[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š3 ms -------------
2021-11-29 10:12:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120345990296375296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:12:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120345990296375296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:12:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120345990296375296[0;39m ==> Parameters: 
2021-11-29 10:12:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120345990296375296[0;39m <==    Updates: 0
2021-11-29 10:12:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120345990296375296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 10:12:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120346011267895296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:12:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120346011267895296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:12:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120346011267895296[0;39m ==> Parameters: 
2021-11-29 10:12:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120346011267895296[0;39m <==    Updates: 3
2021-11-29 10:12:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120346011267895296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:12:15.080 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:12:15.190 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:12:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120346137105403904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:12:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120346137105403904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:12:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120346137105403904[0;39m ==> Parameters: 
2021-11-29 10:12:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120346137105403904[0;39m <==    Updates: 3
2021-11-29 10:12:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120346137105403904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 10:12:43.665 INFO  com.suplin.demo.websocket.WebSocketServer         :40   [32m120345939796955137[0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼š9E33iCHOBUï¼Œsession idï¼š14ï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2021-11-29 10:12:44.596 INFO  com.suplin.demo.websocket.WebSocketServer         :31   [32m120345939796955136[0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼šnwQ3Es9B44ï¼Œsession idï¼š15ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2021-11-29 10:12:44.675 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120346177647546368[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:12:44.675 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120346177647546369[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:12:44.675 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120346177647546370[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:12:44.675 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120346177647546368[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 10:12:44.675 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120346177647546369[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 10:12:44.675 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120346177647546370[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 10:12:44.675 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120346177647546368[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 10:12:44.675 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120346177647546369[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 10:12:44.675 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120346177647546370[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 10:12:44.675 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120346177647546368[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:12:44.675 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120346177647546369[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:12:44.676 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120346177647546370[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:12:44.676 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120346177647546369[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:12:44.676 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120346177647546368[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:12:44.676 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120346177647546370[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:12:44.676 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120346177647546370[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 10:12:44.676 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120346177647546368[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:12:44.676 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120346177647546369[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:12:44.676 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120346177647546369[0;39m ==> Parameters: 
2021-11-29 10:12:44.676 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120346177647546370[0;39m ==> Parameters: 
2021-11-29 10:12:44.676 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120346177647546368[0;39m ==> Parameters: 
2021-11-29 10:12:44.677 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346177647546370[0;39m <==    Columns: id, parent, name, sort
2021-11-29 10:12:44.677 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120346177647546369[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 10:12:44.677 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120346177647546368[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 10:12:44.678 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346177647546370[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 10:12:44.678 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120346177647546369[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 10:12:44.678 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120346177647546368[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 10:12:44.678 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346177647546370[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 10:12:44.678 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120346177647546369[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 10:12:44.678 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346177647546370[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 10:12:44.678 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120346177647546368[0;39m <==        Row: 2021-11-29, 134, 74, 9, 5
2021-11-29 10:12:44.678 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346177647546370[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 10:12:44.678 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120346177647546369[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 10:12:44.678 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120346177647546368[0;39m <==      Total: 2
2021-11-29 10:12:44.678 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346177647546370[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 10:12:44.678 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120346177647546369[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 10:12:44.679 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346177647546370[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 10:12:44.679 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120346177647546369[0;39m <==      Total: 4
2021-11-29 10:12:44.679 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120346177647546368[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":134,"viewIncrease":9,"voteCount":74,"voteIncrease":5}],"success":true}
2021-11-29 10:12:44.679 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120346177647546368[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:12:44.679 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346177647546370[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 10:12:44.679 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120346177647546369[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 10:12:44.679 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346177647546370[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 10:12:44.679 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120346177647546369[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:12:44.679 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346177647546370[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 10:12:44.680 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346177647546370[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 10:12:44.680 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346177647546370[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 10:12:44.680 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346177647546370[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 10:12:44.680 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346177647546370[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 10:12:44.680 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346177647546370[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 10:12:44.681 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346177647546370[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 10:12:44.681 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120346177647546370[0;39m <==      Total: 15
2021-11-29 10:12:44.682 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120346177647546370[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 10:12:44.682 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120346177647546370[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2021-11-29 10:12:44.862 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120346178431881216[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:12:44.863 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120346178431881216[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:12:44.863 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120346178431881216[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:12:44.863 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120346178431881216[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:12:44.863 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120346178431881216[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 10:12:44.864 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120346178431881216[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:12:44.865 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120346178431881216[0;39m ==> Parameters: 0(Long)
2021-11-29 10:12:44.865 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120346178431881216[0;39m <==    Columns: count(0)
2021-11-29 10:12:44.865 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120346178431881216[0;39m <==        Row: 0
2021-11-29 10:12:44.866 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120346178431881216[0;39m <==      Total: 1
2021-11-29 10:12:44.866 INFO  com.suplin.demo.service.EbookTable                :50   [32m120346178431881216[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:12:44.866 INFO  com.suplin.demo.service.EbookTable                :51   [32m120346178431881216[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:12:44.866 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120346178431881216[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:12:44.866 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120346178431881216[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:12:45.086 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:12:45.180 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:12:46.065 INFO  com.suplin.demo.websocket.WebSocketServer         :40   [32m120345977042374656[0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼šnwQ3Es9B44ï¼Œsession idï¼š15ï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2021-11-29 10:12:46.923 INFO  com.suplin.demo.websocket.WebSocketServer         :31   [32m120345977042374657[0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼šeWqzCUE2hJï¼Œsession idï¼š16ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2021-11-29 10:12:47.002 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120346187407691776[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:12:47.002 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120346187407691778[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:12:47.002 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120346187407691777[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:12:47.002 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120346187407691778[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 10:12:47.002 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120346187407691776[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 10:12:47.002 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120346187407691777[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 10:12:47.002 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120346187407691778[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 10:12:47.002 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120346187407691776[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 10:12:47.002 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120346187407691778[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:12:47.002 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120346187407691777[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 10:12:47.002 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120346187407691778[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:12:47.002 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120346187407691777[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:12:47.002 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120346187407691776[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:12:47.003 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120346187407691777[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:12:47.003 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120346187407691776[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:12:47.003 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120346187407691778[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:12:47.003 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120346187407691777[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 10:12:47.003 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120346187407691778[0;39m ==> Parameters: 
2021-11-29 10:12:47.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120346187407691776[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:12:47.004 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120346187407691777[0;39m ==> Parameters: 
2021-11-29 10:12:47.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120346187407691776[0;39m ==> Parameters: 
2021-11-29 10:12:47.004 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120346187407691778[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 10:12:47.004 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346187407691777[0;39m <==    Columns: id, parent, name, sort
2021-11-29 10:12:47.004 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120346187407691778[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 10:12:47.004 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120346187407691776[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 10:12:47.004 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346187407691777[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 10:12:47.005 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120346187407691776[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 10:12:47.005 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346187407691777[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 10:12:47.005 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120346187407691778[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 10:12:47.005 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120346187407691776[0;39m <==        Row: 2021-11-29, 134, 74, 9, 5
2021-11-29 10:12:47.005 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346187407691777[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 10:12:47.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120346187407691776[0;39m <==      Total: 2
2021-11-29 10:12:47.005 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120346187407691778[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 10:12:47.005 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346187407691777[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 10:12:47.005 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346187407691777[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 10:12:47.006 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120346187407691776[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":134,"viewIncrease":9,"voteCount":74,"voteIncrease":5}],"success":true}
2021-11-29 10:12:47.005 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120346187407691778[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 10:12:47.006 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120346187407691776[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:12:47.006 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346187407691777[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 10:12:47.006 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120346187407691778[0;39m <==      Total: 4
2021-11-29 10:12:47.006 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346187407691777[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 10:12:47.006 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120346187407691778[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 10:12:47.006 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120346187407691778[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:12:47.006 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346187407691777[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 10:12:47.007 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346187407691777[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 10:12:47.007 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346187407691777[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 10:12:47.007 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346187407691777[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 10:12:47.007 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346187407691777[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 10:12:47.007 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346187407691777[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 10:12:47.008 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346187407691777[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 10:12:47.008 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346187407691777[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 10:12:47.008 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120346187407691777[0;39m <==      Total: 15
2021-11-29 10:12:47.008 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120346187407691777[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 10:12:47.009 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120346187407691777[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2021-11-29 10:12:47.230 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120346188363993088[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:12:47.231 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120346188363993088[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:12:47.231 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120346188363993088[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:12:47.231 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120346188363993088[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:12:47.231 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120346188363993088[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 10:12:47.232 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120346188363993088[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:12:47.232 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120346188363993088[0;39m ==> Parameters: 0(Long)
2021-11-29 10:12:47.232 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120346188363993088[0;39m <==    Columns: count(0)
2021-11-29 10:12:47.233 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120346188363993088[0;39m <==        Row: 0
2021-11-29 10:12:47.233 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120346188363993088[0;39m <==      Total: 1
2021-11-29 10:12:47.233 INFO  com.suplin.demo.service.EbookTable                :50   [32m120346188363993088[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:12:47.233 INFO  com.suplin.demo.service.EbookTable                :51   [32m120346188363993088[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:12:47.233 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120346188363993088[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:12:47.233 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120346188363993088[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š3 ms -------------
2021-11-29 10:13:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120346241942032384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:13:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120346241942032384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:13:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120346241942032384[0;39m ==> Parameters: 
2021-11-29 10:13:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120346241942032384[0;39m <==    Updates: 0
2021-11-29 10:13:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120346241942032384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 10:13:04.912 INFO  com.suplin.demo.websocket.WebSocketServer         :40   [32m120346177647546368[0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼šeWqzCUE2hJï¼Œsession idï¼š16ï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2021-11-29 10:13:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120346262963884032[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:13:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120346262963884032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:13:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120346262963884032[0;39m ==> Parameters: 
2021-11-29 10:13:05.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120346262963884032[0;39m <==    Updates: 3
2021-11-29 10:13:05.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120346262963884032[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:13:05.992 INFO  com.suplin.demo.websocket.WebSocketServer         :31   [32m120346177647546369[0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼š7DkskhpAzPï¼Œsession idï¼š17ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2021-11-29 10:13:06.121 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120346267598589954[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:13:06.121 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120346267598589953[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:13:06.121 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120346267598589952[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:13:06.121 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120346267598589954[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 10:13:06.121 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120346267598589953[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 10:13:06.121 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120346267598589952[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 10:13:06.121 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120346267598589954[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 10:13:06.122 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120346267598589953[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 10:13:06.122 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120346267598589952[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 10:13:06.122 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120346267598589954[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:13:06.122 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120346267598589953[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:13:06.122 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120346267598589952[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:13:06.122 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120346267598589954[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:13:06.122 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120346267598589953[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:13:06.122 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120346267598589952[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:13:06.123 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120346267598589952[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:13:06.123 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120346267598589953[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 10:13:06.123 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120346267598589954[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:13:06.123 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120346267598589952[0;39m ==> Parameters: 
2021-11-29 10:13:06.123 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120346267598589954[0;39m ==> Parameters: 
2021-11-29 10:13:06.123 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120346267598589953[0;39m ==> Parameters: 
2021-11-29 10:13:06.123 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120346267598589952[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 10:13:06.123 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346267598589953[0;39m <==    Columns: id, parent, name, sort
2021-11-29 10:13:06.123 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120346267598589954[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 10:13:06.124 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346267598589953[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 10:13:06.124 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120346267598589954[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 10:13:06.124 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120346267598589952[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 10:13:06.124 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346267598589953[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 10:13:06.124 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120346267598589954[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 10:13:06.124 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120346267598589952[0;39m <==        Row: 2021-11-29, 134, 74, 9, 5
2021-11-29 10:13:06.124 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346267598589953[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 10:13:06.124 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120346267598589954[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 10:13:06.124 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120346267598589952[0;39m <==      Total: 2
2021-11-29 10:13:06.124 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346267598589953[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 10:13:06.125 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120346267598589954[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 10:13:06.125 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346267598589953[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 10:13:06.125 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120346267598589952[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":134,"viewIncrease":9,"voteCount":74,"voteIncrease":5}],"success":true}
2021-11-29 10:13:06.125 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120346267598589954[0;39m <==      Total: 4
2021-11-29 10:13:06.125 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120346267598589952[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:13:06.125 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346267598589953[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 10:13:06.125 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346267598589953[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 10:13:06.125 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120346267598589954[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 10:13:06.125 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120346267598589954[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:13:06.125 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346267598589953[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 10:13:06.125 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346267598589953[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 10:13:06.126 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346267598589953[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 10:13:06.126 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346267598589953[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 10:13:06.126 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346267598589953[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 10:13:06.127 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346267598589953[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 10:13:06.127 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346267598589953[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 10:13:06.127 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346267598589953[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 10:13:06.127 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120346267598589953[0;39m <==      Total: 15
2021-11-29 10:13:06.128 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120346267598589953[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 10:13:06.128 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120346267598589953[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2021-11-29 10:13:06.308 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120346268382924800[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:13:06.308 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120346268382924800[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:13:06.308 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120346268382924800[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:13:06.308 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120346268382924800[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:13:06.309 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120346268382924800[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 10:13:06.310 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120346268382924800[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:13:06.311 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120346268382924800[0;39m ==> Parameters: 0(Long)
2021-11-29 10:13:06.311 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120346268382924800[0;39m <==    Columns: count(0)
2021-11-29 10:13:06.312 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120346268382924800[0;39m <==        Row: 0
2021-11-29 10:13:06.312 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120346268382924800[0;39m <==      Total: 1
2021-11-29 10:13:06.312 INFO  com.suplin.demo.service.EbookTable                :50   [32m120346268382924800[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:13:06.312 INFO  com.suplin.demo.service.EbookTable                :51   [32m120346268382924800[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:13:06.312 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120346268382924800[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:13:06.313 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120346268382924800[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 10:13:08.081 INFO  com.suplin.demo.websocket.WebSocketServer         :40   [32m120346187407691776[0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼š7DkskhpAzPï¼Œsession idï¼š17ï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2021-11-29 10:13:08.956 INFO  com.suplin.demo.websocket.WebSocketServer         :31   [32m120346187407691778[0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼š5tdsc6FrIvï¼Œsession idï¼š18ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2021-11-29 10:13:09.038 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120346279833374722[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:13:09.038 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120346279833374720[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:13:09.038 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120346279833374721[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:13:09.039 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120346279833374722[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 10:13:09.039 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120346279833374721[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 10:13:09.039 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120346279833374720[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 10:13:09.039 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120346279833374722[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 10:13:09.039 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120346279833374721[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 10:13:09.039 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120346279833374720[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 10:13:09.039 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120346279833374722[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:13:09.039 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120346279833374721[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:13:09.039 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120346279833374720[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:13:09.039 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120346279833374722[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:13:09.040 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120346279833374720[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:13:09.039 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120346279833374721[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:13:09.040 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120346279833374722[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 10:13:09.040 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120346279833374720[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:13:09.040 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120346279833374721[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:13:09.040 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120346279833374722[0;39m ==> Parameters: 
2021-11-29 10:13:09.040 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120346279833374720[0;39m ==> Parameters: 
2021-11-29 10:13:09.040 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120346279833374721[0;39m ==> Parameters: 
2021-11-29 10:13:09.041 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120346279833374720[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 10:13:09.041 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346279833374722[0;39m <==    Columns: id, parent, name, sort
2021-11-29 10:13:09.041 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120346279833374721[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 10:13:09.041 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120346279833374720[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 10:13:09.041 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346279833374722[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 10:13:09.041 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120346279833374721[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 10:13:09.041 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346279833374722[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 10:13:09.041 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120346279833374720[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 10:13:09.042 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120346279833374721[0;39m <==        Row: 2021-11-29, 134, 74, 9, 5
2021-11-29 10:13:09.042 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346279833374722[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 10:13:09.042 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120346279833374720[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 10:13:09.042 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120346279833374721[0;39m <==      Total: 2
2021-11-29 10:13:09.042 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346279833374722[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 10:13:09.042 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120346279833374720[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 10:13:09.042 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346279833374722[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 10:13:09.042 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120346279833374721[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":134,"viewIncrease":9,"voteCount":74,"voteIncrease":5}],"success":true}
2021-11-29 10:13:09.042 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346279833374722[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 10:13:09.042 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120346279833374720[0;39m <==      Total: 4
2021-11-29 10:13:09.042 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120346279833374721[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:13:09.042 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346279833374722[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 10:13:09.042 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346279833374722[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 10:13:09.042 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120346279833374720[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 10:13:09.042 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346279833374722[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 10:13:09.042 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120346279833374720[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:13:09.043 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346279833374722[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 10:13:09.043 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346279833374722[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 10:13:09.043 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346279833374722[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 10:13:09.043 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346279833374722[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 10:13:09.043 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346279833374722[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 10:13:09.044 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346279833374722[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 10:13:09.044 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120346279833374722[0;39m <==      Total: 15
2021-11-29 10:13:09.045 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120346279833374722[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 10:13:09.045 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120346279833374722[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2021-11-29 10:13:09.227 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120346280626098176[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:13:09.227 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120346280626098176[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:13:09.227 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120346280626098176[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:13:09.227 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120346280626098176[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:13:09.228 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120346280626098176[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 10:13:09.229 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120346280626098176[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:13:09.229 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120346280626098176[0;39m ==> Parameters: 0(Long)
2021-11-29 10:13:09.230 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120346280626098176[0;39m <==    Columns: count(0)
2021-11-29 10:13:09.230 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120346280626098176[0;39m <==        Row: 0
2021-11-29 10:13:09.231 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120346280626098176[0;39m <==      Total: 1
2021-11-29 10:13:09.231 INFO  com.suplin.demo.service.EbookTable                :50   [32m120346280626098176[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:13:09.231 INFO  com.suplin.demo.service.EbookTable                :51   [32m120346280626098176[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:13:09.232 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120346280626098176[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:13:09.232 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120346280626098176[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 10:13:15.094 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:13:15.186 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:13:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120346388759449600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:13:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120346388759449600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:13:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120346388759449600[0;39m ==> Parameters: 
2021-11-29 10:13:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120346388759449600[0;39m <==    Updates: 3
2021-11-29 10:13:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120346388759449600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:13:45.075 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:13:45.168 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:13:51.837 INFO  com.suplin.demo.websocket.WebSocketServer         :40   [32m120346267598589952[0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼š5tdsc6FrIvï¼Œsession idï¼š18ï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2021-11-29 10:13:52.657 INFO  com.suplin.demo.websocket.WebSocketServer         :31   [32m120346267598589954[0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼šDeTudOeZigï¼Œsession idï¼š19ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2021-11-29 10:13:52.763 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120346463229317120[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:13:52.763 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120346463229317121[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:13:52.763 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120346463229317120[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 10:13:52.763 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120346463229317121[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 10:13:52.763 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120346463229317120[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 10:13:52.764 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120346463229317120[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:13:52.764 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120346463229317121[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 10:13:52.764 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120346463229317120[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:13:52.764 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120346463229317121[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:13:52.764 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120346463229317121[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:13:52.764 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120346463233511424[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:13:52.764 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120346463229317120[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:13:52.765 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120346463233511424[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 10:13:52.765 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120346463233511424[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 10:13:52.765 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120346463229317121[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:13:52.765 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120346463229317120[0;39m ==> Parameters: 
2021-11-29 10:13:52.765 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120346463233511424[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:13:52.765 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120346463229317121[0;39m ==> Parameters: 
2021-11-29 10:13:52.765 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120346463233511424[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:13:52.766 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120346463229317121[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 10:13:52.766 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120346463229317120[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 10:13:52.766 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120346463233511424[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 10:13:52.766 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120346463229317121[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 10:13:52.766 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120346463229317120[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 10:13:52.766 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120346463233511424[0;39m ==> Parameters: 
2021-11-29 10:13:52.766 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120346463229317121[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 10:13:52.766 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120346463229317120[0;39m <==        Row: 2021-11-29, 134, 74, 9, 5
2021-11-29 10:13:52.767 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120346463229317120[0;39m <==      Total: 2
2021-11-29 10:13:52.767 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120346463229317121[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 10:13:52.767 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120346463229317120[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":134,"viewIncrease":9,"voteCount":74,"voteIncrease":5}],"success":true}
2021-11-29 10:13:52.767 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120346463229317121[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 10:13:52.767 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346463233511424[0;39m <==    Columns: id, parent, name, sort
2021-11-29 10:13:52.767 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120346463229317120[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:13:52.767 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346463233511424[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 10:13:52.767 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120346463229317121[0;39m <==      Total: 4
2021-11-29 10:13:52.768 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346463233511424[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 10:13:52.768 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120346463229317121[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 10:13:52.768 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120346463229317121[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 10:13:52.768 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346463233511424[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 10:13:52.768 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346463233511424[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 10:13:52.769 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346463233511424[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 10:13:52.769 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346463233511424[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 10:13:52.769 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346463233511424[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 10:13:52.769 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346463233511424[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 10:13:52.769 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346463233511424[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 10:13:52.770 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346463233511424[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 10:13:52.770 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346463233511424[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 10:13:52.770 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346463233511424[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 10:13:52.771 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346463233511424[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 10:13:52.771 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346463233511424[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 10:13:52.771 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346463233511424[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 10:13:52.771 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120346463233511424[0;39m <==      Total: 15
2021-11-29 10:13:52.773 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120346463233511424[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 10:13:52.773 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120346463233511424[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š9 ms -------------
2021-11-29 10:13:52.983 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120346464152064000[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:13:52.983 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120346464152064000[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:13:52.983 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120346464152064000[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:13:52.983 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120346464152064000[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:13:52.984 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120346464152064000[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 10:13:52.984 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120346464152064000[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:13:52.985 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120346464152064000[0;39m ==> Parameters: 0(Long)
2021-11-29 10:13:52.985 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120346464152064000[0;39m <==    Columns: count(0)
2021-11-29 10:13:52.985 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120346464152064000[0;39m <==        Row: 0
2021-11-29 10:13:52.986 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120346464152064000[0;39m <==      Total: 1
2021-11-29 10:13:52.986 INFO  com.suplin.demo.service.EbookTable                :50   [32m120346464152064000[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:13:52.986 INFO  com.suplin.demo.service.EbookTable                :51   [32m120346464152064000[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:13:52.986 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120346464152064000[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:13:52.987 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120346464152064000[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:13:59.731 INFO  com.suplin.demo.websocket.WebSocketServer         :40   [32m120346279833374721[0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼šDeTudOeZigï¼Œsession idï¼š19ï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2021-11-29 10:14:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120346493608660992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:14:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120346493608660992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:14:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120346493608660992[0;39m ==> Parameters: 
2021-11-29 10:14:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120346493608660992[0;39m <==    Updates: 0
2021-11-29 10:14:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120346493608660992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 10:14:00.481 INFO  com.suplin.demo.websocket.WebSocketServer         :31   [32m120346279833374720[0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼š3x0h2VpKrqï¼Œsession idï¼š1aï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2021-11-29 10:14:00.559 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120346495928111104[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:14:00.559 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120346495928111106[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:14:00.559 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120346495928111105[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:14:00.560 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120346495928111106[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 10:14:00.560 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120346495928111104[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 10:14:00.560 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120346495928111105[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 10:14:00.560 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120346495928111106[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 10:14:00.560 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120346495928111104[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 10:14:00.560 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120346495928111105[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 10:14:00.560 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120346495928111106[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:14:00.560 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120346495928111104[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:14:00.560 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120346495928111105[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:14:00.560 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120346495928111106[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:14:00.560 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120346495928111104[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:14:00.560 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120346495928111105[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:14:00.561 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120346495928111104[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:14:00.561 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120346495928111106[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 10:14:00.561 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120346495928111105[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:14:00.561 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120346495928111104[0;39m ==> Parameters: 
2021-11-29 10:14:00.561 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120346495928111106[0;39m ==> Parameters: 
2021-11-29 10:14:00.561 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120346495928111105[0;39m ==> Parameters: 
2021-11-29 10:14:00.562 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346495928111106[0;39m <==    Columns: id, parent, name, sort
2021-11-29 10:14:00.562 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120346495928111105[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 10:14:00.562 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120346495928111104[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 10:14:00.562 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346495928111106[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 10:14:00.562 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120346495928111105[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 10:14:00.562 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120346495928111104[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 10:14:00.562 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346495928111106[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 10:14:00.562 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120346495928111105[0;39m <==        Row: 2021-11-29, 134, 74, 9, 5
2021-11-29 10:14:00.563 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120346495928111104[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 10:14:00.563 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346495928111106[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 10:14:00.563 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120346495928111105[0;39m <==      Total: 2
2021-11-29 10:14:00.563 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346495928111106[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 10:14:00.563 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120346495928111104[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 10:14:00.563 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120346495928111105[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":134,"viewIncrease":9,"voteCount":74,"voteIncrease":5}],"success":true}
2021-11-29 10:14:00.563 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346495928111106[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 10:14:00.563 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120346495928111104[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 10:14:00.563 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120346495928111105[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:14:00.563 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346495928111106[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 10:14:00.563 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120346495928111104[0;39m <==      Total: 4
2021-11-29 10:14:00.564 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346495928111106[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 10:14:00.564 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346495928111106[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 10:14:00.564 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120346495928111104[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 10:14:00.564 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120346495928111104[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 10:14:00.564 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346495928111106[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 10:14:00.564 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346495928111106[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 10:14:00.565 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346495928111106[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 10:14:00.565 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346495928111106[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 10:14:00.565 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346495928111106[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 10:14:00.565 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346495928111106[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 10:14:00.566 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346495928111106[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 10:14:00.566 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120346495928111106[0;39m <==      Total: 15
2021-11-29 10:14:00.566 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120346495928111106[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 10:14:00.567 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120346495928111106[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2021-11-29 10:14:00.722 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120346496611782656[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:14:00.722 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120346496611782656[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:14:00.723 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120346496611782656[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:14:00.723 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120346496611782656[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:14:00.723 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120346496611782656[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 10:14:00.724 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120346496611782656[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:14:00.724 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120346496611782656[0;39m ==> Parameters: 0(Long)
2021-11-29 10:14:00.725 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120346496611782656[0;39m <==    Columns: count(0)
2021-11-29 10:14:00.726 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120346496611782656[0;39m <==        Row: 0
2021-11-29 10:14:00.726 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120346496611782656[0;39m <==      Total: 1
2021-11-29 10:14:00.726 INFO  com.suplin.demo.service.EbookTable                :50   [32m120346496611782656[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:14:00.726 INFO  com.suplin.demo.service.EbookTable                :51   [32m120346496611782656[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:14:00.727 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120346496611782656[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:14:00.727 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120346496611782656[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 10:14:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120346514613735424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:14:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120346514613735424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:14:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120346514613735424[0;39m ==> Parameters: 
2021-11-29 10:14:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120346514613735424[0;39m <==    Updates: 3
2021-11-29 10:14:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120346514613735424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:14:05.734 INFO  com.suplin.demo.websocket.WebSocketServer         :40   [32m120346463229317120[0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼š3x0h2VpKrqï¼Œsession idï¼š1aï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2021-11-29 10:14:06.201 INFO  com.suplin.demo.websocket.WebSocketServer         :31   [32m120346463229317121[0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼šPq7F9hKm1Rï¼Œsession idï¼š1bï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2021-11-29 10:14:06.273 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120346519894364160[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:14:06.273 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120346519894364160[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 10:14:06.274 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120346519898558464[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:14:06.274 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120346519894364160[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 10:14:06.274 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120346519894364160[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:14:06.274 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120346519898558464[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 10:14:06.274 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120346519898558465[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:14:06.274 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120346519894364160[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:14:06.274 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120346519898558465[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 10:14:06.274 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120346519898558464[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 10:14:06.274 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120346519898558465[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 10:14:06.274 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120346519898558464[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:14:06.275 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120346519898558465[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:14:06.275 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120346519898558464[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:14:06.275 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120346519898558465[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:14:06.275 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120346519894364160[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:14:06.275 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120346519898558464[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:14:06.275 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120346519894364160[0;39m ==> Parameters: 
2021-11-29 10:14:06.275 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120346519898558464[0;39m ==> Parameters: 
2021-11-29 10:14:06.275 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120346519898558465[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 10:14:06.276 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120346519898558465[0;39m ==> Parameters: 
2021-11-29 10:14:06.276 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120346519894364160[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 10:14:06.276 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120346519898558464[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 10:14:06.276 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346519898558465[0;39m <==    Columns: id, parent, name, sort
2021-11-29 10:14:06.276 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120346519894364160[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 10:14:06.276 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120346519898558464[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 10:14:06.277 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346519898558465[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 10:14:06.277 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120346519894364160[0;39m <==        Row: 2021-11-29, 134, 74, 9, 5
2021-11-29 10:14:06.277 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346519898558465[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 10:14:06.277 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120346519898558464[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 10:14:06.277 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120346519894364160[0;39m <==      Total: 2
2021-11-29 10:14:06.277 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346519898558465[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 10:14:06.277 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120346519898558464[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 10:14:06.277 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346519898558465[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 10:14:06.277 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120346519894364160[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":134,"viewIncrease":9,"voteCount":74,"voteIncrease":5}],"success":true}
2021-11-29 10:14:06.277 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120346519898558464[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 10:14:06.278 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120346519894364160[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 10:14:06.277 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346519898558465[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 10:14:06.278 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120346519898558464[0;39m <==      Total: 4
2021-11-29 10:14:06.278 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346519898558465[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 10:14:06.278 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346519898558465[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 10:14:06.278 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120346519898558464[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 10:14:06.278 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346519898558465[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 10:14:06.278 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120346519898558464[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:14:06.278 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346519898558465[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 10:14:06.279 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346519898558465[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 10:14:06.279 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346519898558465[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 10:14:06.279 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346519898558465[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 10:14:06.280 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346519898558465[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 10:14:06.280 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346519898558465[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 10:14:06.281 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346519898558465[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 10:14:06.281 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120346519898558465[0;39m <==      Total: 15
2021-11-29 10:14:06.282 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120346519898558465[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 10:14:06.282 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120346519898558465[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2021-11-29 10:14:06.421 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120346520515121152[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:14:06.422 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120346520515121152[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:14:06.422 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120346520515121152[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:14:06.422 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120346520515121152[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:14:06.422 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120346520515121152[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 10:14:06.423 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120346520515121152[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:14:06.424 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120346520515121152[0;39m ==> Parameters: 0(Long)
2021-11-29 10:14:06.424 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120346520515121152[0;39m <==    Columns: count(0)
2021-11-29 10:14:06.425 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120346520515121152[0;39m <==        Row: 0
2021-11-29 10:14:06.425 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120346520515121152[0;39m <==      Total: 1
2021-11-29 10:14:06.425 INFO  com.suplin.demo.service.EbookTable                :50   [32m120346520515121152[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:14:06.425 INFO  com.suplin.demo.service.EbookTable                :51   [32m120346520515121152[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:14:06.426 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120346520515121152[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:14:06.426 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120346520515121152[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 10:14:12.389 INFO  com.suplin.demo.websocket.WebSocketServer         :40   [32m120346495928111105[0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼šPq7F9hKm1Rï¼Œsession idï¼š1bï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2021-11-29 10:14:12.846 INFO  com.suplin.demo.websocket.WebSocketServer         :31   [32m120346495928111104[0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼šauwOxLwutwï¼Œsession idï¼š1cï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2021-11-29 10:14:12.934 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120346547832623104[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:14:12.934 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120346547832623105[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:14:12.934 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120346547832623104[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 10:14:12.934 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120346547832623105[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 10:14:12.934 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120346547832623104[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 10:14:12.934 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120346547832623105[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 10:14:12.934 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120346547832623104[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:14:12.934 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120346547832623105[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:14:12.934 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120346547832623104[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:14:12.935 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120346547832623105[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:14:12.935 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120346547832623104[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:14:12.935 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120346547832623105[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:14:12.935 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120346547836817408[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:14:12.935 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120346547832623104[0;39m ==> Parameters: 
2021-11-29 10:14:12.935 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120346547832623105[0;39m ==> Parameters: 
2021-11-29 10:14:12.936 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120346547836817408[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 10:14:12.936 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120346547836817408[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 10:14:12.936 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120346547836817408[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:14:12.936 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120346547836817408[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:14:12.936 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120346547832623104[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 10:14:12.936 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120346547832623105[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 10:14:12.936 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120346547832623104[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 10:14:12.936 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120346547832623105[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 10:14:12.937 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120346547836817408[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 10:14:12.937 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120346547832623105[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 10:14:12.937 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120346547832623104[0;39m <==        Row: 2021-11-29, 134, 74, 9, 5
2021-11-29 10:14:12.937 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120346547836817408[0;39m ==> Parameters: 
2021-11-29 10:14:12.937 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120346547832623105[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 10:14:12.937 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120346547832623104[0;39m <==      Total: 2
2021-11-29 10:14:12.937 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120346547832623105[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 10:14:12.937 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120346547832623105[0;39m <==      Total: 4
2021-11-29 10:14:12.938 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120346547832623104[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":134,"viewIncrease":9,"voteCount":74,"voteIncrease":5}],"success":true}
2021-11-29 10:14:12.938 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120346547832623104[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:14:12.938 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346547836817408[0;39m <==    Columns: id, parent, name, sort
2021-11-29 10:14:12.938 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120346547832623105[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 10:14:12.938 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120346547832623105[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:14:12.938 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346547836817408[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 10:14:12.938 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346547836817408[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 10:14:12.938 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346547836817408[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 10:14:12.939 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346547836817408[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 10:14:12.939 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346547836817408[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 10:14:12.939 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346547836817408[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 10:14:12.940 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346547836817408[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 10:14:12.940 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346547836817408[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 10:14:12.940 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346547836817408[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 10:14:12.940 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346547836817408[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 10:14:12.941 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346547836817408[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 10:14:12.941 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346547836817408[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 10:14:12.941 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346547836817408[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 10:14:12.941 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346547836817408[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 10:14:12.942 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120346547836817408[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 10:14:12.942 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120346547836817408[0;39m <==      Total: 15
2021-11-29 10:14:12.943 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120346547836817408[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 10:14:12.943 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120346547836817408[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2021-11-29 10:14:13.095 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120346548507906048[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:14:13.095 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120346548507906048[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:14:13.095 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120346548507906048[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:14:13.095 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120346548507906048[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:14:13.096 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120346548507906048[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 10:14:13.096 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120346548507906048[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:14:13.097 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120346548507906048[0;39m ==> Parameters: 0(Long)
2021-11-29 10:14:13.097 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120346548507906048[0;39m <==    Columns: count(0)
2021-11-29 10:14:13.098 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120346548507906048[0;39m <==        Row: 0
2021-11-29 10:14:13.098 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120346548507906048[0;39m <==      Total: 1
2021-11-29 10:14:13.098 INFO  com.suplin.demo.service.EbookTable                :50   [32m120346548507906048[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:14:13.098 INFO  com.suplin.demo.service.EbookTable                :51   [32m120346548507906048[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:14:13.098 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120346548507906048[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:14:13.098 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120346548507906048[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š3 ms -------------
2021-11-29 10:14:15.061 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:14:15.184 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:14:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120346640396718080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:14:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120346640396718080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:14:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120346640396718080[0;39m ==> Parameters: 
2021-11-29 10:14:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120346640396718080[0;39m <==    Updates: 3
2021-11-29 10:14:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120346640396718080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:14:45.065 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:14:45.173 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:15:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120346745275289600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:15:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120346745275289600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:15:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120346745275289600[0;39m ==> Parameters: 
2021-11-29 10:15:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120346745275289600[0;39m <==    Updates: 0
2021-11-29 10:15:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120346745275289600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 10:15:05.024 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120346766313918464[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:15:05.030 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120346766313918464[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:15:05.030 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120346766313918464[0;39m ==> Parameters: 
2021-11-29 10:15:05.031 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120346766313918464[0;39m <==    Updates: 3
2021-11-29 10:15:05.032 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120346766313918464[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶8æ¯«ç§’
2021-11-29 10:15:15.086 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:15:15.196 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:15:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120346892059152384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:15:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120346892059152384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:15:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120346892059152384[0;39m ==> Parameters: 
2021-11-29 10:15:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120346892059152384[0;39m <==    Updates: 3
2021-11-29 10:15:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120346892059152384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 10:15:45.069 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:15:45.203 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:16:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120346996958695424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:16:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120346996958695424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:16:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120346996958695424[0;39m ==> Parameters: 
2021-11-29 10:16:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120346996958695424[0;39m <==    Updates: 0
2021-11-29 10:16:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120346996958695424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 10:16:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120347017930215424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:16:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120347017930215424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:16:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120347017930215424[0;39m ==> Parameters: 
2021-11-29 10:16:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120347017930215424[0;39m <==    Updates: 3
2021-11-29 10:16:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120347017930215424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 10:16:15.091 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:16:15.184 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:16:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120347143742558208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:16:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120347143742558208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:16:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120347143742558208[0;39m ==> Parameters: 
2021-11-29 10:16:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120347143742558208[0;39m <==    Updates: 3
2021-11-29 10:16:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120347143742558208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:16:45.082 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:16:45.188 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:16:58.601 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120347242690383872[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:16:58.601 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120347242690383873[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:16:58.601 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120347242690383874[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:16:58.601 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120347242690383872[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 10:16:58.601 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120347242690383874[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 10:16:58.601 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120347242690383873[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 10:16:58.601 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120347242690383872[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 10:16:58.601 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120347242690383873[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 10:16:58.601 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120347242690383874[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 10:16:58.601 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120347242690383872[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:16:58.601 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120347242690383873[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:16:58.602 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120347242690383874[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:16:58.602 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120347242690383873[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:16:58.602 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120347242690383872[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:16:58.602 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120347242690383874[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:16:58.602 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120347242690383873[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:16:58.602 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120347242690383872[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:16:58.602 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120347242690383874[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 10:16:58.603 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120347242690383873[0;39m ==> Parameters: 
2021-11-29 10:16:58.603 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120347242690383872[0;39m ==> Parameters: 
2021-11-29 10:16:58.603 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120347242690383874[0;39m ==> Parameters: 
2021-11-29 10:16:58.604 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120347242690383872[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 10:16:58.604 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120347242690383873[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 10:16:58.604 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120347242690383874[0;39m <==    Columns: id, parent, name, sort
2021-11-29 10:16:58.604 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120347242690383872[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 10:16:58.604 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120347242690383873[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 10:16:58.604 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120347242690383874[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 10:16:58.604 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120347242690383872[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 10:16:58.604 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120347242690383874[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 10:16:58.604 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120347242690383873[0;39m <==        Row: 2021-11-29, 134, 74, 9, 5
2021-11-29 10:16:58.604 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120347242690383874[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 10:16:58.604 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120347242690383872[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 10:16:58.604 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120347242690383873[0;39m <==      Total: 2
2021-11-29 10:16:58.604 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120347242690383874[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 10:16:58.605 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120347242690383872[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 10:16:58.605 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120347242690383873[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":134,"viewIncrease":9,"voteCount":74,"voteIncrease":5}],"success":true}
2021-11-29 10:16:58.605 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120347242690383872[0;39m <==      Total: 4
2021-11-29 10:16:58.605 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120347242690383874[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 10:16:58.605 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120347242690383873[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:16:58.605 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120347242690383874[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 10:16:58.605 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120347242690383872[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 10:16:58.605 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120347242690383874[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 10:16:58.605 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120347242690383872[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:16:58.605 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120347242690383874[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 10:16:58.606 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120347242690383874[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 10:16:58.606 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120347242690383874[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 10:16:58.606 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120347242690383874[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 10:16:58.606 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120347242690383874[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 10:16:58.607 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120347242690383874[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 10:16:58.607 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120347242690383874[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 10:16:58.607 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120347242690383874[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 10:16:58.608 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120347242690383874[0;39m <==      Total: 15
2021-11-29 10:16:58.608 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120347242690383874[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 10:16:58.608 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120347242690383874[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2021-11-29 10:16:58.709 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120347243143368704[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:16:58.709 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120347243143368704[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:16:58.709 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120347243143368704[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:16:58.709 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120347243143368704[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:16:58.710 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120347243143368704[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 10:16:58.710 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120347243143368704[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:16:58.711 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120347243143368704[0;39m ==> Parameters: 0(Long)
2021-11-29 10:16:58.711 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120347243143368704[0;39m <==    Columns: count(0)
2021-11-29 10:16:58.712 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120347243143368704[0;39m <==        Row: 0
2021-11-29 10:16:58.712 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120347243143368704[0;39m <==      Total: 1
2021-11-29 10:16:58.712 INFO  com.suplin.demo.service.EbookTable                :50   [32m120347243143368704[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:16:58.712 INFO  com.suplin.demo.service.EbookTable                :51   [32m120347243143368704[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:16:58.713 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120347243143368704[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:16:58.713 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120347243143368704[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:17:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120347248591769600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:17:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120347248591769600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:17:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120347248591769600[0;39m ==> Parameters: 
2021-11-29 10:17:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120347248591769600[0;39m <==    Updates: 0
2021-11-29 10:17:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120347248591769600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 10:17:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120347269554900992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:17:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120347269554900992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:17:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120347269554900992[0;39m ==> Parameters: 
2021-11-29 10:17:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120347269554900992[0;39m <==    Updates: 3
2021-11-29 10:17:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120347269554900992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:17:15.087 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:17:15.179 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:17:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120347395413381120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:17:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120347395413381120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:17:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120347395413381120[0;39m ==> Parameters: 
2021-11-29 10:17:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120347395413381120[0;39m <==    Updates: 3
2021-11-29 10:17:35.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120347395413381120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 10:17:45.096 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:17:45.191 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:18:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120347500241620992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:18:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120347500241620992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:18:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120347500241620992[0;39m ==> Parameters: 
2021-11-29 10:18:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120347500241620992[0;39m <==    Updates: 0
2021-11-29 10:18:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120347500241620992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 10:18:05.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120347521196363776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:18:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120347521196363776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:18:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120347521196363776[0;39m ==> Parameters: 
2021-11-29 10:18:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120347521196363776[0;39m <==    Updates: 3
2021-11-29 10:18:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120347521196363776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:18:15.071 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:18:15.164 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:18:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120347647050649600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:18:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120347647050649600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:18:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120347647050649600[0;39m ==> Parameters: 
2021-11-29 10:18:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120347647050649600[0;39m <==    Updates: 3
2021-11-29 10:18:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120347647050649600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 10:18:45.078 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:18:45.172 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:19:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120347751920832512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:19:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120347751920832512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:19:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120347751920832512[0;39m ==> Parameters: 
2021-11-29 10:19:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120347751920832512[0;39m <==    Updates: 0
2021-11-29 10:19:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120347751920832512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 10:19:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120347772871380992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:19:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120347772871380992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:19:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120347772871380992[0;39m ==> Parameters: 
2021-11-29 10:19:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120347772871380992[0;39m <==    Updates: 3
2021-11-29 10:19:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120347772871380992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 10:19:15.083 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:19:15.207 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:19:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120347898713083904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:19:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120347898713083904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:19:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120347898713083904[0;39m ==> Parameters: 
2021-11-29 10:19:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120347898713083904[0;39m <==    Updates: 3
2021-11-29 10:19:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120347898713083904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:19:45.074 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:19:45.182 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:20:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120348003566489600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:20:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120348003566489600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:20:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120348003566489600[0;39m ==> Parameters: 
2021-11-29 10:20:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120348003566489600[0;39m <==    Updates: 0
2021-11-29 10:20:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120348003566489600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 10:20:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120348024542203904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:20:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120348024542203904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:20:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120348024542203904[0;39m ==> Parameters: 
2021-11-29 10:20:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120348024542203904[0;39m <==    Updates: 3
2021-11-29 10:20:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120348024542203904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 10:20:15.057 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:20:15.182 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:20:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120348150358740992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:20:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120348150358740992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:20:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120348150358740992[0;39m ==> Parameters: 
2021-11-29 10:20:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120348150358740992[0;39m <==    Updates: 3
2021-11-29 10:20:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120348150358740992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 10:20:45.081 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:20:45.190 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:21:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120348255220535296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:21:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120348255220535296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:21:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120348255220535296[0;39m ==> Parameters: 
2021-11-29 10:21:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120348255220535296[0;39m <==    Updates: 0
2021-11-29 10:21:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120348255220535296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 10:21:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120348276187860992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:21:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120348276187860992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:21:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120348276187860992[0;39m ==> Parameters: 
2021-11-29 10:21:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120348276187860992[0;39m <==    Updates: 3
2021-11-29 10:21:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120348276187860992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:21:15.066 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:21:15.190 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:21:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120348402025369600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:21:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120348402025369600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:21:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120348402025369600[0;39m ==> Parameters: 
2021-11-29 10:21:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120348402025369600[0;39m <==    Updates: 3
2021-11-29 10:21:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120348402025369600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:21:45.082 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:21:45.193 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:21:54.834 INFO  com.suplin.demo.websocket.WebSocketServer         :40   [32m120346519898558465[0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼šauwOxLwutwï¼Œsession idï¼š1cï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2021-11-29 10:21:55.745 INFO  com.suplin.demo.websocket.WebSocketServer         :31   [32m120346519898558464[0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼šzq5pYZTsNXï¼Œsession idï¼š1dï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2021-11-29 10:22:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120348506895552512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:22:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120348506895552512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:22:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120348506895552512[0;39m ==> Parameters: 
2021-11-29 10:22:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120348506895552512[0;39m <==    Updates: 0
2021-11-29 10:22:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120348506895552512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 10:22:05.017 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120348527892238336[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:22:05.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120348527892238336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:22:05.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120348527892238336[0;39m ==> Parameters: 
2021-11-29 10:22:05.019 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120348527892238336[0;39m <==    Updates: 3
2021-11-29 10:22:05.019 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120348527892238336[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:22:15.079 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:22:15.205 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:22:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120348653691998208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:22:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120348653691998208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:22:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120348653691998208[0;39m ==> Parameters: 
2021-11-29 10:22:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120348653691998208[0;39m <==    Updates: 3
2021-11-29 10:22:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120348653691998208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 10:22:40.042 INFO  com.suplin.demo.websocket.WebSocketServer         :40   [32m120346519894364160[0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼šzq5pYZTsNXï¼Œsession idï¼š1dï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2021-11-29 10:22:41.135 INFO  com.suplin.demo.websocket.WebSocketServer         :31   [32m120347242690383873[0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼šQLInripwt0ï¼Œsession idï¼š1eï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2021-11-29 10:22:45.085 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:22:45.193 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:23:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120348758557986816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:23:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120348758557986816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:23:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120348758557986816[0;39m ==> Parameters: 
2021-11-29 10:23:00.038 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120348758557986816[0;39m <==    Updates: 0
2021-11-29 10:23:00.038 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120348758557986816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š26æ¯«ç§’
2021-11-29 10:23:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120348779537895424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:23:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120348779537895424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:23:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120348779537895424[0;39m ==> Parameters: 
2021-11-29 10:23:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120348779537895424[0;39m <==    Updates: 3
2021-11-29 10:23:05.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120348779537895424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 10:23:15.084 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:23:15.179 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:23:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120348905354432512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:23:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120348905354432512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:23:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120348905354432512[0;39m ==> Parameters: 
2021-11-29 10:23:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120348905354432512[0;39m <==    Updates: 3
2021-11-29 10:23:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120348905354432512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:23:45.085 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:23:45.196 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:24:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120349010195255296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:24:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120349010195255296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:24:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120349010195255296[0;39m ==> Parameters: 
2021-11-29 10:24:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120349010195255296[0;39m <==    Updates: 0
2021-11-29 10:24:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120349010195255296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 10:24:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120349031170969600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:24:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120349031170969600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:24:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120349031170969600[0;39m ==> Parameters: 
2021-11-29 10:24:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120349031170969600[0;39m <==    Updates: 3
2021-11-29 10:24:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120349031170969600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 10:24:15.079 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:24:15.191 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:24:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120349156991700992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:24:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120349156991700992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:24:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120349156991700992[0;39m ==> Parameters: 
2021-11-29 10:24:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120349156991700992[0;39m <==    Updates: 3
2021-11-29 10:24:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120349156991700992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶6æ¯«ç§’
2021-11-29 10:24:45.098 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:24:45.192 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:25:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120349261878661120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:25:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120349261878661120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:25:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120349261878661120[0;39m ==> Parameters: 
2021-11-29 10:25:00.020 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120349261878661120[0;39m <==    Updates: 0
2021-11-29 10:25:00.020 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120349261878661120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 10:25:05.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120349282804043776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:25:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120349282804043776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:25:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120349282804043776[0;39m ==> Parameters: 
2021-11-29 10:25:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120349282804043776[0;39m <==    Updates: 3
2021-11-29 10:25:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120349282804043776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 10:25:15.072 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:25:15.183 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:25:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120349408641552384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:25:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120349408641552384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:25:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120349408641552384[0;39m ==> Parameters: 
2021-11-29 10:25:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120349408641552384[0;39m <==    Updates: 3
2021-11-29 10:25:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120349408641552384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶7æ¯«ç§’
2021-11-29 10:25:45.088 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:25:45.182 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:26:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120349513515929600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:26:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120349513515929600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:26:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120349513515929600[0;39m ==> Parameters: 
2021-11-29 10:26:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120349513515929600[0;39m <==    Updates: 0
2021-11-29 10:26:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120349513515929600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 10:26:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120349534470672384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:26:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120349534470672384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:26:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120349534470672384[0;39m ==> Parameters: 
2021-11-29 10:26:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120349534470672384[0;39m <==    Updates: 3
2021-11-29 10:26:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120349534470672384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 10:26:15.109 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:26:15.186 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:26:35.017 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120349660354318336[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:26:35.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120349660354318336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:26:35.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120349660354318336[0;39m ==> Parameters: 
2021-11-29 10:26:35.019 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120349660354318336[0;39m <==    Updates: 3
2021-11-29 10:26:35.019 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120349660354318336[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:26:45.085 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:26:45.195 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:27:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120349765207724032[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:27:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120349765207724032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:27:00.019 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120349765207724032[0;39m ==> Parameters: 
2021-11-29 10:27:00.022 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120349765207724032[0;39m <==    Updates: 0
2021-11-29 10:27:00.022 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120349765207724032[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 10:27:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120349786162466816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:27:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120349786162466816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:27:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120349786162466816[0;39m ==> Parameters: 
2021-11-29 10:27:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120349786162466816[0;39m <==    Updates: 3
2021-11-29 10:27:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120349786162466816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:27:15.076 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:27:15.186 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:27:35.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120349911945449472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:27:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120349911945449472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:27:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120349911945449472[0;39m ==> Parameters: 
2021-11-29 10:27:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120349911945449472[0;39m <==    Updates: 3
2021-11-29 10:27:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120349911945449472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶6æ¯«ç§’
2021-11-29 10:27:45.080 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:27:45.188 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:28:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120350016819826688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:28:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120350016819826688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:28:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120350016819826688[0;39m ==> Parameters: 
2021-11-29 10:28:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120350016819826688[0;39m <==    Updates: 0
2021-11-29 10:28:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120350016819826688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 10:28:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120350037799735296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:28:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120350037799735296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:28:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120350037799735296[0;39m ==> Parameters: 
2021-11-29 10:28:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120350037799735296[0;39m <==    Updates: 3
2021-11-29 10:28:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120350037799735296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 10:28:15.092 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:28:15.200 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:28:35.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120350163603689472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:28:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120350163603689472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:28:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120350163603689472[0;39m ==> Parameters: 
2021-11-29 10:28:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120350163603689472[0;39m <==    Updates: 3
2021-11-29 10:28:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120350163603689472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:28:45.107 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:28:45.186 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:29:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120350268511621120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:29:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120350268511621120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:29:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120350268511621120[0;39m ==> Parameters: 
2021-11-29 10:29:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120350268511621120[0;39m <==    Updates: 0
2021-11-29 10:29:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120350268511621120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 10:29:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120350289478946816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:29:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120350289478946816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:29:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120350289478946816[0;39m ==> Parameters: 
2021-11-29 10:29:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120350289478946816[0;39m <==    Updates: 3
2021-11-29 10:29:05.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120350289478946816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 10:29:15.088 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:29:15.181 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:29:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120350415270318080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:29:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120350415270318080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:29:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120350415270318080[0;39m ==> Parameters: 
2021-11-29 10:29:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120350415270318080[0;39m <==    Updates: 3
2021-11-29 10:29:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120350415270318080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶6æ¯«ç§’
2021-11-29 10:29:45.066 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:29:45.181 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:30:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120350520157278208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:30:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120350520157278208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:30:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120350520157278208[0;39m ==> Parameters: 
2021-11-29 10:30:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120350520157278208[0;39m <==    Updates: 0
2021-11-29 10:30:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120350520157278208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 10:30:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120350541124603904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:30:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120350541124603904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:30:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120350541124603904[0;39m ==> Parameters: 
2021-11-29 10:30:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120350541124603904[0;39m <==    Updates: 3
2021-11-29 10:30:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120350541124603904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 10:30:15.094 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:30:15.201 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:30:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120350666974695424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:30:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120350666974695424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:30:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120350666974695424[0;39m ==> Parameters: 
2021-11-29 10:30:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120350666974695424[0;39m <==    Updates: 3
2021-11-29 10:30:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120350666974695424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:30:45.071 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:30:45.178 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:31:00.002 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120350771781963776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:31:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120350771781963776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:31:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120350771781963776[0;39m ==> Parameters: 
2021-11-29 10:31:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120350771781963776[0;39m <==    Updates: 0
2021-11-29 10:31:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120350771781963776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 10:31:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120350792795426816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:31:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120350792795426816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:31:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120350792795426816[0;39m ==> Parameters: 
2021-11-29 10:31:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120350792795426816[0;39m <==    Updates: 3
2021-11-29 10:31:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120350792795426816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:31:15.104 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:31:15.182 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:31:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120350918607769600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:31:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120350918607769600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:31:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120350918607769600[0;39m ==> Parameters: 
2021-11-29 10:31:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120350918607769600[0;39m <==    Updates: 3
2021-11-29 10:31:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120350918607769600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 10:31:45.075 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:31:45.200 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:32:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120351023490535424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:32:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120351023490535424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:32:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120351023490535424[0;39m ==> Parameters: 
2021-11-29 10:32:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120351023490535424[0;39m <==    Updates: 0
2021-11-29 10:32:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120351023490535424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 10:32:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120351044415918080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:32:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120351044415918080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:32:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120351044415918080[0;39m ==> Parameters: 
2021-11-29 10:32:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120351044415918080[0;39m <==    Updates: 3
2021-11-29 10:32:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120351044415918080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:32:15.093 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:32:15.202 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:32:23.160 INFO  com.suplin.demo.websocket.WebSocketServer         :40   [32m120347242690383872[0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼šQLInripwt0ï¼Œsession idï¼š1eï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2021-11-29 10:32:24.031 INFO  com.suplin.demo.websocket.WebSocketServer         :31   [32m120347242690383874[0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼šL5s61iZ3hWï¼Œsession idï¼š1fï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2021-11-29 10:32:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120351170261815296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:32:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120351170261815296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:32:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120351170261815296[0;39m ==> Parameters: 
2021-11-29 10:32:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120351170261815296[0;39m <==    Updates: 3
2021-11-29 10:32:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120351170261815296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 10:32:37.859 INFO  com.suplin.demo.websocket.WebSocketServer         :40   [32m120347243143368704[0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼šL5s61iZ3hWï¼Œsession idï¼š1fï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2021-11-29 10:32:38.901 INFO  com.suplin.demo.websocket.WebSocketServer         :31   [32m120346547836817408[0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼šJH1w0tS1bFï¼Œsession idï¼š20ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2021-11-29 10:32:45.081 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:32:45.190 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:33:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120351275152969728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:33:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120351275152969728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:33:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120351275152969728[0;39m ==> Parameters: 
2021-11-29 10:33:00.019 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120351275152969728[0;39m <==    Updates: 0
2021-11-29 10:33:00.019 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120351275152969728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 10:33:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120351296116101120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:33:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120351296116101120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:33:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120351296116101120[0;39m ==> Parameters: 
2021-11-29 10:33:05.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120351296116101120[0;39m <==    Updates: 3
2021-11-29 10:33:05.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120351296116101120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 10:33:15.099 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:33:15.209 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:33:32.208 INFO  com.suplin.demo.websocket.WebSocketServer         :40   [32m120346548507906048[0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼šJH1w0tS1bFï¼Œsession idï¼š20ï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2021-11-29 10:33:33.015 INFO  com.suplin.demo.websocket.WebSocketServer         :31   [32m120346547832623105[0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼šiSszR7OV4aï¼Œsession idï¼š21ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2021-11-29 10:33:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120351421932638208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:33:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120351421932638208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:33:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120351421932638208[0;39m ==> Parameters: 
2021-11-29 10:33:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120351421932638208[0;39m <==    Updates: 3
2021-11-29 10:33:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120351421932638208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:33:45.105 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:33:45.214 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:33:50.793 INFO  com.suplin.demo.websocket.WebSocketServer         :40   [32m120346519898558465[0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼šiSszR7OV4aï¼Œsession idï¼š21ï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2021-11-29 10:33:51.553 INFO  com.suplin.demo.websocket.WebSocketServer         :31   [32m120346519898558464[0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼šmp2SylpDEAï¼Œsession idï¼š22ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2021-11-29 10:34:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120351526765072384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:34:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120351526765072384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:34:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120351526765072384[0;39m ==> Parameters: 
2021-11-29 10:34:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120351526765072384[0;39m <==    Updates: 0
2021-11-29 10:34:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120351526765072384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 10:34:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120351547749175296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:34:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120351547749175296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:34:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120351547749175296[0;39m ==> Parameters: 
2021-11-29 10:34:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120351547749175296[0;39m <==    Updates: 3
2021-11-29 10:34:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120351547749175296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:34:15.097 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:34:15.192 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:34:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120351673582489600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:34:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120351673582489600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:34:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120351673582489600[0;39m ==> Parameters: 
2021-11-29 10:34:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120351673582489600[0;39m <==    Updates: 3
2021-11-29 10:34:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120351673582489600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:34:45.063 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:34:45.190 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:35:00.002 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120351778414923776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:35:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120351778414923776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:35:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120351778414923776[0;39m ==> Parameters: 
2021-11-29 10:35:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120351778414923776[0;39m <==    Updates: 0
2021-11-29 10:35:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120351778414923776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2021-11-29 10:35:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120351799403220992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:35:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120351799403220992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:35:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120351799403220992[0;39m ==> Parameters: 
2021-11-29 10:35:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120351799403220992[0;39m <==    Updates: 3
2021-11-29 10:35:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120351799403220992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:35:15.083 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:35:15.208 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:35:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120351925228146688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:35:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120351925228146688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:35:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120351925228146688[0;39m ==> Parameters: 
2021-11-29 10:35:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120351925228146688[0;39m <==    Updates: 3
2021-11-29 10:35:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120351925228146688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:35:45.095 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:35:45.190 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:35:49.606 INFO  com.suplin.demo.websocket.WebSocketServer         :40   [32m120346519894364160[0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼šmp2SylpDEAï¼Œsession idï¼š22ï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2021-11-29 10:35:50.355 INFO  com.suplin.demo.websocket.WebSocketServer         :31   [32m120347242690383873[0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼šB3krn0bfLmï¼Œsession idï¼š23ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2021-11-29 10:36:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120352030085746688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:36:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120352030085746688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:36:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120352030085746688[0;39m ==> Parameters: 
2021-11-29 10:36:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120352030085746688[0;39m <==    Updates: 0
2021-11-29 10:36:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120352030085746688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 10:36:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120352051069849600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:36:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120352051069849600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:36:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120352051069849600[0;39m ==> Parameters: 
2021-11-29 10:36:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120352051069849600[0;39m <==    Updates: 3
2021-11-29 10:36:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120352051069849600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 10:36:15.115 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:36:15.207 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:36:28.650 INFO  com.suplin.demo.websocket.WebSocketServer         :40   [32m120347242690383872[0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼šB3krn0bfLmï¼Œsession idï¼š23ï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2021-11-29 10:36:29.415 INFO  com.suplin.demo.websocket.WebSocketServer         :31   [32m120347242690383874[0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼š2SbzYf4z53ï¼Œsession idï¼š24ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2021-11-29 10:36:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120352176898969600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:36:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120352176898969600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:36:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120352176898969600[0;39m ==> Parameters: 
2021-11-29 10:36:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120352176898969600[0;39m <==    Updates: 3
2021-11-29 10:36:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120352176898969600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:36:45.085 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:36:45.210 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:37:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120352281760763904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:37:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120352281760763904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:37:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120352281760763904[0;39m ==> Parameters: 
2021-11-29 10:37:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120352281760763904[0;39m <==    Updates: 0
2021-11-29 10:37:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120352281760763904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 10:37:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120352302723895296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:37:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120352302723895296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:37:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120352302723895296[0;39m ==> Parameters: 
2021-11-29 10:37:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120352302723895296[0;39m <==    Updates: 3
2021-11-29 10:37:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120352302723895296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:37:05.498 INFO  com.suplin.demo.websocket.WebSocketServer         :40   [32m120347243143368704[0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼š2SbzYf4z53ï¼Œsession idï¼š24ï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2021-11-29 10:37:06.262 INFO  com.suplin.demo.websocket.WebSocketServer         :31   [32m120346547836817408[0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼štdx4Qjge0hï¼Œsession idï¼š25ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2021-11-29 10:37:15.098 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:37:15.191 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:37:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120352428586569728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:37:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120352428586569728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:37:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120352428586569728[0;39m ==> Parameters: 
2021-11-29 10:37:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120352428586569728[0;39m <==    Updates: 3
2021-11-29 10:37:35.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120352428586569728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:37:45.087 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:37:45.196 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:38:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120352533423198208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:38:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120352533423198208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:38:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120352533423198208[0;39m ==> Parameters: 
2021-11-29 10:38:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120352533423198208[0;39m <==    Updates: 0
2021-11-29 10:38:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120352533423198208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 10:38:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120352554386329600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:38:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120352554386329600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:38:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120352554386329600[0;39m ==> Parameters: 
2021-11-29 10:38:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120352554386329600[0;39m <==    Updates: 3
2021-11-29 10:38:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120352554386329600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 10:38:15.106 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:38:15.204 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:38:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120352680236421120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:38:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120352680236421120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:38:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120352680236421120[0;39m ==> Parameters: 
2021-11-29 10:38:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120352680236421120[0;39m <==    Updates: 3
2021-11-29 10:38:35.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120352680236421120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 10:38:45.092 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:38:45.201 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:39:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120352785106604032[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:39:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120352785106604032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:39:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120352785106604032[0;39m ==> Parameters: 
2021-11-29 10:39:00.021 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120352785106604032[0;39m <==    Updates: 0
2021-11-29 10:39:00.022 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120352785106604032[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 10:39:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120352806057152512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:39:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120352806057152512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:39:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120352806057152512[0;39m ==> Parameters: 
2021-11-29 10:39:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120352806057152512[0;39m <==    Updates: 3
2021-11-29 10:39:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120352806057152512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:39:15.109 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:39:15.203 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:39:26.041 INFO  com.suplin.demo.websocket.WebSocketServer         :40   [32m120346548507906048[0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼štdx4Qjge0hï¼Œsession idï¼š25ï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2021-11-29 10:39:26.946 INFO  com.suplin.demo.websocket.WebSocketServer         :31   [32m120346547832623105[0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼šVWarIgbrcGï¼Œsession idï¼š26ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2021-11-29 10:39:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120352931877883904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:39:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120352931877883904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:39:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120352931877883904[0;39m ==> Parameters: 
2021-11-29 10:39:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120352931877883904[0;39m <==    Updates: 3
2021-11-29 10:39:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120352931877883904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶7æ¯«ç§’
2021-11-29 10:39:45.079 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:39:45.204 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:40:00.002 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120353036706123776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:40:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120353036706123776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:40:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120353036706123776[0;39m ==> Parameters: 
2021-11-29 10:40:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120353036706123776[0;39m <==    Updates: 0
2021-11-29 10:40:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120353036706123776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 10:40:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120353057711198208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:40:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120353057711198208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:40:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120353057711198208[0;39m ==> Parameters: 
2021-11-29 10:40:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120353057711198208[0;39m <==    Updates: 3
2021-11-29 10:40:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120353057711198208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:40:15.115 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:40:15.194 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:40:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120353183527735296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:40:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120353183527735296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:40:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120353183527735296[0;39m ==> Parameters: 
2021-11-29 10:40:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120353183527735296[0;39m <==    Updates: 3
2021-11-29 10:40:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120353183527735296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:40:45.094 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:40:45.201 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:41:00.002 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120353288364363776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:41:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120353288364363776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:41:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120353288364363776[0;39m ==> Parameters: 
2021-11-29 10:41:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120353288364363776[0;39m <==    Updates: 0
2021-11-29 10:41:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120353288364363776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 10:41:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120353309394604032[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:41:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120353309394604032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:41:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120353309394604032[0;39m ==> Parameters: 
2021-11-29 10:41:05.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120353309394604032[0;39m <==    Updates: 3
2021-11-29 10:41:05.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120353309394604032[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:41:15.100 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:41:15.192 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:41:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120353435202752512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:41:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120353435202752512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:41:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120353435202752512[0;39m ==> Parameters: 
2021-11-29 10:41:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120353435202752512[0;39m <==    Updates: 3
2021-11-29 10:41:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120353435202752512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:41:45.092 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:41:45.216 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:41:48.663 INFO  com.suplin.demo.websocket.WebSocketServer         :40   [32m120346519898558465[0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼šVWarIgbrcGï¼Œsession idï¼š26ï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2021-11-29 10:41:49.565 INFO  com.suplin.demo.websocket.WebSocketServer         :31   [32m120346519898558464[0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼š3mlTdF2ymWï¼Œsession idï¼š27ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2021-11-29 10:42:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120353540030992384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:42:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120353540030992384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:42:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120353540030992384[0;39m ==> Parameters: 
2021-11-29 10:42:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120353540030992384[0;39m <==    Updates: 0
2021-11-29 10:42:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120353540030992384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 10:42:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120353561044455424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:42:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120353561044455424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:42:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120353561044455424[0;39m ==> Parameters: 
2021-11-29 10:42:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120353561044455424[0;39m <==    Updates: 3
2021-11-29 10:42:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120353561044455424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:42:15.092 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:42:15.187 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:42:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120353686844215296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:42:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120353686844215296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:42:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120353686844215296[0;39m ==> Parameters: 
2021-11-29 10:42:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120353686844215296[0;39m <==    Updates: 3
2021-11-29 10:42:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120353686844215296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶6æ¯«ç§’
2021-11-29 10:42:45.089 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:42:45.200 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:43:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120353791735369728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:43:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120353791735369728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:43:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120353791735369728[0;39m ==> Parameters: 
2021-11-29 10:43:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120353791735369728[0;39m <==    Updates: 0
2021-11-29 10:43:00.019 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120353791735369728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 10:43:03.047 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120353804452499458[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:43:03.047 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120353804452499457[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:43:03.047 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120353804452499456[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:43:03.048 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120353804452499456[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 10:43:03.048 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120353804452499457[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 10:43:03.048 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120353804452499458[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 10:43:03.048 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120353804452499456[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 10:43:03.048 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120353804452499458[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 10:43:03.048 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120353804452499457[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 10:43:03.048 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120353804452499456[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:43:03.048 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120353804452499458[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:43:03.048 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120353804452499457[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:43:03.049 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120353804452499458[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:43:03.049 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120353804452499456[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:43:03.049 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120353804452499457[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:43:03.050 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120353804452499457[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:43:03.051 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120353804452499456[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:43:03.051 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120353804452499458[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 10:43:03.051 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120353804452499457[0;39m ==> Parameters: 
2021-11-29 10:43:03.051 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120353804452499456[0;39m ==> Parameters: 
2021-11-29 10:43:03.051 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120353804452499458[0;39m ==> Parameters: 
2021-11-29 10:43:03.052 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353804452499458[0;39m <==    Columns: id, parent, name, sort
2021-11-29 10:43:03.052 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120353804452499456[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 10:43:03.052 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120353804452499457[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 10:43:03.052 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353804452499458[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 10:43:03.053 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120353804452499456[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 10:43:03.053 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120353804452499457[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 10:43:03.053 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353804452499458[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 10:43:03.053 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120353804452499457[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 10:43:03.053 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120353804452499456[0;39m <==        Row: 2021-11-29, 134, 74, 9, 5
2021-11-29 10:43:03.053 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353804452499458[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 10:43:03.053 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120353804452499456[0;39m <==      Total: 2
2021-11-29 10:43:03.053 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120353804452499457[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 10:43:03.053 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353804452499458[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 10:43:03.054 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120353804452499457[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 10:43:03.054 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353804452499458[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 10:43:03.054 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120353804452499457[0;39m <==      Total: 4
2021-11-29 10:43:03.054 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120353804452499456[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":134,"viewIncrease":9,"voteCount":74,"voteIncrease":5}],"success":true}
2021-11-29 10:43:03.054 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353804452499458[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 10:43:03.054 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120353804452499456[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2021-11-29 10:43:03.054 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353804452499458[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 10:43:03.054 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120353804452499457[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 10:43:03.054 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353804452499458[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 10:43:03.054 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120353804452499457[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2021-11-29 10:43:03.054 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353804452499458[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 10:43:03.055 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353804452499458[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 10:43:03.055 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353804452499458[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 10:43:03.055 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353804452499458[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 10:43:03.055 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353804452499458[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 10:43:03.056 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353804452499458[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 10:43:03.056 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353804452499458[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 10:43:03.056 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120353804452499458[0;39m <==      Total: 15
2021-11-29 10:43:03.057 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120353804452499458[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 10:43:03.058 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120353804452499458[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š11 ms -------------
2021-11-29 10:43:03.207 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120353805123588096[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:43:03.207 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120353805123588096[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:43:03.207 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120353805123588096[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:43:03.207 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120353805123588096[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:43:03.207 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120353805123588096[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 10:43:03.207 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120353805123588096[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:43:03.208 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120353805123588096[0;39m ==> Parameters: 0(Long)
2021-11-29 10:43:03.209 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120353805123588096[0;39m <==    Columns: count(0)
2021-11-29 10:43:03.209 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120353805123588096[0;39m <==        Row: 0
2021-11-29 10:43:03.209 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120353805123588096[0;39m <==      Total: 1
2021-11-29 10:43:03.209 INFO  com.suplin.demo.service.EbookTable                :50   [32m120353805123588096[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:43:03.211 INFO  com.suplin.demo.service.EbookTable                :51   [32m120353805123588096[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:43:03.211 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120353805123588096[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:43:03.211 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120353805123588096[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:43:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120353812669140992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:43:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120353812669140992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:43:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120353812669140992[0;39m ==> Parameters: 
2021-11-29 10:43:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120353812669140992[0;39m <==    Updates: 3
2021-11-29 10:43:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120353812669140992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:43:06.605 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120353819375833090[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:43:06.605 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120353819375833089[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:43:06.605 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120353819375833088[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:43:06.606 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120353819375833089[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 10:43:06.606 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120353819375833090[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 10:43:06.606 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120353819375833088[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 10:43:06.606 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120353819375833089[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 10:43:06.606 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120353819375833088[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 10:43:06.606 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120353819375833090[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 10:43:06.606 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120353819375833089[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:43:06.606 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120353819375833088[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:43:06.606 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120353819375833090[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:43:06.606 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120353819375833089[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:43:06.606 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120353819375833088[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:43:06.606 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120353819375833090[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:43:06.607 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120353819375833090[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:43:06.607 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120353819375833089[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 10:43:06.607 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120353819375833088[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:43:06.607 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120353819375833090[0;39m ==> Parameters: 
2021-11-29 10:43:06.607 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120353819375833089[0;39m ==> Parameters: 
2021-11-29 10:43:06.607 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120353819375833088[0;39m ==> Parameters: 
2021-11-29 10:43:06.608 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120353819375833090[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 10:43:06.608 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353819375833089[0;39m <==    Columns: id, parent, name, sort
2021-11-29 10:43:06.608 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120353819375833088[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 10:43:06.608 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353819375833089[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 10:43:06.608 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120353819375833090[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 10:43:06.608 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120353819375833088[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 10:43:06.609 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353819375833089[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 10:43:06.609 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120353819375833088[0;39m <==        Row: 2021-11-29, 134, 74, 9, 5
2021-11-29 10:43:06.609 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120353819375833090[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 10:43:06.609 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353819375833089[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 10:43:06.609 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120353819375833088[0;39m <==      Total: 2
2021-11-29 10:43:06.609 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120353819375833090[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 10:43:06.609 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353819375833089[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 10:43:06.609 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120353819375833088[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":134,"viewIncrease":9,"voteCount":74,"voteIncrease":5}],"success":true}
2021-11-29 10:43:06.609 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353819375833089[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 10:43:06.609 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120353819375833090[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 10:43:06.610 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120353819375833088[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 10:43:06.610 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353819375833089[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 10:43:06.610 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120353819375833090[0;39m <==      Total: 4
2021-11-29 10:43:06.610 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353819375833089[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 10:43:06.610 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120353819375833090[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 10:43:06.610 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353819375833089[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 10:43:06.610 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120353819375833090[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 10:43:06.610 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353819375833089[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 10:43:06.611 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353819375833089[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 10:43:06.611 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353819375833089[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 10:43:06.611 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353819375833089[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 10:43:06.611 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353819375833089[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 10:43:06.612 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353819375833089[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 10:43:06.612 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353819375833089[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 10:43:06.612 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120353819375833089[0;39m <==      Total: 15
2021-11-29 10:43:06.614 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120353819375833089[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 10:43:06.614 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120353819375833089[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š9 ms -------------
2021-11-29 10:43:06.681 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120353819690405888[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:43:06.681 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120353819690405888[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:43:06.681 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120353819690405888[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:43:06.681 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120353819690405888[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:43:06.681 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120353819690405888[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 10:43:06.682 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120353819690405888[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:43:06.683 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120353819690405888[0;39m ==> Parameters: 0(Long)
2021-11-29 10:43:06.683 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120353819690405888[0;39m <==    Columns: count(0)
2021-11-29 10:43:06.683 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120353819690405888[0;39m <==        Row: 0
2021-11-29 10:43:06.684 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120353819690405888[0;39m <==      Total: 1
2021-11-29 10:43:06.684 INFO  com.suplin.demo.service.EbookTable                :50   [32m120353819690405888[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:43:06.684 INFO  com.suplin.demo.service.EbookTable                :51   [32m120353819690405888[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:43:06.684 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120353819690405888[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:43:06.684 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120353819690405888[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:43:08.918 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120353829077258242[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:43:08.918 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120353829077258241[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:43:08.918 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120353829077258240[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:43:08.919 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120353829077258242[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 10:43:08.919 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120353829077258241[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 10:43:08.919 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120353829077258240[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 10:43:08.919 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120353829077258242[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 10:43:08.919 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120353829077258241[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 10:43:08.919 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120353829077258240[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 10:43:08.919 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120353829077258241[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:43:08.919 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120353829077258242[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:43:08.919 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120353829077258240[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:43:08.919 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120353829077258241[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:43:08.919 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120353829077258240[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:43:08.919 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120353829077258242[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:43:08.919 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120353829077258242[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 10:43:08.919 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120353829077258240[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:43:08.919 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120353829077258241[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:43:08.920 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120353829077258242[0;39m ==> Parameters: 
2021-11-29 10:43:08.920 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120353829077258240[0;39m ==> Parameters: 
2021-11-29 10:43:08.920 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120353829077258241[0;39m ==> Parameters: 
2021-11-29 10:43:08.920 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120353829077258240[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 10:43:08.920 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353829077258242[0;39m <==    Columns: id, parent, name, sort
2021-11-29 10:43:08.921 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120353829077258241[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 10:43:08.921 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120353829077258240[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 10:43:08.921 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353829077258242[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 10:43:08.921 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120353829077258241[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 10:43:08.921 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353829077258242[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 10:43:08.921 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120353829077258240[0;39m <==        Row: 2021-11-29, 134, 74, 9, 5
2021-11-29 10:43:08.921 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353829077258242[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 10:43:08.921 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120353829077258241[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 10:43:08.921 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353829077258242[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 10:43:08.921 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120353829077258240[0;39m <==      Total: 2
2021-11-29 10:43:08.921 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120353829077258241[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 10:43:08.921 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353829077258242[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 10:43:08.922 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120353829077258240[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":134,"viewIncrease":9,"voteCount":74,"voteIncrease":5}],"success":true}
2021-11-29 10:43:08.922 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120353829077258241[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 10:43:08.922 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353829077258242[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 10:43:08.922 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120353829077258240[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:43:08.922 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120353829077258241[0;39m <==      Total: 4
2021-11-29 10:43:08.922 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353829077258242[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 10:43:08.922 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353829077258242[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 10:43:08.922 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120353829077258241[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 10:43:08.922 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353829077258242[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 10:43:08.922 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120353829077258241[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:43:08.922 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353829077258242[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 10:43:08.922 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353829077258242[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 10:43:08.923 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353829077258242[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 10:43:08.923 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353829077258242[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 10:43:08.923 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353829077258242[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 10:43:08.923 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353829077258242[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 10:43:08.923 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120353829077258242[0;39m <==      Total: 15
2021-11-29 10:43:08.924 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120353829077258242[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 10:43:08.924 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120353829077258242[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2021-11-29 10:43:09.012 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120353829471522816[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:43:09.012 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120353829471522816[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:43:09.012 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120353829471522816[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:43:09.012 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120353829471522816[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:43:09.012 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120353829471522816[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 10:43:09.013 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120353829471522816[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:43:09.013 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120353829471522816[0;39m ==> Parameters: 0(Long)
2021-11-29 10:43:09.014 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120353829471522816[0;39m <==    Columns: count(0)
2021-11-29 10:43:09.014 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120353829471522816[0;39m <==        Row: 0
2021-11-29 10:43:09.014 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120353829471522816[0;39m <==      Total: 1
2021-11-29 10:43:09.014 INFO  com.suplin.demo.service.EbookTable                :50   [32m120353829471522816[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:43:09.014 INFO  com.suplin.demo.service.EbookTable                :51   [32m120353829471522816[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:43:09.015 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120353829471522816[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:43:09.015 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120353829471522816[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š3 ms -------------
2021-11-29 10:43:10.139 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120353834198503424[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:43:10.139 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120353834198503426[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:43:10.139 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120353834198503425[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:43:10.139 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120353834198503424[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 10:43:10.139 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120353834198503426[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 10:43:10.139 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120353834198503425[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 10:43:10.139 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120353834198503424[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 10:43:10.140 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120353834198503426[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 10:43:10.140 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120353834198503424[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:43:10.140 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120353834198503426[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:43:10.140 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120353834198503425[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 10:43:10.140 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120353834198503424[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:43:10.140 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120353834198503426[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:43:10.140 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120353834198503425[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:43:10.140 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120353834198503425[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:43:10.140 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120353834198503426[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 10:43:10.140 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120353834198503424[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:43:10.141 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120353834198503425[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:43:10.141 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120353834198503426[0;39m ==> Parameters: 
2021-11-29 10:43:10.141 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120353834198503424[0;39m ==> Parameters: 
2021-11-29 10:43:10.141 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120353834198503425[0;39m ==> Parameters: 
2021-11-29 10:43:10.141 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120353834198503424[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 10:43:10.142 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120353834198503424[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 10:43:10.142 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120353834198503425[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 10:43:10.142 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120353834198503424[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 10:43:10.142 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120353834198503425[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 10:43:10.142 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120353834198503424[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 10:43:10.143 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120353834198503424[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 10:43:10.143 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120353834198503425[0;39m <==        Row: 2021-11-29, 134, 74, 9, 5
2021-11-29 10:43:10.143 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120353834198503424[0;39m <==      Total: 4
2021-11-29 10:43:10.143 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120353834198503425[0;39m <==      Total: 2
2021-11-29 10:43:10.143 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120353834198503424[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 10:43:10.143 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120353834198503424[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:43:10.143 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120353834198503425[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":134,"viewIncrease":9,"voteCount":74,"voteIncrease":5}],"success":true}
2021-11-29 10:43:10.143 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120353834198503425[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:43:10.152 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353834198503426[0;39m <==    Columns: id, parent, name, sort
2021-11-29 10:43:10.152 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353834198503426[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 10:43:10.152 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353834198503426[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 10:43:10.152 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353834198503426[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 10:43:10.153 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353834198503426[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 10:43:10.153 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353834198503426[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 10:43:10.153 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353834198503426[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 10:43:10.153 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353834198503426[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 10:43:10.154 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353834198503426[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 10:43:10.154 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353834198503426[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 10:43:10.154 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353834198503426[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 10:43:10.155 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353834198503426[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 10:43:10.155 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353834198503426[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 10:43:10.155 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353834198503426[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 10:43:10.155 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353834198503426[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 10:43:10.156 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353834198503426[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 10:43:10.156 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120353834198503426[0;39m <==      Total: 15
2021-11-29 10:43:10.156 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120353834198503426[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 10:43:10.157 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120353834198503426[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š18 ms -------------
2021-11-29 10:43:10.203 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120353834466938880[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:43:10.203 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120353834466938880[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:43:10.204 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120353834466938880[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:43:10.204 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120353834466938880[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:43:10.204 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120353834466938880[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 10:43:10.205 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120353834466938880[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:43:10.205 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120353834466938880[0;39m ==> Parameters: 0(Long)
2021-11-29 10:43:10.206 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120353834466938880[0;39m <==    Columns: count(0)
2021-11-29 10:43:10.206 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120353834466938880[0;39m <==        Row: 0
2021-11-29 10:43:10.206 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120353834466938880[0;39m <==      Total: 1
2021-11-29 10:43:10.206 INFO  com.suplin.demo.service.EbookTable                :50   [32m120353834466938880[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:43:10.207 INFO  com.suplin.demo.service.EbookTable                :51   [32m120353834466938880[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:43:10.207 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120353834466938880[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:43:10.207 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120353834466938880[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:43:11.039 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120353837973377024[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:43:11.039 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120353837973377026[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:43:11.039 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120353837973377025[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:43:11.039 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120353837973377026[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 10:43:11.039 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120353837973377024[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 10:43:11.039 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120353837973377025[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 10:43:11.039 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120353837973377026[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 10:43:11.039 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120353837973377024[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 10:43:11.039 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120353837973377025[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 10:43:11.039 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120353837973377026[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:43:11.039 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120353837973377024[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:43:11.040 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120353837973377025[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:43:11.040 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120353837973377026[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:43:11.040 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120353837973377024[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:43:11.040 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120353837973377025[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:43:11.040 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120353837973377026[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 10:43:11.040 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120353837973377024[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:43:11.040 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120353837973377025[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:43:11.040 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120353837973377024[0;39m ==> Parameters: 
2021-11-29 10:43:11.040 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120353837973377026[0;39m ==> Parameters: 
2021-11-29 10:43:11.040 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120353837973377025[0;39m ==> Parameters: 
2021-11-29 10:43:11.041 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120353837973377024[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 10:43:11.041 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120353837973377025[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 10:43:11.041 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353837973377026[0;39m <==    Columns: id, parent, name, sort
2021-11-29 10:43:11.041 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120353837973377024[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 10:43:11.041 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353837973377026[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 10:43:11.041 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120353837973377025[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 10:43:11.042 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353837973377026[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 10:43:11.042 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120353837973377024[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 10:43:11.042 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353837973377026[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 10:43:11.042 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120353837973377025[0;39m <==        Row: 2021-11-29, 134, 74, 9, 5
2021-11-29 10:43:11.042 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120353837973377024[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 10:43:11.042 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353837973377026[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 10:43:11.042 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120353837973377024[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 10:43:11.042 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120353837973377025[0;39m <==      Total: 2
2021-11-29 10:43:11.042 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120353837973377024[0;39m <==      Total: 4
2021-11-29 10:43:11.042 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353837973377026[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 10:43:11.042 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353837973377026[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 10:43:11.043 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120353837973377025[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":134,"viewIncrease":9,"voteCount":74,"voteIncrease":5}],"success":true}
2021-11-29 10:43:11.043 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120353837973377024[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 10:43:11.043 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353837973377026[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 10:43:11.043 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120353837973377025[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:43:11.043 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120353837973377024[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:43:11.043 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353837973377026[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 10:43:11.043 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353837973377026[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 10:43:11.043 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353837973377026[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 10:43:11.043 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353837973377026[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 10:43:11.043 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353837973377026[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 10:43:11.044 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353837973377026[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 10:43:11.044 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353837973377026[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 10:43:11.044 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353837973377026[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 10:43:11.045 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120353837973377026[0;39m <==      Total: 15
2021-11-29 10:43:11.046 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120353837973377026[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 10:43:11.046 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120353837973377026[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2021-11-29 10:43:11.112 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120353838279561216[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:43:11.112 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120353838279561216[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:43:11.112 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120353838279561216[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:43:11.113 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120353838279561216[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:43:11.113 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120353838279561216[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 10:43:11.113 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120353838279561216[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:43:11.114 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120353838279561216[0;39m ==> Parameters: 0(Long)
2021-11-29 10:43:11.114 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120353838279561216[0;39m <==    Columns: count(0)
2021-11-29 10:43:11.114 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120353838279561216[0;39m <==        Row: 0
2021-11-29 10:43:11.115 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120353838279561216[0;39m <==      Total: 1
2021-11-29 10:43:11.115 INFO  com.suplin.demo.service.EbookTable                :50   [32m120353838279561216[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:43:11.115 INFO  com.suplin.demo.service.EbookTable                :51   [32m120353838279561216[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:43:11.115 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120353838279561216[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:43:11.115 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120353838279561216[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š3 ms -------------
2021-11-29 10:43:15.010 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120353854628958208[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:43:15.011 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120353854628958208[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 10:43:15.011 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120353854628958208[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 10:43:15.011 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120353854628958208[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:43:15.012 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120353854628958208[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:43:15.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120353854628958208[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:43:15.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120353854628958208[0;39m ==> Parameters: 
2021-11-29 10:43:15.013 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120353854628958208[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 10:43:15.014 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120353854628958208[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 10:43:15.014 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120353854628958208[0;39m <==        Row: 2021-11-29, 134, 74, 9, 5
2021-11-29 10:43:15.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120353854628958208[0;39m <==      Total: 2
2021-11-29 10:43:15.015 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120353854628958208[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":134,"viewIncrease":9,"voteCount":74,"voteIncrease":5}],"success":true}
2021-11-29 10:43:15.015 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120353854628958208[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 10:43:15.017 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120353854658318336[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:43:15.017 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120353854658318337[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:43:15.018 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120353854658318336[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 10:43:15.018 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120353854658318336[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 10:43:15.018 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120353854658318337[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 10:43:15.018 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120353854658318336[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:43:15.018 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120353854658318337[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 10:43:15.018 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120353854658318337[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:43:15.018 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120353854658318337[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:43:15.019 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120353854658318337[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:43:15.019 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120353854658318337[0;39m ==> Parameters: 
2021-11-29 10:43:15.020 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120353854658318337[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 10:43:15.020 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120353854658318337[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 10:43:15.021 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120353854658318337[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 10:43:15.021 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120353854658318337[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 10:43:15.021 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120353854658318337[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 10:43:15.021 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120353854658318337[0;39m <==      Total: 4
2021-11-29 10:43:15.022 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120353854658318337[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 10:43:15.022 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120353854658318337[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2021-11-29 10:43:15.018 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120353854658318336[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:43:15.023 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120353854658318336[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 10:43:15.024 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120353854658318336[0;39m ==> Parameters: 
2021-11-29 10:43:15.040 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353854658318336[0;39m <==    Columns: id, parent, name, sort
2021-11-29 10:43:15.040 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353854658318336[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 10:43:15.041 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353854658318336[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 10:43:15.041 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353854658318336[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 10:43:15.041 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353854658318336[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 10:43:15.041 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353854658318336[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 10:43:15.042 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353854658318336[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 10:43:15.042 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353854658318336[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 10:43:15.042 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353854658318336[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 10:43:15.042 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353854658318336[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 10:43:15.042 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353854658318336[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 10:43:15.043 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353854658318336[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 10:43:15.043 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353854658318336[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 10:43:15.043 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353854658318336[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 10:43:15.043 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353854658318336[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 10:43:15.043 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353854658318336[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 10:43:15.044 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120353854658318336[0;39m <==      Total: 15
2021-11-29 10:43:15.044 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120353854658318336[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 10:43:15.044 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120353854658318336[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š27 ms -------------
2021-11-29 10:43:15.088 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120353854956113920[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:43:15.088 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120353854956113920[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:43:15.088 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120353854956113920[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:43:15.088 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120353854956113920[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:43:15.088 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120353854956113920[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 10:43:15.089 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120353854956113920[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:43:15.089 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120353854956113920[0;39m ==> Parameters: 0(Long)
2021-11-29 10:43:15.090 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120353854956113920[0;39m <==    Columns: count(0)
2021-11-29 10:43:15.090 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120353854956113920[0;39m <==        Row: 0
2021-11-29 10:43:15.091 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120353854956113920[0;39m <==      Total: 1
2021-11-29 10:43:15.091 INFO  com.suplin.demo.service.EbookTable                :50   [32m120353854956113920[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:43:15.091 INFO  com.suplin.demo.service.EbookTable                :51   [32m120353854956113920[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:43:15.091 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120353854956113920[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:43:15.092 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120353854956113920[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2021-11-29 10:43:15.116 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:43:15.211 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:43:16.427 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120353860572286978[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:43:16.427 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120353860572286977[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:43:16.427 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120353860572286976[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:43:16.427 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120353860572286976[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-statistic GET
2021-11-29 10:43:16.427 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120353860572286977[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook-snapshot/get-30-statistic GET
2021-11-29 10:43:16.427 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120353860572286978[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/category/allCategory GET
2021-11-29 10:43:16.427 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120353860572286976[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.getStatistic
2021-11-29 10:43:16.427 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120353860572286977[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookSnapshotController.get30Statistic
2021-11-29 10:43:16.427 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120353860572286978[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.CategoryController.all
2021-11-29 10:43:16.427 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120353860572286976[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:43:16.427 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120353860572286977[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:43:16.427 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120353860572286976[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:43:16.427 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120353860572286978[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:43:16.427 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120353860572286977[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:43:16.427 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120353860572286978[0;39m è¯·æ±‚å‚æ•°: []
2021-11-29 10:43:16.427 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120353860572286976[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:43:16.427 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120353860572286977[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-11-29 10:43:16.428 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120353860572286978[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-11-29 10:43:16.428 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120353860572286976[0;39m ==> Parameters: 
2021-11-29 10:43:16.428 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120353860572286977[0;39m ==> Parameters: 
2021-11-29 10:43:16.428 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120353860572286978[0;39m ==> Parameters: 
2021-11-29 10:43:16.428 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120353860572286977[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-11-29 10:43:16.428 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353860572286978[0;39m <==    Columns: id, parent, name, sort
2021-11-29 10:43:16.428 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120353860572286976[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-11-29 10:43:16.429 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120353860572286977[0;39m <==        Row: 2021-11-25, 56, 133
2021-11-29 10:43:16.429 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353860572286978[0;39m <==        Row: 116455646257352704, 0, java, 100
2021-11-29 10:43:16.429 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120353860572286976[0;39m <==        Row: 2021-11-28, 125, 69, 0, 0
2021-11-29 10:43:16.429 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353860572286978[0;39m <==        Row: 116455730147627008, 100, java web, 101
2021-11-29 10:43:16.429 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120353860572286977[0;39m <==        Row: 2021-11-26, 23, 40
2021-11-29 10:43:16.429 TRACE c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m120353860572286976[0;39m <==        Row: 2021-11-29, 134, 74, 9, 5
2021-11-29 10:43:16.429 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353860572286978[0;39m <==        Row: 116455797663338496, 100, jdk, 102
2021-11-29 10:43:16.429 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120353860572286977[0;39m <==        Row: 2021-11-27, 0, 0
2021-11-29 10:43:16.429 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m120353860572286976[0;39m <==      Total: 2
2021-11-29 10:43:16.430 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353860572286978[0;39m <==        Row: 116468200702611456, 0, python, 200
2021-11-29 10:43:16.430 TRACE c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m120353860572286977[0;39m <==        Row: 2021-11-28, 0, 0
2021-11-29 10:43:16.430 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353860572286978[0;39m <==        Row: 201, 200, åŸºç¡€çŸ¥è¯†, 201
2021-11-29 10:43:16.430 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120353860572286976[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1638028800000,"viewCount":125,"viewIncrease":0,"voteCount":69,"voteIncrease":0},{"date":1638115200000,"viewCount":134,"viewIncrease":9,"voteCount":74,"voteIncrease":5}],"success":true}
2021-11-29 10:43:16.430 DEBUG c.s.d.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m120353860572286977[0;39m <==      Total: 4
2021-11-29 10:43:16.430 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120353860572286976[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š3 ms -------------
2021-11-29 10:43:16.430 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353860572286978[0;39m <==        Row: 202, 200, pycharm, 202
2021-11-29 10:43:16.430 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120353860572286977[0;39m è¿”å›žç»“æžœ: {"content":[{"date":1637769600000,"viewIncrease":56,"voteIncrease":133},{"date":1637856000000,"viewIncrease":23,"voteIncrease":40},{"date":1637942400000,"viewIncrease":0,"voteIncrease":0},{"date":1638028800000,"viewIncrease":0,"voteIncrease":0}],"success":true}
2021-11-29 10:43:16.430 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353860572286978[0;39m <==        Row: 301, 300, mysql, 301
2021-11-29 10:43:16.430 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120353860572286977[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š3 ms -------------
2021-11-29 10:43:16.430 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353860572286978[0;39m <==        Row: 302, 300, yoursql, 302
2021-11-29 10:43:16.431 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353860572286978[0;39m <==        Row: 401, 400, çˆ¬è™«, 401
2021-11-29 10:43:16.431 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353860572286978[0;39m <==        Row: 116099732283199488, 400, pycharm, 402
2021-11-29 10:43:16.431 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353860572286978[0;39m <==        Row: 116358881990545408, 500, eeeeeeeeeeeeeeeeeeeeee, 504
2021-11-29 10:43:16.431 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353860572286978[0;39m <==        Row: 116360714209333248, 500, a, 506
2021-11-29 10:43:16.432 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353860572286978[0;39m <==        Row: 116357887068082176, 500, aaaaaa, 508
2021-11-29 10:43:16.432 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353860572286978[0;39m <==        Row: 116369475061813248, 500, asdfs, 509
2021-11-29 10:43:16.432 TRACE c.s.demo.mapper.CategoryMapper.selectByExample    :143  [32m120353860572286978[0;39m <==        Row: 116360854831763456, 600, é˜¿æ–¯è’‚èŠ¬, 601
2021-11-29 10:43:16.432 DEBUG c.s.demo.mapper.CategoryMapper.selectByExample    :137  [32m120353860572286978[0;39m <==      Total: 15
2021-11-29 10:43:16.433 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120353860572286978[0;39m è¿”å›žç»“æžœ: {"content":[{"id":116455646257352704,"name":"java","parent":0,"sort":100},{"id":116455730147627008,"name":"java web","parent":100,"sort":101},{"id":116455797663338496,"name":"jdk","parent":100,"sort":102},{"id":116468200702611456,"name":"python","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€çŸ¥è¯†","parent":200,"sort":201},{"id":202,"name":"pycharm","parent":200,"sort":202},{"id":301,"name":"mysql","parent":300,"sort":301},{"id":302,"name":"yoursql","parent":300,"sort":302},{"id":401,"name":"çˆ¬è™«","parent":400,"sort":401},{"id":116099732283199488,"name":"pycharm","parent":400,"sort":402},{"id":116358881990545408,"name":"eeeeeeeeeeeeeeeeeeeeee","parent":500,"sort":504},{"id":116360714209333248,"name":"a","parent":500,"sort":506},{"id":116357887068082176,"name":"aaaaaa","parent":500,"sort":508},{"id":116369475061813248,"name":"asdfs","parent":500,"sort":509},{"id":116360854831763456,"name":"é˜¿æ–¯è’‚èŠ¬","parent":600,"sort":601}],"success":true}
2021-11-29 10:43:16.434 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120353860572286978[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2021-11-29 10:43:16.483 INFO  com.suplin.demo.aspect.LogAspect                  :54   [32m120353860807168000[0;39m ------------- å¼€å§‹ -------------
2021-11-29 10:43:16.483 INFO  com.suplin.demo.aspect.LogAspect                  :55   [32m120353860807168000[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8089/ebook/list GET
2021-11-29 10:43:16.483 INFO  com.suplin.demo.aspect.LogAspect                  :56   [32m120353860807168000[0;39m ç±»åæ–¹æ³•: com.suplin.demo.controller.EbookController.wiki_table
2021-11-29 10:43:16.483 INFO  com.suplin.demo.aspect.LogAspect                  :57   [32m120353860807168000[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2021-11-29 10:43:16.484 INFO  com.suplin.demo.aspect.LogAspect                  :78   [32m120353860807168000[0;39m è¯·æ±‚å‚æ•°: [{"category2Id":0,"page":1,"size":100}]
2021-11-29 10:43:16.484 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120353860807168000[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-11-29 10:43:16.485 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120353860807168000[0;39m ==> Parameters: 0(Long)
2021-11-29 10:43:16.485 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120353860807168000[0;39m <==    Columns: count(0)
2021-11-29 10:43:16.485 TRACE c.s.demo.mapper.EbookMapper.selectByExample_COUNT :143  [32m120353860807168000[0;39m <==        Row: 0
2021-11-29 10:43:16.486 DEBUG c.s.demo.mapper.EbookMapper.selectByExample_COUNT :137  [32m120353860807168000[0;39m <==      Total: 1
2021-11-29 10:43:16.486 INFO  com.suplin.demo.service.EbookTable                :50   [32m120353860807168000[0;39m æ€»è¡Œæ•°ï¼š0
2021-11-29 10:43:16.486 INFO  com.suplin.demo.service.EbookTable                :51   [32m120353860807168000[0;39m æ€»é¡µæ•°ï¼š1
2021-11-29 10:43:16.486 INFO  com.suplin.demo.aspect.LogAspect                  :90   [32m120353860807168000[0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2021-11-29 10:43:16.486 INFO  com.suplin.demo.aspect.LogAspect                  :91   [32m120353860807168000[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š3 ms -------------
2021-11-29 10:43:35.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120353938477289472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:43:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120353938477289472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:43:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120353938477289472[0;39m ==> Parameters: 
2021-11-29 10:43:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120353938477289472[0;39m <==    Updates: 3
2021-11-29 10:43:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120353938477289472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:43:45.095 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:43:45.204 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:44:00.002 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120354043339083776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:44:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120354043339083776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:44:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120354043339083776[0;39m ==> Parameters: 
2021-11-29 10:44:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120354043339083776[0;39m <==    Updates: 0
2021-11-29 10:44:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120354043339083776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 10:44:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120354064318992384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:44:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120354064318992384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:44:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120354064318992384[0;39m ==> Parameters: 
2021-11-29 10:44:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120354064318992384[0;39m <==    Updates: 3
2021-11-29 10:44:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120354064318992384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:44:15.109 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:44:15.223 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:44:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120354190164889600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:44:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120354190164889600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:44:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120354190164889600[0;39m ==> Parameters: 
2021-11-29 10:44:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120354190164889600[0;39m <==    Updates: 3
2021-11-29 10:44:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120354190164889600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 10:44:45.102 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:44:45.195 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:45:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120354295009906688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:45:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120354295009906688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:45:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120354295009906688[0;39m ==> Parameters: 
2021-11-29 10:45:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120354295009906688[0;39m <==    Updates: 0
2021-11-29 10:45:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120354295009906688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 10:45:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120354315977232384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:45:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120354315977232384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:45:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120354315977232384[0;39m ==> Parameters: 
2021-11-29 10:45:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120354315977232384[0;39m <==    Updates: 3
2021-11-29 10:45:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120354315977232384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:45:15.108 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:45:15.217 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:45:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120354441818935296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:45:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120354441818935296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:45:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120354441818935296[0;39m ==> Parameters: 
2021-11-29 10:45:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120354441818935296[0;39m <==    Updates: 3
2021-11-29 10:45:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120354441818935296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:45:45.096 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:45:45.220 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:46:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120354546676535296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:46:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120354546676535296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:46:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120354546676535296[0;39m ==> Parameters: 
2021-11-29 10:46:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120354546676535296[0;39m <==    Updates: 0
2021-11-29 10:46:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120354546676535296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 10:46:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120354567681609728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:46:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120354567681609728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:46:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120354567681609728[0;39m ==> Parameters: 
2021-11-29 10:46:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120354567681609728[0;39m <==    Updates: 3
2021-11-29 10:46:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120354567681609728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 10:46:15.095 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:46:15.218 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:46:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120354693489758208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:46:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120354693489758208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:46:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120354693489758208[0;39m ==> Parameters: 
2021-11-29 10:46:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120354693489758208[0;39m <==    Updates: 3
2021-11-29 10:46:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120354693489758208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 10:46:45.106 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:46:45.217 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:47:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120354798330580992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:47:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120354798330580992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:47:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120354798330580992[0;39m ==> Parameters: 
2021-11-29 10:47:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120354798330580992[0;39m <==    Updates: 0
2021-11-29 10:47:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120354798330580992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 10:47:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120354819297906688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:47:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120354819297906688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:47:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120354819297906688[0;39m ==> Parameters: 
2021-11-29 10:47:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120354819297906688[0;39m <==    Updates: 3
2021-11-29 10:47:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120354819297906688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 10:47:15.094 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:47:15.187 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:47:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120354945131220992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:47:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120354945131220992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:47:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120354945131220992[0;39m ==> Parameters: 
2021-11-29 10:47:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120354945131220992[0;39m <==    Updates: 3
2021-11-29 10:47:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120354945131220992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:47:45.089 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:47:45.214 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:48:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120355050018181120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:48:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120355050018181120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:48:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120355050018181120[0;39m ==> Parameters: 
2021-11-29 10:48:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120355050018181120[0;39m <==    Updates: 0
2021-11-29 10:48:00.018 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120355050018181120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 10:48:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120355070972923904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:48:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120355070972923904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:48:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120355070972923904[0;39m ==> Parameters: 
2021-11-29 10:48:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120355070972923904[0;39m <==    Updates: 3
2021-11-29 10:48:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120355070972923904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 10:48:15.113 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:48:15.223 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:48:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120355196810432512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:48:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120355196810432512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:48:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120355196810432512[0;39m ==> Parameters: 
2021-11-29 10:48:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120355196810432512[0;39m <==    Updates: 3
2021-11-29 10:48:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120355196810432512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 10:48:45.104 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:48:45.182 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:49:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120355301680615424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:49:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120355301680615424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:49:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120355301680615424[0;39m ==> Parameters: 
2021-11-29 10:49:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120355301680615424[0;39m <==    Updates: 0
2021-11-29 10:49:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120355301680615424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 10:49:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120355322631163904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:49:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120355322631163904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:49:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120355322631163904[0;39m ==> Parameters: 
2021-11-29 10:49:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120355322631163904[0;39m <==    Updates: 3
2021-11-29 10:49:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120355322631163904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 10:49:15.104 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:49:15.202 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:49:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120355448451895296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:49:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120355448451895296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:49:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120355448451895296[0;39m ==> Parameters: 
2021-11-29 10:49:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120355448451895296[0;39m <==    Updates: 3
2021-11-29 10:49:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120355448451895296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:49:45.108 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:49:45.202 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:50:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120355553330466816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:50:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120355553330466816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:50:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120355553330466816[0;39m ==> Parameters: 
2021-11-29 10:50:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120355553330466816[0;39m <==    Updates: 0
2021-11-29 10:50:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120355553330466816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 10:50:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120355574272626688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:50:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120355574272626688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:50:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120355574272626688[0;39m ==> Parameters: 
2021-11-29 10:50:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120355574272626688[0;39m <==    Updates: 3
2021-11-29 10:50:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120355574272626688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:50:15.100 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:50:15.210 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:50:35.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120355700084969472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:50:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120355700084969472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:50:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120355700084969472[0;39m ==> Parameters: 
2021-11-29 10:50:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120355700084969472[0;39m <==    Updates: 3
2021-11-29 10:50:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120355700084969472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:50:45.084 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:50:45.194 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:51:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120355804980318208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:51:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120355804980318208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:51:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120355804980318208[0;39m ==> Parameters: 
2021-11-29 10:51:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120355804980318208[0;39m <==    Updates: 0
2021-11-29 10:51:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120355804980318208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 10:51:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120355825956032512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:51:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120355825956032512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:51:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120355825956032512[0;39m ==> Parameters: 
2021-11-29 10:51:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120355825956032512[0;39m <==    Updates: 3
2021-11-29 10:51:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120355825956032512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 10:51:15.103 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:51:15.211 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:51:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120355951755792384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:51:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120355951755792384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:51:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120355951755792384[0;39m ==> Parameters: 
2021-11-29 10:51:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120355951755792384[0;39m <==    Updates: 3
2021-11-29 10:51:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120355951755792384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 10:51:45.095 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:51:45.205 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:52:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120356056630169600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:52:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120356056630169600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:52:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120356056630169600[0;39m ==> Parameters: 
2021-11-29 10:52:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120356056630169600[0;39m <==    Updates: 0
2021-11-29 10:52:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120356056630169600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 10:52:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120356077605883904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:52:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120356077605883904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:52:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120356077605883904[0;39m ==> Parameters: 
2021-11-29 10:52:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120356077605883904[0;39m <==    Updates: 3
2021-11-29 10:52:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120356077605883904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶6æ¯«ç§’
2021-11-29 10:52:15.071 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:52:15.182 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:52:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120356203435003904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:52:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120356203435003904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:52:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120356203435003904[0;39m ==> Parameters: 
2021-11-29 10:52:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120356203435003904[0;39m <==    Updates: 3
2021-11-29 10:52:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120356203435003904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶6æ¯«ç§’
2021-11-29 10:52:45.102 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:52:45.225 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:53:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120356308317769728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:53:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120356308317769728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:53:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120356308317769728[0;39m ==> Parameters: 
2021-11-29 10:53:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120356308317769728[0;39m <==    Updates: 0
2021-11-29 10:53:00.018 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120356308317769728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 10:53:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120356329247346688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:53:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120356329247346688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:53:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120356329247346688[0;39m ==> Parameters: 
2021-11-29 10:53:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120356329247346688[0;39m <==    Updates: 3
2021-11-29 10:53:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120356329247346688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:53:15.096 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:53:15.222 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:53:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120356455114215424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:53:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120356455114215424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:53:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120356455114215424[0;39m ==> Parameters: 
2021-11-29 10:53:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120356455114215424[0;39m <==    Updates: 3
2021-11-29 10:53:35.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120356455114215424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 10:53:45.104 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:53:45.197 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:54:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120356559934066688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:54:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120356559934066688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:54:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120356559934066688[0;39m ==> Parameters: 
2021-11-29 10:54:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120356559934066688[0;39m <==    Updates: 0
2021-11-29 10:54:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120356559934066688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 10:54:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120356580930752512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:54:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120356580930752512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:54:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120356580930752512[0;39m ==> Parameters: 
2021-11-29 10:54:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120356580930752512[0;39m <==    Updates: 3
2021-11-29 10:54:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120356580930752512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 10:54:15.106 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:54:15.200 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:54:35.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120356706717929472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:54:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120356706717929472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:54:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120356706717929472[0;39m ==> Parameters: 
2021-11-29 10:54:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120356706717929472[0;39m <==    Updates: 3
2021-11-29 10:54:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120356706717929472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 10:54:45.102 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:54:45.228 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:55:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120356811625861120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:55:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120356811625861120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:55:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120356811625861120[0;39m ==> Parameters: 
2021-11-29 10:55:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120356811625861120[0;39m <==    Updates: 0
2021-11-29 10:55:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120356811625861120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 10:55:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120356832588992512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:55:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120356832588992512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:55:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120356832588992512[0;39m ==> Parameters: 
2021-11-29 10:55:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120356832588992512[0;39m <==    Updates: 3
2021-11-29 10:55:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120356832588992512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:55:15.101 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:55:15.210 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:55:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120356958413918208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:55:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120356958413918208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:55:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120356958413918208[0;39m ==> Parameters: 
2021-11-29 10:55:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120356958413918208[0;39m <==    Updates: 3
2021-11-29 10:55:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120356958413918208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:55:45.119 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:55:45.229 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:56:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120357063246352384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:56:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120357063246352384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:56:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120357063246352384[0;39m ==> Parameters: 
2021-11-29 10:56:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120357063246352384[0;39m <==    Updates: 0
2021-11-29 10:56:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120357063246352384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 10:56:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120357084226260992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:56:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120357084226260992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:56:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120357084226260992[0;39m ==> Parameters: 
2021-11-29 10:56:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120357084226260992[0;39m <==    Updates: 3
2021-11-29 10:56:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120357084226260992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:56:15.078 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:56:15.218 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:56:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120357210084741120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:56:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120357210084741120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:56:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120357210084741120[0;39m ==> Parameters: 
2021-11-29 10:56:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120357210084741120[0;39m <==    Updates: 3
2021-11-29 10:56:35.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120357210084741120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 10:56:45.100 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:56:45.209 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:57:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120357314946535424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:57:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120357314946535424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:57:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120357314946535424[0;39m ==> Parameters: 
2021-11-29 10:57:00.020 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120357314946535424[0;39m <==    Updates: 0
2021-11-29 10:57:00.021 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120357314946535424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 10:57:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120357335897083904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:57:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120357335897083904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:57:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120357335897083904[0;39m ==> Parameters: 
2021-11-29 10:57:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120357335897083904[0;39m <==    Updates: 3
2021-11-29 10:57:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120357335897083904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 10:57:15.124 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:57:15.200 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:57:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120357461722009600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:57:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120357461722009600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:57:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120357461722009600[0;39m ==> Parameters: 
2021-11-29 10:57:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120357461722009600[0;39m <==    Updates: 3
2021-11-29 10:57:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120357461722009600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:57:45.099 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:57:45.210 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:58:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120357566592192512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:58:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120357566592192512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:58:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120357566592192512[0;39m ==> Parameters: 
2021-11-29 10:58:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120357566592192512[0;39m <==    Updates: 0
2021-11-29 10:58:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120357566592192512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 10:58:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120357587542740992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:58:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120357587542740992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:58:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120357587542740992[0;39m ==> Parameters: 
2021-11-29 10:58:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120357587542740992[0;39m <==    Updates: 3
2021-11-29 10:58:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120357587542740992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 10:58:15.122 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:58:15.199 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:58:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120357713388638208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:58:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120357713388638208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:58:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120357713388638208[0;39m ==> Parameters: 
2021-11-29 10:58:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120357713388638208[0;39m <==    Updates: 3
2021-11-29 10:58:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120357713388638208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 10:58:45.110 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:58:45.219 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:59:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120357818229460992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 10:59:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120357818229460992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 10:59:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120357818229460992[0;39m ==> Parameters: 
2021-11-29 10:59:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120357818229460992[0;39m <==    Updates: 0
2021-11-29 10:59:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120357818229460992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 10:59:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120357839188398080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:59:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120357839188398080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:59:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120357839188398080[0;39m ==> Parameters: 
2021-11-29 10:59:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120357839188398080[0;39m <==    Updates: 3
2021-11-29 10:59:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120357839188398080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 10:59:15.104 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:59:15.212 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:59:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120357965063655424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 10:59:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120357965063655424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 10:59:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120357965063655424[0;39m ==> Parameters: 
2021-11-29 10:59:35.019 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120357965063655424[0;39m <==    Updates: 3
2021-11-29 10:59:35.020 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120357965063655424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶6æ¯«ç§’
2021-11-29 10:59:45.110 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 10:59:45.187 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:00:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120358069925449728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 11:00:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120358069925449728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 11:00:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120358069925449728[0;39m ==> Parameters: 
2021-11-29 11:00:00.021 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120358069925449728[0;39m <==    Updates: 0
2021-11-29 11:00:00.021 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120358069925449728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 11:00:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120358090896969728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:00:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120358090896969728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:00:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120358090896969728[0;39m ==> Parameters: 
2021-11-29 11:00:05.019 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120358090896969728[0;39m <==    Updates: 3
2021-11-29 11:00:05.020 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120358090896969728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 11:00:15.104 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:00:15.212 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:00:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120358216717701120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:00:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120358216717701120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:00:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120358216717701120[0;39m ==> Parameters: 
2021-11-29 11:00:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120358216717701120[0;39m <==    Updates: 3
2021-11-29 11:00:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120358216717701120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:00:45.092 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:00:45.209 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:01:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120358321541746688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 11:01:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120358321541746688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 11:01:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120358321541746688[0;39m ==> Parameters: 
2021-11-29 11:01:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120358321541746688[0;39m <==    Updates: 0
2021-11-29 11:01:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120358321541746688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 11:01:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120358342555209728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:01:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120358342555209728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:01:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120358342555209728[0;39m ==> Parameters: 
2021-11-29 11:01:05.020 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120358342555209728[0;39m <==    Updates: 3
2021-11-29 11:01:05.020 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120358342555209728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 11:01:15.100 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:01:15.224 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:01:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120358468346580992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:01:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120358468346580992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:01:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120358468346580992[0;39m ==> Parameters: 
2021-11-29 11:01:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120358468346580992[0;39m <==    Updates: 3
2021-11-29 11:01:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120358468346580992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶6æ¯«ç§’
2021-11-29 11:01:45.112 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:01:45.206 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:02:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120358573199986688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 11:02:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120358573199986688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 11:02:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120358573199986688[0;39m ==> Parameters: 
2021-11-29 11:02:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120358573199986688[0;39m <==    Updates: 0
2021-11-29 11:02:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120358573199986688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 11:02:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120358594192478208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:02:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120358594192478208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:02:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120358594192478208[0;39m ==> Parameters: 
2021-11-29 11:02:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120358594192478208[0;39m <==    Updates: 3
2021-11-29 11:02:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120358594192478208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:02:15.107 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:02:15.227 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:02:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120358720021598208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:02:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120358720021598208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:02:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120358720021598208[0;39m ==> Parameters: 
2021-11-29 11:02:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120358720021598208[0;39m <==    Updates: 3
2021-11-29 11:02:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120358720021598208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:02:45.109 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:02:45.221 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:03:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120358824875003904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 11:03:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120358824875003904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 11:03:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120358824875003904[0;39m ==> Parameters: 
2021-11-29 11:03:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120358824875003904[0;39m <==    Updates: 0
2021-11-29 11:03:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120358824875003904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 11:03:05.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120358845817163776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:03:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120358845817163776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:03:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120358845817163776[0;39m ==> Parameters: 
2021-11-29 11:03:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120358845817163776[0;39m <==    Updates: 3
2021-11-29 11:03:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120358845817163776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:03:15.094 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:03:15.219 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:03:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120358971650478080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:03:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120358971650478080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:03:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120358971650478080[0;39m ==> Parameters: 
2021-11-29 11:03:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120358971650478080[0;39m <==    Updates: 3
2021-11-29 11:03:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120358971650478080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:03:45.123 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:03:45.234 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:04:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120359076541632512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 11:04:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120359076541632512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 11:04:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120359076541632512[0;39m ==> Parameters: 
2021-11-29 11:04:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120359076541632512[0;39m <==    Updates: 0
2021-11-29 11:04:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120359076541632512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 11:04:05.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120359097471209472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:04:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120359097471209472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:04:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120359097471209472[0;39m ==> Parameters: 
2021-11-29 11:04:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120359097471209472[0;39m <==    Updates: 3
2021-11-29 11:04:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120359097471209472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 11:04:15.120 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:04:15.215 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:04:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120359223312912384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:04:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120359223312912384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:04:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120359223312912384[0;39m ==> Parameters: 
2021-11-29 11:04:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120359223312912384[0;39m <==    Updates: 3
2021-11-29 11:04:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120359223312912384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:04:45.102 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:04:45.211 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:05:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120359328191483904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 11:05:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120359328191483904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 11:05:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120359328191483904[0;39m ==> Parameters: 
2021-11-29 11:05:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120359328191483904[0;39m <==    Updates: 0
2021-11-29 11:05:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120359328191483904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 11:05:05.000 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120359349125255168[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:05:05.000 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120359349125255168[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:05:05.001 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120359349125255168[0;39m ==> Parameters: 
2021-11-29 11:05:05.001 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120359349125255168[0;39m <==    Updates: 3
2021-11-29 11:05:05.002 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120359349125255168[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:05:15.101 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:05:15.180 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:05:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120359474996318208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:05:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120359474996318208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:05:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120359474996318208[0;39m ==> Parameters: 
2021-11-29 11:05:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120359474996318208[0;39m <==    Updates: 3
2021-11-29 11:05:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120359474996318208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:05:45.094 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:05:45.232 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:06:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120359579874889728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 11:06:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120359579874889728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 11:06:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120359579874889728[0;39m ==> Parameters: 
2021-11-29 11:06:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120359579874889728[0;39m <==    Updates: 0
2021-11-29 11:06:00.018 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120359579874889728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 11:06:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120359600817049600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:06:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120359600817049600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:06:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120359600817049600[0;39m ==> Parameters: 
2021-11-29 11:06:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120359600817049600[0;39m <==    Updates: 3
2021-11-29 11:06:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120359600817049600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:06:15.104 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:06:15.227 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:06:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120359726679724032[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:06:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120359726679724032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:06:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120359726679724032[0;39m ==> Parameters: 
2021-11-29 11:06:35.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120359726679724032[0;39m <==    Updates: 3
2021-11-29 11:06:35.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120359726679724032[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:06:45.082 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:06:45.193 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:07:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120359831524741120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 11:07:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120359831524741120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 11:07:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120359831524741120[0;39m ==> Parameters: 
2021-11-29 11:07:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120359831524741120[0;39m <==    Updates: 0
2021-11-29 11:07:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120359831524741120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 11:07:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120359852500455424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:07:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120359852500455424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:07:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120359852500455424[0;39m ==> Parameters: 
2021-11-29 11:07:05.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120359852500455424[0;39m <==    Updates: 3
2021-11-29 11:07:05.019 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120359852500455424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 11:07:15.107 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:07:15.232 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:07:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120359978296020992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:07:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120359978296020992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:07:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120359978296020992[0;39m ==> Parameters: 
2021-11-29 11:07:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120359978296020992[0;39m <==    Updates: 3
2021-11-29 11:07:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120359978296020992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:07:45.123 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:07:45.234 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:08:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120360083153620992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 11:08:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120360083153620992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 11:08:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120360083153620992[0;39m ==> Parameters: 
2021-11-29 11:08:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120360083153620992[0;39m <==    Updates: 0
2021-11-29 11:08:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120360083153620992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 11:08:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120360104112558080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:08:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120360104112558080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:08:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120360104112558080[0;39m ==> Parameters: 
2021-11-29 11:08:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120360104112558080[0;39m <==    Updates: 3
2021-11-29 11:08:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120360104112558080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:08:15.114 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:08:15.207 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:08:35.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120360229971038208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:08:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120360229971038208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:08:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120360229971038208[0;39m ==> Parameters: 
2021-11-29 11:08:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120360229971038208[0;39m <==    Updates: 3
2021-11-29 11:08:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120360229971038208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:08:45.107 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:08:45.216 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:09:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120360334841221120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 11:09:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120360334841221120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 11:09:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120360334841221120[0;39m ==> Parameters: 
2021-11-29 11:09:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120360334841221120[0;39m <==    Updates: 0
2021-11-29 11:09:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120360334841221120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 11:09:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120360355783380992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:09:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120360355783380992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:09:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120360355783380992[0;39m ==> Parameters: 
2021-11-29 11:09:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120360355783380992[0;39m <==    Updates: 3
2021-11-29 11:09:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120360355783380992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:09:15.100 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:09:15.226 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:09:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120360481633472512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:09:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120360481633472512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:09:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120360481633472512[0;39m ==> Parameters: 
2021-11-29 11:09:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120360481633472512[0;39m <==    Updates: 3
2021-11-29 11:09:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120360481633472512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 11:09:45.116 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:09:45.194 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:10:00.002 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120360586453323776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 11:10:00.002 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120360586453323776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 11:10:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120360586453323776[0;39m ==> Parameters: 
2021-11-29 11:10:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120360586453323776[0;39m <==    Updates: 0
2021-11-29 11:10:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120360586453323776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 11:10:05.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120360607420649472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:10:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120360607420649472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:10:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120360607420649472[0;39m ==> Parameters: 
2021-11-29 11:10:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120360607420649472[0;39m <==    Updates: 3
2021-11-29 11:10:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120360607420649472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 11:10:15.116 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:10:15.223 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:10:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120360733262352384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:10:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120360733262352384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:10:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120360733262352384[0;39m ==> Parameters: 
2021-11-29 11:10:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120360733262352384[0;39m <==    Updates: 3
2021-11-29 11:10:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120360733262352384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:10:45.083 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:10:45.192 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:11:00.003 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120360838115758080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 11:11:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120360838115758080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 11:11:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120360838115758080[0;39m ==> Parameters: 
2021-11-29 11:11:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120360838115758080[0;39m <==    Updates: 0
2021-11-29 11:11:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120360838115758080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 11:11:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120360859108249600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:11:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120360859108249600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:11:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120360859108249600[0;39m ==> Parameters: 
2021-11-29 11:11:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120360859108249600[0;39m <==    Updates: 3
2021-11-29 11:11:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120360859108249600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 11:11:15.115 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:11:15.207 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:11:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120360984966729728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:11:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120360984966729728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:11:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120360984966729728[0;39m ==> Parameters: 
2021-11-29 11:11:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120360984966729728[0;39m <==    Updates: 3
2021-11-29 11:11:35.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120360984966729728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:11:45.127 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:11:45.221 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:12:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120361089824329728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 11:12:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120361089824329728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 11:12:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120361089824329728[0;39m ==> Parameters: 
2021-11-29 11:12:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120361089824329728[0;39m <==    Updates: 0
2021-11-29 11:12:00.018 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120361089824329728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 11:12:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120361110774878208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:12:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120361110774878208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:12:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120361110774878208[0;39m ==> Parameters: 
2021-11-29 11:12:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120361110774878208[0;39m <==    Updates: 3
2021-11-29 11:12:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120361110774878208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:12:15.112 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:12:15.207 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:12:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120361236578832384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:12:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120361236578832384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:12:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120361236578832384[0;39m ==> Parameters: 
2021-11-29 11:12:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120361236578832384[0;39m <==    Updates: 3
2021-11-29 11:12:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120361236578832384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:12:45.111 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:12:45.204 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:13:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120361341465792512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 11:13:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120361341465792512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 11:13:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120361341465792512[0;39m ==> Parameters: 
2021-11-29 11:13:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120361341465792512[0;39m <==    Updates: 0
2021-11-29 11:13:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120361341465792512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 11:13:05.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120361362399563776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:13:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120361362399563776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:13:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120361362399563776[0;39m ==> Parameters: 
2021-11-29 11:13:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120361362399563776[0;39m <==    Updates: 3
2021-11-29 11:13:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120361362399563776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶6æ¯«ç§’
2021-11-29 11:13:15.112 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:13:15.237 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:13:35.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120361488224489472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:13:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120361488224489472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:13:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120361488224489472[0;39m ==> Parameters: 
2021-11-29 11:13:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120361488224489472[0;39m <==    Updates: 3
2021-11-29 11:13:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120361488224489472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 11:13:45.111 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:13:45.222 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:14:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120361593098866688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 11:14:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120361593098866688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 11:14:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120361593098866688[0;39m ==> Parameters: 
2021-11-29 11:14:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120361593098866688[0;39m <==    Updates: 0
2021-11-29 11:14:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120361593098866688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 11:14:05.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120361614057803776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:14:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120361614057803776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:14:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120361614057803776[0;39m ==> Parameters: 
2021-11-29 11:14:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120361614057803776[0;39m <==    Updates: 3
2021-11-29 11:14:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120361614057803776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:14:15.120 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:14:15.229 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:14:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120361739899506688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:14:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120361739899506688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:14:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120361739899506688[0;39m ==> Parameters: 
2021-11-29 11:14:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120361739899506688[0;39m <==    Updates: 3
2021-11-29 11:14:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120361739899506688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:14:45.107 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:14:45.217 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:15:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120361844794855424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 11:15:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120361844794855424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 11:15:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120361844794855424[0;39m ==> Parameters: 
2021-11-29 11:15:00.020 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120361844794855424[0;39m <==    Updates: 0
2021-11-29 11:15:00.021 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120361844794855424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 11:15:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120361865724432384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:15:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120361865724432384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:15:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120361865724432384[0;39m ==> Parameters: 
2021-11-29 11:15:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120361865724432384[0;39m <==    Updates: 3
2021-11-29 11:15:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120361865724432384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:15:15.104 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:15:15.213 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:15:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120361991561940992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:15:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120361991561940992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:15:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120361991561940992[0;39m ==> Parameters: 
2021-11-29 11:15:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120361991561940992[0;39m <==    Updates: 3
2021-11-29 11:15:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120361991561940992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 11:15:45.120 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:15:45.230 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:16:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120362096419540992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 11:16:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120362096419540992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 11:16:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120362096419540992[0;39m ==> Parameters: 
2021-11-29 11:16:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120362096419540992[0;39m <==    Updates: 0
2021-11-29 11:16:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120362096419540992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 11:16:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120362117395255296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:16:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120362117395255296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:16:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120362117395255296[0;39m ==> Parameters: 
2021-11-29 11:16:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120362117395255296[0;39m <==    Updates: 3
2021-11-29 11:16:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120362117395255296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:16:15.100 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:16:15.212 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:16:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120362243220180992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:16:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120362243220180992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:16:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120362243220180992[0;39m ==> Parameters: 
2021-11-29 11:16:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120362243220180992[0;39m <==    Updates: 3
2021-11-29 11:16:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120362243220180992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:16:45.112 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:16:45.235 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:17:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120362348123918336[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 11:17:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120362348123918336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 11:17:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120362348123918336[0;39m ==> Parameters: 
2021-11-29 11:17:00.019 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120362348123918336[0;39m <==    Updates: 0
2021-11-29 11:17:00.019 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120362348123918336[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 11:17:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120362369078661120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:17:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120362369078661120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:17:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120362369078661120[0;39m ==> Parameters: 
2021-11-29 11:17:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120362369078661120[0;39m <==    Updates: 3
2021-11-29 11:17:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120362369078661120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:17:15.098 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:17:15.221 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:17:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120362494911975424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:17:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120362494911975424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:17:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120362494911975424[0;39m ==> Parameters: 
2021-11-29 11:17:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120362494911975424[0;39m <==    Updates: 3
2021-11-29 11:17:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120362494911975424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:17:45.118 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:17:45.230 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:18:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120362599769575424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 11:18:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120362599769575424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 11:18:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120362599769575424[0;39m ==> Parameters: 
2021-11-29 11:18:00.019 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120362599769575424[0;39m <==    Updates: 0
2021-11-29 11:18:00.019 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120362599769575424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 11:18:05.017 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120362620753678336[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:18:05.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120362620753678336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:18:05.019 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120362620753678336[0;39m ==> Parameters: 
2021-11-29 11:18:05.020 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120362620753678336[0;39m <==    Updates: 3
2021-11-29 11:18:05.020 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120362620753678336[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 11:18:15.132 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:18:15.211 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:18:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120362746574409728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:18:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120362746574409728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:18:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120362746574409728[0;39m ==> Parameters: 
2021-11-29 11:18:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120362746574409728[0;39m <==    Updates: 3
2021-11-29 11:18:35.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120362746574409728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:18:45.119 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:18:45.200 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:19:00.002 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120362851377483776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 11:19:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120362851377483776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 11:19:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120362851377483776[0;39m ==> Parameters: 
2021-11-29 11:19:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120362851377483776[0;39m <==    Updates: 0
2021-11-29 11:19:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120362851377483776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 11:19:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120362872403529728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:19:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120362872403529728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:19:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120362872403529728[0;39m ==> Parameters: 
2021-11-29 11:19:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120362872403529728[0;39m <==    Updates: 3
2021-11-29 11:19:05.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120362872403529728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:19:15.106 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:19:15.217 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:19:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120362998215872512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:19:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120362998215872512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:19:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120362998215872512[0;39m ==> Parameters: 
2021-11-29 11:19:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120362998215872512[0;39m <==    Updates: 3
2021-11-29 11:19:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120362998215872512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 11:19:45.109 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:19:45.219 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:20:00.003 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120363103039918080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 11:20:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120363103039918080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 11:20:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120363103039918080[0;39m ==> Parameters: 
2021-11-29 11:20:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120363103039918080[0;39m <==    Updates: 0
2021-11-29 11:20:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120363103039918080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 11:20:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120363124036603904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:20:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120363124036603904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:20:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120363124036603904[0;39m ==> Parameters: 
2021-11-29 11:20:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120363124036603904[0;39m <==    Updates: 3
2021-11-29 11:20:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120363124036603904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:20:15.120 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:20:15.228 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:20:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120363249865723904[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:20:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120363249865723904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:20:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120363249865723904[0;39m ==> Parameters: 
2021-11-29 11:20:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120363249865723904[0;39m <==    Updates: 3
2021-11-29 11:20:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120363249865723904[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:20:45.133 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:20:45.241 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:21:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120363354710740992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 11:21:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120363354710740992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 11:21:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120363354710740992[0;39m ==> Parameters: 
2021-11-29 11:21:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120363354710740992[0;39m <==    Updates: 0
2021-11-29 11:21:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120363354710740992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 11:21:05.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120363375661289472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:21:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120363375661289472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:21:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120363375661289472[0;39m ==> Parameters: 
2021-11-29 11:21:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120363375661289472[0;39m <==    Updates: 3
2021-11-29 11:21:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120363375661289472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 11:21:15.133 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:21:15.212 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:21:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120363501549129728[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:21:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120363501549129728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:21:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120363501549129728[0;39m ==> Parameters: 
2021-11-29 11:21:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120363501549129728[0;39m <==    Updates: 3
2021-11-29 11:21:35.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120363501549129728[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 11:21:45.130 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:21:45.208 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:22:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120363606360592384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 11:22:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120363606360592384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 11:22:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120363606360592384[0;39m ==> Parameters: 
2021-11-29 11:22:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120363606360592384[0;39m <==    Updates: 0
2021-11-29 11:22:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120363606360592384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 11:22:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120363627340500992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:22:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120363627340500992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:22:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120363627340500992[0;39m ==> Parameters: 
2021-11-29 11:22:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120363627340500992[0;39m <==    Updates: 3
2021-11-29 11:22:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120363627340500992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶7æ¯«ç§’
2021-11-29 11:22:15.087 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:22:15.227 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:22:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120363753203175424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:22:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120363753203175424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:22:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120363753203175424[0;39m ==> Parameters: 
2021-11-29 11:22:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120363753203175424[0;39m <==    Updates: 3
2021-11-29 11:22:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120363753203175424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:22:45.123 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:22:45.233 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:23:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120363858043998208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 11:23:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120363858043998208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 11:23:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120363858043998208[0;39m ==> Parameters: 
2021-11-29 11:23:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120363858043998208[0;39m <==    Updates: 0
2021-11-29 11:23:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120363858043998208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 11:23:05.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120363878998740992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:23:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120363878998740992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:23:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120363878998740992[0;39m ==> Parameters: 
2021-11-29 11:23:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120363878998740992[0;39m <==    Updates: 3
2021-11-29 11:23:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120363878998740992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:23:15.119 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:23:15.229 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:23:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120364004857221120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:23:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120364004857221120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:23:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120364004857221120[0;39m ==> Parameters: 
2021-11-29 11:23:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120364004857221120[0;39m <==    Updates: 3
2021-11-29 11:23:35.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120364004857221120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:23:45.122 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:23:45.216 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:24:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120364109731598336[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 11:24:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120364109731598336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 11:24:00.019 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120364109731598336[0;39m ==> Parameters: 
2021-11-29 11:24:00.021 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120364109731598336[0;39m <==    Updates: 0
2021-11-29 11:24:00.022 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120364109731598336[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 11:24:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120364130665369600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:24:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120364130665369600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:24:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120364130665369600[0;39m ==> Parameters: 
2021-11-29 11:24:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120364130665369600[0;39m <==    Updates: 3
2021-11-29 11:24:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120364130665369600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 11:24:15.119 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:24:15.230 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:24:35.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120364256469323776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:24:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120364256469323776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:24:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120364256469323776[0;39m ==> Parameters: 
2021-11-29 11:24:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120364256469323776[0;39m <==    Updates: 3
2021-11-29 11:24:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120364256469323776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:24:45.120 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:24:45.231 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:25:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120364361360478208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 11:25:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120364361360478208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 11:25:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120364361360478208[0;39m ==> Parameters: 
2021-11-29 11:25:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120364361360478208[0;39m <==    Updates: 0
2021-11-29 11:25:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120364361360478208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 11:25:05.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120364382302638080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:25:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120364382302638080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:25:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120364382302638080[0;39m ==> Parameters: 
2021-11-29 11:25:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120364382302638080[0;39m <==    Updates: 3
2021-11-29 11:25:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120364382302638080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:25:15.112 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:25:15.236 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:25:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120364508148535296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:25:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120364508148535296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:25:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120364508148535296[0;39m ==> Parameters: 
2021-11-29 11:25:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120364508148535296[0;39m <==    Updates: 3
2021-11-29 11:25:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120364508148535296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:25:45.121 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:25:45.246 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:26:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120364613006135296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 11:26:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120364613006135296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 11:26:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120364613006135296[0;39m ==> Parameters: 
2021-11-29 11:26:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120364613006135296[0;39m <==    Updates: 0
2021-11-29 11:26:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120364613006135296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 11:26:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120364633998626816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:26:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120364633998626816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:26:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120364633998626816[0;39m ==> Parameters: 
2021-11-29 11:26:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120364633998626816[0;39m <==    Updates: 3
2021-11-29 11:26:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120364633998626816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:26:15.120 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:26:15.243 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:26:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120364759794192384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:26:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120364759794192384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:26:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120364759794192384[0;39m ==> Parameters: 
2021-11-29 11:26:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120364759794192384[0;39m <==    Updates: 3
2021-11-29 11:26:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120364759794192384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 11:26:45.137 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:26:45.220 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:27:00.002 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120364864643403776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 11:27:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120364864643403776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 11:27:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120364864643403776[0;39m ==> Parameters: 
2021-11-29 11:27:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120364864643403776[0;39m <==    Updates: 0
2021-11-29 11:27:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120364864643403776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 11:27:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120364885661061120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:27:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120364885661061120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:27:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120364885661061120[0;39m ==> Parameters: 
2021-11-29 11:27:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120364885661061120[0;39m <==    Updates: 3
2021-11-29 11:27:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120364885661061120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 11:27:15.137 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:27:15.216 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:27:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120365011485986816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:27:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120365011485986816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:27:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120365011485986816[0;39m ==> Parameters: 
2021-11-29 11:27:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120365011485986816[0;39m <==    Updates: 3
2021-11-29 11:27:35.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120365011485986816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 11:27:45.127 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:27:45.220 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:28:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120365116310032384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 11:28:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120365116310032384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 11:28:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120365116310032384[0;39m ==> Parameters: 
2021-11-29 11:28:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120365116310032384[0;39m <==    Updates: 0
2021-11-29 11:28:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120365116310032384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 11:28:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120365137294135296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:28:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120365137294135296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:28:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120365137294135296[0;39m ==> Parameters: 
2021-11-29 11:28:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120365137294135296[0;39m <==    Updates: 3
2021-11-29 11:28:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120365137294135296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 11:28:15.123 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:28:15.218 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:28:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120365263152615424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:28:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120365263152615424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:28:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120365263152615424[0;39m ==> Parameters: 
2021-11-29 11:28:35.019 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120365263152615424[0;39m <==    Updates: 3
2021-11-29 11:28:35.019 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120365263152615424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 11:28:45.124 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:28:45.217 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:29:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120365367993438208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 11:29:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120365367993438208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 11:29:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120365367993438208[0;39m ==> Parameters: 
2021-11-29 11:29:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120365367993438208[0;39m <==    Updates: 0
2021-11-29 11:29:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120365367993438208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 11:29:05.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120365388939792384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:29:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120365388939792384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:29:05.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120365388939792384[0;39m ==> Parameters: 
2021-11-29 11:29:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120365388939792384[0;39m <==    Updates: 3
2021-11-29 11:29:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120365388939792384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 11:29:15.106 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:29:15.216 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:29:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120365514781495296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:29:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120365514781495296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:29:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120365514781495296[0;39m ==> Parameters: 
2021-11-29 11:29:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120365514781495296[0;39m <==    Updates: 3
2021-11-29 11:29:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120365514781495296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 11:29:45.097 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:29:45.207 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:30:00.001 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120365619613929472[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 11:30:00.002 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120365619613929472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 11:30:00.002 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120365619613929472[0;39m ==> Parameters: 
2021-11-29 11:30:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120365619613929472[0;39m <==    Updates: 0
2021-11-29 11:30:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120365619613929472[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 11:30:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120365640635781120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:30:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120365640635781120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:30:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120365640635781120[0;39m ==> Parameters: 
2021-11-29 11:30:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120365640635781120[0;39m <==    Updates: 3
2021-11-29 11:30:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120365640635781120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 11:30:15.109 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:30:15.220 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:30:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120365766435540992[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:30:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120365766435540992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:30:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120365766435540992[0;39m ==> Parameters: 
2021-11-29 11:30:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120365766435540992[0;39m <==    Updates: 3
2021-11-29 11:30:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120365766435540992[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:30:45.140 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:30:45.235 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:31:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120365871330889728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 11:31:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120365871330889728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 11:31:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120365871330889728[0;39m ==> Parameters: 
2021-11-29 11:31:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120365871330889728[0;39m <==    Updates: 0
2021-11-29 11:31:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120365871330889728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 11:31:05.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120365892247883776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:31:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120365892247883776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:31:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120365892247883776[0;39m ==> Parameters: 
2021-11-29 11:31:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120365892247883776[0;39m <==    Updates: 3
2021-11-29 11:31:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120365892247883776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 11:31:15.102 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:31:15.225 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:31:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120366018127335424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:31:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120366018127335424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:31:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120366018127335424[0;39m ==> Parameters: 
2021-11-29 11:31:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120366018127335424[0;39m <==    Updates: 3
2021-11-29 11:31:35.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120366018127335424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 11:31:45.132 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:31:45.225 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:32:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120366122980741120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 11:32:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120366122980741120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 11:32:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120366122980741120[0;39m ==> Parameters: 
2021-11-29 11:32:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120366122980741120[0;39m <==    Updates: 0
2021-11-29 11:32:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120366122980741120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 11:32:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120366143931289600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:32:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120366143931289600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:32:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120366143931289600[0;39m ==> Parameters: 
2021-11-29 11:32:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120366143931289600[0;39m <==    Updates: 3
2021-11-29 11:32:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120366143931289600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:32:15.113 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:32:15.221 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:32:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120366269777186816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:32:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120366269777186816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:32:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120366269777186816[0;39m ==> Parameters: 
2021-11-29 11:32:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120366269777186816[0;39m <==    Updates: 3
2021-11-29 11:32:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120366269777186816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 11:32:45.118 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:32:45.213 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:33:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120366374630592512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 11:33:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120366374630592512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 11:33:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120366374630592512[0;39m ==> Parameters: 
2021-11-29 11:33:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120366374630592512[0;39m <==    Updates: 0
2021-11-29 11:33:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120366374630592512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 11:33:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120366395623084032[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:33:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120366395623084032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:33:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120366395623084032[0;39m ==> Parameters: 
2021-11-29 11:33:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120366395623084032[0;39m <==    Updates: 3
2021-11-29 11:33:05.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120366395623084032[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:33:15.122 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:33:15.215 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:33:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120366521401872384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:33:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120366521401872384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:33:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120366521401872384[0;39m ==> Parameters: 
2021-11-29 11:33:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120366521401872384[0;39m <==    Updates: 3
2021-11-29 11:33:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120366521401872384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:33:45.119 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:33:45.229 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:34:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120366626276249600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 11:34:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120366626276249600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 11:34:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120366626276249600[0;39m ==> Parameters: 
2021-11-29 11:34:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120366626276249600[0;39m <==    Updates: 0
2021-11-29 11:34:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120366626276249600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 11:34:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120366647235186688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:34:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120366647235186688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:34:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120366647235186688[0;39m ==> Parameters: 
2021-11-29 11:34:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120366647235186688[0;39m <==    Updates: 3
2021-11-29 11:34:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120366647235186688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 11:34:15.134 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:34:15.228 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:34:35.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120366773102055424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:34:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120366773102055424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:34:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120366773102055424[0;39m ==> Parameters: 
2021-11-29 11:34:35.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120366773102055424[0;39m <==    Updates: 3
2021-11-29 11:34:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120366773102055424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:34:45.136 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:34:45.246 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:35:00.001 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120366877905129472[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 11:35:00.003 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120366877905129472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 11:35:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120366877905129472[0;39m ==> Parameters: 
2021-11-29 11:35:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120366877905129472[0;39m <==    Updates: 0
2021-11-29 11:35:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120366877905129472[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 11:35:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120366898922786816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:35:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120366898922786816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:35:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120366898922786816[0;39m ==> Parameters: 
2021-11-29 11:35:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120366898922786816[0;39m <==    Updates: 3
2021-11-29 11:35:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120366898922786816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:35:15.142 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:35:15.237 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:35:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120367024735129600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:35:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120367024735129600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:35:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120367024735129600[0;39m ==> Parameters: 
2021-11-29 11:35:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120367024735129600[0;39m <==    Updates: 3
2021-11-29 11:35:35.011 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120367024735129600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 11:35:45.127 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:35:45.237 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:36:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120367129617895424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 11:36:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120367129617895424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 11:36:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120367129617895424[0;39m ==> Parameters: 
2021-11-29 11:36:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120367129617895424[0;39m <==    Updates: 0
2021-11-29 11:36:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120367129617895424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2021-11-29 11:36:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120367150564249600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:36:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120367150564249600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:36:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120367150564249600[0;39m ==> Parameters: 
2021-11-29 11:36:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120367150564249600[0;39m <==    Updates: 3
2021-11-29 11:36:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120367150564249600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:36:15.132 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:36:15.241 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:36:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120367276376592384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:36:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120367276376592384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:36:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120367276376592384[0;39m ==> Parameters: 
2021-11-29 11:36:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120367276376592384[0;39m <==    Updates: 3
2021-11-29 11:36:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120367276376592384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 11:36:45.122 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:36:45.231 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:37:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120367381250969600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 11:37:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120367381250969600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 11:37:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120367381250969600[0;39m ==> Parameters: 
2021-11-29 11:37:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120367381250969600[0;39m <==    Updates: 0
2021-11-29 11:37:00.017 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120367381250969600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2021-11-29 11:37:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120367402247655424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:37:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120367402247655424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:37:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120367402247655424[0;39m ==> Parameters: 
2021-11-29 11:37:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120367402247655424[0;39m <==    Updates: 3
2021-11-29 11:37:05.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120367402247655424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 11:37:15.121 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:37:15.236 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:37:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120367528085164032[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:37:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120367528085164032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:37:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120367528085164032[0;39m ==> Parameters: 
2021-11-29 11:37:35.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120367528085164032[0;39m <==    Updates: 3
2021-11-29 11:37:35.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120367528085164032[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:37:45.127 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:37:45.237 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:38:00.001 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120367632879849472[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 11:38:00.002 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120367632879849472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 11:38:00.002 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120367632879849472[0;39m ==> Parameters: 
2021-11-29 11:38:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120367632879849472[0;39m <==    Updates: 0
2021-11-29 11:38:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120367632879849472[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 11:38:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120367653914284032[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:38:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120367653914284032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:38:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120367653914284032[0;39m ==> Parameters: 
2021-11-29 11:38:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120367653914284032[0;39m <==    Updates: 3
2021-11-29 11:38:05.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120367653914284032[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:38:15.120 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:38:15.229 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:38:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120367779697266688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:38:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120367779697266688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:38:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120367779697266688[0;39m ==> Parameters: 
2021-11-29 11:38:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120367779697266688[0;39m <==    Updates: 3
2021-11-29 11:38:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120367779697266688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:38:45.124 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:38:45.232 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:39:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120367884571643904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 11:39:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120367884571643904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 11:39:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120367884571643904[0;39m ==> Parameters: 
2021-11-29 11:39:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120367884571643904[0;39m <==    Updates: 0
2021-11-29 11:39:00.013 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120367884571643904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 11:39:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120367905559941120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:39:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120367905559941120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:39:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120367905559941120[0;39m ==> Parameters: 
2021-11-29 11:39:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120367905559941120[0;39m <==    Updates: 3
2021-11-29 11:39:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120367905559941120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:39:15.150 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:39:15.228 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:39:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120368031363895296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:39:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120368031363895296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:39:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120368031363895296[0;39m ==> Parameters: 
2021-11-29 11:39:35.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120368031363895296[0;39m <==    Updates: 3
2021-11-29 11:39:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120368031363895296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶6æ¯«ç§’
2021-11-29 11:39:45.126 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:39:45.236 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:40:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120368136225689600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 11:40:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120368136225689600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 11:40:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120368136225689600[0;39m ==> Parameters: 
2021-11-29 11:40:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120368136225689600[0;39m <==    Updates: 0
2021-11-29 11:40:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120368136225689600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 11:40:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120368157218181120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:40:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120368157218181120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:40:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120368157218181120[0;39m ==> Parameters: 
2021-11-29 11:40:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120368157218181120[0;39m <==    Updates: 3
2021-11-29 11:40:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120368157218181120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:40:15.118 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:40:15.242 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:40:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120368283005358080[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:40:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120368283005358080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:40:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120368283005358080[0;39m ==> Parameters: 
2021-11-29 11:40:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120368283005358080[0;39m <==    Updates: 3
2021-11-29 11:40:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120368283005358080[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 11:40:45.132 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:40:45.226 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:41:00.006 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120368387875540992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 11:41:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120368387875540992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 11:41:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120368387875540992[0;39m ==> Parameters: 
2021-11-29 11:41:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120368387875540992[0;39m <==    Updates: 0
2021-11-29 11:41:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120368387875540992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 11:41:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120368408851255296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:41:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120368408851255296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:41:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120368408851255296[0;39m ==> Parameters: 
2021-11-29 11:41:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120368408851255296[0;39m <==    Updates: 3
2021-11-29 11:41:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120368408851255296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 11:41:15.128 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:41:15.238 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:41:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120368534680375296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:41:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120368534680375296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:41:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120368534680375296[0;39m ==> Parameters: 
2021-11-29 11:41:35.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120368534680375296[0;39m <==    Updates: 3
2021-11-29 11:41:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120368534680375296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:41:45.141 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:41:45.249 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:42:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120368639529586688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 11:42:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120368639529586688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 11:42:00.006 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120368639529586688[0;39m ==> Parameters: 
2021-11-29 11:42:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120368639529586688[0;39m <==    Updates: 0
2021-11-29 11:42:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120368639529586688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 11:42:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120368660547244032[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:42:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120368660547244032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:42:05.016 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120368660547244032[0;39m ==> Parameters: 
2021-11-29 11:42:05.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120368660547244032[0;39m <==    Updates: 3
2021-11-29 11:42:05.017 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120368660547244032[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 11:42:15.115 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:42:15.253 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:42:35.012 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120368786359586816[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:42:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120368786359586816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:42:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120368786359586816[0;39m ==> Parameters: 
2021-11-29 11:42:35.017 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120368786359586816[0;39m <==    Updates: 3
2021-11-29 11:42:35.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120368786359586816[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶6æ¯«ç§’
2021-11-29 11:42:45.139 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:42:45.233 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:43:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120368891204603904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 11:43:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120368891204603904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 11:43:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120368891204603904[0;39m ==> Parameters: 
2021-11-29 11:43:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120368891204603904[0;39m <==    Updates: 0
2021-11-29 11:43:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120368891204603904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 11:43:05.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120368912146763776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:43:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120368912146763776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:43:05.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120368912146763776[0;39m ==> Parameters: 
2021-11-29 11:43:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120368912146763776[0;39m <==    Updates: 3
2021-11-29 11:43:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120368912146763776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 11:43:15.133 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:43:15.210 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:43:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120369037984272384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:43:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120369037984272384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:43:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120369037984272384[0;39m ==> Parameters: 
2021-11-29 11:43:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120369037984272384[0;39m <==    Updates: 3
2021-11-29 11:43:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120369037984272384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:43:45.129 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:43:45.237 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:44:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120369142854455296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 11:44:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120369142854455296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 11:44:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120369142854455296[0;39m ==> Parameters: 
2021-11-29 11:44:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120369142854455296[0;39m <==    Updates: 0
2021-11-29 11:44:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120369142854455296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 11:44:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120369163842752512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:44:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120369163842752512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:44:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120369163842752512[0;39m ==> Parameters: 
2021-11-29 11:44:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120369163842752512[0;39m <==    Updates: 3
2021-11-29 11:44:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120369163842752512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 11:44:15.138 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:44:15.249 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:44:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120369289646706688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:44:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120369289646706688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:44:35.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120369289646706688[0;39m ==> Parameters: 
2021-11-29 11:44:35.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120369289646706688[0;39m <==    Updates: 3
2021-11-29 11:44:35.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120369289646706688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 11:44:45.130 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:44:45.224 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:45:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120369394500112384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 11:45:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120369394500112384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 11:45:00.005 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120369394500112384[0;39m ==> Parameters: 
2021-11-29 11:45:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120369394500112384[0;39m <==    Updates: 0
2021-11-29 11:45:00.007 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120369394500112384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 11:45:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120369415500992512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:45:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120369415500992512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:45:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120369415500992512[0;39m ==> Parameters: 
2021-11-29 11:45:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120369415500992512[0;39m <==    Updates: 3
2021-11-29 11:45:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120369415500992512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:45:15.119 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:45:15.230 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:45:35.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120369541288169472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:45:35.001 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120369541288169472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:45:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120369541288169472[0;39m ==> Parameters: 
2021-11-29 11:45:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120369541288169472[0;39m <==    Updates: 3
2021-11-29 11:45:35.003 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120369541288169472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:45:45.124 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:45:45.234 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:46:00.005 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120369646162546688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 11:46:00.007 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120369646162546688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 11:46:00.008 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120369646162546688[0;39m ==> Parameters: 
2021-11-29 11:46:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120369646162546688[0;39m <==    Updates: 0
2021-11-29 11:46:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120369646162546688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 11:46:05.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120369667117289472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:46:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120369667117289472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:46:05.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120369667117289472[0;39m ==> Parameters: 
2021-11-29 11:46:05.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120369667117289472[0;39m <==    Updates: 3
2021-11-29 11:46:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120369667117289472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 11:46:15.137 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:46:15.231 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:46:35.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120369792950603776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:46:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120369792950603776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:46:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120369792950603776[0;39m ==> Parameters: 
2021-11-29 11:46:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120369792950603776[0;39m <==    Updates: 3
2021-11-29 11:46:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120369792950603776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:46:45.146 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:46:45.227 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:47:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120369897862729728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 11:47:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120369897862729728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 11:47:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120369897862729728[0;39m ==> Parameters: 
2021-11-29 11:47:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120369897862729728[0;39m <==    Updates: 0
2021-11-29 11:47:00.018 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120369897862729728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 11:47:05.007 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120369918800695296[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:47:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120369918800695296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:47:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120369918800695296[0;39m ==> Parameters: 
2021-11-29 11:47:05.008 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120369918800695296[0;39m <==    Updates: 3
2021-11-29 11:47:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120369918800695296[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:47:15.132 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:47:15.241 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:47:35.001 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120370044604649472[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:47:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120370044604649472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:47:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120370044604649472[0;39m ==> Parameters: 
2021-11-29 11:47:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120370044604649472[0;39m <==    Updates: 3
2021-11-29 11:47:35.007 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120370044604649472[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶6æ¯«ç§’
2021-11-29 11:47:45.124 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:47:45.234 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:48:00.011 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120370149504192512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 11:48:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120370149504192512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 11:48:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120370149504192512[0;39m ==> Parameters: 
2021-11-29 11:48:00.015 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120370149504192512[0;39m <==    Updates: 0
2021-11-29 11:48:00.016 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120370149504192512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 11:48:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120370170471518208[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:48:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120370170471518208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:48:05.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120370170471518208[0;39m ==> Parameters: 
2021-11-29 11:48:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120370170471518208[0;39m <==    Updates: 3
2021-11-29 11:48:05.012 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120370170471518208[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:48:15.132 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:48:15.239 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:48:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120370296313221120[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:48:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120370296313221120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:48:35.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120370296313221120[0;39m ==> Parameters: 
2021-11-29 11:48:35.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120370296313221120[0;39m <==    Updates: 3
2021-11-29 11:48:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120370296313221120[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶3æ¯«ç§’
2021-11-29 11:48:45.123 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:48:45.232 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:49:00.001 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120370401120489472[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 11:49:00.002 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120370401120489472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 11:49:00.002 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120370401120489472[0;39m ==> Parameters: 
2021-11-29 11:49:00.004 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120370401120489472[0;39m <==    Updates: 0
2021-11-29 11:49:00.004 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120370401120489472[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 11:49:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120370422133952512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:49:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120370422133952512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:49:05.012 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120370422133952512[0;39m ==> Parameters: 
2021-11-29 11:49:05.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120370422133952512[0;39m <==    Updates: 3
2021-11-29 11:49:05.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120370422133952512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:49:15.121 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:49:15.246 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:49:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120370547933712384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:49:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120370547933712384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:49:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120370547933712384[0;39m ==> Parameters: 
2021-11-29 11:49:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120370547933712384[0;39m <==    Updates: 3
2021-11-29 11:49:35.005 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120370547933712384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 11:49:45.131 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:49:45.239 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:50:00.008 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120370652808089600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 11:50:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120370652808089600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 11:50:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120370652808089600[0;39m ==> Parameters: 
2021-11-29 11:50:00.013 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120370652808089600[0;39m <==    Updates: 0
2021-11-29 11:50:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120370652808089600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2021-11-29 11:50:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120370673804775424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:50:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120370673804775424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:50:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120370673804775424[0;39m ==> Parameters: 
2021-11-29 11:50:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120370673804775424[0;39m <==    Updates: 3
2021-11-29 11:50:05.016 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120370673804775424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:50:15.112 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:50:15.206 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:50:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120370799591952384[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:50:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120370799591952384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:50:35.005 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120370799591952384[0;39m ==> Parameters: 
2021-11-29 11:50:35.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120370799591952384[0;39m <==    Updates: 3
2021-11-29 11:50:35.006 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120370799591952384[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:50:45.148 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:50:45.241 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:51:00.015 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120370904495689728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 11:51:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120370904495689728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 11:51:00.018 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120370904495689728[0;39m ==> Parameters: 
2021-11-29 11:51:00.021 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120370904495689728[0;39m <==    Updates: 0
2021-11-29 11:51:00.022 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120370904495689728[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2021-11-29 11:51:05.011 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120370925450432512[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:51:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120370925450432512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:51:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120370925450432512[0;39m ==> Parameters: 
2021-11-29 11:51:05.018 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120370925450432512[0;39m <==    Updates: 3
2021-11-29 11:51:05.018 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120370925450432512[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶7æ¯«ç§’
2021-11-29 11:51:15.144 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:51:15.253 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:51:35.016 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120371051300524032[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:51:35.020 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120371051300524032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:51:35.020 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120371051300524032[0;39m ==> Parameters: 
2021-11-29 11:51:35.024 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120371051300524032[0;39m <==    Updates: 3
2021-11-29 11:51:35.025 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120371051300524032[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶9æ¯«ç§’
2021-11-29 11:51:45.149 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:51:45.243 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:52:00.010 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120371156132958208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 11:52:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120371156132958208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 11:52:00.012 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120371156132958208[0;39m ==> Parameters: 
2021-11-29 11:52:00.014 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120371156132958208[0;39m <==    Updates: 0
2021-11-29 11:52:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120371156132958208[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2021-11-29 11:52:05.005 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120371177083506688[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:52:05.006 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120371177083506688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:52:05.007 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120371177083506688[0;39m ==> Parameters: 
2021-11-29 11:52:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120371177083506688[0;39m <==    Updates: 3
2021-11-29 11:52:05.009 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120371177083506688[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶4æ¯«ç§’
2021-11-29 11:52:15.147 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:52:15.241 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:52:35.002 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120371302900043776[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:52:35.002 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120371302900043776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:52:35.003 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120371302900043776[0;39m ==> Parameters: 
2021-11-29 11:52:35.004 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120371302900043776[0;39m <==    Updates: 3
2021-11-29 11:52:35.004 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120371302900043776[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
2021-11-29 11:52:45.126 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:52:45.234 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:53:00.009 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120371407787003904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 11:53:00.009 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120371407787003904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 11:53:00.010 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120371407787003904[0;39m ==> Parameters: 
2021-11-29 11:53:00.011 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120371407787003904[0;39m <==    Updates: 0
2021-11-29 11:53:00.012 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120371407787003904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2021-11-29 11:53:05.014 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120371428779495424[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:53:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120371428779495424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:53:05.014 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120371428779495424[0;39m ==> Parameters: 
2021-11-29 11:53:05.015 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120371428779495424[0;39m <==    Updates: 3
2021-11-29 11:53:05.015 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120371428779495424[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶1æ¯«ç§’
2021-11-29 11:53:15.140 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:53:15.219 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:53:35.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120371554583449600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:53:35.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120371554583449600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:53:35.011 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120371554583449600[0;39m ==> Parameters: 
2021-11-29 11:53:35.013 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120371554583449600[0;39m <==    Updates: 3
2021-11-29 11:53:35.013 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120371554583449600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶5æ¯«ç§’
2021-11-29 11:53:45.122 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:53:45.231 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2021-11-29 11:54:00.014 INFO  com.suplin.demo.job.EbookSnapshotJob              :32   [32m120371659466215424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-11-29 11:54:00.016 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120371659466215424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id,curdate(),0,0,0,0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.vote_count = t2.vote_num,t1.view_count = t2.view_num where t1.date = curdate() and t1.ebook_id = t2.id ; update ebook_snapshot t1 left join (select t1.ebook_id,t1.view_count,t1.vote_count from ebook_snapshot t1 where t1.`date` = date_sub(curdate(),interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = t1.view_count-ifnull(t2.view_count,0), t1.vote_increase = t1.vote_count-ifnull(t2.vote_count,0) where t1.`date` = curdate();
2021-11-29 11:54:00.017 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120371659466215424[0;39m ==> Parameters: 
2021-11-29 11:54:00.021 DEBUG c.s.d.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m120371659466215424[0;39m <==    Updates: 0
2021-11-29 11:54:00.022 INFO  com.suplin.demo.job.EbookSnapshotJob              :35   [32m120371659466215424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2021-11-29 11:54:05.008 INFO  com.suplin.demo.aspect.LogAspect                  :35   [32m120371680412569600[0;39m å®šæ—¶ä»»åŠ¡å¼€å§‹
2021-11-29 11:54:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120371680412569600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_num = t2.doc_count, t1.view_num = t2.view_count, t1.vote_num = t2.vote_count where t1.id = t2.ebook_id
2021-11-29 11:54:05.009 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120371680412569600[0;39m ==> Parameters: 
2021-11-29 11:54:05.010 DEBUG c.suplin.demo.mapper.DocMapperCust.updateEbookInfo:137  [32m120371680412569600[0;39m <==    Updates: 3
2021-11-29 11:54:05.010 INFO  com.suplin.demo.aspect.LogAspect                  :37   [32m120371680412569600[0;39m å®šæ—¶ä»»åŠ¡ç»“æŸï¼Œè€—æ—¶2æ¯«ç§’
